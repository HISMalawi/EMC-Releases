(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a6e8a76"],{"6d32":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("1c74");class a extends n["e"]{constructor(){super()}static getAllArvRegimens(){return this.getJson(`programs/${this.getProgramID()}/all_arv_regimens`)}static getRegimens(e){return this.getJson(`programs/${this.getProgramID()}/regimens`,{patient_id:e})}static getCustomIngridients(){return this.getJson(`programs/${this.getProgramID()}/custom_regimen_ingredients`)}static getCurrentRegimen(e,t=this.getSessionDate()){return this.getJson(`programs/${this.getProgramID()}/${e}`,{date:t})}}},"71c3":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r("5530"),a=r("d4ec"),i=r("bee2"),s=r("262e"),u=r("2caf"),c=(r("d81d"),r("99af"),r("1c74")),o=function(e){Object(s["a"])(r,e);var t=Object(u["a"])(r);function r(){return Object(a["a"])(this,r),t.call(this)}return Object(i["a"])(r,null,[{key:"create",value:function(e){return this.postJson("drug_orders",e)}},{key:"updateDispensationOrders",value:function(e){var t=this;return this.postJson("dispensations",{program_id:this.getProgramID(),dispensations:e.map((function(e){return{date:t.getSessionDate(),drug_order_id:e["order_id"],quantity:e["quantity"]}}))})}},{key:"getDrugOrderHistory",value:function(e){return this.getJson("drug_orders",{patient_id:e})}},{key:"getDrugOrders",value:function(e){return this.getJson("drug_orders",{patient_id:e,date:this.getSessionDate(),program_id:this.getProgramID()})}},{key:"getAllDrugOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return this.getJson("drug_orders",{patient_id:e,program_id:c["e"].getProgramID(),page_size:t})}},{key:"getLastDrugsReceived",value:function(e){return this.getJson("patients/".concat(e,"/last_drugs_received"),{date:this.getSessionDate(),program_id:this.getProgramID()})}},{key:"getDrugDosages",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),n={drug_id:t,date:r};return this.getJson("programs/".concat(this.getProgramID(),"/patients/").concat(e,"/drug_doses"),n)}},{key:"getOrderByPatient",value:function(e,t){return this.getJson("/drug_orders",Object(n["a"])({patient_id:e,program_id:this.getProgramID()},t))}}]),r}(c["e"])},dac2:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n,a=r("2909"),i=r("1da1"),s=r("d4ec"),u=r("bee2"),c=r("262e"),o=r("2caf"),d=(r("96cf"),r("d81d"),r("caad"),r("2532"),r("d3b7"),r("99af"),r("159b"),r("07ac"),r("4de4"),r("b0c0"),r("3ca3"),r("ddb0"),r("25f0"),r("71c3")),g=r("9283"),p=r("6d32"),l=r("2ef0"),f=r("cc6f");(function(e){e["CONTRAINDICATION"]="contraindication",e["SIDE_EFFECT"]="side_effect"})(n||(n={}));var h=function(e){Object(c["a"])(r,e);var t=Object(o["a"])(r);function r(e,n){var a;return Object(s["a"])(this,r),a=t.call(this,e,25,n),a.nextVisitInterval=0,a.fastTrack=!1,a.regimenExtras=[],a.fastTrackMedications=[],a.hangingPills=[],a.medicationOrders=[],a.treatmentState="",a.contraindications={},a.sideEffects={},a.tptPrescriptionCount=0,a.lastSideEffectDate="",a}return Object(u["a"])(r,[{key:"setNextVisitInterval",value:function(e){this.nextVisitInterval=e}},{key:"getHangingPills",value:function(){return this.hangingPills}},{key:"getMedicationOrders",value:function(){return this.medicationOrders.map((function(e){return f["a"].getCachedConceptName(e)}))}},{key:"getTptPrescriptionCount",value:function(){return this.tptPrescriptionCount}},{key:"getLastSideEffectDate",value:function(){return this.lastSideEffectDate}},{key:"getContraindications",value:function(){return this.contraindications}},{key:"getSideEffects",value:function(){return this.sideEffects}},{key:"getRegimenExtras",value:function(){return this.regimenExtras}},{key:"getPatientRegimens",value:function(){return p["a"].getRegimens(this.patientID)}},{key:"getCustomIngridients",value:function(){return p["a"].getCustomIngridients()}},{key:"getFastTrackMedications",value:function(){return this.fastTrackMedications}},{key:"getTreatmentState",value:function(){return this.treatmentState}},{key:"isFastTrack",value:function(){return this.fastTrack}},{key:"medicationOrdersAvailable",value:function(){return!Object(l["isEmpty"])(this.medicationOrders)}},{key:"shouldPrescribeArvs",value:function(){var e=f["a"].getCachedConceptID("Antiretroviral drugs");return this.medicationOrders.includes(e)}},{key:"shouldPrescribeExtras",value:function(){var e=this,t=f["a"].getConceptsByCategory("art_extra_medication_order"),r=t.map((function(t){return e.medicationOrders.includes(t.concept_id)}));return r.some(Boolean)}},{key:"getRegimenStarterpack",value:function(e,t){var r={weight:t,regimen:e};return f["a"].getJson("programs/".concat(f["a"].getProgramID(),"/regimen_starter_packs"),r)}},{key:"getLvpDrugsByType",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f["a"].getJson("programs/".concat(f["a"].getProgramID(),"/regimens/").concat(r),{patient_id:this.patientID,lpv_drug_type:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"loadContraindications",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getConceptID("Contraindications");case 2:return t=e.sent,e.next=5,f["a"].getObs({concept_id:t,person_id:this.patientID});case 5:r=e.sent,r.forEach((function(e){var t=g["b"].toStandardHisFormat(e.obs_datetime);n.contraindications[t]||(n.contraindications[t]=[]);var r=f["a"].getCachedConceptName(e.value_coded);n.contraindications[t].push(r)}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadDrugInduced",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getConceptID("Drug induced");case 2:return t=e.sent,e.next=5,f["a"].getObs({concept_id:t,person_id:this.patientID});case 5:if(r=e.sent,r){e.next=8;break}return e.abrupt("return");case 8:r.forEach((function(e){var t=g["b"].toStandardHisFormat(e.obs_datetime);if(n.lastSideEffectDate||(n.lastSideEffectDate=t),e.value_drug&&e.value_coded){n.sideEffects[t]||(n.sideEffects[t]={}),n.sideEffects[t][e.value_drug]||(n.sideEffects[t][e.value_drug]=[]);var r=f["a"].getCachedConceptName(e.value_coded);n.sideEffects[t][e.value_drug].push(r)}}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadTptPrescriptionCount",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getJson("tpt_prescription_count",{patient_id:this.patientID,date:this.date});case 2:t=e.sent,t&&(r=t.count+1,this.tptPrescriptionCount=r>3?3:r);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFastTrackStatus",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getFirstValueCoded(this.patientID,"Fast track");case 2:return t=e.sent,e.next=5,f["a"].getConceptID("yes");case 5:r=e.sent,t&&(this.fastTrack=t===r);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadRegimenExtras",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.date,e.next=3,p["a"].getJson("programs/".concat(p["a"].getProgramID(),"/patients/").concat(this.patientID,"/dosages"),{date:t});case 3:r=e.sent,r&&(this.regimenExtras=Object.values(r));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadMedicationOrders",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getConceptID("Medication orders");case 2:return t=e.sent,e.next=5,f["a"].getObs({concept_id:t,date:this.date,person_id:this.patientID,page_size:5});case 5:r=e.sent,this.medicationOrders=r.map((function(e){return e.value_coded}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadHangingPills",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getAll(this.patientID,"Pills brought");case 2:t=e.sent,t&&(this.hangingPills=t.filter((function(e){return e.value_numeric>=1&&e.order})).map((function(e){return e.order.drug_order.drug_inventory_id})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFastTrackMedications",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].getLastDrugsReceived(this.patientID);case 2:return t=e.sent,r=t.map(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.drug,e.next=3,d["a"].getDrugDosages(n.patientID,r.drug_id);case 3:return a=e.sent,e.abrupt("return",{drug_id:r.drug_id,drug_name:r.name,units:r.units,am:a.am,noon:a.noon,pm:a.pm,frequency:t.frequency});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(r);case 6:this.fastTrackMedications=e.sent;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadTreatmentState",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={date:this.date},e.next=3,f["a"].getJson("programs/".concat(f["a"].getProgramID(),"/patients/").concat(this.patientID,"/status"),t);case 3:r=e.sent,r&&(this.treatmentState=r["status"]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"findAndGroupDrugSideEffects",value:function(e){var t={};for(var r in this.sideEffects){var n=this.sideEffects[r];for(var i in n)e.includes(parseInt(i))&&(t[r]||(t[r]=[]),t[r]=[].concat(Object(a["a"])(t[r]),Object(a["a"])(n[i])))}return t}},{key:"calculatePillsPerDay",value:function(e,t,r){return parseFloat(e.toString())+t+r}},{key:"estimatePackSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e*this.nextVisitInterval/t,n=Math.round(r);return n<=0&&(n+=1),n}},{key:"calculateDosage",value:function(e,t){var r=0;return 0===t&&(r=e),0==e&&(r=t),e>0&&t>0&&(r=(e+t)/2),r}},{key:"calculateEquivalentDosage",value:function(e,t){return e+t}},{key:"calculateDateFromInterval",value:function(){var e=new Date(this.date);return e.setDate(e.getDate()+this.nextVisitInterval),g["b"].toStandardHisFormat(e)}},{key:"getDrugPackSize",value:function(e){if(e.pack_size)return e.pack_size;try{return e.barcodes[0].tabs}catch(t){return 30}}},{key:"getInstructions",value:function(e,t,r,n){return"".concat(e," :- Morning: ").concat(t," ").concat(n,", Evening: ").concat(r," ").concat(n)}},{key:"toOrderObj",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return{drug_inventory_id:e,equivalent_daily_dose:this.calculateEquivalentDosage(n,a),start_date:this.date,auto_expire_date:this.calculateDateFromInterval(),units:r,instructions:this.getInstructions(t,n,a,r),dose:this.calculateDosage(n,a),frequency:i}}},{key:"getReasonForRegimenSwitch",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getFirstValueText(this.patientID,"Reason for ARV switch");case 2:return t=e.sent,e.abrupt("return",t||"N/A");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createDrugOrder",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",d["a"].create({encounter_id:this.encounterID,drug_orders:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createHangingPillsObs",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveValueTextObs("appointment type",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createRegimenSwitchObs",value:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveValueTextObs("Reason for ARV switch",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),r}(f["a"])}}]);
//# sourceMappingURL=chunk-8a6e8a76.039055a8.js.map
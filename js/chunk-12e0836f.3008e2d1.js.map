{"version":3,"sources":["webpack:///./node_modules/eslint-loader/index.js","webpack:///./node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/apps/OPD/views/encounters/HIVStatus.vue"],"names":["DEFAULT_KEYPAD","VITALS_KEYPAD","DRUG_DISPENSER_KEYPAD","CD4_COUNT_PAD_LO","SYMBOLS","NUMBER_PAD_LO","MONTHLY_DAYS_LO","ALPHABETICAL_LO","QWERTY_LO","CHARACTERS_AND_NUMBERS_LO","NOTE_PAD_KEYBOARD","LOGIN_KEYBOARD","SYMBOLS_CONFIG","NUMBERS_ONLY","NUMBERS_WITH_UNKNOWN","NUMBERS_WITH_ESTIMATE","NUMBERS_WITHOUT_NA_UNKNOWN","NUMBERS","MONTHLY_DAYS","A_TO_Z","QWERTY","KEY_BTN_NAV","btn","keyboard","render","_ctx","_cache","$props","$setup","$data","$options","_component_his_standard_form","_resolveComponent","_openBlock","_createBlock","cancelDestinationPath","cancelDestination","fields","onFinishAction","onSubmit","HIVStatusService","AppEncounterService","constructor","patientID","providerID","defineComponent","components","HisStandardForm","mixins","EncounterMixinVue","data","hivService","watch","ready","isReady","this","patient","getID","getFields","immediate","deep","methods","formData","computedData","encounter","createEncounter","toastWarning","resolveObs","obs","saveObservationList","nextTask","buildDateObs","conceptName","date","isEstimate","match","buildValueText","buildValueDateEstimated","buildValueDate","id","helpText","type","FieldType","TT_SELECT","validation","value","Validation","required","computedValue","options","label","generateDateFields","minDate","getBirthdate","maxDate","getSessionDate","condition","hiv_status","summaryLabel","estimation","allowUnknown","estimationFieldType","EstimationFieldType","MONTH_ESTIMATE_FIELD","computeValue","getDate","defaultValue","getLocationName","_","filter","getFacilities","config","showKeyboard","isFilterDataViaApi","__exports__","getYearField","name","showUnknown","primaryFunctions","push","appearInSummary","TT_TEXT","customKeyboard","getMonthField","MonthOptions","getDayField","TT_MONTHLY_DAYS","getMonthDurationEstimateField","getAgeEstimateField","TT_NUMBER","keypad","appendLeadingZero","s","parseInt","getDefaultDate","form","field","datePart","year","month","day","split","d","HisDate","toStandardHisDisplayFormat","validateMinMax","computed","min","Date","max","refDate","fullDate","yearValue","monthValue","dayValue","dateIsEstimated","yearID","monthID","dayID","ageEstimateID","durationEstimateID","ageEstimate","durationEstimate","estimateMonthOrDay","allowUnknownMonthDay","datePartCondition","f","includes","buildHelpTextDate","part","parts","default","reduce","partValues","dpart","wl","undefined","join","init","updateHelpTextOnValue","proxyID","unload","v","toString","c","StandardValidations","isNaN","minYear","getYear","summaryMapValue","ref","val","beforeNext","keyboardActions","valueEstimateCondition","estimateType","conditions","every","Boolean","ageEstimateRegex","dayjs","Service","subtract","AGE_ESTIMATE_FIELD","format","STANDARD_DATE_FORMAT","async","facilities","LocationService","isEmpty","trim","map","facility","location_id","other","getLabFacilities","getLabs","getFacilityWards","wards","tag","ward","getSpecialistClinics","clinics","clinic","getRegions","regions","region","region_id","getDistricts","regionID","districts","district","district_id","getTraditionalAuthorities","districtID","TAs","TA","traditional_authority_id","getVillages","traditionalAuthorityID","villages","village","village_id"],"mappings":"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","file":"js/chunk-12e0836f.3008e2d1.js","sourcesContent":["import {LocationService} from \"@/services/location_service\"\nimport { Option } from \"@/components/Forms/FieldInterface\"\nimport { isEmpty } from \"lodash\"\n\nexport async function getFacilities(filter=''): Promise<Option[]> {\n    const facilities = await LocationService.getFacilities({name: filter})\n    return facilities.filter((f: any) => !isEmpty(f) && f.name.trim() !='')\n        .map((facility: any) => ({\n            label: facility.name,\n            value: facility.location_id,\n            other: facility\n        }))\n}\n\nexport async function getLabFacilities(filter=''): Promise<Option[]> {\n    const facilities = await LocationService.getLabs({'search_name': filter})\n    return facilities.map((facility: any) => ({\n            label: facility,\n            value: facility\n        }))\n}\n\nexport async function getFacilityWards(filter=''): Promise<Option[]> {\n    const wards = await LocationService.getFacilities({\n        name: filter,\n        tag: 'Facility adult sections'\n    })\n\n    return wards.map((ward: any) => ({\n        label: ward.name,\n        value: ward.name,\n        other: ward\n    }))\n}\n\nexport async function getSpecialistClinics(): Promise<Option[]> {\n    const clinics = await LocationService.getSpecialistClinics()\n    return clinics.map((clinic: any) => ({\n        label: clinic.name,\n        value: clinic.name,\n        other: clinic\n    }))\n}\n\nexport async function getRegions(): Promise<Option[]> {\n    const regions = await LocationService.getRegions()\n    return regions.map((region: any) => ({\n        label: region.name,\n        value: region.region_id,\n        other: region\n    }))\n}\n\nexport async function getDistricts(regionID: number): Promise<Option[]> {\n    const districts = await LocationService.getDistricts(regionID)\n    return districts.map((district: any) => ({\n        label: district.name,\n        value: district.district_id,\n        other: district\n    }))\n}\n\nexport async function getTraditionalAuthorities(districtID: number, name=''): Promise<Option[]> {\n    const TAs = await LocationService.getTraditionalAuthorities(districtID, name)\n    return TAs.map((TA: any) => ({\n        label: TA.name,\n        value: TA.traditional_authority_id,\n        other: TA\n    }))\n}\n\nexport async function getVillages(traditionalAuthorityID: number, name=''): Promise<Option[]> {\n    const villages = await LocationService.getVillages(traditionalAuthorityID, name)\n    return villages.map((village: any) => ({\n        label: village.name,\n        value: village.village_id,\n        other: village\n    }))\n}\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")\n\n  return (_openBlock(), _createBlock(_component_his_standard_form, {\n    cancelDestinationPath: _ctx.cancelDestination,\n    fields: _ctx.fields,\n    onFinishAction: _ctx.onSubmit\n  }, null, 8, [\"cancelDestinationPath\", \"fields\", \"onFinishAction\"]))\n}","\nimport { defineComponent} from 'vue'\nimport HisStandardForm from \"@/components/Forms/TouchScreenForm.vue\";\nimport EncounterMixinVue from '@/views/EncounterMixin.vue';\nimport Validation from '@/components/Forms/validations/StandardValidations';\nimport { Field, Option } from '@/components/Forms/FieldInterface';\nimport { FieldType } from '@/components/Forms/BaseFormElements';\nimport { getFacilities } from '@/utils/HisFormHelpers/LocationFieldOptions';\nimport { EstimationFieldType, generateDateFields } from '@/utils/HisFormHelpers/MultiFieldDateHelper';\nimport { toastWarning } from '@/utils/Alerts';\nimport { HIVStatusService } from '../../services/hiv_status_service';\n\nexport default defineComponent({\n    components: { HisStandardForm },\n    mixins: [EncounterMixinVue],\n    data: () => ({\n        hivService: {} as any\n    }),\n    watch: {\n        ready: {\n            async handler(isReady: boolean) {\n                if(isReady){\n                    this.hivService = new HIVStatusService(this.patient.getID(), this.providerID)\n                    this.fields = this.getFields()\n                }\n            },\n            immediate: true,\n            deep: true\n        }\n    },\n    methods: {\n        async onSubmit(formData: any, computedData: any){\n            const encounter = await this.hivService.createEncounter()\n            if (!encounter) return toastWarning('Unable to create encounter') \n            const data = await this.resolveObs({...computedData})\n            const obs = await this.hivService.saveObservationList(data)\n            if (!obs) return toastWarning('Unable to save observations')\n            this.nextTask()        \n        },\n        buildDateObs(conceptName: string, date: string, isEstimate: boolean) {\n            let obs = {}\n            if (date.match(/unknown/i)) {\n                obs = this.hivService.buildValueText(conceptName, 'Unknown')\n            } else if (isEstimate) {\n                obs = this.hivService.buildValueDateEstimated(conceptName, date)\n            } else {\n                obs = this.hivService.buildValueDate(conceptName, date)\n            }\n            return obs\n        },\n        getFields(): Array<Field>{\n            return [\n                {\n                    id: 'hiv_status',\n                    helpText: 'HIV status',\n                    type: FieldType.TT_SELECT,\n                    validation: (value: any) => Validation.required(value),\n                    computedValue: ({ value }: Option) => ({\n                        obs: this.hivService.buildValueText('HIV status', value)\n                    }),\n                    options: () => ([\n                        { label: 'Positive not ART', value: 'Positive not ART' },\n                        { label: 'Posititve on ART', value: 'Positive on ART' },\n                        { label: 'Previous negative', value: 'Previous negative' },\n                        { label: 'New positive', value: 'New positive' },\n                        { label: 'New negative', value: 'New negative' },\n                        { label: 'Never tested', value: 'Never tested' },\n                    ])\n                },\n                ...generateDateFields({\n                    id: 'hiv_test_date',\n                    helpText: 'HIV Test',\n                    required: true,\n                    minDate: () => this.patient.getBirthdate(),\n                    maxDate: () => HIVStatusService.getSessionDate(),\n                    condition: (fields: any) => fields.hiv_status.value !== 'Never tested',\n                    summaryLabel: 'HIV test date',\n                    estimation: {\n                        allowUnknown: true,\n                        estimationFieldType: EstimationFieldType.MONTH_ESTIMATE_FIELD\n                    },\n                    computeValue: (date: string, isEstimate: boolean) => this.buildDateObs('HIV test date', date, isEstimate)\n                    \n                }, this.hivService.getDate()),\n                {\n                    id: 'test_location',\n                    helpText: 'HIV test location',\n                    type: FieldType.TT_SELECT,\n                    validation: (value: any) => Validation.required(value),\n                    defaultValue: () => HIVStatusService.getLocationName(),\n                    computedValue: ({ label }: Option) => ({obs: this.hivService.buildValueText('HIV test location', label)}),\n                    condition: (fields: any) => fields.hiv_status.value !== 'Never tested',\n                    options: (_: any, filter='') => getFacilities(filter),\n                    config: {\n                        showKeyboard: true,\n                        isFilterDataViaApi: true\n                    }\n                }\n            ]\n        }\n    }\n})\n","import { render } from \"./HIVStatus.vue?vue&type=template&id=27f8e15a&ts=true\"\nimport script from \"./HIVStatus.vue?vue&type=script&lang=ts\"\nexport * from \"./HIVStatus.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}
{"version":3,"sources":["webpack:///./node_modules/eslint-loader/index.js","webpack:///./node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/components/DataViews/VLReminderModal.vue","webpack:///./src/components/DataViews/SideEffectsModal.vue","webpack:///./src/apps/ART/views/encounters/Consultation.vue","webpack:///./src/components/DataViews/VLReminderModal.vue?d9fa","webpack:///./src/components/DataViews/SideEffectsModal.vue?2579","webpack:///./src/apps/ART/views/encounters/AdherenceMixin.vue"],"names":["HTN_SESSION_KEY","BPManagementService","AppEncounterService","constructor","patientID","providerID","sbp","dbp","bpTrail","firstRecentGrade","secondRecentGrade","Object","values","sort","a","b","date","map","bp","getBpGrade","getSystolicBp","ObservationService","getFirstValueNumber","getDiastolicBp","query","getFirstValueCoded","getJson","drugID","pills","postJson","state","getDrugs","HCZ","drugs","drugName","amount","current","selected","isChecked","dispensed","expectedRemaining","adherence","notes","Enalapril","remaining","Amlodipine","Atenolol","StockService","Service","drugId","stock","length","reduce","accum","pharm","current_quantity","DRUG_PACK_SIZES","DispensationService","drugHistory","currentDrugOrder","useDrugManagement","setIsDrugManagementEnabled","isEnabled","ART_PROP","drugManagementEnabled","getDrugHistory","getCurrentOrder","buildDispensations","orderId","tabs","totalPacks","dispensations","i","push","quantity","saveDispensations","getProgramID","void","res","DrugOrderService","getDrugOrderHistory","e","console","warn","getDrugOrders","d","fetchAvailableDrugStock","drug","drug_id","Promise","all","getDrugPackSizes","calcCompletePack","units","drugOrderBarcodes","barcodes","parseInt","completePack","render","_ctx","_cache","$props","$setup","$data","$options","_component_his_standard_form","_resolveComponent","_openBlock","_createBlock","fields","onFinishAction","onFinish","skipSummary","cancelDestinationPath","cancelDestination","_withId","_withScopeId","_pushScopeId","_hoisted_1","_createTextVNode","_hoisted_2","_hoisted_3","_hoisted_4","_popScopeId","_component_ion_title","_component_ion_toolbar","_component_ion_header","_component_ion_content","_component_ion_button","_component_ion_footer","_Fragment","_createVNode","default","_","style","overflowY","background","_toDisplayString","artStartDate","monthsOnART","lastOrder","currentRegimen","regimenStartDate","slot","color","size","onClick","$event","closeModal","defineComponent","name","props","VLData","type","required","HisDate","toStandardHisDisplayFormat","earliest_start_date","period_on_art","last_order_date","current_regimen","date_started","methods","val","modalController","dismiss","data","content","components","IonHeader","IonToolbar","IonTitle","IonContent","IonFooter","IonButton","__exports__","ARTLabService","milestone","concept","getConceptID","coded","class","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_component_ion_label","_component_ion_item","_component_ion_list","_component_ion_col","_component_ion_radio","_component_ion_radio_group","_component_ion_row","_component_ion_grid","height","_renderList","sides","index","key","selectSideEffect","detail","activeIndex","label","modelValue","value","drug_inventory_id","_createCommentVNode","postSideEffects","disabled","allSelected","sideEffects","Array","computed","filter","side","mounted","extendedLabsEnabled","appActivities","specimens","reasons","IonLabel","IonList","IonItem","IonRadioGroup","IonRow","mixins","AdherenceMixinVue","HisStandardForm","currentWeight","weightTrail","customRegimens","labOrders","weightLossPercentageNum","lostTenPercentBodyWeight","CxCaEnabled","CxCaStartAge","CxCaMaxAge","DueForCxCa","currentlyPregnant","patientHitMenopause","hasPregnancyObsToday","autoSelect3HP","labOrderFieldContext","consultation","prescription","dispensation","completed3HP","hasTbHistoryObs","allergicToSulphur","TBSuspected","presentedTBSymptoms","askAdherence","lastDrugsReceived","sideEffectsHistory","onPermanentFPMethods","reasonForDecliningTPTObs","malawiSideEffectReasonObs","otherSideEffectReasonObs","wasTransferredIn","dateStartedArt","clientHadAHysterectomy","isNoneClientPatient","tptStatus","customDrugs","watch","ready","handler","ConsultationService","PrescriptionService","getFields","immediate","f","computedData","encounter","createEncounter","toastWarning","computedObs","resolveObs","secondaryObs","isEmpty","savedObs","saveObservationList","drugObs","saveAdherence","toastSuccess","refer_to_clinician","gotoPatientDashboard","nextTask","formData","drugFilters","tptHistory","routine_tb_therapy","RegimenService","getCustomIngridients","match","includes","other","receivedArvs","transferLetterObs","getFirstObs","toStandardHisFormat","obs_datetime","value_coded","getDate","dateStarted","getFirstValueDatetime","action","infoActionSheet","vals","ProgramService","getPatientVLInfo","eligibile","modal","create","component","VLReminderModal","backdropDismiss","cssClass","componentProps","present","onDidDismiss","launchOrderSelection","waitForVL","orderService","observations","buildDefferedOrder","canScreenCxCa","age","patient","getAge","isFemale","pregnancyEligible","isChildBearing","showCurrentContraceptionMethods","isPregnant","isANCclient","showNewContraceptionMethods","isOnTubalLigation","pregnant_breastfeeding","inArray","p","current_fp_methods","listData","infoAlert","noneIndex","findIndex","familyPlanningMethods","currentIndex","disablePrescriptions","buildMedicationOrders","options","o","buildValueCoded","priscribed","medications","declinedFPM","fp_methods","riskOfUnplannedPregnancy","reason_for_no_fpm","showOtherSideEffects","side_effects","hasTBSymptoms","tb_side_effects","attr","sideEffectReasons","getSideEffectsReasons","undefined","drugInducedConcept","ConceptService","getCachedConceptID","isOtherReason","reason","r","allYes","s","SideEffectsModalVue","getFPMethods","exclusionList","preChecked","getFamilyPlanningMethods","filtered","method","getOptions","preValues","preValue","find","yesNoOptions","getContraindications","contraIndications","getConceptsByCategory","getOtherContraindications","lastElement","pop","getTBSymptoms","getReasonsForNoCxcaOptions","c","runAppendOptionParams","prechecked","checkedOptions","appendOptionParams","appendedOptions","option","didCompleted3HP","tptAutoSelectionMode","curOption","is3HPorTPT","ipt3HPConflict","checkedDrugs","item","noTpTPresent","every","Boolean","optionsActionSheet","role","buildValueText","selection","medicationOrderOptions","completedTpt","everTakenTpt","tpt","disableOption","text","description","show","toOption","tb_treatment","completed","OrderService","formatLabs","Store","get","getSuspendedProgram","id","proxyID","helpText","FieldType","TT_MULTIPLE_SELECT","init","isGuardian","getClient","PatientTypeService","isDrugRefillPatient","Number","getRecentWeight","getTptTreatmentStatus","validation","Validation","computedValue","v","tag","obs","onValueUpdate","list","on3HPValueUpdate","cd","l","condition","exitsForm","generateDateFields","getTransferInStatus","getDateStartedArt","minDate","maxDate","computeValue","setDate","buildValueDate","estimation","allowUnknown","getARVs","config","showKeyboard","TT_NEXT_VISIT_INTERVAL_SELECTION","nextAppointment","intervals","setNextVisitInterval","calculateDateFromInterval","TT_DRUG_TRANSFER_IN","validateSeries","pillsBrought","some","buildObs","drug_interval","child","date_last_received_arvs","previous_arvs_received","prevValue","qty","rmndr","TT_LAB_ORDERS","getVlLabData","unload","checkVLReminder","noGivenResults","result_given","alertConfirmation","enc","result","resultIds","encounterID","encounter_id","saveObs","resultID","onload","fieldContext","printOrder","orderID","PatientPrintoutService","printLabOrderLbl","hiddenFooterBtns","footerBtns","visible","getTLObs","TT_MULTIPLE_YES_NO","anyEmpty","concat","TT_WEIGHT_CHART","getWeightHistory","getWeightLossPercentageFromTrail","bmi","getBMI","x","y","weight","TT_TEXT_BANNER","mapStrToOptions","disableFPMethods","checked","TT_SELECT","offer_contraceptives","cervicalCancerScreeningEnabled","start","end","cervicalCancerScreeningAgeBounds","clientDueForCxCa","clientHasHadAHysterectomy","offer_cxca","getBirthdate","getSessionDate","reason_for_no_cxca","isEstimate","buildValueDateEstimated","estimationFieldType","EstimationFieldType","MONTH_ESTIMATE_FIELD","TT_DATA_TABLE","getDrugSideEffects","columns","table","thTxt","rows","keys","k","tdDate","td","drug_induced","cur","getPreviousDrugs","beforeNext","buildSideEffectObs","onValue","checkIfWeightLossIsControlled","onConditionFalse","TT_NOTE","other_side_effects","on_tb_treatment","defaultValue","hasTreatmentHistoryObs","test","TT_ADHERENCE_INPUT","getTptDrugs","date_started_tpt","titles","getFacilities","isFilterDataViaApi","yesNoUnknownOptions","getAdherenceFields","UserService","isNurse","currentOptions","onClickComponentEvents","refreshOptions","btnEvent","btnOutput","patientId","orders","order","pageSize","params","AdverseEffectsCategories","nextVisitInterval","fastTrack","regimenExtras","fastTrackMedications","hangingPills","medicationOrders","treatmentState","contraindications","tptPrescriptionCount","lastSideEffectDate","getHangingPills","getMedicationOrders","getCachedConceptName","getTptPrescriptionCount","getLastSideEffectDate","getSideEffects","getRegimenExtras","getPatientRegimens","getRegimens","getFastTrackMedications","getTreatmentState","isFastTrack","medicationOrdersAvailable","shouldPrescribeArvs","arvs","shouldPrescribeExtras","extras","extrasAvailable","concept_id","getRegimenStarterpack","regimenCode","patientWeight","regimen","contraindication","getObs","forEach","drugInduced","value_drug","count","yes","meds","getAll","value_numeric","drug_order","getLastDrugsReceived","withDosages","dosage","getDrugDosages","am","noon","pm","frequency","req","findAndGroupDrugSideEffects","allSideEffects","calculatePillsPerDay","parseFloat","toString","estimatePackSize","pillsPerDay","packSize","packs","roundedPacks","Math","round","calculateDosage","morningTabs","eveningTabs","dose","calculateEquivalentDosage","dateObj","Date","getDrugPackSize","pack_size","getInstructions","toOrderObj","getFirstValueText","drugOrders","response","saveValueTextObs","reasonForSwitch","facilities","LocationService","trim","facility","location_id","getLabFacilities","getLabs","getFacilityWards","wards","ward","getSpecialistClinics","clinics","clinic","getRegions","regions","region","region_id","getDistricts","regionID","districts","district","district_id","getTraditionalAuthorities","districtID","TAs","TA","traditional_authority_id","getVillages","traditionalAuthorityID","villages","village","village_id","AdherenceService","super","this","lastDrugs","lastReceiptDate","receiptDate","start_date","htnDrugs","htnDrugReferences","getReceiptDate","getLastDrugs","receivedDrugsBefore","buildPillCountObs","pillCount","buildValueNumber","isAdherenceGood","calculateAdherence","given","expected","calculateExpected","equivalentDailyDose","startDate","timeUnit","daysGone","calcTimeElapsed","date1","dayjs","diff","calculateUnaccountedOrMissed","actual","exp","EncounterMixinVue","askReasonForPoorAdherence","calculationAgreementObs","buildAdherenceReport","lastVisit","daysElapsed","timeElapse","rowColors","indexes","cellColors","formatFrequency","expectedPills","calcPillsExpected","adherenceStatus","unAccountedDoses","equivalent_daily_dose","row","checkDrugsBefore","async","loadPreviousDrugs","empty","buildAdherenceObs","order_id","fdata","pills_brought","TT_TABLE_VIEWER"],"mappings":"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","file":"js/chunk-06edaa06.e9982824.js","sourcesContent":["import { AppEncounterService } from \"@/services/app_encounter_service\"\nimport { DrugInterface } from \"@/interfaces/Drug\"\nimport HisDate from \"@/utils/Date\"\nimport { isEmpty } from \"lodash\"\nimport { BPManagementService } from \"./htn_service\"\nimport dayjs from \"dayjs\"\n\nexport class AdherenceService extends AppEncounterService {\n    lastDrugs: Array<DrugInterface>\n    lastReceiptDate: string\n    constructor(patientID: number, providerID: number) {\n        super(patientID, 68, providerID) //TODO: Use encounter type reference name\n        this.lastDrugs = []\n        this.lastReceiptDate = ''\n    }\n\n    async loadPreviousDrugs() {\n        const date = new Date(this.date)\n        date.setDate(date.getDate() - 1) // we don't want current date to count\n        const d = (date: string | Date) => HisDate.toStandardHisFormat(date)\n        const drugs = await AppEncounterService.getJson(\n            `patients/${this.patientID}/drugs_received`, { date: d(date) }\n        )      \n        if (drugs) {\n            this.lastReceiptDate = drugs.reduce((receiptDate: string | null,  drug: any) => {\n                return !receiptDate || (new Date(d(drug.order.start_date)) > new Date(receiptDate))\n                    ?  d(drug.order.start_date)\n                    : receiptDate\n            }, null)\n            const htnDrugs = BPManagementService.htnDrugReferences().map((d: any) => d.drug_id)\n            this.lastDrugs = drugs.filter((drug: DrugInterface) => \n               !htnDrugs.includes(drug.drug['drug_id']) && d(drug.order.start_date) === this.lastReceiptDate\n            )\n        }\n    }\n\n    getReceiptDate() { return this.lastReceiptDate }\n\n    getLastDrugs() { return this.lastDrugs }\n\n    receivedDrugsBefore() { return !isEmpty(this.lastDrugs) }\n\n    buildPillCountObs(orderId: number, pillCount: number) {\n        return this.buildValueNumber('Number of tablets brought to clinic', pillCount, null, orderId)\n    }\n\n    async buildAdherenceObs(orderId: number, drugId: number, adherence: number) {\n        const concept = await AppEncounterService.getConceptID('Drug adherence', true)\n        return {\n            'concept_id': concept,\n            'value_numeric': adherence,\n            'value_drug': drugId,\n            'value_modifier': '%',\n            'order_id': orderId,\n            'person_id': this.patientID,\n            'obs_datetime': AppEncounterService.getSessionDate()\n        }\n    }\n\n    isAdherenceGood(adherence: number) {\n        return adherence >= 95 && adherence <= 105\n    }\n\n    calculateAdherence(given: number, pills: number, expected: number) {\n        return Math.round(100 * (given - pills) / (given - expected));\n    }\n\n    calculateExpected(\n        given: number, \n        equivalentDailyDose: number, \n        startDate: string, \n        frequency: 'QOD' | 'QW'\n    ) {\n        const timeUnit = frequency === 'QW' ? 'week' : 'day'\n        const daysGone = this.calcTimeElapsed(startDate, timeUnit);\n        return (given - (daysGone * parseFloat(equivalentDailyDose.toString())));\n    }\n\n    calcTimeElapsed(date1: string, timeUnit: 'week' | 'day') {\n        return dayjs(this.date).diff(date1, timeUnit)\n    }\n\n    calculateUnaccountedOrMissed(expected: string, actual: string) {\n        const exp = (parseFloat(expected) - parseFloat(actual));\n        return (exp < 0 ? ((exp * -1) + ' missed') : (exp + ' unacc'));\n    }\n}\n","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, withScopeId as _withScopeId, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nconst _withId = /*#__PURE__*/_withScopeId(\"data-v-546674a2\")\n\n_pushScopeId(\"data-v-546674a2\")\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Side effects suspected causes\")\nconst _hoisted_2 = { style: {} }\nconst _hoisted_3 = /*#__PURE__*/_createVNode(\"div\", { class: \"side-title\" }, \" Select reason \", -1)\nconst _hoisted_4 = /*#__PURE__*/_createVNode(\"p\", null, \"Current Medication\", -1)\nconst _hoisted_5 = /*#__PURE__*/_createVNode(\"p\", null, \"Previous Medication\", -1)\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"Other, not drug related\")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"Drug side effect\")\nconst _hoisted_8 = /*#__PURE__*/_createVNode(\"p\", null, null, -1)\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\" Close \")\nconst _hoisted_10 = /*#__PURE__*/_createTextVNode(\" Save \")\n_popScopeId()\n\nexport const render = /*#__PURE__*/_withId(function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_ion_label = _resolveComponent(\"ion-label\")\n  const _component_ion_item = _resolveComponent(\"ion-item\")\n  const _component_ion_list = _resolveComponent(\"ion-list\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_ion_radio = _resolveComponent(\"ion-radio\")\n  const _component_ion_radio_group = _resolveComponent(\"ion-radio-group\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withId(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withId(() => [\n            _createVNode(_component_ion_title, null, {\n              default: _withId(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, { style: { overflowY: 'hidden', background: 'grey' } }, {\n      default: _withId(() => [\n        _createVNode(_component_ion_grid, null, {\n          default: _withId(() => [\n            _createVNode(_component_ion_row, null, {\n              default: _withId(() => [\n                _createVNode(_component_ion_col, { size: \"4\" }, {\n                  default: _withId(() => [\n                    _createVNode(_component_ion_list, { style: {overflowY: 'auto', height:'78vh'} }, {\n                      default: _withId(() => [\n                        (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.sides, (data, index) => {\n                          return (_openBlock(), _createBlock(_component_ion_item, {\n                            key: data,\n                            onClick: $event => (_ctx.selectSideEffect(index)),\n                            detail: true,\n                            style: _ctx.activeIndex === index ? 'color: green': 'color: black'\n                          }, {\n                            default: _withId(() => [\n                              _createVNode(_component_ion_label, null, {\n                                default: _withId(() => [\n                                  _createTextVNode(_toDisplayString(data.label), 1 /* TEXT */)\n                                ]),\n                                _: 2\n                              }, 1024)\n                            ]),\n                            _: 2\n                          }, 1032, [\"onClick\", \"style\"]))\n                        }), 128 /* KEYED_FRAGMENT */))\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_ion_col, { style: {overflowY: 'auto', height:'78vh'} }, {\n                  default: _withId(() => [\n                    _createVNode(\"div\", _hoisted_2, [\n                      _createVNode(_component_ion_list, null, {\n                        default: _withId(() => [\n                          (_ctx.activeIndex !== null)\n                            ? (_openBlock(), _createBlock(_component_ion_radio_group, {\n                                key: 0,\n                                modelValue: _ctx.sides[_ctx.activeIndex]['reason'],\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => (_ctx.sides[_ctx.activeIndex]['reason'] = $event))\n                              }, {\n                                default: _withId(() => [\n                                  _hoisted_3,\n                                  _hoisted_4,\n                                  (_openBlock(true), _createBlock(_Fragment, null, _renderList(_ctx.drugs, (drug, i) => {\n                                    return (_openBlock(), _createBlock(_component_ion_item, { key: i }, {\n                                      default: _withId(() => [\n                                        _createVNode(_component_ion_label, null, {\n                                          default: _withId(() => [\n                                            _createTextVNode(_toDisplayString(drug.drug.name), 1 /* TEXT */)\n                                          ]),\n                                          _: 2\n                                        }, 1024),\n                                        _createVNode(_component_ion_radio, {\n                                          slot: \"start\",\n                                          value: drug.drug_inventory_id\n                                        }, null, 8, [\"value\"])\n                                      ]),\n                                      _: 2\n                                    }, 1024))\n                                  }), 128 /* KEYED_FRAGMENT */)),\n                                  _hoisted_5,\n                                  _createVNode(_component_ion_item, null, {\n                                    default: _withId(() => [\n                                      _createVNode(_component_ion_label, null, {\n                                        default: _withId(() => [\n                                          _hoisted_6\n                                        ]),\n                                        _: 1\n                                      }),\n                                      _createVNode(_component_ion_radio, {\n                                        slot: \"start\",\n                                        value: \"other\"\n                                      })\n                                    ]),\n                                    _: 1\n                                  }),\n                                  _createVNode(_component_ion_item, null, {\n                                    default: _withId(() => [\n                                      _createVNode(_component_ion_label, null, {\n                                        default: _withId(() => [\n                                          _hoisted_7\n                                        ]),\n                                        _: 1\n                                      }),\n                                      _createVNode(_component_ion_radio, {\n                                        slot: \"start\",\n                                        value: \"drug\"\n                                      })\n                                    ]),\n                                    _: 1\n                                  })\n                                ]),\n                                _: 1\n                              }, 8, [\"modelValue\"]))\n                            : _createCommentVNode(\"\", true)\n                        ]),\n                        _: 1\n                      })\n                    ]),\n                    _hoisted_8\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withId(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withId(() => [\n            _createVNode(_component_ion_button, {\n              onClick: _ctx.closeModal,\n              slot: \"end\",\n              color: \"danger\"\n            }, {\n              default: _withId(() => [\n                _hoisted_9\n              ]),\n              _: 1\n            }, 8, [\"onClick\"]),\n            _createVNode(_component_ion_button, {\n              onClick: _ctx.postSideEffects,\n              slot: \"end\",\n              disabled: !_ctx.allSelected\n            }, {\n              default: _withId(() => [\n                _hoisted_10\n              ]),\n              _: 1\n            }, 8, [\"onClick\", \"disabled\"])\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n})","\nimport { defineComponent } from 'vue'\nimport { FieldType } from \"@/components/Forms/BaseFormElements\"\nimport { Field, Option } from \"@/components/Forms/FieldInterface\"\nimport { toastWarning } from \"@/utils/Alerts\"\nimport { AdherenceService } from \"@/apps/ART/services/adherence_service\"\nimport EncounterMixinVue from '../../../../views/EncounterMixin.vue'\nimport Validation from \"@/components/Forms/validations/StandardValidations\"\nimport HisDate from \"@/utils/Date\"\nimport { isEmpty } from 'lodash'\nexport default defineComponent({\n    mixins: [EncounterMixinVue],\n    data: () => ({\n        adherence: {} as any,\n        drugObs: [] as any,\n        askReasonForPoorAdherence: false,\n        calculationAgreementObs: [] as any,\n    }),\n    methods: {\n        async saveAdherence() {\n            await this.adherence.createEncounter()\n            const data = await Promise.all([...this.drugObs, ...this.calculationAgreementObs])\n            const obs = await this.adherence.saveObservationList(data)\n\n            if (!obs) return toastWarning('Unable to save patient observations')\n        },\n        buildAdherenceReport(data: any) {\n            const lastVisit = this.adherence.getReceiptDate()\n            const daysElapsed = this.adherence.calcTimeElapsed(lastVisit, 'day')\n            const timeElapse = ` Last visit: ${HisDate.toStandardHisDisplayFormat(lastVisit)} \n                (${daysElapsed} Days Elapsed)`\n            const rowColors = [{ indexes: [0, 3, 6], class: 'adherence-col-bg' }]\n            const cellColors: any = []\n            const columns = [timeElapse]\n            const rows = [\n                ['Prescription'],\n                ['Tabs given'],\n                ['Tabs per'],\n                ['Tabs remaining'],\n                ['Expected'],\n                ['Actual (counted)'],\n                ['Adherence'],\n                ['Doses missed/ Unaccounted for'],\n                ['Doses consumed'],\n                ['Art Adherence']\n            ]        \n            data.forEach((order: any, index: number) => {\n                const frequency = this.formatFrequency(order.frequency)\n                const expectedPills = this.calcPillsExpected(order)\n                const adherence = this.adherence.calculateAdherence(\n                    order.quantity, order.pillsBrought, expectedPills\n                )\n                const adherenceStatus = this.adherence.isAdherenceGood(adherence) \n                    ? 'Good adherence' \n                    : 'Explore problem'\n                const unAccountedDoses = this.adherence.calculateUnaccountedOrMissed(\n                    expectedPills, order.pillsBrought\n                )\n                columns.push(order.drug.name)\n                rows[0].push('')\n                rows[1].push(order.quantity)\n                rows[2].push(`${order.equivalent_daily_dose} <b>${frequency}</b>`)\n                rows[3].push('')\n                rows[4].push(expectedPills < 0 ? 0 : expectedPills)\n                rows[5].push(order.pillsBrought)\n                rows[6].push('')\n                rows[7].push(unAccountedDoses)\n                rows[8].push(`${adherence}%`)\n                rows[9].push(adherenceStatus)\n\n                cellColors.push({ \n                    index: index+1,\n                    row: 9, \n                    class: adherenceStatus.match(/good/i) ? 'adherence-txt-good' : 'adherence-txt-bad' \n                })\n            })\n            return [\n                { \n                    label: 'Selected Medication', \n                    value:'Table', \n                    other: { columns, rows, rowColors, cellColors }\n                }      \n            ]\n        },\n        formatFrequency(frequency: string) {\n            return `${frequency}`.match(/qod/i) \n                    ? 'QOD'\n                    : `${frequency}`.match(/weekly/i) \n                    ? 'QW'\n                    : frequency\n        },\n        calcPillsExpected(d: any) {\n            return this.adherence.calculateExpected(\n                d.quantity, \n                d.equivalent_daily_dose, \n                d.order.start_date,\n                this.formatFrequency(d.frequency) as 'QOD' | 'QW'\n            )\n        },\n        getAdherenceFields(checkDrugsBefore=false): Array<Field> {\n            return [\n                {\n                    id: 'pills_brought',\n                    helpText: 'Pills remaining (brought to clinic)',\n                    type: FieldType.TT_ADHERENCE_INPUT,\n                    init: async () => {\n                        this.adherence = new AdherenceService(this.patientID, this.providerID)\n                        await this.adherence.loadPreviousDrugs()\n                        return true\n                    },\n                    condition: () => checkDrugsBefore ? this.adherence.receivedDrugsBefore() : true,\n                    validation: (val: any) => {\n                        if (Validation.required(val)) return ['No drugs available']\n\n                        const empty = val.map((i: Option) => i.value === '')\n                        \n                        return  empty.some(Boolean) ? ['Some values are missing'] : null\n                    },\n                    unload: async (data: any) => {\n                        this.drugObs = []\n                        data.forEach(async(val: Option) => {\n                            const {drug, order } = val.other\n                            const data = { ...val.other, pillsBrought: val.value }\n                            const adherence = this.adherence.calculateAdherence(\n                                data.quantity, data.pillsBrought, this.calcPillsExpected(data)\n                            )\n                            this.drugObs.push(\n                                this.adherence.buildAdherenceObs(order.order_id, drug.drug_id, adherence)\n                            )\n                            this.drugObs.push(\n                                this.adherence.buildPillCountObs(order.order_id, val.value)\n                            )\n\n                            if (!this.askReasonForPoorAdherence) {\n                                this.askReasonForPoorAdherence = !this.adherence.isAdherenceGood(data)\n                            }\n                        })\n                    },\n                    options: (fdata: any) => {\n                        if (!isEmpty(fdata.pills_brought)) {\n                            return fdata.pills_brought\n                        }\n                        return this.adherence.getLastDrugs().map((data: any) => ({\n                            label: data.drug.name,\n                            value: '',\n                            other: {\n                                ...data\n                            }\n                        }))\n                    }\n                },\n                {\n                    id: \"adherence_report\",\n                    helpText: \"ART adherence\",\n                    type: FieldType.TT_TABLE_VIEWER,\n                    condition: () => checkDrugsBefore ? this.adherence.receivedDrugsBefore() : true,\n                    options: (d: any) => this.buildAdherenceReport(\n                        d.pills_brought.map((i: Option) => ({ \n                            ...i.other, pillsBrought: i.value\n                        }))\n                    ),\n                    config: {\n                        hiddenFooterBtns: [\n                            'Clear'\n                        ]\n                    }\n                },\n                {\n                    id: \"agree_with_calculation\",\n                    helpText: \"Agree with adherence calculation\",\n                    type: FieldType.TT_SELECT,\n                    condition: () => this.askReasonForPoorAdherence,\n                    validation: (val: Option) => Validation.required(val),\n                    unload: ({ value }: Option) => {\n                        this.calculationAgreementObs = [ this.adherence.buildValueCoded(\n                            'Reason for poor treatment adherence', value\n                        )]\n                    },\n                    options: () => [\n                        { label: 'Yes', value: 'Yes' },\n                        { label: 'No', value: 'No' }\n                    ]\n                }\n            ]\n        }\n    }\n})\n","import { render } from \"./VLReminderModal.vue?vue&type=template&id=10a26cd2&scoped=true&ts=true\"\nimport script from \"./VLReminderModal.vue?vue&type=script&lang=ts\"\nexport * from \"./VLReminderModal.vue?vue&type=script&lang=ts\"\n\nimport \"./VLReminderModal.vue?vue&type=style&index=0&id=10a26cd2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-10a26cd2\"]])\n\nexport default __exports__","import { render } from \"./SideEffectsModal.vue?vue&type=template&id=546674a2&scoped=true&ts=true\"\nimport script from \"./SideEffectsModal.vue?vue&type=script&lang=ts\"\nexport * from \"./SideEffectsModal.vue?vue&type=script&lang=ts\"\n\nimport \"./SideEffectsModal.vue?vue&type=style&index=0&id=546674a2&scoped=true&lang=css\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-546674a2\"]])\n\nexport default __exports__","import { render } from \"./Consultation.vue?vue&type=template&id=336b620e&ts=true\"\nimport script from \"./Consultation.vue?vue&type=script&lang=ts\"\nexport * from \"./Consultation.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VLReminderModal.vue?vue&type=style&index=0&id=10a26cd2&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SideEffectsModal.vue?vue&type=style&index=0&id=546674a2&scoped=true&lang=css\"","import script from \"./AdherenceMixin.vue?vue&type=script&lang=ts\"\nexport * from \"./AdherenceMixin.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"sourceRoot":""}
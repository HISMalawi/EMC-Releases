(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b4436f6"],{3800:function(t,e,n){"use strict";n.d(e,"d",(function(){return r})),n.d(e,"l",(function(){return a})),n.d(e,"e",(function(){return u})),n.d(e,"b",(function(){return o})),n.d(e,"k",(function(){return i})),n.d(e,"i",(function(){return c})),n.d(e,"g",(function(){return l})),n.d(e,"a",(function(){return s})),n.d(e,"j",(function(){return d})),n.d(e,"c",(function(){return f})),n.d(e,"h",(function(){return p})),n.d(e,"f",(function(){return v}));var r=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["","Done",""]],a=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["Clear","%","/"]],u=[["1","2","3"],["4","5","6"],["7","8","9"],["Del.","0","Clear"]],o=[["1","2","3","<"],["4","5","6",">"],["7","8","9","="],["","0",""]],i=[["1","2","3","+","-","/","*"],["4","5","6","%","=","<",">","Qwerty"],["7","8","9",".",","],["","0",""]],c=[["1","2","3"],["4","5","6"],["7","8","9"],["","0",""]],l=[["1","2","3","4","5","6","7"],["8","9","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31"]],s=[["a","b","c","d","e","f","g","h","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],d=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","'"],["z","x","c","v","b","n","m",",",".","A-Z"]],f=[["1","2","3","4","5","6","7","8","9","0"],["a","b","c","d","e","f","g","h","-","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],p=[["1","2","3","4","5","6","7","8","9","0","Del"],["q","w","e","r","t","y","u","i","o","p","Clear"],["a","s","d","f","g","h","j","k","l",".","Caps"],["z","x","c","v","b","n","m","<",">","/","Enter"]],v=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","Del."],["z","x","c","v","b","n","m","Caps","Login"]]},"44e3":function(t,e,n){"use strict";var r=n("2909"),a=n("4f96"),u=n("1da1"),o=n("5530"),i=n("3835"),c=(n("96cf"),n("4e82"),n("ac1f"),n("1276"),n("d81d"),n("fb6a"),n("99af"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("b0c0"),n("1c74")),l=n("7a23"),s=n("b446"),d=n("23e6"),f=n("9283"),p=n("8a30"),v=n("d6aa"),h=n("5969"),b=n("d95e"),m=n("2706"),g=n("9ceb"),D=n("2ef0"),w=Object(l["defineComponent"])({data:function(){return{fields:[],report:{},reportReady:!1,period:"",startDate:"",endDate:"",customFileName:"",drillDownCache:{}}},methods:{toDate:function(t){return f["b"].toStandardHisDisplayFormat(t)},sortByArvNumber:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arv_number";try{return t.sort((function(t,r){return e.getArvInt(t[n])>e.getArvInt(r[n])?1:-1}))}catch(r){return console.error(r),t}},getArvInt:function(t){if("string"===typeof t){var e=t.split("-"),n=Object(i["a"])(e,3),r=(n[0],n[1],n[2]),a=parseInt(r);return"number"===typeof a?a:0}return 0},tdARV:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g["a"].td(t,Object(o["a"])({sortValue:this.getArvInt(t)},e))},confirmPatient:function(t){return this.$router.push("/patients/confirm?person_id=".concat(t))},drilldownAsyncRows:function(t,e,n){var r=arguments;return Object(u["a"])(regeneratorRuntime.mark((function a(){var u,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return u=!(r.length>3&&void 0!==r[3])||r[3],a.next=3,p["X"].create({component:v["a"],cssClass:"large-modal",componentProps:{title:t,columns:e,asyncRows:n,canExport:u,showFilters:!0,rowsPerPage:50,paginated:!0,showReportStamp:!1,footerColor:"light",onFinish:function(){return p["X"].dismiss()}}});case 3:o=a.sent,o.present();case 5:case"end":return a.stop()}}),a)})))()},drilldownData:function(t,e,n,r){return Object(u["a"])(regeneratorRuntime.mark((function a(){var u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,p["X"].create({component:v["a"],cssClass:"large-modal",componentProps:{title:t,columns:e,rows:n,rowParser:r,rowsPerPage:50,showFilters:!0,paginated:!0,showReportStamp:!1,footerColor:"light",onFinish:function(){return p["X"].dismiss()}}});case 2:u=a.sent,u.present();case 4:case"end":return a.stop()}}),a)})))()},getDefaultDrillDownTable:function(){var t=this,e=[[g["a"].thTxt("ARV number"),g["a"].thTxt("Gender"),g["a"].thTxt("Birth Date"),g["a"].thTxt("Actions")]],n=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(n){var o,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=0,c=n.map(function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(n){var c,l,s,f,v,h,b,m,w,y;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(c=null,l=null,!Object(D["isArray"])(n)){e.next=10;break}if(s=Object(i["a"])(n,2),f=s[0],v=s[1],l=f,!(v in t.drillDownCache)){e.next=8;break}return h=Object(a["a"])(t.drillDownCache[v]),h[0],b=h.slice(1),e.abrupt("return",[l].concat(Object(r["a"])(b)));case 8:e.next=13;break;case 10:if(c=n,!(c in t.drillDownCache)){e.next=13;break}return e.abrupt("return",t.drillDownCache[c]);case 13:return e.next=15,d["a"].findByID(c);case 15:return m=e.sent,w=new d["a"](m),y=[],l&&(o=1,y.push(l)),y.push(t.tdARV(w.getArvNumber())),y.push(g["a"].td(w.getGender())),y.push(g["a"].tdDate(w.getBirthdate().toString())),y.push(g["a"].tdBtn("Show",Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["X"].dismiss({});case 2:t.$router.push({path:"/patient/dashboard/".concat(c)});case 3:case"end":return e.stop()}}),e)}))))),t.drillDownCache[c]=y,e.abrupt("return",y);case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(c);case 4:return l=e.sent,e.abrupt("return",l.sort((function(t,e){return t[o].sortValue>e[o].sortValue?1:-1})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{rowParser:n,columns:e}},runTableDrill:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Drilldown patients",n=this.getDefaultDrillDownTable(),r=n.columns,a=n.rowParser;this.drilldownData(e,r,t,a)},drill:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Drill table";return t&&t.length>0?g["a"].tdLink(t.length,(function(){return e.runTableDrill(t,n)})):g["a"].td(0)},getQuaterOptions:function(){var t=h["a"].getReportQuarters();return t.map((function(t){return{label:t.name,value:t.start,other:t}}))},getDateDurationFields:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c["e"].getSessionDate(),o="2000-01-01";return[{id:"quarter",helpText:"Select Quarter",type:b["b"].TT_SELECT,condition:function(){return e},validation:function(t){return m["a"].required(t)},options:function(){var t=h["a"].getReportQuarters(a),e=t.map((function(t){return{label:t.name,value:t.start,other:t}}));return n&&(e=[{label:"Set custom period",value:"custom_period",other:{}}].concat(Object(r["a"])(e))),e}}].concat(Object(r["a"])(Object(s["b"])({id:"start_date",helpText:"Start",required:!0,condition:function(t){return t.quarter&&"custom_period"===t.quarter.value||!e},minDate:function(){return o},maxDate:function(){return u},estimation:{allowUnknown:!1},computeValue:function(t){return t}})),Object(r["a"])(Object(s["b"])({id:"end_date",helpText:"End",required:!0,condition:function(t){return t.quarter&&"custom_period"===t.quarter.value||!e},unload:function(e,n,r,a){"next"===n&&(t.endDate=a.end_date)},minDate:function(t,e){return e.start_date},maxDate:function(){return u},estimation:{allowUnknown:!1},computeValue:function(t){return t}})))}}});const y=w;e["a"]=y},5969:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var r=n("5530"),a=n("d4ec"),u=n("bee2"),o=n("262e"),i=n("2caf"),c=(n("99af"),n("1c74")),l=n("9283"),s=n("5a0c"),d=n.n(s),f=function(t){Object(o["a"])(n,t);var e=Object(i["a"])(n);function n(){var t;return Object(a["a"])(this,n),t=e.call(this),t.endDate="",t.startDate="",t.quarter="",t.date=c["e"].getSessionDate(),t.programID=c["e"].getProgramID(),t}return Object(u["a"])(n,[{key:"getDateIntervalPeriod",value:function(){return"".concat(l["b"].toStandardHisDisplayFormat(this.startDate)," - ").concat(l["b"].toStandardHisDisplayFormat(this.endDate))}},{key:"setStartDate",value:function(t){this.startDate=t}},{key:"setEndDate",value:function(t){this.endDate=t}},{key:"setQuarter",value:function(t){this.quarter=t}},{key:"getReport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c["e"].getJson(t,this.buildRequest(e))}},{key:"buildRequest",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={date:this.date,program_id:this.programID};return this.startDate&&this.endDate&&(e["start_date"]=this.startDate,e["end_date"]=this.endDate),this.quarter&&(e["quarter"]=this.quarter),Object(r["a"])(Object(r["a"])({},e),t)}}],[{key:"getQuarterBounds",value:function(t){var e=function(e){return d()("".concat(t,"-").concat(e,"-01")).daysInMonth()},n=function(e){return"".concat(t,"-").concat(e,"-01 00:00")},r=function(n){return"".concat(t,"-").concat(n,"-").concat(e(n)," 00:00")};return{Q1:{qtr:1,start:n("01"),end:r("03")},Q2:{qtr:2,start:n("04"),end:r("06")},Q3:{qtr:3,start:n("07"),end:r("09")},Q4:{qtr:4,start:n("10"),end:r("12")}}}},{key:"getQtrByDate",value:function(t){var e=this.getQuarterBounds(t.getFullYear());for(var n in e){var r=e[n],a=r.start,u=r.end;if(t>=new Date(a)&&t<=new Date(u))return e[n]}return null}},{key:"buildQtrObj",value:function(t,e){var n=this.getQuarterBounds(e),r=n[t],a=r.start,u=r.end;return{start:a,end:u,name:"".concat(t," ").concat(e)}}},{key:"getReportQuarters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=new Date,r=n.getFullYear(),a=r;n=new Date("".concat(a,"-").concat(n.getMonth()+1,"-").concat(n.getDate()," 00:00"));var u=this.getQtrByDate(n),o=u.qtr,i=0;4===o&&e.push(this.buildQtrObj("Q1",r+1));while(i<t)0===i&&o<4&&e.push(this.buildQtrObj("Q".concat(o+1),r)),e.push(this.buildQtrObj("Q".concat(o),r)),o=o>0?o-=1:o,r=0==o?r-1:r,o=0==o?o+=4:o,i++;return e}}]),n}(c["e"])},"6be2":function(t,e,n){"use strict";n.d(e,"d",(function(){return u})),n.d(e,"g",(function(){return o})),n.d(e,"f",(function(){return i})),n.d(e,"e",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return s})),n.d(e,"h",(function(){return f})),n.d(e,"a",(function(){return p}));var r=n("3800"),a=[r["k"],[["","Delete"]]],u=[r["i"],[["Delete"]]],o=[r["i"],[["Delete","Unknown"]]],i=[r["i"],[["N/A"],["Delete","Unknown"]]],c=[r["i"],[["Delete"]]],l=[r["i"],[["Unknown","Delete"],["Qwerty","A-Z"]]],s=[r["g"],[["Unknown"]]],d=[r["a"],[["0-9","Delete"],["Qwerty","Unknown"],["","Space"]]],f=[r["j"],[["","Delete"],["?123","0-9"],["Space","Unknown"]]],p=[{btn:"0-9",keyboard:l},{btn:"?123",keyboard:a},{btn:"A-Z",keyboard:d},{btn:"Qwerty",keyboard:f}]},b446:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return S}));var r,a=n("2909"),u=n("3835"),o=n("5530"),i=n("1da1"),c=(n("96cf"),n("99af"),n("caad"),n("a15b"),n("d3b7"),n("25f0"),n("ac1f"),n("466d"),n("1276"),n("d95e")),l=[{label:"Jan",value:1},{label:"Feb",value:2},{label:"Mar",value:3},{label:"Apr",value:4},{label:"May",value:5},{label:"Jun",value:6},{label:"Jul",value:7},{label:"Aug",value:8},{label:"Sep",value:9},{label:"Oct",value:10},{label:"Nov",value:11},{label:"Dec",value:12}],s=n("9283"),d=n("2706"),f=n("3800"),p=n("6be2"),v=n("5a0c"),h=n.n(v),b=n("1c74");function m(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];return n&&r.push("UNKNOWN"),{id:t,helpText:"".concat(e," Year"),appearInSummary:function(){return!1},type:c["b"].TT_TEXT,config:{customKeyboard:[f["i"],[r,["DELETE"]]]}}}function g(t,e){return{id:t,helpText:"".concat(e," Month"),appearInSummary:function(){return!1},type:c["b"].TT_SELECT,options:function(){return l}}}function D(t,e){return{id:t,helpText:"".concat(e," Day"),type:c["b"].TT_MONTHLY_DAYS,appearInSummary:function(){return!1}}}function w(t,e){return{id:t,helpText:"".concat(e," Estimated period"),type:c["b"].TT_SELECT,appearInSummary:function(){return!1},options:function(){return[{label:"6 months ago",value:180},{label:"12 months ago",value:365},{label:"18 months ago",value:540},{label:"24 months ago",value:730},{label:"Over 2 years ago",value:730}]}}}function y(t,e){return{id:t,helpText:"".concat(e," Age Estimate"),type:c["b"].TT_NUMBER,appearInSummary:function(){return!1},config:{keypad:p["e"]}}}function x(t){return parseInt(t)<10?"0".concat(t):t}function k(t,e,n){return T.apply(this,arguments)}function T(){return T=Object(i["a"])(regeneratorRuntime.mark((function t(e,n,r){var a,o,i,c,l,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.defaultValue){t.next=12;break}return t.next=3,n.defaultValue(e);case 3:if(a=t.sent,!a){t.next=12;break}o=a.split("-"),i=Object(u["a"])(o,3),c=i[0],l=i[1],s=i[2],t.t0=r,t.next="Year"===t.t0?9:"Month"===t.t0?10:"Day"===t.t0?11:12;break;case 9:return t.abrupt("return",c||"");case 10:return t.abrupt("return",parseInt(l)||"");case 11:return t.abrupt("return",parseInt(s)||"");case 12:return t.abrupt("return","");case 13:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function O(t){return s["b"].toStandardHisDisplayFormat(t)}function j(t,e,n,r){if(e.minDate){var a=e.minDate(n,r);if(new Date(t)<new Date(a))return["".concat(O(t)," is less than minimum date of ").concat(O(a))]}if(e.maxDate){var u=e.maxDate(n,r);if(u&&new Date(t)>new Date(u))return["".concat(O(t)," is greater than max date of  ").concat(O(u))]}}function S(t){var e="",n="",i="",c="",f="year_".concat(t.id),p="month_".concat(t.id),v="day_".concat(t.id),T="age_estimate_".concat(t.id),S="duration_estimate_".concat(t.id),I=m(f,t.helpText,t.estimation.allowUnknown),_=g(p,t.helpText),q=D(v,t.helpText),E=y(T,t.helpText),V=w(S,t.helpText),A="boolean"===typeof t.estimation.allowUnknownMonthDay&&t.estimation.allowUnknownMonthDay,R=function(e){return!(e[f]&&e[f].value&&["Unknown"].includes(e[f].value))&&(!t.condition||t.condition(e))},N=function(t,e){var r=[{type:"year",value:n,default:"YYYY"},{type:"month",value:i,default:"MM"},{type:"day",value:c,default:"DD"}];return r.reduce((function(n,r){var a=[null,void 0,"Unknown",""];return e===r.type?a.includes(t)?n.push(r.default):n.push(t):a.includes(r.value)?n.push(r.default):n.push(r.value),n}),[]).join("-")};"function"===typeof t.init&&(I.init=t.init),I.updateHelpTextOnValue=function(t){return"".concat(I.helpText," (").concat(N(null===t||void 0===t?void 0:t.label,"year"),")")},I.proxyID=t.id,I.unload=function(t){return n=t.value.toString()},I.config=Object(o["a"])(Object(o["a"])({},I.config),t.config),I.defaultValue=function(e){return k(e,t,"Year")},I.condition=function(e){return!t.condition||t.condition(e)},I.validation=function(e,n,r){if(t.required&&d["a"].required(e))return["Year cannot be empty"];var a=e?e.value:"";if(!t.estimation.allowUnknown&&a.toString().match(/unknown/i))return["Value unknown is not permitted"];if(a&&!["Unknown"].includes(a)&&isNaN(a)||a<1900)return["Invalid Year"];if(a&&"function"===typeof t.minDate){var u=s["b"].getYear(t.minDate(n,r));if(parseInt(a)<u)return["Year of ".concat(a," is less than Minimum year of ").concat(u)]}if(a&&"function"===typeof t.maxDate){var o=t.maxDate(n,r);if(o&&a>s["b"].getYear(o))return["Year of ".concat(a," exceeds Maximum year of ").concat(s["b"].getYear(o))]}return null},I.summaryMapValue=function(){return{label:t.summaryLabel||t.helpText,value:e?O(e):"Unknown"}},I.appearInSummary=function(e,n){return n===t.id},I.computedValue=function(n){if(e){var r=e.split("-"),a=Object(u["a"])(r,3),o=(a[0],a[1]),i=a[2];return e="".concat(n.value,"-").concat(o,"-").concat(i),t.computeValue(e,!1)}if(n&&"Unknown"===n.value)return e="",t.computeValue("Unknown",!1)},_.updateHelpTextOnValue=function(t){return"".concat(_.helpText," (").concat(N(null===t||void 0===t?void 0:t.label,"month"),")")},_.proxyID=t.id,_.unload=function(t){return i=x(t.value.toString())},_.condition=function(t){return R(t)},_.validation=function(t){return d["a"].required(t)},_.defaultValue=function(e){return k(e,t,"Month")},A&&(_.options=function(){return[].concat(Object(a["a"])(l),[{label:"Unknown",value:"Unknown"}])}),_.computedValue=function(n,r){if("".concat(n.value).match(/unknown/i))return e="".concat(r[f].value,"-07-15"),t.computeValue(e,!0);if(e){var a=e.split("-"),o=Object(u["a"])(a,3),i=o[0],c=(o[1],o[2]),l=x("".concat(n.value));return e="".concat(i,"-").concat(l,"-").concat(c),t.computeValue(e,!1)}},q.proxyID=t.id,q.updateHelpTextOnValue=function(t){return"".concat(q.helpText," (").concat(N(null===t||void 0===t?void 0:t.label,"day"),")")},q.condition=function(t){return!"".concat(t[p].value).match(/unknown/i)&&R(t)},q.validation=function(n,r,a){return d["a"].required(n)?["Day is required for date"]:j(e,t,r,a)},q.defaultValue=function(e){return k(e,t,"Day")},q.computedValue=function(r){var a=!!"".concat(r.value).match(/unknown/i);return c=a?"15":x("".concat(r.value)),e="".concat(n,"-").concat(i,"-").concat(c),t.computeValue(e,a)},q.unload=function(e,n,r,a){t.unload&&t.unload(e,n,r,a)},q.beforeNext=function(n,r){return!t.beforeNext||t.beforeNext(e,r)},q.config={year:function(t){return t[f].value},month:function(t){return t[p].value}},A||(q.config.keyboardActions=[]);var Q=function(e,n){var r=["Unknown"===e[f].value,!t.condition||t.condition(e),t.estimation.estimationFieldType===n];return r.every(Boolean)};return E.proxyID=t.id,E.validation=function(n,r,a){if(n&&n.value>300)return["Age estimate is too high and exceeding hard limit of 300"];if(isNaN(parseInt(n.value.toString())))return["Please enter a valid number"];var u=/^(12[0-7]|1[01][0-9]|[1-9]?[0-9])$/;return n.value.toString().match(u)?j(e,t,r,a):["Not a valid age estimate"]},E.condition=function(t){return Q(t,r.AGE_ESTIMATE_FIELD)},E.computedValue=function(n){var r=h()(b["e"].getSessionDate()).subtract(n.value,"years").year();return e="".concat(r,"-07-15"),t.computeValue(e,!0)},E.beforeNext=function(n,r){return!t.beforeNext||t.beforeNext(e,r)},V.proxyID=t.id,V.validation=function(n,r,a){return d["a"].required(n)?["Please select an estimate"]:j(e,t,r,a)},V.condition=function(t){return Q(t,r.MONTH_ESTIMATE_FIELD)},V.computedValue=function(n){return e=h()(b["e"].getSessionDate()).subtract(n.value,"day").format(s["a"]),t.computeValue(e,!0)},V.beforeNext=function(n,r){return!t.beforeNext||t.beforeNext(e,r)},[I,_,q,E,V]}(function(t){t["AGE_ESTIMATE_FIELD"]="age-estimate-field",t["MONTH_ESTIMATE_FIELD"]="month-period-estimate-field"})(r||(r={}))}}]);
//# sourceMappingURL=chunk-3b4436f6.0baf5385.js.map
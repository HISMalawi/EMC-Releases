(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a9f702dc"],{"4fad":function(e,t,n){var r=n("23e7"),i=n("6f53").entries;r({target:"Object",stat:!0},{entries:function(e){return i(e)}})},7920:function(e,t,n){"use strict";var r=n("7a23");function i(e,t,n,i,o,a){return Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.formType),{fields:e.fields,skipSummary:e.skipSummary,activeField:e.activeField,cancelDestinationPath:e.cancelDestinationPath,onOnFinish:e.onFinish,onFinish:e.onFinishAction,onOnIndex:e.onIndex},null,8,["fields","skipSummary","activeField","cancelDestinationPath","onOnFinish","onFinish","onOnIndex"])}var o=n("9441"),a=Object(r["defineComponent"])({name:"HisStandardForm",components:{TouchScreenForm:o["a"]},emits:["onFinish","onIndex"],data:()=>({formType:"touch-screen-form"}),props:{onFinishAction:{type:Function},skipSummary:{type:Boolean,default:!1},activeField:{type:String},fields:{type:Object,required:!0},cancelDestinationPath:{type:String,required:!1}},methods:{onFinish(e,t){this.$emit("onFinish",e,t)},onIndex(e){this.$emit("onIndex",e)}}}),s=n("6b0d"),c=n.n(s);const u=c()(a,[["render",i]]);t["a"]=u},ad8d:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n("d4ec"),i=n("bee2"),o=n("262e"),a=n("2caf"),s=n("5969"),c=["<1 year","1-4 years","5-9 years","10-14 years","15-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50-54 years","55-59 years","60-64 years","65-69 years","70-74 years","75-79 years","80-84 years","85-89 years","90 plus years"],u=function(e){Object(o["a"])(n,e);var t=Object(a["a"])(n);function n(){return Object(r["a"])(this,n),t.call(this)}return Object(i["a"])(n,[{key:"getBookedAppointments",value:function(e){return s["a"].getJson("programs/".concat(this.programID,"/scheduled_appointments"),{date:e})}},{key:"getViralLoadResults",value:function(e){return this.getReport("/programs/".concat(this.programID,"/reports/high_vl_patients"),{range:e})}},{key:"getOtherOutcome",value:function(e){return this.getReport("patient_outcome_list",{outcome:e})}},{key:"getPatientVisitTypes",value:function(){return this.getReport("patient_visit_types")}},{key:"getClientsDueForVl",value:function(){return this.getReport("clients_due_vl")}},{key:"getClientRentention",value:function(){return this.getReport("/programs/".concat(this.programID,"/reports/retention"))}},{key:"getExternalConsultationClients",value:function(){return this.getReport("".concat(this.programID,"/external_consultation_clients"))}},{key:"getMissedAppointments",value:function(){return this.getReport("missed_appointments")}},{key:"getPregnantWomen",value:function(){return this.getReport("/programs/".concat(this.programID,"/reports/pregnant_patients"))}},{key:"getArchivingCandidates",value:function(){return s["a"].getJson("programs/".concat(this.programID,"/reports/archiving_candidates"),{start_date:this.date})}}]),n}(s["a"])},fe31:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=Object(r["createTextVNode"])(" Patient visit report "),o={class:"view-port-content"},a=Object(r["createTextVNode"])(" Finish ");function s(e,t,n,s,c,u){var d=Object(r["resolveComponent"])("his-standard-form"),p=Object(r["resolveComponent"])("ion-title"),l=Object(r["resolveComponent"])("ion-toolbar"),h=Object(r["resolveComponent"])("ion-header"),f=Object(r["resolveComponent"])("ApexChart"),m=Object(r["resolveComponent"])("view-port"),b=Object(r["resolveComponent"])("ion-content"),O=Object(r["resolveComponent"])("ion-button"),g=Object(r["resolveComponent"])("ion-footer"),j=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["withDirectives"])(Object(r["createVNode"])(d,{onOnFinish:e.onPeriod,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"]),[[r["vShow"],!e.canShowReport]]),e.canShowReport?(Object(r["openBlock"])(),Object(r["createBlock"])(j,{key:0},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[i]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",o,[Object(r["createVNode"])(f,{width:e.width,height:e.height,type:e.chartType,options:e.chartOptions,series:e.series,onClick:e.pointSelection},null,8,["width","height","type","options","series","onClick"])])]})),_:1})]})),_:1}),Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{color:"dark"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(O,{slot:"end",size:"large","router-link":"/",color:"success"},{default:Object(r["withCtx"])((function(){return[a]})),_:1})]})),_:1})]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0)],64)}var c=n("2909"),u=n("3835"),d=n("1da1"),p=(n("b64b"),n("d81d"),n("4de4"),n("d3b7"),n("4fad"),n("99af"),n("96cf"),n("8a30")),l=n("0a79"),h=n("ad8d"),f=n("7920"),m=n("44e3"),b=n("2ef0"),O=n("ae27"),g=n.n(O),j=Object(r["defineComponent"])({components:{ApexChart:g.a,IonPage:p["D"],IonHeader:p["q"],IonTitle:p["P"],IonToolbar:p["Q"],IonContent:p["n"],IonFooter:p["o"],IonButton:p["d"],ViewPort:l["a"],HisStandardForm:f["a"]},mixins:[m["a"]],data:function(){return{chartType:"area",height:"100%",width:"100%",canShowReport:!1,report:{},series:[],patientPresent:{},guardianPresent:{},bothPresent:{},chartOptions:{title:{text:"HIV Reception encounters"},yaxis:{title:{text:"Number of clients"},plotAreaHeight:800},xaxis:{type:"datetime"}}}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(d["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.presentLoading();case 2:return n.canShowReport=!0,n.report=new h["b"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),e.next=8,n.report.getPatientVisitTypes();case 8:r=e.sent,n.series=n.buildSeries(r),p["V"].dismiss();case 11:case"end":return e.stop()}}),e)})))()},presentLoading:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["V"].create({message:"Please wait...",backdropDismiss:!1});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e)})))()},pointSelection:function(e,t,n){try{var r=n.dataPointIndex,i=n.seriesIndex,o=i<=0?0:i;this.runTableDrill(this.series[o].raw[r])}catch(e){}},buildSeries:function(e){var t=Object(b["uniq"])(Object.keys(e)),n=function(t,n,r){t in n||(n[t]=[]);var i=Object.entries(e[t]).filter((function(e){var t=Object(u["a"])(e,2),n=(t[0],t[1]);return r(n.patient_present,n.guardian_present)})).map((function(e){var t=Object(u["a"])(e,1),n=t[0];return n}));return n[t]=[].concat(Object(c["a"])(n[t]),Object(c["a"])(i)),n},r=function(e){return t.map((function(t){return[new Date(t).getTime(),e[t].length]}))},i=function(e){return t.map((function(t){return e[t]}))};for(var o in e)n(o,this.patientPresent,(function(e,t){return e&&!t})),n(o,this.guardianPresent,(function(e,t){return!e&&t})),n(o,this.bothPresent,(function(e,t){return e&&t}));return[{name:"Patient present",raw:i(this.patientPresent),data:r(this.patientPresent)},{name:"Guardian present",raw:i(this.guardianPresent),data:r(this.guardianPresent)},{name:"Both patient and guardian present",raw:i(this.bothPresent),data:r(this.bothPresent)}]}}}),v=n("6b0d"),y=n.n(v);const w=y()(j,[["render",s]]);t["default"]=w}}]);
//# sourceMappingURL=chunk-a9f702dc.0f8addbf.js.map
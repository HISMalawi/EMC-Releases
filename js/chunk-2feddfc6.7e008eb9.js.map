{"version":3,"sources":["webpack:///./src/apps/EMC/views/tools/PatientVisitStats.vue?5bcc","webpack:///./src/apps/EMC/Components/charts/LineChart.vue?d45c","webpack:///./src/apps/EMC/Components/charts/LineChart.vue","webpack:///./src/apps/EMC/Components/charts/LineChart.vue?8c3f","webpack:///./src/apps/EMC/views/tools/PatientVisitStats.vue","webpack:///./src/apps/EMC/views/tools/PatientVisitStats.vue?41a3","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue?32df","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue","webpack:///./src/apps/EMC/Components/tables/DrilldownTable.vue?cb4d","webpack:///./src/utils/modal.ts"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_date_range_picker","_resolveComponent","_component_ion_col","_component_line_chart","_component_ion_row","_component_ion_grid","_component_layout","_openBlock","_createBlock","default","_withCtx","_createVNode","size","offset","class","range","onRangeChange","fetchData","_","series","options","onPointSelection","pointSelection","_component_apexchart","_component_ion_card_content","_component_ion_card","style","width","height","type","chartOptions","onClick","e","c","config","$emit","defineComponent","name","props","Array","Object","components","IonCard","IonCardContent","emits","setup","computed","defaults","chart","id","xaxis","tickAmount","labels","show","rotate","title","text","align","noData","verticalAlign","offsetX","offsetY","color","fontSize","fontFamily","key","__exports__","Layout","LineChart","IonGrid","IonRow","IonCol","DateRangePicker","router","useRouter","reactive","ref","sortData","valueGroup","visitDates","map","date","sortSeries","Date","getTime","length","setGroupValue","data","group","comparator","values","entries","filter","v","patient_present","guardian_present","patient","buildSeries","uniq","keys","patientPresent","guardianPresent","bothPresent","guardian","raw","newRange","loader","assign","report","PatientReportService","setStartDate","startDate","setEndDate","endDate","getPatientVisitTypes","value","hide","dataPointIndex","seriesIndex","sIndex","columns","path","label","initialSort","initialSortOrder","rows","Patientservice","findByID","p","push","getArvNumber","getBirthdate","getGender","getCurrentVillage","rowActionButtons","action","row","modal","DrilldownTableVue","console","log","_hoisted_1","_createTextVNode","_component_IonIcon","_component_IonButton","_component_IonButtons","_component_IonTitle","_component_IonToolbar","_component_IonHeader","_component_data_table","_component_IonContent","_component_IonFooter","_component_IonPage","slot","$event","icon","close","_toDisplayString","asyncRows","DataTable","IonButton","IonPage","IonHeader","IonContent","IonToolbar","IonButtons","IonFooter","IonTitle","IonIcon","String","Function","actionButtons","canExportCsv","Boolean","period","component","componentProps","cssClass","backdropDismiss","modalController","create","m","present","onWillDismiss","dismiss"],"mappings":"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","file":"js/chunk-2feddfc6.7e008eb9.js","sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_date_range_picker = _resolveComponent(\"date-range-picker\")\n  const _component_ion_col = _resolveComponent(\"ion-col\")\n  const _component_line_chart = _resolveComponent(\"line-chart\")\n  const _component_ion_row = _resolveComponent(\"ion-row\")\n  const _component_ion_grid = _resolveComponent(\"ion-grid\")\n  const _component_layout = _resolveComponent(\"layout\")\n\n  return (_openBlock(), _createBlock(_component_layout, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_grid, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_ion_row, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_ion_col, {\n                size: \"5\",\n                offset: \"7\",\n                class: \"ion-padding\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_date_range_picker, {\n                    range: _ctx.range,\n                    onRangeChange: _ctx.fetchData\n                  }, null, 8, [\"range\", \"onRangeChange\"])\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_ion_col, { size: \"12\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_line_chart, {\n                    series: _ctx.series,\n                    options: _ctx.options,\n                    onPointSelection: _ctx.pointSelection\n                  }, null, 8, [\"series\", \"options\", \"onPointSelection\"])\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_apexchart = _resolveComponent(\"apexchart\")\n  const _component_ion_card_content = _resolveComponent(\"ion-card-content\")\n  const _component_ion_card = _resolveComponent(\"ion-card\")\n\n  return (_openBlock(), _createBlock(_component_ion_card, { class: \"his-card\" }, {\n    default: _withCtx(() => [\n      _createVNode(_component_ion_card_content, { style: {\"min-height\":\"45vh\"} }, {\n        default: _withCtx(() => [\n          _createVNode(_component_apexchart, {\n            width: \"100%\",\n            height: \"100%\",\n            type: \"line\",\n            options: _ctx.chartOptions,\n            series: _ctx.series,\n            onClick: _cache[1] || (_cache[1] = (e, c, config) => _ctx.$emit('pointSelection', config))\n          }, null, 8, [\"options\", \"series\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { computed, defineComponent, PropType } from \"vue\";\nimport { IonCard, IonCardContent } from \"@ionic/vue\";\n\nexport default defineComponent({\n  name: \"LineChart\",\n  props: {\n    series: {\n      type: Array as PropType<any[]>,\n      default: () => []\n    },\n    options: {\n      type: Object as PropType<Record<string, any>>,\n      default: () => []\n    }\n  },\n  components: {IonCard, IonCardContent },\n  emits: [\"pointSelection\"],\n  setup(props) {\n    const chartOptions = computed(() => {\n      const defaults: Record<string, any> = {\n        chart: {\n          id: \"line-chart\",\n          type: 'line',\n        },\n        xaxis: {\n          type: 'datetime',\n          tickAmount: 30,\n          labels: {\n            show: true,\n            rotate: -75,\n          }\n        },\n        title: {\n          text: 'Line Chart',\n          align: 'left'\n        },\n        noData: {\n          text: \"No Data Available\",\n          align: \"center\",\n          verticalAlign: \"middle\",\n          offsetX: 0,\n          offsetY: 0,\n          style: {\n            color: \"#000000\",\n            fontSize: \"25px\",\n            fontFamily: \"Helvetica\",\n          },\n        },\n      }\n\n      for (const key in props.options) {\n        defaults[key] = { ...defaults[key], ...props.options[key] };\n      }\n      \n      return defaults;\n    });\n\n    return {\n      chartOptions,\n    };\n  },\n});\n","import { render } from \"./LineChart.vue?vue&type=template&id=a3574f94&ts=true\"\nimport script from \"./LineChart.vue?vue&type=script&lang=ts\"\nexport * from \"./LineChart.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { defineComponent, reactive, ref } from \"vue\";\nimport Layout from \"@/apps/EMC/Components/Layout.vue\";\nimport LineChart from \"@/apps/EMC/Components/charts/LineChart.vue\";\nimport { IonGrid, IonRow, IonCol } from \"@ionic/vue\";\nimport { uniq } from \"lodash\";\nimport DateRangePicker, { DateRange } from \"@/apps/EMC/Components/inputs/DateRangePicker.vue\";\nimport { PatientReportService } from \"@/apps/ART/services/reports/patient_report_service\";\nimport { loader } from \"@/utils/loader\";\nimport { RowActionButtonInterface, TableColumnInterface } from \"../../Components/datatable\";\nimport { Patientservice } from \"@/services/patient_service\";\nimport { modal } from \"@/utils/modal\";\nimport DrilldownTableVue from \"../../Components/tables/DrilldownTable.vue\";\nimport { useRouter } from \"vue-router\";\n\nexport default defineComponent({\n  components: {\n    Layout,\n    LineChart,\n    IonGrid,\n    IonRow,\n    IonCol,\n    DateRangePicker,\n  },\n  setup() {\n    const router = useRouter();\n    const range = reactive({} as DateRange);\n    const series = ref([] as any[]);\n\n    const options = {\n      title: {\n        text: \"Patient Vists Statistics\",\n        align: \"left\",\n      },\n    }\n\n    const sortData = (valueGroup: any, visitDates: string[]) => {\n      return visitDates.map((date: string) => valueGroup[date])\n    }\n\n    const sortSeries = (valueGroup: any, visitDates: string[]) => {\n      return visitDates.map((date: string) => [\n        new Date(date).getTime(),\n        valueGroup[date].length\n      ])\n    }\n\n    const setGroupValue = (data: any, date: string, group: Record<string, any>, comparator: any) => {\n      if (!(date in group)) group[date] = []\n      const values = Object.entries(data[date])\n        .filter(([_, v]: any) => comparator(v.patient_present, v.guardian_present))\n        .map(([patient]) => patient)\n\n      group[date] = [...group[date], ...values]\n      return group\n    }\n\n    const buildSeries = (data: any) => {\n      const visitDates: string[] = uniq(Object.keys(data))\n      const patientPresent: Record<string, any> = {};\n      const guardianPresent: Record<string, any> = {};\n      const bothPresent: Record<string, any> = {};\n\n      for (const date in data) {\n        setGroupValue(data, date, patientPresent, (patient: any, guardian: any) => {\n          return patient && !guardian\n        })\n        setGroupValue(data, date, guardianPresent, (patient: any, guardian: any) => {\n          return !patient && guardian\n        })\n        setGroupValue(data, date, bothPresent, (patient: any, guardian: any) => {\n          return patient && guardian\n        })\n      }\n\n      return [\n        {\n          name: 'Patient present',\n          raw: sortData(patientPresent, visitDates),\n          data: sortSeries(patientPresent, visitDates)\n        },\n        {\n          name: 'Guardian present',\n          raw: sortData(guardianPresent, visitDates),\n          data: sortSeries(guardianPresent, visitDates)\n        },\n        {\n          name: 'Both patient and guardian present',\n          raw: sortData(bothPresent, visitDates),\n          data: sortSeries(bothPresent, visitDates)\n        }\n      ]\n    }\n\n    const fetchData = async (newRange: DateRange) => {\n      loader.show();\n      Object.assign(range, newRange);\n      const report = new PatientReportService();\n      report.setStartDate(newRange.startDate);\n      report.setEndDate(newRange.endDate);\n      const data = await report.getPatientVisitTypes();\n      series.value = buildSeries(data);\n      loader.hide();\n    }\n\n    const pointSelection = async (config: any) => {\n      try {\n        loader.show()\n        const { dataPointIndex, seriesIndex } = config\n        const sIndex = seriesIndex <= 0 ? 0 : seriesIndex\n        const columns: TableColumnInterface[] = [\n          { path: \"arv_number\", label: \"ARV Number\", initialSort: true, initialSortOrder: 'asc' },\n          { path: \"birthdate\", label: \"Date of Birth\", date: true },\n          { path: \"gender\", label: \"Gender\" },\n          { path: \"address\", label: \"Address\" }\n        ]\n        const rows: any[] = []\n        for(const patient of series.value[sIndex].raw[dataPointIndex]) {\n          const data = await Patientservice.findByID(patient)\n          const p = new Patientservice(data)\n          rows.push({\n            \"arv_number\": p.getArvNumber(),\n            \"birthdate\": p.getBirthdate(),\n            \"gender\": p.getGender(),\n            \"address\": `${p.getCurrentVillage()}`\n          })\n        }\n        loader.hide()\n\n        const rowActionButtons: RowActionButtonInterface[] = [{ \n          label: \"Select\", \n          default: true, \n          action: (row) => {\n            router.push(`/emc/patient/${row['person_id']}`)\n          } \n        }]\n\n        await modal.show(DrilldownTableVue, {\n          title: `Patient Drilldown`,\n          columns,\n          rows,\n          rowActionButtons,\n        })\n\n      } catch (e) {\n        loader.hide()\n        console.log(e)\n      }\n    }\n\n    return {\n      range,\n      series,\n      options,\n      fetchData,\n      pointSelection,\n    };\n  },\n});\n","import { render } from \"./PatientVisitStats.vue?vue&type=template&id=21f2bb7e&ts=true\"\nimport script from \"./PatientVisitStats.vue?vue&type=script&lang=ts\"\nexport * from \"./PatientVisitStats.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Close\")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_IonIcon = _resolveComponent(\"IonIcon\")\n  const _component_IonButton = _resolveComponent(\"IonButton\")\n  const _component_IonButtons = _resolveComponent(\"IonButtons\")\n  const _component_IonTitle = _resolveComponent(\"IonTitle\")\n  const _component_IonToolbar = _resolveComponent(\"IonToolbar\")\n  const _component_IonHeader = _resolveComponent(\"IonHeader\")\n  const _component_data_table = _resolveComponent(\"data-table\")\n  const _component_IonContent = _resolveComponent(\"IonContent\")\n  const _component_IonFooter = _resolveComponent(\"IonFooter\")\n  const _component_IonPage = _resolveComponent(\"IonPage\")\n\n  return (_openBlock(), _createBlock(_component_IonPage, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_IonHeader, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_IonToolbar, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_IonButtons, { slot: \"end\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_IonButton, {\n                    slot: \"end\",\n                    onClick: _cache[1] || (_cache[1] = $event => (_ctx.modal.hide())),\n                    \"icon-only\": \"\"\n                  }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_IonIcon, { icon: _ctx.close }, null, 8, [\"icon\"])\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_IonTitle, null, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_ctx.title), 1 /* TEXT */)\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_IonContent, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_data_table, {\n            rows: _ctx.rows,\n            \"async-rows\": _ctx.asyncRows,\n            columns: _ctx.columns,\n            \"row-actions-buttons\": _ctx.rowActionButtons,\n            color: \"custom\"\n          }, null, 8, [\"rows\", \"async-rows\", \"columns\", \"row-actions-buttons\"])\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_IonFooter, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_IonButton, {\n            class: \"ion-margin ion-float-end\",\n            onClick: _cache[2] || (_cache[2] = $event => (_ctx.modal.hide()))\n          }, {\n            default: _withCtx(() => [\n              _hoisted_1\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }))\n}","\nimport { defineComponent, PropType } from \"vue\";\nimport { IonButton, IonPage, IonHeader, IonToolbar, IonContent, IonButtons, IonFooter, IonTitle, IonIcon } from \"@ionic/vue\";\nimport DataTable, { ActionButtonInterface, TableColumnInterface, RowActionButtonInterface } from \"@/apps/EMC/Components/datatable\";\nimport { close } from \"ionicons/icons\";\nimport { modal } from \"@/utils/modal\";\n\nexport default defineComponent({\n  name: \"DrilldownTable\",\n  components: {\n    DataTable,\n    IonButton,\n    IonPage,\n    IonHeader,\n    IonContent,\n    IonToolbar,\n    IonButtons,\n    IonFooter,\n    IonTitle,\n    IonIcon,\n  },\n  props: {\n    title: {\n      type: String,\n      default: \"Report\",\n    },\n    rows: {\n      type: Array as PropType<any[]>,\n      default: () => [],\n    },\n    asyncRows: {\n      type: Function as PropType<() => Promise<any[]>>,\n    },\n    columns: {\n      type: Array as PropType<TableColumnInterface[]>,\n      default: () => [],\n    },\n    rowActionButtons: {\n      type: Array as PropType<RowActionButtonInterface[]>,\n      default: () => [],\n    },\n    actionButtons: {\n      type: Array as PropType<ActionButtonInterface[]>,\n      default: () => [],\n    },\n    canExportCsv: {\n      type: Boolean,\n      default: false,\n    },\n    period: {\n      type: String,\n      default: \"\",\n    },\n  },\n  setup(){\n    return {\n      close,\n      modal,\n    }\n  }\n})\n","import { render } from \"./DrilldownTable.vue?vue&type=template&id=dbf40ae6&ts=true\"\nimport script from \"./DrilldownTable.vue?vue&type=script&lang=ts\"\nexport * from \"./DrilldownTable.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { modalController } from \"@ionic/vue\";\n\nexport const modal = {\n  async show(component: any, componentProps?: Record<string, any>, cssClass = 'custom-modal', backdropDismiss = true) {\n    const m = await modalController.create({\n      component,\n      cssClass,\n      backdropDismiss,\n      componentProps,\n    });\n    m.present();\n    const { data } = await m.onWillDismiss();\n    if(data) return data;\n  },\n  async hide() {\n    await modalController.dismiss();\n  }\n}"],"sourceRoot":""}
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65055ecc"],{"6aca":function(e,t,n){"use strict";n("779c")},"779c":function(e,t,n){},fea93:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("his-standard-form"),s=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit,skipSummary:!0},null,8,["cancelDestinationPath","fields","onFinishAction"])]})),_:1})}var i=n("5530"),o=n("1da1"),c=(n("d3b7"),n("3ca3"),n("ddb0"),n("4de4"),n("b0c0"),n("d81d"),n("99af"),n("96cf"),n("9441")),s=n("7365"),u=n("331e"),l=n("c4e4"),d=Object(r["createTextVNode"])("Radiology Examination"),p=Object(r["createTextVNode"])(" Place orders "),m=Object(r["createTextVNode"])(" Close ");function b(e,t,n,a,i,o){var c=Object(r["resolveComponent"])("ion-title"),s=Object(r["resolveComponent"])("ion-toolbar"),u=Object(r["resolveComponent"])("ion-header"),l=Object(r["resolveComponent"])("his-radiology-picker"),b=Object(r["resolveComponent"])("ion-content"),f=Object(r["resolveComponent"])("ion-button"),h=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{class:"his-lg-text"},{default:Object(r["withCtx"])((function(){return[d]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(b,{style:{overflow:"hidden",background:"grey",height:"70vh"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onOnValue:e.onValue},null,8,["onOnValue"])]})),_:1}),Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{onClick:t[1]||(t[1]=function(t){return e.onSubmit()}),size:"large",slot:"end",disabled:0===e.emitedSelectedOptions.length},{default:Object(r["withCtx"])((function(){return[p]})),_:1},8,["disabled"]),Object(r["createVNode"])(f,{onClick:t[2]||(t[2]=function(t){return e.closeModal()}),size:"large",slot:"start",color:"danger"},{default:Object(r["withCtx"])((function(){return[m]})),_:1})]})),_:1})]})),_:1})],64)}var f=n("8a30"),h=n("97ed"),g=n("adc7"),v=n("66fd"),O=n("2ef0"),x=Object(r["defineComponent"])({name:"Modal",components:{IonButton:f["d"],IonContent:f["n"],IonHeader:f["q"],IonTitle:f["P"],IonToolbar:f["Q"],IonFooter:f["o"],HisRadiologyPicker:g["a"]},mixins:[s["a"]],data:function(){return{radiologyService:{},isPacsEnabled:!1,emitedSelectedOptions:{}}},watch:{ready:{handler:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return t.radiologyService=new h["a"](t.patientID,t.providerID),n.next=4,v["b"].isPACsEnabled();case 4:t.isPacsEnabled=n.sent;case 5:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{onValue:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.emitedSelectedOptions=e;case 1:case"end":return n.stop()}}),n)})))()},getSelected:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.emitedSelectedOptions.map(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=i["a"],t.t1=i["a"],t.t2={},t.next=5,e.radiologyService.buildValueCoded("Radiology Orders",n.other.parent);case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.next=10,e.radiologyService.buildValueCodedFromConceptId(n.other.parent,n.other.concept_id);case 10:return t.t6=t.sent,t.t7={child:t.t6},t.abrupt("return",(0,t.t0)(t.t4,t.t5,t.t7));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})))()},onSubmit:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(O["isEmpty"])(e.emitedSelectedOptions)){t.next=27;break}return e.closeModal(),t.next=4,e.getSelected();case 4:return n=t.sent,t.next=7,Promise.all(n);case 7:return n=t.sent,t.next=10,e.radiologyService.createEncounter();case 10:return t.next=12,e.radiologyService.obsObj(n);case 12:return r=t.sent,t.next=15,e.radiologyService.saveObservationList(r);case 15:return a=t.sent,t.next=18,e.radiologyService.printOrders(n,e.patient);case 18:if(!e.isPacsEnabled){t.next=27;break}return t.prev=19,t.next=22,e.radiologyService.submitToPacs(a,e.patient);case 22:t.next=27;break;case 24:t.prev=24,t.t0=t["catch"](19),console.log(t.t0);case 27:case"end":return t.stop()}}),t,null,[[19,24]])})))()},closeModal:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["X"].dismiss([]);case 2:case"end":return e.stop()}}),e)})))()}}}),w=n("6b0d"),C=n.n(w);const j=C()(x,[["render",b]]);var R=j,S=n("2706"),k=n("d95e"),y=n("7957"),T=n("ec2a"),P=n("9283"),_=Object(r["defineComponent"])({components:{HisStandardForm:c["a"],IonPage:f["D"]},mixins:[s["a"]],data:function(){return{complaintsService:{},todaysDate:y["a"].getSessionDate(),presentingComplaints:"",isPacsEnabled:!1,radiologyBtnName:"Radiology Order",hasTriageComplaints:!1}},watch:{ready:{handler:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=9;break}return t.complaintsService=new u["a"](t.patientID,t.providerID),n.next=4,v["b"].isPACsEnabled();case 4:return t.isPacsEnabled=n.sent,n.next=7,t.getTriagePresentingComplaints();case 7:t.hasTriageComplaints=n.sent,t.fields=t.getFields();case 9:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{onSubmit:function(e,t){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.complaints);case 2:return r=e.sent,e.next=5,n.complaintsService.createEncounter();case 5:return e.next=7,n.complaintsService.saveObservationList(r);case 7:n.nextTask();case 8:case"end":return e.stop()}}),e)})))()},launchOrderSelection:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["X"].create({component:l["a"],backdropDismiss:!1,cssClass:"large-modal"});case 2:return t=e.sent,t.present(),e.next=6,t.onDidDismiss();case 6:case"end":return e.stop()}}),e)})))()},launchRadiologyOrderSelection:function(){return Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["X"].create({component:R,backdropDismiss:!1,cssClass:"large-modal"});case 2:return t=e.sent,t.present(),e.next=6,t.onDidDismiss();case 6:case"end":return e.stop()}}),e)})))()},getTriagePresentingComplaints:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.complaintsService.fetchLatestTriageEncounter();case 2:if(n=t.sent,n.length>0){t.next=5;break}return t.abrupt("return",!1);case 5:return t.next=7,T["a"].getEncounters(e.patientID,e.todaysDate);case 7:if(r=t.sent,a=r.filter((function(e){return"TRIAGE PRESENTING COMPLAINTS"==e.type.name&&P["b"].toStandardHisFormat(e.encounter_datetime)==y["a"].getSessionDate()})),a.length>0){t.next=11;break}return t.abrupt("return",!1);case 11:return e.presentingComplaints=a[0].observations,t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t)})))()},buildResults:function(){var e=["Group","Presenting complaints"],t="",n=this.presentingComplaints.map((function(e){if(null!=e.obs_group_id)return[t,e.value_text];t=e.value_text}));return n=n.filter((function(e){return void 0!=e})),this.presentingComplaints=n,[{label:"",value:"",other:{columns:e,rows:n}}]},getFields:function(){var e=this;return[{id:"triage_complaints",helpText:"Triaging Complaints",condition:function(){return e.hasTriageComplaints},type:k["b"].TT_TABLE_VIEWER,options:function(t){return e.buildResults()},config:{hiddenFooterBtns:["Clear"]}},{id:"complaints",helpText:"Presenting Complaints",type:k["b"].TT_COMPLAINTS_PICKER,validation:function(e){return S["a"].required(e)},computedValue:function(t){return t.map(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=i["a"],t.t1=i["a"],t.t2={},t.next=5,e.complaintsService.buildValueCoded("Presenting complaint",n.other.parent);case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.next=10,e.complaintsService.buildValueCodedFromConceptId(n.other.parent,n.other.concept_id);case 10:return t.t6=t.sent,t.t7={child:t.t6},t.abrupt("return",(0,t.t0)(t.t4,t.t5,t.t7));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},config:{hiddenFooterBtns:[this.showRadiologyOdersBtn(),this.disableBackBtn()],footerBtns:[{name:"Lab Order",size:"large",slot:"end",color:"primary",visible:!0,onClick:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.launchOrderSelection();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),visibleOnStateChange:function(e){return 1===e.index}},{name:this.radiologyBtnName,size:"large",slot:"end",color:"primary",visible:!0,onClick:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.launchRadiologyOrderSelection();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),visibleOnStateChange:function(e){return 1===e.index}}]}},{id:"all_presenting_complaints",helpText:"Summary",condition:function(){return e.presentingComplaints.length>0},type:k["b"].TT_SUMMARY,options:function(t,n){return e.buildSummaryResults(t)},config:{hiddenFooterBtns:["Clear"]}}]},showRadiologyOdersBtn:function(){return this.isPacsEnabled?"":this.radiologyBtnName},buildSummaryResults:function(e){var t=e.complaints.map((function(e){return{label:"OPD Complaints",value:e.label}})),n=this.presentingComplaints.map((function(e){return{label:"Triaging Complaints",value:e[1]}}));return t.concat(n)},disableBackBtn:function(){return this.hasTriageComplaints?"":"Back"}}});n("6aca");const V=C()(_,[["render",a]]);t["default"]=V}}]);
//# sourceMappingURL=chunk-65055ecc.673956fb.js.map
{"version":3,"sources":["webpack:///./node_modules/cache-loader/dist/cjs.js","webpack:///./src/apps/ART/views/reports/ReportMixin.vue","webpack:///./src/apps/ART/services/reports/art_report_service.ts","webpack:///./node_modules/vue-loader-v16/dist/templateLoader.js","webpack:///./src/components/Forms/HisStandardForm.vue","webpack:///./node_modules/eslint-loader/index.js","webpack:///./src/apps/ART/views/reports/inconsistencies/PatientVisitStats.vue"],"names":["defineComponent","data","fields","report","reportReady","period","startDate","endDate","customFileName","drillDownCache","methods","formatGender","gender","toLowerCase","toDate","date","HisDate","toStandardHisDisplayFormat","sortByArvNumber","attr","sort","a","b","getArvInt","e","console","error","arv","prfx","art","arvNumStr","split","arvNumInt","parseInt","tdARV","params","table","td","sortValue","confirmPatient","patient","$router","push","title","columns","asyncRows","canExport","modal","modalController","create","component","DrilldownTable","cssClass","componentProps","showFilters","rowsPerPage","paginated","showReportStamp","footerColor","onFinish","dismiss","present","rows","rowParser","getDefaultDrillDownTable","thTxt","ARV_NUM_INDEX","t","tableRows","map","id","index","isArray","defaultRow","num","key","oldIndex","rest","Patientservice","findByID","row","getArvNumber","getGender","tdDate","getBirthdate","toString","tdBtn","path","Promise","all","runTableDrill","drilldownData","drill","values","length","tdLink","getQuaterOptions","quarters","ArtReportService","getReportQuarters","q","label","name","value","start","other","getDateDurationFields","useQuarter","setCustomQuarterPeriod","maxQuarter","maxDate","Service","getSessionDate","minDate","helpText","type","FieldType","TT_SELECT","condition","validation","val","Validation","required","options","items","generateDateFields","f","quarter","estimation","allowUnknown","computeValue","unload","d","s","c","end_date","_","start_date","__exports__","programID","getProgramID","this","url","getJson","buildRequest","config","payload","year","daysInMonth","m","dayjs","startMonth","endMonth","qtr","end","qtrBounds","getQuarterBounds","getFullYear","Date","qtrName","maxQuarters","qtrs","currDate","currYear","curYr","getMonth","getDate","currentQtr","getQtrByDate","i","buildQtrObj","render","_ctx","_cache","$props","$setup","$data","$options","_openBlock","_createBlock","_resolveDynamicComponent","formType","skipSummary","activeField","cancelDestinationPath","onOnFinish","onFinishAction","onOnIndex","onIndex","components","TouchScreenForm","emits","props","Function","Boolean","default","String","Object","formData","computedData","$emit","AGE_GROUPS","PatientReportService","constructor","super","getBookedAppointments","getViralLoadResults","range","getReport","getOtherOutcome","outcome","getPatientVisitTypes","getClientsDueForVl","getClientRentention","getExternalConsultationClients","getMissedAppointments","getPregnantWomen","getArchivingCandidates","_hoisted_1","_createTextVNode","_hoisted_2","class","_hoisted_3","_component_his_standard_form","_resolveComponent","_component_ion_title","_component_ion_toolbar","_component_ion_header","_component_ApexChart","_component_view_port","_component_ion_content","_component_ion_button","_component_ion_footer","_component_ion_page","_Fragment","_withDirectives","_createVNode","onPeriod","_vShow","canShowReport","_withCtx","width","height","chartType","chartOptions","series","onClick","pointSelection","color","slot","size","_createCommentVNode","ApexChart","IonPage","IonHeader","IonTitle","IonToolbar","IonContent","IonFooter","IonButton","ViewPort","HisStandardForm","mixins","ReportMixin","patientPresent","guardianPresent","bothPresent","text","yaxis","plotAreaHeight","xaxis","created","conf","presentLoading","setStartDate","setEndDate","res","buildSeries","loadingController","loading","message","backdropDismiss","dataPointIndex","seriesIndex","sIndex","raw","visitDates","uniq","keys","setValueGroup","group","comparator","entries","filter","v","patient_present","guardian_present","sortSeries","valueGroup","getTime","sortData","guardian"],"mappings":"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","file":"js/chunk-373eba62.3cf21a81.js","sourcesContent":["\nimport { defineComponent } from 'vue'\nimport {\n    IonPage,\n    IonHeader,\n    IonTitle,\n    IonToolbar,\n    IonContent,\n    IonFooter,\n    IonButton,\n    loadingController\n} from \"@ionic/vue\"\nimport ViewPort from \"@/components/DataViews/ViewPort.vue\"\nimport { PatientReportService } from \"@/apps/ART/services/reports/patient_report_service\"\nimport HisStandardForm from \"@/components/Forms/HisStandardForm.vue\";\nimport ReportMixin from \"@/apps/ART/views/reports/ReportMixin.vue\"\nimport { uniq } from 'lodash';\nimport ApexChart from \"vue3-apexcharts\";\n\nexport default defineComponent({\n    components: {\n        ApexChart,\n        IonPage,\n        IonHeader,\n        IonTitle,\n        IonToolbar,\n        IonContent,\n        IonFooter,\n        IonButton,\n        ViewPort,\n        HisStandardForm\n    },\n    mixins: [ReportMixin],\n    data: () => ({\n        chartType: 'area',\n        height: '100%',\n        width: '100%',\n        canShowReport: false,\n        report: {} as any,\n        series: [] as any,\n        patientPresent: {} as any,\n        guardianPresent: {} as any,\n        bothPresent: {} as any,\n        chartOptions: {\n            title : {\n                text: \"HIV Reception encounters\"\n            },\n            yaxis: {\n                title: { \n                    text: \"Number of clients\"\n                },\n                plotAreaHeight: 800,\n            },\n            xaxis: {\n                type: 'datetime'\n            }\n        } as any\n    }),\n    created() {\n        this.fields = this.getDateDurationFields()\n    },\n    methods: {\n        async onPeriod(_: any, conf: any) {\n            await this.presentLoading()\n            this.canShowReport = true\n            this.report = new PatientReportService()\n            this.report.setStartDate(conf.start_date)\n            this.report.setEndDate(conf.end_date)\n            const res = await this.report.getPatientVisitTypes()\n            this.series = this.buildSeries(res)\n            loadingController.dismiss()\n        },\n        async presentLoading() {\n            const loading = await loadingController\n                .create({\n                    message: 'Please wait...',\n                    backdropDismiss: false\n                })\n            await loading.present()\n        },\n        pointSelection(e: any, c: any, config: any) {\n            try {\n                const { dataPointIndex, seriesIndex } = config\n                const sIndex = seriesIndex <= 0 ? 0 : seriesIndex\n                this.runTableDrill(this.series[sIndex].raw[dataPointIndex])\n            } catch (e) {\n                //TODO\n            }\n        },\n        buildSeries(data: any) {\n            const visitDates: string[] = uniq(Object.keys(data))\n            const setValueGroup = (\n                date: string,\n                group: Record<string, any>,\n                comparator: any) => {\n\n                if (!(date in group)) group[date] = []\n\n                const values = Object.entries(data[date])\n                    .filter(([_, v]: any) => comparator(\n                        v.patient_present,\n                        v.guardian_present\n                    ))\n                    .map(([patient]) => patient)\n\n                group[date] = [...group[date], ...values]\n                return group\n            }\n\n            const sortSeries = (valueGroup: any) => {\n                return visitDates.map((date: string) => [\n                    new Date(date).getTime(), \n                    valueGroup[date].length\n                ])\n            }\n\n            const sortData = (valueGroup: any) => visitDates.map((date: string) => valueGroup[date])\n    \n            for(const date in data) {\n                setValueGroup(date, this.patientPresent, (patient: any, guardian: any) => {\n                    return patient && !guardian\n                })\n                setValueGroup(date, this.guardianPresent, (patient: any, guardian: any) => {\n                    return !patient && guardian\n                })\n                setValueGroup(date, this.bothPresent, (patient: any, guardian: any) => {\n                    return patient && guardian\n                })\n            }\n\n            return [\n                {\n                    name: 'Patient present',\n                    raw: sortData(this.patientPresent),\n                    data: sortSeries(this.patientPresent)\n                },\n                {\n                    name: 'Guardian present',\n                    raw: sortData(this.guardianPresent),\n                    data: sortSeries(this.guardianPresent)\n                },\n                {\n                    name: 'Both patient and guardian present',\n                    raw: sortData(this.bothPresent),\n                    data: sortSeries(this.bothPresent)\n                }\n            ]\n        }\n    }\n})\n","import script from \"./ReportMixin.vue?vue&type=script&lang=ts\"\nexport * from \"./ReportMixin.vue?vue&type=script&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { Service } from \"@/services/service\";\nimport HisDate from \"@/utils/Date\"\nimport dayjs from \"dayjs\";\n\nexport interface QuarterInterface {\n    name: string;\n    start: string;\n    end: string;\n}\n\nexport class ArtReportService extends Service {\n    programID: number;\n    startDate: string;\n    endDate: string;\n    date: string;\n    quarter: string\n    constructor() {\n        super()\n        this.endDate = ''\n        this.startDate = ''\n        this.quarter = ''\n        this.date = Service.getSessionDate()\n        this.programID = Service.getProgramID()\n    }\n\n    getDateIntervalPeriod() {\n        return `${HisDate.toStandardHisDisplayFormat(this.startDate)} - ${HisDate.toStandardHisDisplayFormat(this.endDate)}`\n    }\n\n    setStartDate(startDate: string) {\n        this.startDate = startDate\n    }  \n\n    setEndDate(endDate: string) {\n        this.endDate = endDate\n    }\n\n    setQuarter(quarter: string) {\n        this.quarter = quarter\n    }\n\n    getReport(url: string, params={}) {\n        return Service.getJson(url, this.buildRequest(params))\n    }\n\n    buildRequest(config: Record<string, any> = {}) {\n        const payload: any = {'date': this.date, 'program_id': this.programID}\n        if (this.startDate && this.endDate) {\n            payload['start_date'] = this.startDate\n            payload['end_date'] = this.endDate\n        }\n        if (this.quarter) {\n            payload['quarter'] = this.quarter\n        }\n        return { ...payload, ...config }\n    }\n\n    static getQuarterBounds(year: number) {\n        const daysInMonth = (m: string) => dayjs(`${year}-${m}-01`).daysInMonth()\n        const startMonth = (m: string) => `${year}-${m}-01 00:00`\n        const endMonth = (m: string) => `${year}-${m}-${daysInMonth(m)} 00:00`\n\n        return {\n            'Q1': {\n                qtr: 1,\n                start: startMonth('01'),\n                end: endMonth('03')\n            },\n            'Q2': {\n                qtr: 2,\n                start: startMonth('04'),\n                end: endMonth('06')\n            },\n            'Q3': {\n                qtr: 3,\n                start: startMonth('07'),\n                end: endMonth('09')\n            },\n            'Q4': {\n                qtr: 4,\n                start: startMonth('10'),\n                end: endMonth('12')\n            }\n        }\n    }\n\n    static getQtrByDate(date: Date) {\n        const qtrBounds: any = this.getQuarterBounds(date.getFullYear())\n        for(const qtr in qtrBounds) {\n            const { start, end } = qtrBounds[qtr]\n            if (date >= new Date(start) && date <= new Date(end)) {\n                return qtrBounds[qtr]\n            }\n        }\n        return null\n    }\n\n    static buildQtrObj(qtrName: string, year: number): QuarterInterface {\n        const qtrBounds: any = this.getQuarterBounds(year)\n        const { start, end } = qtrBounds[qtrName]\n        return {\n            start,\n            end,\n            name: `${qtrName} ${year}`,\n        }\n    }\n\n    static getReportQuarters(maxQuarters=5) {\n        const qtrs: QuarterInterface[] = [];\n        let currDate = new Date();\n        let currYear = currDate.getFullYear();\n        const curYr = currYear\n        \n        currDate = new Date(`${curYr}-${currDate.getMonth() + 1}-${currDate.getDate()} 00:00`);\n        const currentQtr = this.getQtrByDate(currDate);\n        let qtr = currentQtr.qtr;\n        let i = 0;\n\n        if (qtr === 4) qtrs.push(this.buildQtrObj('Q1', currYear + 1))\n\n        while (i < maxQuarters) {\n          // Add following quarter\n          if (i === 0 && qtr < 4) qtrs.push(this.buildQtrObj(`Q${qtr + 1}`, currYear))\n\n          qtrs.push(this.buildQtrObj(`Q${qtr}`, currYear))\n          qtr = qtr > 0 ? (qtr -= 1) : qtr;\n          currYear = qtr == 0 ? currYear - 1 : currYear;\n          qtr =  qtr == 0 ? ( qtr += 4) : qtr;\n          i++;\n        }\n        return qtrs;\n    }\n}\n","import { resolveComponent as _resolveComponent, vShow as _vShow, createVNode as _createVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\" Patient visit report \")\nconst _hoisted_2 = { class: \"view-port-content\" }\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" Finish \")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_ApexChart = _resolveComponent(\"ApexChart\")\n  const _component_view_port = _resolveComponent(\"view-port\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _withDirectives(_createVNode(_component_his_standard_form, {\n      onOnFinish: _ctx.onPeriod,\n      skipSummary: true,\n      fields: _ctx.fields\n    }, null, 8, [\"onOnFinish\", \"fields\"]), [\n      [_vShow, !_ctx.canShowReport]\n    ]),\n    (_ctx.canShowReport)\n      ? (_openBlock(), _createBlock(_component_ion_page, { key: 0 }, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_header, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_toolbar, null, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_title, null, {\n                      default: _withCtx(() => [\n                        _hoisted_1\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_content, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_view_port, null, {\n                  default: _withCtx(() => [\n                    _createVNode(\"div\", _hoisted_2, [\n                      _createVNode(_component_ApexChart, {\n                        width: _ctx.width,\n                        height: _ctx.height,\n                        type: _ctx.chartType,\n                        options: _ctx.chartOptions,\n                        series: _ctx.series,\n                        onClick: _ctx.pointSelection\n                      }, null, 8, [\"width\", \"height\", \"type\", \"options\", \"series\", \"onClick\"])\n                    ])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_ion_footer, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_ion_toolbar, { color: \"dark\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_ion_button, {\n                      slot: \"end\",\n                      size: \"large\",\n                      \"router-link\": \"/\",\n                      color: \"success\"\n                    }, {\n                      default: _withCtx(() => [\n                        _hoisted_3\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }))\n      : _createCommentVNode(\"\", true)\n  ], 64 /* STABLE_FRAGMENT */))\n}","import { render } from \"./HisStandardForm.vue?vue&type=template&id=6daa0375&ts=true\"\nimport script from \"./HisStandardForm.vue?vue&type=script&lang=ts\"\nexport * from \"./HisStandardForm.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { ArtReportService } from \"./art_report_service\";\n\nexport const AGE_GROUPS = [\n    '<1 year',\n    '1-4 years', \n    '5-9 years', \n    '10-14 years', \n    '15-19 years', \n    '20-24 years', \n    '25-29 years', \n    '30-34 years', \n    '35-39 years', \n    '40-44 years', \n    '45-49 years', \n    '50-54 years',\n    '55-59 years',\n    '60-64 years',\n    '65-69 years',\n    '70-74 years',\n    '75-79 years',\n    '80-84 years',\n    '85-89 years',\n    '90 plus years'\n]\n\nexport class PatientReportService extends ArtReportService {\n    constructor() {\n        super()\n    }\n    \n    getBookedAppointments(date: string) {\n        return ArtReportService.getJson(`programs/${this.programID}/scheduled_appointments`, { date })\n    }\n\n    getViralLoadResults(range: string) {\n        return this.getReport(`/programs/${this.programID}/reports/high_vl_patients`, { range })\n    }\n\n    getOtherOutcome(outcome: string) {\n        return this.getReport('patient_outcome_list', { outcome })\n    }\n\n    getPatientVisitTypes() {\n        return this.getReport('patient_visit_types')\n    }\n\n    getClientsDueForVl() {\n        return this.getReport('clients_due_vl')\n    }\n\n    getClientRentention() {\n        return this.getReport(`/programs/${this.programID}/reports/retention`)\n    }\n\n    getExternalConsultationClients() {\n        return this.getReport(`${this.programID}/external_consultation_clients`)\n    }\n\n    getMissedAppointments() {\n        return this.getReport('missed_appointments')\n    }\n\n    getPregnantWomen() {\n        return this.getReport(`/programs/${this.programID}/reports/pregnant_patients`)\n    }\n\n    getArchivingCandidates() {\n        return ArtReportService.getJson(`programs/${this.programID}/reports/archiving_candidates`, { \n            'start_date': this.date\n        })\n    }\n}\n","import { render } from \"./PatientVisitStats.vue?vue&type=template&id=2fbacc90&ts=true\"\nimport script from \"./PatientVisitStats.vue?vue&type=script&lang=ts\"\nexport * from \"./PatientVisitStats.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/andrew-dev/Projects/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}
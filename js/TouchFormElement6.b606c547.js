(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["TouchFormElement6","TouchFormElement38","TouchFormElement8"],{"05d5":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a=Object(c["withScopeId"])("data-v-561de733");Object(c["pushScopeId"])("data-v-561de733");var r={class:"view-port-content"},o={key:0,class:"his-card history"},i={class:"his-table"},u=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",null," Medication"),Object(c["createVNode"])("th",null," Date"),Object(c["createVNode"])("th",null," Amount dispensed ")],-1),s={key:1,class:"prescription-tab"},l={class:"prescription-table-section his-card"},d={class:"his-table"},b=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",null," Medication"),Object(c["createVNode"])("th",null," Amount in stock"),Object(c["createVNode"])("th",null," Amount needed"),Object(c["createVNode"])("th",null," Amount dispensed "),Object(c["createVNode"])("th",null," Reset ")],-1),p={class:"barcode-section"};Object(c["popScopeId"])();var f=a((function(e,t,n,f,O,j){var m=Object(c["resolveComponent"])("nav-button"),h=Object(c["resolveComponent"])("ion-col"),v=Object(c["resolveComponent"])("ion-input"),V=Object(c["resolveComponent"])("reset-button"),k=Object(c["resolveComponent"])("barcode"),N=Object(c["resolveComponent"])("ion-row"),g=Object(c["resolveComponent"])("view-port");return Object(c["openBlock"])(),Object(c["createBlock"])(g,null,{default:a((function(){return[Object(c["createVNode"])("div",r,[Object(c["createVNode"])(N,null,{default:a((function(){return[Object(c["createVNode"])(h,{size:"2"},{default:a((function(){return[Object(c["createVNode"])(m,{onClick:t[1]||(t[1]=function(t){return e.tab="prescribe"}),isActive:"prescribe"===e.tab,image:"prescription/rx",label:"Prescribed"},null,8,["isActive"]),Object(c["createVNode"])(m,{onClick:t[2]||(t[2]=function(t){return e.tab="history"}),isActive:"history"===e.tab,image:"prescription/history",label:"History"},null,8,["isActive"])]})),_:1}),Object(c["createVNode"])(h,{size:"10"},{default:a((function(){return["history"===e.tab?(Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("table",i,[u,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.medicationHistory,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:t},[Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.medication),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.date),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.amount),1)])})),128))])])):Object(c["createCommentVNode"])("",!0),"prescribe"===e.tab?(Object(c["openBlock"])(),Object(c["createBlock"])("div",s,[Object(c["createVNode"])("div",l,[Object(c["createVNode"])("table",d,[b,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.listData,(function(t,n){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:n},[Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(t.label),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.isStockManagementEnabled&&t.other.available_stock?t.other.available_stock:"-"),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(t.other.amount_needed),1),Object(c["createVNode"])("td",null,[Object(c["createVNode"])(v,{disabled:t.value>0,value:t.value,onClick:function(n){return t.value<=0?e.launchDispenser(t):null},class:"dosage-input"},null,8,["disabled","value","onClick"])]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])(V,{disabled:t.value<=0,onClick:function(n){return t.value>0?e.onReset(t):null}},null,8,["disabled","onClick"])])])})),128))])]),Object(c["createVNode"])("div",p,[Object(c["createVNode"])(k,{onOnScan:e.onScan},null,8,["onOnScan"])])])):Object(c["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])]})),_:1})})),O=n("5530"),j=n("3835"),m=n("1da1"),h=(n("ac1f"),n("1276"),n("d81d"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("96cf"),n("0a79")),v=n("8a30"),V=n("efaf"),k=n("c850"),N=n("7653"),g=Object(c["withScopeId"])("data-v-7729d4c8");Object(c["pushScopeId"])("data-v-7729d4c8");var y={colspan:"6"},w=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",null,"Total tab(s) needed "),Object(c["createVNode"])("th",{colspan:"2"}," Available stock "),Object(c["createVNode"])("th",{colspan:"2"}," Dispensed "),Object(c["createVNode"])("th")],-1),x=Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th"),Object(c["createVNode"])("th",null," Pack size "),Object(c["createVNode"])("th",null," Packs "),Object(c["createVNode"])("th",null," Total Tab(s)"),Object(c["createVNode"])("th",null," Packs "),Object(c["createVNode"])("th")],-1),C={class:"btn-list"},S=Object(c["createTextVNode"])(" + "),B=Object(c["createTextVNode"])(" - "),D=Object(c["createTextVNode"])(" Close "),I=Object(c["createTextVNode"])(" Dispense ");Object(c["popScopeId"])();var _=g((function(e,t,n,a,r,o){var i=Object(c["resolveComponent"])("ion-button"),u=Object(c["resolveComponent"])("ion-content"),s=Object(c["resolveComponent"])("ion-toolbar"),l=Object(c["resolveComponent"])("ion-footer");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(u,null,{default:g((function(){return[Object(c["createVNode"])("table",null,[Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",y,Object(c["toDisplayString"])(e.drugName),1)]),w,x]),Object(c["createVNode"])("tbody",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("td",{rowspan:e.amountNeededRowSpan},Object(c["toDisplayString"])(e.tabsNeeded)+" tab(s) ",9,["rowspan"])]),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(e.listData,(function(t,n){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:n},[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(t,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("td",{key:t,class:t>=2?"input-field":"his-md-text"},Object(c["toDisplayString"])(e),3)})),128)),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("ul",C,[Object(c["createVNode"])("li",null,[Object(c["createVNode"])(i,{onClick:function(t){return e.incrementAmount(n)},class:"dispense-btn",size:"large"},{default:g((function(){return[S]})),_:1},8,["onClick"])]),Object(c["createVNode"])("li",null,[Object(c["createVNode"])(i,{onClick:function(t){return e.decrementAmount(n)},class:"dispense-btn",size:"large"},{default:g((function(){return[B]})),_:1},8,["onClick"])])])])])})),128))])])]})),_:1}),Object(c["createVNode"])(l,null,{default:g((function(){return[Object(c["createVNode"])(s,null,{default:g((function(){return[Object(c["createVNode"])(i,{onClick:e.onClose,color:"danger",size:"large",slot:"end"},{default:g((function(){return[D]})),_:1},8,["onClick"]),Object(c["createVNode"])(i,{onClick:t[1]||(t[1]=function(t){return e.onDispense(e.dispensedValues)}),disabled:e.totalTabs<=0,color:"success",size:"large",slot:"end"},{default:g((function(){return[I]})),_:1},8,["disabled"])]})),_:1})]})),_:1})],64)})),R=n("2909"),T=(n("4de4"),Object(c["defineComponent"])({data:function(){return{listData:[],tabsIndex:2,packsIndex:3}},props:{drugName:{type:String,required:!0},tabsNeeded:{type:String,required:!0},items:{type:Array,required:!0},onDispense:{type:Function,required:!0}},computed:{dispensedValues:function(){var e=this;return this.listData.filter((function(t){return t[e.tabsIndex]>0})).map((function(t){return[t[e.tabsIndex],t[e.packsIndex]]}))},amountNeededRowSpan:function(){return this.listData.length+1}},watch:{items:{handler:function(e){e&&(this.listData=Object(R["a"])(e))},deep:!0,immediate:!0}},methods:{onClose:function(){return Object(m["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v["X"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()},incrementAmount:function(e){var t=Object(j["a"])(this.listData[e],4),n=t[0],c=(t[1],t[2]),a=t[3],r=n+c,o=a+1;this.listData[e][2]=r,this.listData[e][3]=o},decrementAmount:function(e){var t=Object(j["a"])(this.listData[e],4),n=t[0],c=(t[1],t[2]),a=t[3],r=a-1;if(r>=0){var o=c-n;this.listData[e][2]=o,this.listData[e][3]=r}}}})),A=(n("1b4f"),n("6b0d")),F=n.n(A);const q=F()(T,[["render",_],["__scopeId","data-v-7729d4c8"]]);var z=q,E=n("51c8"),H=n("2ef0"),M=n("b5e4"),P=Object(c["defineComponent"])({components:{ViewPort:h["a"],Barcode:V["a"],NavButton:k["a"],ResetButton:N["a"],IonRow:v["H"],IonCol:v["m"]},mixins:[E["default"]],data:function(){return{tab:"prescribe",listData:[],medicationHistory:[],isStockManagementEnabled:!1}},mounted:function(){this.init()},activated:function(){this.init()},watch:{tab:{handler:function(e){var t=this;"history"===e&&Object(H["isEmpty"])(this.medicationHistory)&&"function"===typeof this.config.medicationHistory&&this.config.medicationHistory().then((function(e){e&&(t.medicationHistory=e)})).catch((function(e){Object(M["c"])("".concat(e))}))}}},methods:{init:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){var n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),"function"===typeof(null===(n=e.config)||void 0===n?void 0:n.isDrugManagementEnabled)&&(e.isStockManagementEnabled=null===(c=e.config)||void 0===c?void 0:c.isDrugManagementEnabled()),t.next=4,e.options(e.fdata);case 4:e.listData=t.sent;case 5:case"end":return t.stop()}}),t)})))()},onScan:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var c,a,r,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=e.split("-"),a=Object(j["a"])(c,2),r=a[0],o=a[1],i=t.listData.map(function(){var e=Object(m["a"])(regeneratorRuntime.mark((function e(n){var c,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.other.drug_id!==parseInt(r)){e.next=7;break}return c=parseInt(n.value.toString()),a=parseInt(o),e.next=5,t.updateOnValue(n,a,[],!0);case 5:i=e.sent,i&&(n.value=a+c);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.next=4,Promise.all(i);case 4:t.listData=n.sent;case 5:case"end":return n.stop()}}),n)})))()},onReset:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.updateOnValue(e,-1);case 2:case"end":return n.stop()}}),n)})))()},updateOnValue:function(e,t){var n=arguments,c=this;return Object(m["a"])(regeneratorRuntime.mark((function a(){var r,o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=n.length>2&&void 0!==n[2]?n[2]:[],o=n.length>3&&void 0!==n[3]&&n[3],!c.onValue){a.next=8;break}return a.next=5,c.onValue({label:e.label,other:Object(O["a"])({dispenses:r},e.other),value:t},o);case 5:if(i=a.sent,i){a.next=8;break}return a.abrupt("return",!1);case 8:if(e.value=t<0?0:t,c.$emit("onValue",e),!c.onValueUpdate){a.next=14;break}return a.next=13,c.onValueUpdate(e,c.listData);case 13:c.listData=a.sent;case 14:return a.abrupt("return",!0);case 15:case"end":return a.stop()}}),a)})))()},launchDispenser:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,v["X"].create({component:z,backdropDismiss:!1,cssClass:"custom-modal",componentProps:{drugName:e.label,tabsNeeded:e.other.amount_needed,items:e.other.pack_sizes,onDispense:function(){var n=Object(m["a"])(regeneratorRuntime.mark((function n(c){var a,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=0,r=c.reduce((function(e,t){return e+t[a]}),0),n.next=4,t.updateOnValue(e,r,c);case 4:if(o=n.sent,!o){n.next=8;break}return n.next=8,v["X"].dismiss({});case 8:case"end":return n.stop()}}),n)})));function c(e){return n.apply(this,arguments)}return c}()}});case 2:c=n.sent,c.present();case 4:case"end":return n.stop()}}),n)})))()}}});n("3871");const $=F()(P,[["render",f],["__scopeId","data-v-561de733"]]);t["default"]=$},"0a79":function(e,t,n){"use strict";var c=n("7a23"),a=Object(c["withScopeId"])("data-v-7c293cad"),r=a((function(e,t,n,a,r,o){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{id:"view-port",class:e.showFull?"":"half"},[Object(c["renderSlot"])(e.$slots,"default")],2)})),o=Object(c["defineComponent"])({name:"ViewPort",props:{showFull:{type:Boolean,default:function(){return!0}}}}),i=(n("a4d3f"),n("6b0d")),u=n.n(i);const s=u()(o,[["render",r],["__scopeId","data-v-7c293cad"]]);t["a"]=s},"1b4f":function(e,t,n){"use strict";n("2658")},2345:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("ac1f"),n("466d"),n("99af"),n("fb6a");function c(e,t,n){var c=t;if(e.match(/enter/i))return"".concat(c,"\r\n");if(e.match(/clear/i))return"";if(c=e.match(/delete|del/i)?c.match(/unknown/i)||c.match(/n\/a/i)?"":c.substring(0,c.length-1):e.match(/space/i)?"".concat(t," "):e.match(/unknown/i)?"Unknown":e.match(/n\/a/i)?"N/A":c.match(/unknown/i)||c.match(/n\/a/i)?e:"".concat(t).concat(e),"string"===typeof c&&c)switch(n){case"lowercase":c=c.toLowerCase();break;case"uppercase":c=c.toUpperCase();break;default:c=c.charAt(0).toUpperCase()+c.slice(1);break}return c}},2658:function(e,t,n){},"2ee9":function(e,t,n){"use strict";n("beb6")},3871:function(e,t,n){"use strict";n("e880")},"51c8":function(e,t,n){"use strict";n.r(t);n("a9e3");var c=n("fe70"),a=n("7a23"),r=Object(a["defineComponent"])({data:function(){return{isReadyOnly:!1}},created:function(){this.isReadyOnly=!Object(c["d"])("desktop")},emits:["onValue","onFieldActivated"],props:{config:{type:Object,default:function(){return{}}},preset:{type:Object,default:function(){return{label:"",value:""}}},defaultValue:{type:Function},fdata:{type:Object,required:!0},cdata:{type:Object,required:!0},clear:{type:Number,required:!0},options:{type:Function,default:function(){return[]}},activationState:{type:String,default:""},onValue:{type:Function},onValueUpdate:{type:Function},footerButtonEvent:{type:Object}}});const o=r;t["default"]=o},7653:function(e,t,n){"use strict";var c=n("7a23");const a=Object(c["withScopeId"])("data-v-7970cd10"),r=a((function(e,t,n,r,o,i){const u=Object(c["resolveComponent"])("center");return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:e.state},[Object(c["createVNode"])(u,null,{default:a(()=>[Object(c["createVNode"])("img",{src:e.icon},null,8,["src"])]),_:1})],2)}));var o=Object(c["defineComponent"])({props:{label:{type:String,required:!0},disabled:{type:Boolean}},computed:{state(){return this.disabled?"disabled-btn":"clickable"},icon(){return"assets/images/reset.png"}}}),i=(n("de49"),n("6b0d")),u=n.n(i);const s=u()(o,[["render",r],["__scopeId","data-v-7970cd10"]]);t["a"]=s},a4d3f:function(e,t,n){"use strict";n("a6f7")},a6f7:function(e,t,n){},beb6:function(e,t,n){},c336:function(e,t,n){},c850:function(e,t,n){"use strict";var c=n("7a23"),a=Object(c["withScopeId"])("data-v-321424f0"),r=a((function(e,t,n,r,o,i){var u=Object(c["resolveComponent"])("center");return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"his-card ".concat(e.state," clickable")},[Object(c["createVNode"])("img",{src:e.icon},null,8,["src"]),Object(c["createVNode"])(u,null,{default:a((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e.label),1)]})),_:1})],2)})),o=Object(c["defineComponent"])({props:{label:{type:String,required:!0},image:{type:String,required:!0},isActive:{type:Boolean,default:!0}},computed:{state:function(){return this.isActive?"active-card-color":"disabled-card-color"},icon:function(){return"assets/images/".concat(this.image,".png")}}}),i=(n("2ee9"),n("6b0d")),u=n.n(i);const s=u()(o,[["render",r],["__scopeId","data-v-321424f0"]]);t["a"]=s},de49:function(e,t,n){"use strict";n("ee38")},e3be:function(e,t,n){"use strict";n("c336")},e880:function(e,t,n){},ee38:function(e,t,n){},efaf:function(e,t,n){"use strict";var c=n("7a23"),a=Object(c["withScopeId"])("data-v-cc9bc756");Object(c["pushScopeId"])("data-v-cc9bc756");var r=Object(c["createVNode"])("img",{id:"barcode-img",src:"/assets/images/barcode.svg"},null,-1);Object(c["popScopeId"])();var o=a((function(e,t,n,o,i,u){var s=Object(c["resolveComponent"])("ion-col"),l=Object(c["resolveComponent"])("ion-row");return Object(c["openBlock"])(),Object(c["createBlock"])(l,null,{default:a((function(){return[Object(c["createVNode"])(s,{size:"2"},{default:a((function(){return[r]})),_:1}),Object(c["createVNode"])(s,{size:"10"},{default:a((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])("input",{readonly:e.useVirtualInput,ref:"barcode",id:"barcode-inputbox","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.barcodeText=t})},null,8,["readonly"]),[[c["vModelText"],e.barcodeText]])]})),_:1})]})),_:1})})),i=(n("ac1f"),n("466d"),n("5319"),n("8a30")),u=n("2345"),s=n("2ed9"),l=Object(c["defineComponent"])({name:"BarcodeInput",components:{IonRow:i["H"],IonCol:i["m"]},props:["clearValue","virtualText"],setup:function(){var e=Object(c["ref"])(null),t=Object(s["a"])(),n=t.useVirtualInput,a=t.platformType;return"desktop"===a.value&&setInterval((function(){try{e.value.focus()}catch(t){}}),1500),{barcode:e,useVirtualInput:n}},data:function(){return{barcodeText:""}},methods:{checkForbarcode:function(){if(null!=this.barcodeText.match(/.+\$$/i)){var e=this.barcodeText.replace(/\$/gi,"");this.$emit("onScan",e),this.barcodeText=""}}},watch:{clearValue:function(){this.barcodeText=""},virtualText:function(e){this.barcodeText=Object(u["a"])(e,this.barcodeText)},barcodeText:function(e){e&&(this.checkForbarcode(),this.$emit("onValue",e))}}}),d=(n("e3be"),n("6b0d")),b=n.n(d);const p=b()(l,[["render",o],["__scopeId","data-v-cc9bc756"]]);t["a"]=p}}]);
//# sourceMappingURL=TouchFormElement6.b606c547.js.map
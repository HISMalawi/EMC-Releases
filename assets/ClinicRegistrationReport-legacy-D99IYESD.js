System.register(["./opd_report_service-legacy-bQs9UN1v.js","./BaseTableReport-legacy-OFO_CVM3.js","./index-legacy-2bdI6aeZ.js","./ReportMixin.vue_vue_type_script_lang-legacy-iBlnUK4E.js","./overlays-33ae3ea0-legacy-mcssBBSM.js","./Export-legacy-cuEy_-Nh.js","./HisStandardForm-legacy-lMXEnQxA.js","./TouchScreenForm-legacy-H8a4O6o5.js","./dynamic-import-helper-legacy-BhGHTWZn.js","./ToolbarMediumCard-legacy-EA1aA9jU.js","./Transformers-legacy-PbfCTy2a.js","./ViewPort-legacy-AULqwBLs.js","./BasicReportTemplate-legacy--ps8EHUm.js","./SIngleTouchField-legacy-hpCyTWH6.js","./Pagination-legacy-rUvGUE2N.js","./MultiFieldDateHelper-legacy-ABlXxdvs.js","./KbLayouts-legacy-NQmKRJpJ.js","./HisKbConfigurations-legacy-AV_G95Cg.js"],(function(e,t){"use strict";var l,i,n,a,s,r,o,u,d,c,g,p,y,h,f,m,_,v,w,R,j;return{setters:[e=>{l=e.O},e=>{i=e.R},e=>{n=e.d,a=e._,s=e.r,r=e.o,o=e.x,u=e.b,d=e.w,c=e.u,g=e.F,p=e.y,y=e.c,h=e.v,f=e.A,m=e.I,_=e.L,v=e.H,w=e.S},e=>{R=e._},e=>{j=e.m},null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){const t=n({props:{list:Object},setup:()=>({closeModal:async()=>await j.dismiss()})}),b=f("h3",null,"Type of Visit",-1),D=f("h3",null," < 5yrs ",-1),B=f("h3",null," > 5yrs",-1),T=f("h3",null,"Total",-1),x=a(t,[["render",function(e,t,l,i,n,a){const f=s("ion-title"),m=s("ion-button"),_=s("ion-toolbar"),v=s("ion-header"),w=s("ion-col"),R=s("ion-row"),j=s("ion-item"),x=s("ion-list"),C=s("ion-grid"),S=s("ion-content");return r(),o(g,null,[u(v,null,{default:d((()=>[u(_,null,{default:d((()=>[u(f,null,{default:d((()=>[c("Clinic Registration Report Summary")])),_:1}),u(m,{color:"danger",slot:"end",onClick:t[0]||(t[0]=t=>e.closeModal())},{default:d((()=>[c("X")])),_:1})])),_:1})])),_:1}),u(S,{class:"ion-padding"},{default:d((()=>[u(C,null,{default:d((()=>[u(R,null,{default:d((()=>[u(w,null,{default:d((()=>[b])),_:1}),u(w,null,{default:d((()=>[D])),_:1}),u(w,null,{default:d((()=>[B])),_:1}),u(w,null,{default:d((()=>[T])),_:1})])),_:1}),u(x,null,{default:d((()=>[(r(!0),o(g,null,p(e.list,(e=>(r(),y(j,{key:e},{default:d((()=>[u(w,null,{default:d((()=>[c(h(e.label),1)])),_:2},1024),u(w,null,{default:d((()=>[c(h(e.under5),1)])),_:2},1024),u(w,null,{default:d((()=>[c(h(e.over5),1)])),_:2},1024),u(w,null,{default:d((()=>[c(h(e.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})],64)}]]),C=n({components:{ReportTemplate:i,IonPage:m},mixins:[R],data:()=>({title:"Clinic Registration",rows:[],reportData:[],columns:[[_.thTxt("Reg"),_.thTxt("First Name"),_.thTxt("Last Name"),_.thTxt("Gender"),_.thTxt("DOB"),_.thTxt("Date reg.")]],customBtns:[]}),created(){this.fields=this.getDateDurationFields(),this.customBtns.push({name:"High level view",size:"large",slot:"start",color:"primary",visible:!0,onClick:async()=>this.showModal()})},methods:{async init(e,t){const i=new l;i.setStartDate(t.start_date),i.setEndDate(t.end_date),this.period=i.getDateIntervalPeriod();const n=await i.getClinicRegistrations();this.reportData=n.sort(((e,t)=>e.visit_type>t.visit_type?1:e.visit_type<t.visit_type?-1:0)),this.rows=this.buildRows(this.reportData)},buildRows:e=>e.length?e.map((e=>[_.td(e.visit_type),_.td(e.given_name),_.td(e.family_name),_.td(e.gender),_.td(v.toStandardHisDisplayFormat(e.birthdate)),_.td(v.toStandardHisDisplayFormat(e.visit_date))])):[],filterBy(e,t){return this.reportData.filter((l=>{const i=v.calculateAge(l.birthdate,w.getSessionDate());return l.visit_type===e&&("under5"===t?i<=5:i>6)}))},modalData(){const e=[...this.filterBy("New patient","under5")].length,t=[...this.filterBy("New patient","over5")].length,l=e+t,i=[...this.filterBy("Referral","under5")].length,n=[...this.filterBy("Referral","over5")].length,a=i+n,s=[...this.filterBy("Revisiting","under5")].length,r=[...this.filterBy("Revisiting","over5")].length;return[{label:"New patient",under5:e,over5:t,value:l},{label:"Referral",under5:i,over5:n,value:a},{label:"Revisiting",under5:s,over5:r,value:s+r}]},async showModal(){const e=[...this.modalData()];(await j.create({component:x,backdropDismiss:!0,cssClass:"action-sheet-modal",componentProps:{list:e}})).present()}}});e("default",a(C,[["render",function(e,t,l,i,n,a){const o=s("report-template"),c=s("ion-page");return r(),y(c,null,{default:d((()=>[u(o,{title:e.title,rows:e.rows,fields:e.fields,columns:e.columns,itemsPerPage:10,period:e.period,reportPrefix:"Clinic",onReportConfiguration:e.init,customBtns:e.customBtns,paginated:""},null,8,["title","rows","fields","columns","period","onReportConfiguration","customBtns"])])),_:1})}]]))}}}));

(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-770d622c"],{c7512:function(e,n,t){"use strict";t.r(n);var r=t("7a23");function i(e,n,t,i,a,o){var u=Object(r["resolveComponent"])("his-standard-form");return Object(r["openBlock"])(),Object(r["createBlock"])(u,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}var a=t("5530"),o=t("1da1"),u=(t("96cf"),t("9441")),c=t("7365"),s=t("d4ec"),l=t("262e"),d=t("2caf"),f=t("cc6f"),p=function(e){Object(l["a"])(t,e);var n=Object(d["a"])(t);function t(e,r){return Object(s["a"])(this,t),n.call(this,e,104,r)}return t}(f["a"]),v=t("a95b"),b=t("2706"),m=t("d95e"),h=t("e86e"),T=t("b5e4"),g=Object(r["defineComponent"])({components:{HisStandardForm:u["a"]},mixins:[c["a"]],data:function(){return{registrationService:{}}},watch:{ready:{handler:function(e){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e&&(n.registrationService=new p(n.patient.getID(),n.providerID),n.fields=n.getFields());case 1:case"end":return t.stop()}}),t)})))()},immediate:!0,deep:!0}},methods:{onSubmit:function(e,n){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var i,o,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.asignNID(e);case 2:return r.next=4,t.registrationService.createEncounter();case 4:if(i=r.sent,i){r.next=7;break}return r.abrupt("return",Object(T["e"])("Unable to create registration encounter"));case 7:return r.next=9,t.resolveObs(Object(a["a"])({},n));case 9:return o=r.sent,r.next=12,t.registrationService.saveObservationList(o);case 12:if(u=r.sent,u){r.next=15;break}return r.abrupt("return",Object(T["e"])("Unable to save observations"));case 15:t.nextTask();case 16:case"end":return r.stop()}}),r)})))()},asignNID:function(e){var n=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e["national_id_available"],i=e["national_id"],!r||"Yes"!==r["value"]){t.next=5;break}return t.next=5,v["a"].create(n.patient.getID(),28,i["value"]);case 5:case"end":return t.stop()}}),t)})))()},getFields:function(){var e=this;return[{id:"visit_type",helpText:"Type of visit",type:m["b"].TT_SELECT,validation:function(e){return b["a"].required(e)},computedValue:function(n){var t=n.value;return{obs:e.registrationService.buildValueCoded("Type of visit",t)}},options:function(){return[{label:"New",value:"New patient"},{label:"Referral",value:"Referral"},{label:"Re-visiting",value:"Re-visiting"}]}},{id:"referring_facility_name",helpText:"Referred from",type:m["b"].TT_SELECT,validation:function(e){return b["a"].required(e)},computedValue:function(n){var t=n.label;return{obs:e.registrationService.buildValueText("Referred from",t)}},condition:function(e){return"Referral"===e.visit_type.value},options:function(){return Object(h["b"])("")},config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"national_id_available",helpText:"National ID avalable",type:m["b"].TT_SELECT,validation:function(e){return b["a"].required(e)},condition:function(){return"Unknown"===e.patient.findIdentifierByType("Malawi National ID")},options:function(){return e.yesNoUnknownOptions()},appearInSummary:function(){return!1}},{id:"national_id",helpText:"Enter National ID",type:m["b"].TT_TEXT,validation:function(e){return b["a"].required(e)},condition:function(e){return"Yes"===e.national_id_available.value},summaryMapValue:function(e){var n=e.value;return{value:n,label:"National ID"}}},{id:"patient_pregnant",helpText:"Patient pregnant",type:m["b"].TT_SELECT,validation:function(e){return b["a"].required(e)},computedValue:function(n){var t=n.value;return{obs:e.registrationService.buildValueCoded("PATIENT PREGNANT",t)}},condition:function(){return e.patient.isChildBearing()},options:function(){return e.yesNoUnknownOptions()}}]}}}),w=t("d959"),x=t.n(w);const y=x()(g,[["render",i]]);n["default"]=y}}]);
//# sourceMappingURL=chunk-770d622c.ea69c29d.js.map
(function(e){function t(t){for(var r,a,c=t[0],s=t[1],u=t[2],l=0,d=[];l<c.length;l++)a=c[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);p&&p(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function c(e){return s.p+"js/"+({"polyfills-core-js":"polyfills-core-js","polyfills-dom":"polyfills-dom"}[e]||e)+"."+{"chunk-008cd3d6":"d8ac6478","chunk-02c995b5":"9050fc3e","chunk-033a882d":"cf5ecf07","chunk-0745a21c":"b16bb057","chunk-106f1396":"d66aa639","chunk-17e27673":"e890166c","chunk-2840da78":"567e7dec","chunk-5863124c":"5648cc9b","chunk-92e17dd6":"4574bcfd","chunk-e3536730":"22f96c53","chunk-417f6eaa":"a569db59","chunk-56e43528":"cd566552","chunk-28ca73e4":"6e80c50c","chunk-003bf392":"1fe58dc2","chunk-0dab48e8":"dea9fb84","chunk-16956cff":"d8b6ea05","chunk-1696389c":"e2e4305a","chunk-1696547a":"67e9da9d","chunk-16967bc5":"9a7a5f0b","chunk-16976a46":"cf07f49c","chunk-1697a130":"e2ef5f2b","chunk-16985331":"8a6941c9","chunk-1698c31f":"63c811f4","chunk-16ab2138":"78f894b4","chunk-16abb9b8":"419cb5d2","chunk-16ac8575":"149ed97f","chunk-16acc9b1":"474efe8d","chunk-16ad0ee7":"44d393a3","chunk-14c7bf0c":"18e513b0","chunk-2feddfc6":"7e008eb9","chunk-47593ffb":"37ec7dc3","chunk-4d29025e":"43e20565","chunk-5edc5a62":"ba1080b3","chunk-6b7fe099":"a2a6bdd9","chunk-6be05cc1":"f37e79f8","chunk-7cfd9772":"58fc9f6f","chunk-7d19a135":"d8640307","chunk-830779de":"b84a4674","chunk-870a1b9e":"ebd9497f","chunk-d73f0fe0":"b6229316","chunk-e9d7212a":"b3baa3ed","chunk-f3be37f8":"16ec4822","chunk-46991e34":"711a8d41","chunk-5e7fcd2c":"5011d5ba","chunk-08704c19":"455dfc86","chunk-09155df3":"d176fe66","chunk-09162720":"468ca8fb","chunk-097e0872":"a6cb5166","chunk-0c5b2e2c":"0f838ee9","chunk-0ced981c":"c9074db0","chunk-0e93a01c":"bbdf676b","chunk-149afc72":"a51f71d2","chunk-17bf2c46":"c2165fca","chunk-1b5b3d32":"6710906b","chunk-1dbc15a2":"5d864775","chunk-1f3fa45a":"b1bda72c","chunk-20b92bb4":"1b8e142d","chunk-21a76241":"ac6e0de7","chunk-25d83ca8":"896095ec","chunk-297f5928":"fe312f2d","chunk-2c083610":"5f6b42c5","chunk-2d0a36f9":"a22aae9e","chunk-2d0a3ffc":"ae92ec73","chunk-2d0a4381":"8d8f093f","chunk-2d0a463b":"b45d4f52","chunk-2d0a4819":"4b1c02d9","chunk-2d0a4d35":"3064795d","chunk-2d0aa91b":"c552315f","chunk-2d0aaf0b":"a5ca3691","chunk-2d0ab079":"679d2018","chunk-2d0ab2c7":"bd714c31","chunk-2d0b347d":"c83ab1b5","chunk-2d0b5f74":"c432920e","chunk-2d0c073f":"33aba11a","chunk-2d0c4c38":"b0b646ed","chunk-2d0c77ae":"8ccaf51c","chunk-2d0cb702":"1c8c325b","chunk-2d0cc7e7":"0010e767","chunk-2d0ccf55":"1622bb80","chunk-2d0cedec":"75b05b51","chunk-2d0cf669":"9a640efc","chunk-2d0d43da":"b017c710","chunk-2d0d6098":"0e1f1f88","chunk-2d0d6ec8":"5914daae","chunk-2d0d6f0e":"80055871","chunk-2d0da04a":"2b98c3c4","chunk-2d0dd6ae":"b2e01cc9","chunk-2d0dd82f":"879312d8","chunk-2d0de126":"372b2ba0","chunk-2d0de711":"b05fb249","chunk-2d0deeb6":"1fde785c","chunk-2d0e2514":"87b2effe","chunk-2d0e5812":"e25ef378","chunk-2d0e8851":"a8ac2577","chunk-2d0e8890":"c1e77f51","chunk-2d0f0d90":"1a93348b","chunk-2d208702":"36ed287c","chunk-2d2089fc":"3d625037","chunk-2d209573":"0d82a8f0","chunk-2d20957d":"fc288db6","chunk-2d20ebf7":"a6263685","chunk-2d2102e3":"bea2be54","chunk-2d210591":"2eab3988","chunk-2d213189":"83ee02f5","chunk-2d216214":"28e94c12","chunk-2d216257":"57660cd9","chunk-2d218068":"371d94a4","chunk-2d21a0bf":"b3687303","chunk-2d21da73":"e30693b3","chunk-2d21e7b5":"d727f84d","chunk-2d21f489":"394e9a0d","chunk-2d226508":"38d9f57a","chunk-2d226ccc":"38ba7a8c","chunk-2d228961":"d9241421","chunk-2d229093":"7ec71118","chunk-2d2297b9":"db7a926e","chunk-2d2304d2":"2178b8d3","chunk-2d237731":"98d7a2a2","chunk-2d238053":"4f9cf472","chunk-30dd9750":"d0a9e288","chunk-34d9cdae":"af17eaef","chunk-05a3c442":"eeb55ba6","chunk-245216b5":"f0edec01","chunk-6afe013c":"6935dfc2","chunk-6f19fe7a":"ae47a68f","chunk-34f7327c":"67278737","chunk-37f2300e":"cf56800e","chunk-3b1a42fa":"63fbf6d9","chunk-3ed29de3":"a8202571","chunk-405c9842":"11bd317b","chunk-41c0f7a4":"b3628b32","chunk-453836da":"ab880a74","chunk-462c869e":"d8b69fa9","chunk-4734f41a":"caac818e","chunk-504c4825":"6f879de9","chunk-541ea42d":"6801f53e","chunk-54bbd082":"2f8d3a41","chunk-56a17156":"a1619a7e","chunk-590f9388":"ab173ef2","chunk-59d4c87c":"ad70e331","chunk-5a8ac886":"074a280f","chunk-65055ecc":"e609dfd2","chunk-69eb8776":"ac01e65c","chunk-6b3e685a":"697d0c5e","chunk-6d375f34":"81bdc788","chunk-6d4bfe7a":"fbc8b9b9","chunk-6f926aa1":"5edcc33b","chunk-72632c0e":"6f984a1a","chunk-73f2f583":"ca300ba6","chunk-7548ca2d":"e9cccde8","chunk-76ee8285":"a9472b66","chunk-770d622c":"01d38c2a","chunk-77126da4":"1845dba1","chunk-77c891d8":"fad91a05","chunk-79f1dac7":"3576f31b","chunk-858cd918":"3668dc07","chunk-8bb7f81e":"6ab39f3c","chunk-a1cd6b92":"4e367bfe","chunk-a279802a":"426defef","chunk-a9395c36":"34448e03","chunk-a9a47c2e":"bee4d35a","chunk-b14c2520":"6a2eecf5","chunk-b28e0d76":"38003266","chunk-b5456e0e":"587dfc49","chunk-c326e570":"c9efd9b6","chunk-c3f36d04":"196b420b","chunk-c53d26f0":"2f7287fb","chunk-c567cc2a":"f44305ea","chunk-c7215964":"30d1225a","chunk-d0b1508a":"ad1cbf56","chunk-d0e8aa0a":"c335d8ce","chunk-d2a20e8a":"fdaa7a51","chunk-d8413eac":"5f5a1452","chunk-e1b2290e":"3e7fc00f","chunk-eaa2b130":"3c341c2d","chunk-f858ef4e":"b903f468","polyfills-core-js":"8da452c8","polyfills-dom":"5c1a31ff","chunk-7460fd43":"91d53096","chunk-2d0b33e3":"64be60e2","chunk-2d0e19fd":"55dbdcb5","chunk-2d0e528a":"e905f27b","chunk-2d0f1533":"176694a1","chunk-2d230101":"c895fcbf","chunk-2d2376e6":"a351546d"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"chunk-0745a21c":1,"chunk-106f1396":1,"chunk-17e27673":1,"chunk-5863124c":1,"chunk-92e17dd6":1,"chunk-e3536730":1,"chunk-417f6eaa":1,"chunk-28ca73e4":1,"chunk-0dab48e8":1,"chunk-14c7bf0c":1,"chunk-5edc5a62":1,"chunk-6be05cc1":1,"chunk-46991e34":1,"chunk-5e7fcd2c":1,"chunk-08704c19":1,"chunk-0c5b2e2c":1,"chunk-149afc72":1,"chunk-17bf2c46":1,"chunk-1b5b3d32":1,"chunk-20b92bb4":1,"chunk-297f5928":1,"chunk-2c083610":1,"chunk-3b1a42fa":1,"chunk-453836da":1,"chunk-4734f41a":1,"chunk-56a17156":1,"chunk-65055ecc":1,"chunk-6b3e685a":1,"chunk-6d4bfe7a":1,"chunk-73f2f583":1,"chunk-77c891d8":1,"chunk-a1cd6b92":1,"chunk-a279802a":1,"chunk-b28e0d76":1,"chunk-b5456e0e":1,"chunk-c326e570":1,"chunk-c3f36d04":1,"chunk-c7215964":1,"chunk-e1b2290e":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({"polyfills-core-js":"polyfills-core-js","polyfills-dom":"polyfills-dom"}[e]||e)+"."+{"chunk-008cd3d6":"31d6cfe0","chunk-02c995b5":"31d6cfe0","chunk-033a882d":"31d6cfe0","chunk-0745a21c":"0c5766f6","chunk-106f1396":"9f07121d","chunk-17e27673":"ab3d7256","chunk-2840da78":"31d6cfe0","chunk-5863124c":"9f07121d","chunk-92e17dd6":"ab3d7256","chunk-e3536730":"cda85941","chunk-417f6eaa":"6a794914","chunk-56e43528":"31d6cfe0","chunk-28ca73e4":"833261d2","chunk-003bf392":"31d6cfe0","chunk-0dab48e8":"dfa55fd8","chunk-16956cff":"31d6cfe0","chunk-1696389c":"31d6cfe0","chunk-1696547a":"31d6cfe0","chunk-16967bc5":"31d6cfe0","chunk-16976a46":"31d6cfe0","chunk-1697a130":"31d6cfe0","chunk-16985331":"31d6cfe0","chunk-1698c31f":"31d6cfe0","chunk-16ab2138":"31d6cfe0","chunk-16abb9b8":"31d6cfe0","chunk-16ac8575":"31d6cfe0","chunk-16acc9b1":"31d6cfe0","chunk-16ad0ee7":"31d6cfe0","chunk-14c7bf0c":"17e077bc","chunk-2feddfc6":"31d6cfe0","chunk-47593ffb":"31d6cfe0","chunk-4d29025e":"31d6cfe0","chunk-5edc5a62":"ab3d7256","chunk-6b7fe099":"31d6cfe0","chunk-6be05cc1":"4fe4d1d7","chunk-7cfd9772":"31d6cfe0","chunk-7d19a135":"31d6cfe0","chunk-830779de":"31d6cfe0","chunk-870a1b9e":"31d6cfe0","chunk-d73f0fe0":"31d6cfe0","chunk-e9d7212a":"31d6cfe0","chunk-f3be37f8":"31d6cfe0","chunk-46991e34":"ab3d7256","chunk-5e7fcd2c":"ab3d7256","chunk-08704c19":"d41614ec","chunk-09155df3":"31d6cfe0","chunk-09162720":"31d6cfe0","chunk-097e0872":"31d6cfe0","chunk-0c5b2e2c":"b2499045","chunk-0ced981c":"31d6cfe0","chunk-0e93a01c":"31d6cfe0","chunk-149afc72":"54dcb621","chunk-17bf2c46":"d41614ec","chunk-1b5b3d32":"d41614ec","chunk-1dbc15a2":"31d6cfe0","chunk-1f3fa45a":"31d6cfe0","chunk-20b92bb4":"ab3d7256","chunk-21a76241":"31d6cfe0","chunk-25d83ca8":"31d6cfe0","chunk-297f5928":"d41614ec","chunk-2c083610":"09c3dee7","chunk-2d0a36f9":"31d6cfe0","chunk-2d0a3ffc":"31d6cfe0","chunk-2d0a4381":"31d6cfe0","chunk-2d0a463b":"31d6cfe0","chunk-2d0a4819":"31d6cfe0","chunk-2d0a4d35":"31d6cfe0","chunk-2d0aa91b":"31d6cfe0","chunk-2d0aaf0b":"31d6cfe0","chunk-2d0ab079":"31d6cfe0","chunk-2d0ab2c7":"31d6cfe0","chunk-2d0b347d":"31d6cfe0","chunk-2d0b5f74":"31d6cfe0","chunk-2d0c073f":"31d6cfe0","chunk-2d0c4c38":"31d6cfe0","chunk-2d0c77ae":"31d6cfe0","chunk-2d0cb702":"31d6cfe0","chunk-2d0cc7e7":"31d6cfe0","chunk-2d0ccf55":"31d6cfe0","chunk-2d0cedec":"31d6cfe0","chunk-2d0cf669":"31d6cfe0","chunk-2d0d43da":"31d6cfe0","chunk-2d0d6098":"31d6cfe0","chunk-2d0d6ec8":"31d6cfe0","chunk-2d0d6f0e":"31d6cfe0","chunk-2d0da04a":"31d6cfe0","chunk-2d0dd6ae":"31d6cfe0","chunk-2d0dd82f":"31d6cfe0","chunk-2d0de126":"31d6cfe0","chunk-2d0de711":"31d6cfe0","chunk-2d0deeb6":"31d6cfe0","chunk-2d0e2514":"31d6cfe0","chunk-2d0e5812":"31d6cfe0","chunk-2d0e8851":"31d6cfe0","chunk-2d0e8890":"31d6cfe0","chunk-2d0f0d90":"31d6cfe0","chunk-2d208702":"31d6cfe0","chunk-2d2089fc":"31d6cfe0","chunk-2d209573":"31d6cfe0","chunk-2d20957d":"31d6cfe0","chunk-2d20ebf7":"31d6cfe0","chunk-2d2102e3":"31d6cfe0","chunk-2d210591":"31d6cfe0","chunk-2d213189":"31d6cfe0","chunk-2d216214":"31d6cfe0","chunk-2d216257":"31d6cfe0","chunk-2d218068":"31d6cfe0","chunk-2d21a0bf":"31d6cfe0","chunk-2d21da73":"31d6cfe0","chunk-2d21e7b5":"31d6cfe0","chunk-2d21f489":"31d6cfe0","chunk-2d226508":"31d6cfe0","chunk-2d226ccc":"31d6cfe0","chunk-2d228961":"31d6cfe0","chunk-2d229093":"31d6cfe0","chunk-2d2297b9":"31d6cfe0","chunk-2d2304d2":"31d6cfe0","chunk-2d237731":"31d6cfe0","chunk-2d238053":"31d6cfe0","chunk-30dd9750":"31d6cfe0","chunk-34d9cdae":"31d6cfe0","chunk-05a3c442":"31d6cfe0","chunk-245216b5":"31d6cfe0","chunk-6afe013c":"31d6cfe0","chunk-6f19fe7a":"31d6cfe0","chunk-34f7327c":"31d6cfe0","chunk-37f2300e":"31d6cfe0","chunk-3b1a42fa":"d41614ec","chunk-3ed29de3":"31d6cfe0","chunk-405c9842":"31d6cfe0","chunk-41c0f7a4":"31d6cfe0","chunk-453836da":"d41614ec","chunk-462c869e":"31d6cfe0","chunk-4734f41a":"d41614ec","chunk-504c4825":"31d6cfe0","chunk-541ea42d":"31d6cfe0","chunk-54bbd082":"31d6cfe0","chunk-56a17156":"d41614ec","chunk-590f9388":"31d6cfe0","chunk-59d4c87c":"31d6cfe0","chunk-5a8ac886":"31d6cfe0","chunk-65055ecc":"011b4baf","chunk-69eb8776":"31d6cfe0","chunk-6b3e685a":"d41614ec","chunk-6d375f34":"31d6cfe0","chunk-6d4bfe7a":"af4f97f0","chunk-6f926aa1":"31d6cfe0","chunk-72632c0e":"31d6cfe0","chunk-73f2f583":"d41614ec","chunk-7548ca2d":"31d6cfe0","chunk-76ee8285":"31d6cfe0","chunk-770d622c":"31d6cfe0","chunk-77126da4":"31d6cfe0","chunk-77c891d8":"48487aa7","chunk-79f1dac7":"31d6cfe0","chunk-858cd918":"31d6cfe0","chunk-8bb7f81e":"31d6cfe0","chunk-a1cd6b92":"d41614ec","chunk-a279802a":"9c71c637","chunk-a9395c36":"31d6cfe0","chunk-a9a47c2e":"31d6cfe0","chunk-b14c2520":"31d6cfe0","chunk-b28e0d76":"d41614ec","chunk-b5456e0e":"d41614ec","chunk-c326e570":"cbe9a55f","chunk-c3f36d04":"d41614ec","chunk-c53d26f0":"31d6cfe0","chunk-c567cc2a":"31d6cfe0","chunk-c7215964":"d41614ec","chunk-d0b1508a":"31d6cfe0","chunk-d0e8aa0a":"31d6cfe0","chunk-d2a20e8a":"31d6cfe0","chunk-d8413eac":"31d6cfe0","chunk-e1b2290e":"d41614ec","chunk-eaa2b130":"31d6cfe0","chunk-f858ef4e":"31d6cfe0","polyfills-core-js":"31d6cfe0","polyfills-dom":"31d6cfe0","chunk-7460fd43":"31d6cfe0","chunk-2d0b33e3":"31d6cfe0","chunk-2d0e19fd":"31d6cfe0","chunk-2d0e528a":"31d6cfe0","chunk-2d0f1533":"31d6cfe0","chunk-2d230101":"31d6cfe0","chunk-2d2376e6":"31d6cfe0"}[e]+".css",o=s.p+r,i=document.getElementsByTagName("link"),c=0;c<i.length;c++){var u=i[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],p.parentNode.removeChild(p),n(i)},p.href=o;var b=document.getElementsByTagName("head")[0];b.appendChild(p)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=c(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(p);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",d.name="ChunkLoadError",d.type=r,d.request=a,n[1](d)}o[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var p=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0011":function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return c}));n("ac1f"),n("466d"),n("a15b"),n("1276");function r(e){try{return!!"".concat(e).match(/(^\s*$|undefined|null)/i)}catch(t){return!0}}function a(e){return!!"".concat(e).match(/(^\s*$|Unknown|None|undefined|null)/i)}function o(e){var t=["th","st","nd","rd"],n=e%100;return t[(n-20)%10]||t[n]||t[0]}function i(e){return e<10?"0".concat(e):e}function c(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}},"0207":function(e,t,n){"use strict";n("cc99")},"03b0":function(e,t,n){},"054e":function(e,t,n){"use strict";n("6547c")},"068b":function(e,t,n){},"0690":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("96cf"),n("d3b7"),n("d81d"),n("4de4"),n("caad"),n("2532"),n("25f0"),n("cc6f")),u=n("9283"),l=n("2ef0"),d=n("32b3"),p=n("5a0c"),b=n.n(p),f=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){var o;return Object(a["a"])(this,n),o=t.call(this,e,68,r),o.lastDrugs=[],o.lastReceiptDate="",o}return Object(o["a"])(n,[{key:"loadPreviousDrugs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=new Date(this.date),t.setDate(t.getDate()-1),n=function(e){return u["b"].toStandardHisFormat(e)},e.next=5,s["a"].getJson("patients/".concat(this.patientID,"/drugs_received"),{date:n(t)});case 5:r=e.sent,r&&(this.lastReceiptDate=r.reduce((function(e,t){return!e||new Date(n(t.order.start_date))>new Date(e)?n(t.order.start_date):e}),null),a=d["a"].htnDrugReferences().map((function(e){return e.drug_id})),this.lastDrugs=r.filter((function(e){return!a.includes(e.drug["drug_id"])&&n(e.order.start_date)===o.lastReceiptDate})));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReceiptDate",value:function(){return this.lastReceiptDate}},{key:"getLastDrugs",value:function(){return this.lastDrugs}},{key:"receivedDrugsBefore",value:function(){return!Object(l["isEmpty"])(this.lastDrugs)}},{key:"buildPillCountObs",value:function(e,t){return this.buildValueNumber("Number of tablets brought to clinic",t,null,e)}},{key:"buildAdherenceObs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getConceptID("Drug adherence",!0);case 2:return a=e.sent,e.abrupt("return",{concept_id:a,value_numeric:r,value_drug:n,value_modifier:"%",order_id:t,person_id:this.patientID,obs_datetime:s["a"].getSessionDate()});case 4:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"isAdherenceGood",value:function(e){return e>=95&&e<=105}},{key:"calculateAdherence",value:function(e,t,n){return Math.round(100*(e-t)/(e-n))}},{key:"calculateExpected",value:function(e,t,n,r){var a="QW"===r?"week":"day",o=this.calcTimeElapsed(n,a);return e-o*parseFloat(t.toString())}},{key:"calcTimeElapsed",value:function(e,t){return b()(this.date).diff(e,t)}},{key:"calculateUnaccountedOrMissed",value:function(e,t){var n=parseFloat(e)-parseFloat(t);return n<0?-1*n+" missed":n+" unacc"}}]),n}(s["a"])},"071f":function(e,t,n){},"0734":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-9daf63b8"),o=a((function(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("ion-label"),u=Object(r["resolveComponent"])("ion-item"),l=Object(r["resolveComponent"])("ion-list"),d=Object(r["resolveComponent"])("ion-col"),p=Object(r["resolveComponent"])("ion-row"),b=Object(r["resolveComponent"])("ion-grid"),f=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(f,null,{default:a((function(){return[Object(r["createVNode"])(l,{class:"view-port-content"},{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[Object(r["createVNode"])(p,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.filtered,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{size:"4",key:n},{default:a((function(){return[Object(r["createVNode"])("div",{class:["his-card clickable",{"active-card-color":e.selected===t.label}],onClick:function(n){return e.onselect(t)}},[Object(r["createVNode"])(l,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.other.list,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:t},{default:a((function(){return[Object(r["createVNode"])(s,null,{default:a((function(){return[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.label),1)]})),_:2},1024),Object(r["createVNode"])("span",{style:e.style||{}},Object(r["toDisplayString"])(e.value),5)]})),_:2},1024)})),128))]})),_:2},1024)],10,["onClick"])]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1})})),i=n("1da1"),c=(n("96cf"),n("82a9")),s=n("2ef0"),u=Object(r["defineComponent"])({name:"HisSelect",mixins:[c["a"]],watch:{clear:function(){this.clearSelection()}},activated:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:return e.listData=t.sent,t.next=6,e.setDefaultValue();case 6:case"end":return t.stop()}}),t)})))()},methods:{setDefaultValue:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.defaultValue){t.next=5;break}return t.next=3,e.defaultValue(e.fdata,e.cdata,e.selected);case 3:n=t.sent,n&&(r=Object(s["find"])(e.listData,{label:n})||Object(s["find"])(e.listData,{value:n}),r&&e.onselect(r));case 5:case"end":return t.stop()}}),t)})))()},onselect:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.selected=e.label,!t.onValue){n.next=8;break}return n.next=4,t.onValue(e,t);case 4:if(r=n.sent,r){n.next=8;break}return t.selected="",n.abrupt("return");case 8:if(!t.onValueUpdate){n.next=12;break}return n.next=11,t.onValueUpdate(e,t.listData);case 11:t.listData=n.sent;case 12:t.$emit("onValue",e);case 13:case"end":return n.stop()}}),n)})))()}}}),l=(n("e2ee"),n("6b0d")),d=n.n(l);const p=d()(u,[["render",o],["__scopeId","data-v-9daf63b8"]]);t["a"]=p},"0795":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-08569aec");Object(r["pushScopeId"])("data-v-08569aec");var o={class:"my-table"},i=Object(r["createVNode"])("tr",{class:"section-description"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{style:{"font-weight":"bold"},colspan:"2"},"ART Clinic"),Object(r["createVNode"])("td",{colspan:"3",style:{"text-align":"center","font-weight":"bold"}},"Newly registered in quarter"),Object(r["createVNode"])("td",{class:"vertical-separator"}," "),Object(r["createVNode"])("td",{colspan:"3",style:{"text-align":"center","font-weight":"bold"}},"Cumulative ever registered")],-1),c=Object(r["createVNode"])("tr",{class:"section-description"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{style:{"font-weight":"bold"},colspan:"2"},"Patients registration details"),Object(r["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"PoC"),Object(r["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"Clinic own*"),Object(r["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"Checked data"),Object(r["createVNode"])("td",{class:"vertical-separator"}," "),Object(r["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"PoC"),Object(r["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"Clinic own*"),Object(r["createVNode"])("td",{style:{"font-weight":"normal","text-align":"center"}},"Checked data")],-1),s=Object(r["createVNode"])("td",{class:"numbers"},"25.",-1),u=Object(r["createVNode"])("td",{style:{"font-weight":"normal","text-align":"left","padding-left":"5px"},colspan:"2"},"Total registered",-1),l={style:{"font-weight":"normal"}},d=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),p=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),b=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),f={style:{"font-weight":"normal"}},m=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),h=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),g=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{colspan:"10"}," ")],-1),v=Object(r["createVNode"])("td",{class:"numbers"},"26.",-1),O=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","border-bottom-style":"none !important","padding-left":"5px","text-align":"left"}},[Object(r["createVNode"])("b",null,"FT"),Object(r["createTextVNode"])("  Patients initiated ")],-1),j=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-bottom-style":"none !important"}},"Male",-1),_={style:{"font-weight":"normal"}},w=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),k=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),y=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),x={style:{"font-weight":"normal"}},N=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),C=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),V=Object(r["createVNode"])("td",{class:"numbers"},"27.",-1),D=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","padding-left":"10px","text-align":"left","border-top-style":"none !important","border-bottom-style":"none !important",width:"100px"}},"on ART ",-1),T=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-top-style":"none !important","border-bottom-style":"none !important"}},"Female Non-pregnant",-1),I={style:{"font-weight":"normal"}},R=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),S=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),P=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),A={style:{"font-weight":"normal"}},E=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),B=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),F=Object(r["createVNode"])("td",{class:"numbers"},"28.",-1),L=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","padding-left":"10px","border-top-style":"none !important","border-bottom-style":"none !important","text-align":"left"}}," first time ",-1),M=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-top-style":"none !important","border-bottom-style":"none !important"}},"Female pregnant",-1),H={style:{"font-weight":"normal"}},U=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),q=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),G=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),z={style:{"font-weight":"normal"}},Y=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),W=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),$=Object(r["createVNode"])("td",{class:"numbers"},"29.",-1),K=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","padding-left":"28px","border-top-style":"none !important","border-bottom-style":"none !important"}},"   ",-1),J=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-top-style":"dotted !important","border-bottom-style":"none !important"}},"FT Init., Non-disagg.",-1),X={style:{"font-weight":"normal"}},Q=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Z=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ee=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),te={style:{"font-weight":"normal"}},ne=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),re=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ae=Object(r["createVNode"])("td",{class:"numbers"},"30.",-1),oe=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-right-style":"none !important","padding-left":"28px","border-top-style":"none !important"}},"   ",-1),ie=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-style":"none !important","text-align":"left","border-top-style":"dotted !important"}},"CHECK: Total FT",-1),ce={style:{"font-weight":"normal"}},se=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ue=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),le=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),de={style:{"font-weight":"normal"}},pe=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),be=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),fe=Object(r["createVNode"])("td",{class:"numbers"},"31.",-1),me=Object(r["createVNode"])("td",{style:{"text-align":"left","border-bottom-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(r["createVNode"])("b",null,"Re"),Object(r["createTextVNode"])("  Patients re-initiated on ART")],-1),he={style:{"font-weight":"normal"}},ge=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ve=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Oe=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),je={style:{"font-weight":"normal"}},_e=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),we=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ke=Object(r["createVNode"])("td",{class:"numbers"},"32.",-1),ye=Object(r["createVNode"])("td",{style:{"text-align":"left","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(r["createVNode"])("b",null,"TI"),Object(r["createTextVNode"])("  Patients transferred in on ART ")],-1),xe={style:{"font-weight":"normal"}},Ne=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ce=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ve=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),De={style:{"font-weight":"normal"}},Te=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ie=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Re=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{colspan:"10"}," ")],-1),Se=Object(r["createVNode"])("td",{class:"numbers"},"33.",-1),Pe=Object(r["createVNode"])("td",{style:{"text-align":"left","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(r["createVNode"])("b",null,"M"),Object(r["createTextVNode"])("  Males (all ages) ")],-1),Ae={style:{"font-weight":"normal"}},Ee=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Be=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Fe=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),Le={style:{"font-weight":"normal"}},Me=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),He=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ue=Object(r["createVNode"])("td",{class:"numbers"},"34.",-1),qe=Object(r["createVNode"])("td",{style:{"text-align":"left","border-top-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(r["createVNode"])("b",null,"FNP"),Object(r["createTextVNode"])("  Non-pregnant Females (all ages) ")],-1),Ge={style:{"font-weight":"normal"}},ze=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ye=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),We=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),$e={style:{"font-weight":"normal"}},Ke=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Je=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Xe=Object(r["createVNode"])("td",{class:"numbers"},"35.",-1),Qe=Object(r["createVNode"])("td",{style:{"text-align":"left","border-top-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(r["createVNode"])("b",null,"FP"),Object(r["createTextVNode"])("  Pregnant Females (all ages) ")],-1),Ze={style:{"font-weight":"normal"}},et=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),tt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),nt=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),rt={style:{"font-weight":"normal"}},at=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ot=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),it=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{colspan:"10"}," ")],-1),ct=Object(r["createVNode"])("td",{class:"numbers"},"36.",-1),st=Object(r["createVNode"])("td",{style:{"text-align":"left","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(r["createVNode"])("b",null,"A"),Object(r["createTextVNode"])("  Children below 24 m at ART initiation ")],-1),ut={style:{"font-weight":"normal"}},lt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),dt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),pt=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),bt={style:{"font-weight":"normal"}},ft=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),mt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ht=Object(r["createVNode"])("td",{class:"numbers"},"37.",-1),gt=Object(r["createVNode"])("td",{style:{"text-align":"left","border-top-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(r["createVNode"])("b",null,"B"),Object(r["createTextVNode"])("  Children 24 m - 14 yrs at ART initiation ")],-1),vt={style:{"font-weight":"normal"}},Ot=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),jt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),_t=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),wt={style:{"font-weight":"normal"}},kt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),yt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),xt=Object(r["createVNode"])("td",{class:"numbers"},"38.",-1),Nt=Object(r["createVNode"])("td",{style:{"text-align":"left","border-top-style":"none","font-weight":"normal","padding-left":"10px"},colspan:"2"},[Object(r["createVNode"])("b",null,"C"),Object(r["createTextVNode"])("  Adults 15 years+ at ART initiation ")],-1),Ct={style:{"font-weight":"normal"}},Vt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Dt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Tt=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),It={style:{"font-weight":"normal"}},Rt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),St=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Pt=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",null," "),Object(r["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}},"Reason for starting ART")],-1),At=Object(r["createVNode"])("td",{class:"numbers"},"39.",-1),Et=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","text-align":"left","border-bottom-width":"0px"}},[Object(r["createVNode"])("b",null,"PSHD")],-1),Bt=Object(r["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},"  Pres. Sev. HIV disease age "+Object(r["toDisplayString"])("<12")+" m",-1),Ft={style:{"font-weight":"normal"}},Lt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Mt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ht=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),Ut={style:{"font-weight":"normal"}},qt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Gt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),zt=Object(r["createVNode"])("td",{class:"numbers"},"40.",-1),Yt=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-width":"0px !important","border-bottom-style":"none","border-left-width":"1px","border-top-width":"0px"}}," ",-1),Wt=Object(r["createVNode"])("td",{style:{"border-left-width":"1px !important","border-right-width":"1px !important","border-bottom-width":"0px !important","border-style":"dotted","text-align":"left","padding-left":"10px","border-top-width":"0px"}},[Object(r["createVNode"])("b",null,"PCR"),Object(r["createTextVNode"])(" Infants "+Object(r["toDisplayString"])("<12")+" mths PCR",1)],-1),$t={style:{"border-top-width":"0px","border-bottom-width":"0px","font-weight":"normal"}},Kt=Object(r["createVNode"])("td",{style:{"border-top-width":"0px","border-bottom-width":"0px","font-weight":"normal"}}," ",-1),Jt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Xt=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),Qt={style:{"font-weight":"normal"}},Zt=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),en=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),tn=Object(r["createVNode"])("td",{class:"numbers"},"41.",-1),nn=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-bottom-width":"0px","border-top-width":"0px"}}," ",-1),rn=Object(r["createVNode"])("td",{style:{"border-left-width":"1px","border-top-width":"0px","border-style":"dotted","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(r["createVNode"])("b",null,"U5"),Object(r["createTextVNode"])(" Children 12-59mths")],-1),an={style:{"font-weight":"normal"}},on=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),cn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),sn=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),un={style:{"font-weight":"normal"}},ln=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),dn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),pn=Object(r["createVNode"])("td",{class:"numbers"},"42.",-1),bn=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-width":"1px !important","border-bottom-width":"0px","border-top-width":"0px","border-style":"dotted"}}," ",-1),fn=Object(r["createVNode"])("td",{style:{"border-left-style":"none","border-top-width":"0px","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(r["createVNode"])("b",null,"Preg"),Object(r["createTextVNode"])(" Pregnant women")],-1),mn={style:{"font-weight":"normal"}},hn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),gn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),vn=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),On={style:{"font-weight":"normal"}},jn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),_n=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),wn=Object(r["createVNode"])("td",{class:"numbers"},"43.",-1),kn=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-style":"dotted","border-left-width":"1px","border-top-width":"0px","border-bottom-width":"0px"}}," ",-1),yn=Object(r["createVNode"])("td",{style:{"border-left-style":"none","border-top-width":"0px","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(r["createVNode"])("b",null,"BF"),Object(r["createTextVNode"])(" Breastfeeding mothers")],-1),xn={style:{"font-weight":"normal"}},Nn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Cn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Vn=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),Dn={style:{"font-weight":"normal"}},Tn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),In=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Rn=Object(r["createVNode"])("td",{class:"numbers"},"44.",-1),Sn=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-style":"dotted","border-left-width":"1px","border-top-width":"0px","border-bottom-width":"0px"}}," ",-1),Pn=Object(r["createVNode"])("td",{style:{"border-left-style":"none","border-top-width":"0px","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(r["createVNode"])("b",null,"CD4"),Object(r["createTextVNode"])(" CD4 below threshold")],-1),An={style:{"font-weight":"normal"}},En=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Bn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Fn=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),Ln={style:{"font-weight":"normal"}},Mn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Hn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Un=Object(r["createVNode"])("td",{class:"numbers"},"45.",-1),qn=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-style":"dotted","border-left-width":"1px","border-top-width":"0px","border-bottom-width":"0px"}}," ",-1),Gn=Object(r["createVNode"])("td",{style:{"border-left-style":"none","border-top-width":"0px","text-align":"left","padding-left":"10px","border-bottom-width":"0px"}},[Object(r["createVNode"])("b",null,"Asy"),Object(r["createTextVNode"])(" Asymptomatic / mild")],-1),zn={style:{"font-weight":"normal"}},Yn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Wn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),$n=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),Kn={style:{"font-weight":"normal"}},Jn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Xn=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Qn=Object(r["createVNode"])("td",{class:"numbers"},"46.",-1),Zn=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-top-width":"0px","text-align":"left","border-bottom-width":"0px"}},[Object(r["createVNode"])("b",null,"3")],-1),er=Object(r["createVNode"])("td",{style:{"border-left-style":"none","border-bottom-width":"0px","text-align":"left","padding-left":"10px","border-top-width":"0px"}},"WHO stage 3",-1),tr={style:{"font-weight":"normal"}},nr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),rr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ar=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),or={style:{"font-weight":"normal"}},ir=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),cr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),sr=Object(r["createVNode"])("td",{class:"numbers"},"47.",-1),ur=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","border-top-width":"0px","text-align":"left","border-bottom-width":"0px"}},[Object(r["createVNode"])("b",null,"4")],-1),lr=Object(r["createVNode"])("td",{style:{"border-left-width":"0px","border-bottom-style":"none","text-align":"left","padding-left":"10px","border-top-width":"0px"}},"WHO stage 4",-1),dr={style:{"font-weight":"normal"}},pr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),br=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),fr=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),mr={style:{"font-weight":"normal"}},hr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),gr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),vr=Object(r["createVNode"])("td",{class:"numbers"},"48.",-1),Or=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","border-right-style":"none !important","text-align":"left","border-top-style":"none"}},[Object(r["createVNode"])("b",null,"Unk")],-1),jr=Object(r["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px","border-top-style":"none"}},"Unknown / reason outside guidelines",-1),_r={style:{"font-weight":"normal"}},wr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),kr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),yr=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),xr={style:{"font-weight":"normal"}},Nr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Cr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Vr=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",null," "),Object(r["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}},"Stage defining conditions at ART initiation")],-1),Dr=Object(r["createVNode"])("td",{class:"numbers"},"49.",-1),Tr=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","text-align":"left","border-right-style":"none !important"}},[Object(r["createVNode"])("b",null,"Nev/>2yrs")],-1),Ir=Object(r["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px"}},"Never TB / TB over 2 years ago",-1),Rr={style:{"font-weight":"normal"}},Sr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Pr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ar=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),Er={style:{"font-weight":"normal"}},Br=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Fr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Lr=Object(r["createVNode"])("td",{class:"numbers"},"50.",-1),Mr=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","text-align":"left","border-right-style":"none !important"}},[Object(r["createVNode"])("b",null,"Last 2yrs")],-1),Hr=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-left-style":"none"}},"TB within the last 2 years",-1),Ur={style:{"font-weight":"normal"}},qr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Gr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),zr=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),Yr={style:{"font-weight":"normal"}},Wr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),$r=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Kr=Object(r["createVNode"])("td",{class:"numbers"},"51.",-1),Jr=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","text-align":"left","border-right-style":"none !important"}},[Object(r["createVNode"])("b",null,"Curr")],-1),Xr=Object(r["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px"}},"Current episode of TB",-1),Qr={style:{"font-weight":"normal"}},Zr=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ea=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ta=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),na={style:{"font-weight":"normal"}},ra=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),aa=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),oa=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{colspan:"10",style:{"text-align":"left"}}," ")],-1),ia=Object(r["createVNode"])("td",{class:"numbers"},"52.",-1),ca=Object(r["createVNode"])("td",{style:{"font-weight":"normal","padding-left":"10px",width:"15px","text-align":"left","border-right-style":"none !important"}},[Object(r["createVNode"])("b",null,"KS")],-1),sa=Object(r["createVNode"])("td",{style:{"border-left-style":"none","text-align":"left","padding-left":"10px"}},"Kaposi’s Sarcoma",-1),ua={style:{"font-weight":"normal"}},la=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),da=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),pa=Object(r["createVNode"])("td",{class:"vertical-separator"}," ",-1),ba={style:{"font-weight":"normal"}},fa=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ma=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ha=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{colspan:"6",style:{"text-align":"left"}},[Object(r["createVNode"])("b",null,"Primary outcomes as of the end of the quarter evaluated")]),Object(r["createVNode"])("td",{colspan:"3",style:{"text-align":"center"}},[Object(r["createVNode"])("b",null,"Out of all patients ever registered")])],-1),ga=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{colspan:"6",style:{"text-align":"left"}}," "),Object(r["createVNode"])("td",{style:{"text-align":"center"}},"PoC"),Object(r["createVNode"])("td",{style:{"text-align":"center"}},"Clinic own**"),Object(r["createVNode"])("td",{style:{"text-align":"center"}},"Checked data")],-1),va=Object(r["createVNode"])("td",{class:"numbers"},"53.",-1),Oa=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px"},colspan:"6"},"Total alive and on ART",-1),ja={style:{"font-weight":"normal"}},_a=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),wa=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ka=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{colspan:"9",style:{"text-align":"center"}}," ")],-1),ya=Object(r["createVNode"])("td",{class:"numbers"},"54.",-1),xa=Object(r["createVNode"])("td",{style:{"font-weight":"bold","text-align":"right","border-right-style":"none","border-bottom-style":"none","border-left-style":"none"},colspan:"2"},"M1",-1),Na=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-right-style":"none","border-bottom-style":"none","border-left-style":"none"},colspan:"4"},"Died within the 1st month after ART initiation",-1),Ca={style:{"font-weight":"normal"}},Va=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Da=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ta=Object(r["createVNode"])("td",{class:"numbers"},"55.",-1),Ia=Object(r["createVNode"])("td",{style:{"font-weight":"bold","text-align":"right","border-right-style":"none","border-top-style":"none","border-left-style":"none","border-bottom-style":"none"},colspan:"2"},"M2",-1),Ra=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none","border-right-style":"none","border-bottom-style":"none","border-left-style":"none"},colspan:"4"},"Died within the 2nd month after ART initiation",-1),Sa={style:{"font-weight":"normal"}},Pa=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Aa=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ea=Object(r["createVNode"])("td",{class:"numbers"},"56.",-1),Ba=Object(r["createVNode"])("td",{style:{"font-weight":"bold","text-align":"right","border-right-style":"none","border-bottom-style":"none","border-left-style":"none","border-top-style":"none"},colspan:"2"},"M3",-1),Fa=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none","border-right-style":"none","border-bottom-style":"none","border-left-style":"none"},colspan:"4"},"Died within the 3rd month after ART initiation",-1),La={style:{"font-weight":"normal"}},Ma=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ha=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Ua=Object(r["createVNode"])("td",{class:"numbers"},"57.",-1),qa=Object(r["createVNode"])("td",{style:{"font-weight":"bold","text-align":"right","border-right-style":"none","border-left-style":"none","border-top-style":"none"},colspan:"2"},"M4+",-1),Ga=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-right-style":"none","border-left-style":"none","border-top-style":"none"},colspan:"4"},"Died after the end of the 3rd month after ART initiation",-1),za={style:{"font-weight":"normal"}},Ya=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Wa=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),$a=Object(r["createVNode"])("td",{class:"numbers"},"58.",-1),Ka=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-style":"none"},colspan:"6"},"Died total",-1),Ja={style:{"font-weight":"normal"}},Xa=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Qa=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),Za=Object(r["createVNode"])("td",{class:"numbers"},"59.",-1),eo=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none","border-bottom-style":"none"},colspan:"6"},"Defaulted (more than 2 months overdue after expected to have run out of ARVs)",-1),to={style:{"font-weight":"normal"}},no=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ro=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),ao=Object(r["createVNode"])("td",{class:"numbers"},"60.",-1),oo=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none","border-bottom-style":"none"},colspan:"6"},"Stopped taking ARVs (clinician or patient own decision, last known alive)",-1),io={style:{"font-weight":"normal"}},co=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),so=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),uo=Object(r["createVNode"])("td",{class:"numbers"},"61.",-1),lo=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-top-style":"none"},colspan:"6"},"Transferred Out",-1),po={style:{"font-weight":"normal"}},bo=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),fo=Object(r["createVNode"])("td",{style:{"font-weight":"normal"}}," ",-1),mo=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",null," "),Object(r["createVNode"])("td",{colspan:"6",style:{"font-style":"italic","text-align":"center"}},"Check completeness of ‘Clinic own data’"),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("img",{src:"/assets/images/sum-arrow.png",class:"sum-arrows"})]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("img",{src:"/assets/images/sum-arrow.png",class:"sum-arrows"})])],-1),ho=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"},"62."),Object(r["createVNode"])("td",{colspan:"2"}," "),Object(r["createVNode"])("td",{colspan:"5",style:{"text-align":"left","border-style":"dotted","border-width":"1px 1px 0px 1px","padding-left":"10px"}},"Total adv. outcomes = Died total + Defaulted + Stopped + TO"),Object(r["createVNode"])("td",{style:{"border-style":"solid","border-width":"1px"}},[Object(r["createVNode"])("span",{class:"postfixes"},"A")]),Object(r["createVNode"])("td",{style:{"border-style":"solid","border-width":"1px"}},[Object(r["createVNode"])("span",{class:"postfixes"},"B")])],-1),go=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"},"63."),Object(r["createVNode"])("td",{colspan:"2"}," "),Object(r["createVNode"])("td",{colspan:"5",style:{"text-align":"left","border-style":"dotted","border-width":"0px 0px 1px 1px","padding-left":"10px"}},"Calculate completeness %   A / B x 100 (Use difference if greater than 100%)"),Object(r["createVNode"])("td",{style:{"border-style":"dotted","border-bottom-width":"1px"}}," "),Object(r["createVNode"])("td",{style:{"border-style":"solid","border-width":"1px"}},[Object(r["createVNode"])("span",{style:{left:"40px"},class:"postfixes"},"%")])],-1),vo=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{colspan:"7",style:{"text-align":"left","font-weight":"bold","padding-left":"10px"}},"Secondary outcomes of those alive on ART"),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("b",null,"P"),Object(r["createTextVNode"])("aeds formul.")]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("b",null,"A"),Object(r["createTextVNode"])("dults formul.")])],-1),Oo=Object(r["createVNode"])("td",{class:"numbers"},"64.",-1),jo=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"}},"ART Regimens",-1),_o=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px"},colspan:"3"}," ",-1),wo=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px"}},"Regimen",-1),ko=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"0",-1),yo=Object(r["createVNode"])("td",{class:"numbers"},"65.",-1),xo=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}}," ",-1),No=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"},colspan:"3"}," ",-1),Co=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Vo=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"2",-1),Do=Object(r["createVNode"])("td",{class:"numbers"},"66.",-1),To=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}}," ",-1),Io=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"},[Object(r["createTextVNode"])("Count regimen for "),Object(r["createVNode"])("u",null,"all patients registered")],-1),Ro=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),So=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"4",-1),Po={class:"granules"},Ao=Object(r["createVNode"])("div",{class:"granules-row"},[Object(r["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(r["createVNode"])("span",null,"PP")]),Object(r["createVNode"])("div",{class:"granules-cell"},[Object(r["createVNode"])("span",null,"PA")])],-1),Eo={class:"granules-row"},Bo={class:"granules-cell granules-right-td"},Fo={class:"granules-cell"},Lo=Object(r["createVNode"])("td",{class:"numbers"},"67.",-1),Mo=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}}," ",-1),Ho=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"},"at this site, including those who currently",-1),Uo=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),qo=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"5",-1),Go=Object(r["createVNode"])("td",{style:{"background-color":"#D9D9D9"}}," ",-1),zo=Object(r["createVNode"])("td",{class:"numbers"},"68.",-1),Yo=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-style":"dotted","border-bottom-width":"1px","border-right-width":"0px","border-top-width":"0px"}}," ",-1),Wo=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"1px","border-style":"dotted","border-left-width":"0px","border-top-width":"0px","text-align":"left"},colspan:"3"},"get supplies from another site",-1),$o=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"1px","border-style":"dotted","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Ko=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"1px","border-style":"dotted","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"6",-1),Jo=Object(r["createVNode"])("td",{style:{"background-color":"#D9D9D9"}}," ",-1),Xo=Object(r["createVNode"])("td",{class:"numbers"},"69.",-1),Qo=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}}," ",-1),Zo=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"}," ",-1),ei=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),ti=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"7",-1),ni=Object(r["createVNode"])("td",{style:{"background-color":"#D9D9D9"}}," ",-1),ri=Object(r["createVNode"])("td",{class:"numbers"},"70.",-1),ai=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}}," ",-1),oi=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"}," ",-1),ii=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),ci=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"8",-1),si=Object(r["createVNode"])("td",{style:{"background-color":"#D9D9D9"}}," ",-1),ui=Object(r["createVNode"])("td",{class:"numbers"},"71.",-1),li=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}}," ",-1),di=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"}," ",-1),pi=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),bi=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"9",-1),fi={class:"granules"},mi=Object(r["createVNode"])("div",{class:"granules-row"},[Object(r["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(r["createVNode"])("span",null,"PP")]),Object(r["createVNode"])("div",{class:"granules-cell"},[Object(r["createVNode"])("span",null,"PA")])],-1),hi={class:"granules-row"},gi={class:"granules-cell granules-right-td"},vi={class:"granules-cell"},Oi=Object(r["createVNode"])("td",{class:"numbers"},"72.",-1),ji=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"0px"}}," ",-1),_i=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"0px"},colspan:"3"}," ",-1),wi=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),ki=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"10",-1),yi=Object(r["createVNode"])("td",{style:{"background-color":"#D9D9D9"}}," ",-1),xi=Object(r["createVNode"])("td",{class:"numbers"},"73.",-1),Ni=Object(r["createVNode"])("td",{colspan:"1",style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}}," ",-1),Ci=Object(r["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"4"},"Specify ‘Other’ Regimens and number of patients on each",-1),Vi=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Di=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"11",-1),Ti={class:"granules"},Ii=Object(r["createVNode"])("div",{class:"granules-row"},[Object(r["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(r["createVNode"])("span",null,"PP")]),Object(r["createVNode"])("div",{class:"granules-cell"},[Object(r["createVNode"])("span",null,"PA")])],-1),Ri={class:"granules-row"},Si={class:"granules-cell granules-right-td"},Pi={class:"granules-cell"},Ai=Object(r["createVNode"])("td",{class:"numbers"},"74.",-1),Ei=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}}," ",-1),Bi=Object(r["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"}," ",-1),Fi=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Li=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"12",-1),Mi={class:"granules"},Hi=Object(r["createVNode"])("div",{class:"granules-row"},[Object(r["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(r["createVNode"])("span",null,"PP")]),Object(r["createVNode"])("div",{class:"granules-cell"},[Object(r["createVNode"])("span",null,"PA")])],-1),Ui={class:"granules-row"},qi={class:"granules-cell granules-right-td"},Gi={class:"granules-cell"},zi=Object(r["createVNode"])("td",{class:"numbers"},"75.",-1),Yi=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}}," ",-1),Wi=Object(r["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"}," ",-1),$i=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Ki=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"13",-1),Ji=Object(r["createVNode"])("td",{style:{"background-color":"#D9D9D9"}}," ",-1),Xi=Object(r["createVNode"])("td",{class:"numbers"},"76.",-1),Qi=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}}," ",-1),Zi=Object(r["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"}," ",-1),ec=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),tc=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"14",-1),nc={class:"granules"},rc=Object(r["createVNode"])("div",{class:"granules-row"},[Object(r["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(r["createVNode"])("span",null,"PP")]),Object(r["createVNode"])("div",{class:"granules-cell"},[Object(r["createVNode"])("span",null,"PA")])],-1),ac={class:"granules-row"},oc={class:"granules-cell granules-right-td"},ic={class:"granules-cell"},cc=Object(r["createVNode"])("td",{class:"numbers"},"77.",-1),sc=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}}," ",-1),uc=Object(r["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"}," ",-1),lc=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),dc=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"15",-1),pc={class:"granules"},bc=Object(r["createVNode"])("div",{class:"granules-row"},[Object(r["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(r["createVNode"])("span",null,"PP")]),Object(r["createVNode"])("div",{class:"granules-cell"},[Object(r["createVNode"])("span",null,"PA")])],-1),fc={class:"granules-row"},mc={class:"granules-cell granules-right-td"},hc={class:"granules-cell"},gc=Object(r["createVNode"])("td",{class:"numbers"},"78.",-1),vc=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}}," ",-1),Oc=Object(r["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"}," ",-1),jc=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),_c=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"16",-1),wc=Object(r["createVNode"])("td",{class:"numbers"},"79.",-1),kc=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"0px","border-right-width":"0px","border-top-width":"1px"}}," ",-1),yc=Object(r["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"0px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"}," ",-1),xc=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px"}},"Regimen",-1),Nc=Object(r["createVNode"])("td",{style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"right","padding-right":"5px","font-weight":"bold"}},"17",-1),Cc={class:"granules"},Vc=Object(r["createVNode"])("div",{class:"granules-row"},[Object(r["createVNode"])("div",{class:"granules-cell granules-right-td"},[Object(r["createVNode"])("span",null,"PP")]),Object(r["createVNode"])("div",{class:"granules-cell"},[Object(r["createVNode"])("span",null,"PA")])],-1),Dc={class:"granules-row"},Tc={class:"granules-cell granules-right-td"},Ic={class:"granules-cell"},Rc=Object(r["createVNode"])("td",{class:"numbers"},"80.",-1),Sc=Object(r["createVNode"])("td",{colspan:"2",style:{"text-align":"left","padding-left":"10px","border-top-style":"dotted","border-bottom-width":"1px","border-right-width":"0px","border-top-width":"1px"}}," ",-1),Pc=Object(r["createVNode"])("td",{style:{"border-right-width":"1px","border-bottom-width":"1px","border-top-style":"dotted","text-align":"left","border-left-width":"0px","border-top-width":"1px"},colspan:"3"}," ",-1),Ac=Object(r["createVNode"])("td",{colspan:"2",style:{"border-right-width":"0px","border-bottom-width":"0px","border-left-width":"0px","border-top-width":"0px","text-align":"left","padding-left":"10px"}},"Other (paed./adult)",-1),Ec=Object(r["createVNode"])("td",null," ",-1),Bc=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",null," "),Object(r["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}}," ")],-1),Fc={style:{"page-break-before":"always"}},Lc=Object(r["createVNode"])("td",{class:"numbers"},"81.",-1),Mc=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"}},"Pregnant / Breastfeeding",-1),Hc=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px"},colspan:"4"},"(as of the last visit before end of quarter)",-1),Uc=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"Pregnant",-1),qc={colspan:"2",style:{"font-weight":"normal"}},Gc=Object(r["createVNode"])("td",{class:"numbers"},"82.",-1),zc=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),Yc=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"}," ",-1),Wc=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"Breastfeeding",-1),$c={colspan:"2",style:{"font-weight":"normal"}},Kc=Object(r["createVNode"])("td",{class:"numbers"},"83.",-1),Jc=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),Xc=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"1px","border-top-width":"0px"},colspan:"4"}," ",-1),Qc=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"},colspan:"2"},"All others (not circled)",-1),Zc={colspan:"2",style:{"font-weight":"normal"}},es=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",null," "),Object(r["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}}," ")],-1),ts=Object(r["createVNode"])("td",{class:"numbers"},"84.",-1),ns=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"},colspan:"2"},[Object(r["createTextVNode"])("Current TB status"),Object(r["createVNode"])("br"),Object(r["createTextVNode"])("any form of TB")],-1),rs=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px"},colspan:"3"},"(as of the last visit before end of quarter)",-1),as=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"TB not suspected",-1),os={colspan:"2",style:{"font-weight":"normal"}},is=Object(r["createVNode"])("td",{class:"numbers"},"85.",-1),cs=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),ss=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"}," ",-1),us=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"TB suspected",-1),ls={colspan:"2",style:{"font-weight":"normal"}},ds=Object(r["createVNode"])("td",{class:"numbers"},"86.",-1),ps=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),bs=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"}," ",-1),fs=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},[Object(r["createTextVNode"])("TB conf., "),Object(r["createVNode"])("b",null,"not"),Object(r["createTextVNode"])(" on Rx")],-1),ms={colspan:"2",style:{"font-weight":"normal"}},hs=Object(r["createVNode"])("td",{class:"numbers"},"87.",-1),gs=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),vs=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"}," ",-1),Os=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},[Object(r["createTextVNode"])("TB conf., "),Object(r["createVNode"])("b",null,"on"),Object(r["createTextVNode"])(" TB Rx")],-1),js={colspan:"2",style:{"font-weight":"normal"}},_s=Object(r["createVNode"])("td",{class:"numbers"},"88.",-1),ws=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),ks=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"1px","border-top-width":"0px"},colspan:"4"}," ",-1),ys=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"},colspan:"2"},"Unknown (not circled)",-1),xs={colspan:"2",style:{"font-weight":"normal"}},Ns=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",null," "),Object(r["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}}," ")],-1),Cs=Object(r["createVNode"])("td",{class:"numbers"},"89.",-1),Vs=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"}},"Side effects",-1),Ds=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px"},colspan:"4"},"(as of the last visit before end of quarter)",-1),Ts=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"None",-1),Is={colspan:"2",style:{"font-weight":"normal"}},Rs=Object(r["createVNode"])("td",{class:"numbers"},"90.",-1),Ss=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),Ps=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"},"ADRReportformfilledforeachcase?(seeQ110.)◄",-1),As=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"Any side effects",-1),Es={colspan:"2",style:{"font-weight":"normal"}},Bs=Object(r["createVNode"])("td",{class:"numbers"},"91.",-1),Fs=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),Ls=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"1px","border-top-width":"0px"},colspan:"4"}," ",-1),Ms=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"},colspan:"2"},"Unknown (not circled)",-1),Hs={colspan:"2",style:{"font-weight":"normal"}},Us=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",null," "),Object(r["createVNode"])("td",{colspan:"9",style:{"text-align":"left"}}," ")],-1),qs=Object(r["createVNode"])("td",{class:"numbers"},"92.",-1),Gs=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-right-width":"0px"}},"Adherence",-1),zs=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px"},colspan:"4"},"(as of the last visit before end of quarter)",-1),Ys=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"0 – 3 doses missed",-1),Ws={colspan:"2",style:{"font-weight":"normal"}},$s=Object(r["createVNode"])("td",{class:"numbers"},"93.",-1),Ks=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"0px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),Js=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"0px","border-top-width":"0px"},colspan:"4"},null,-1),Xs=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"0px","text-align":"left","padding-left":"10px"},colspan:"2"},"4+ doses missed",-1),Qs={colspan:"2",style:{"font-weight":"normal"}},Zs=Object(r["createVNode"])("td",{class:"numbers"},"94.",-1),eu=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"0px","border-right-width":"0px"}}," ",-1),tu=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-left-width":"0px","border-right-width":"0px","border-bottom-width":"1px","border-top-width":"0px"},colspan:"4"}," ",-1),nu=Object(r["createVNode"])("td",{style:{"font-weight":"normal","border-top-width":"0px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"},colspan:"2"},"Unknown (not circled)",-1),ru={colspan:"2",style:{"font-weight":"normal"}},au=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{colspan:"9",style:{"text-align":"left","font-weight":"bold","padding-left":"10px"}},"Preventive services / HIV related diseases")],-1),ou=Object(r["createVNode"])("td",{class:"numbers"},"95.",-1),iu=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px","font-weight":"bold"}},"TPT",-1),cu=Object(r["createVNode"])("td",{colspan:"4",style:{"font-weight":"normal","border-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"}},"Number of ART patients newly started on TB preventive therapy this quarter",-1),su={style:{"text-align":"right","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px"}},uu=Object(r["createVNode"])("td",{style:{"font-weight":"bold","order-top-width":"1px","text-align":"right","border-left-width":"0px","border-bottom-width":"1px","padding-right":"5px"}},"6H",-1),lu={style:{"text-align":"right","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px"}},du=Object(r["createVNode"])("td",{style:{"font-weight":"bold","order-top-width":"1px","text-align":"right","border-left-width":"0px","border-bottom-width":"1px","padding-right":"5px"}},"3HP",-1),pu=Object(r["createVNode"])("td",{class:"numbers"},"96.",-1),bu=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px","font-weight":"bold"}},"CPT / IPT",-1),fu=Object(r["createVNode"])("td",{colspan:"4",style:{"font-weight":"normal","border-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"}},"Approx. % of patients retained in ART who are currently on CPT / IPT",-1),mu={style:{"text-align":"right","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px"}},hu=Object(r["createVNode"])("td",{style:{"font-weight":"bold","order-top-width":"1px","text-align":"right","border-left-width":"0px","border-bottom-width":"1px","padding-right":"5px"}},"CPT%",-1),gu={style:{"text-align":"right","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px"}},vu=Object(r["createVNode"])("td",{style:{"font-weight":"bold","order-top-width":"1px","text-align":"right","border-left-width":"0px","border-bottom-width":"1px","padding-right":"5px"}},"IPT%",-1),Ou=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{colspan:"9"}," ")],-1),ju=Object(r["createVNode"])("td",{class:"numbers"},"97.",-1),_u=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px","font-weight":"bold"}},"PIFP",-1),wu=Object(r["createVNode"])("td",{colspan:"4",style:{"font-weight":"normal","border-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"}},"Approx. % of women who received Depo at ART in the last quarter",-1),ku={colspan:"4",style:{"text-align":"right","padding-right":"10px","order-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px"}},yu=Object(r["createTextVNode"])(" %"),xu=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{colspan:"9"}," ")],-1),Nu=Object(r["createVNode"])("td",{class:"numbers"},"98.",-1),Cu=Object(r["createVNode"])("td",{style:{"text-align":"left","padding-left":"10px","border-bottom-width":"1px","border-top-width":"1px","border-right-width":"0px","font-weight":"bold"}},"BP screen",-1),Vu=Object(r["createVNode"])("td",{colspan:"4",style:{"font-weight":"normal","border-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px","text-align":"left","padding-left":"10px"}},"Approx. % of adult ART patients with BP recorded at least once this year",-1),Du={colspan:"4",style:{"text-align":"right","padding-right":"10px","order-top-width":"1px","border-left-width":"0px","border-bottom-width":"1px"}},Tu=Object(r["createTextVNode"])(" %"),Iu=Object(r["createVNode"])("tr",{class:"horisonatl-separator"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{colspan:"9"}," ")],-1);Object(r["popScopeId"])();var Ru=a((function(e,t,n,a,Ru,Su){return Object(r["openBlock"])(),Object(r["createBlock"])("table",o,[i,c,Object(r["createVNode"])("tr",null,[s,u,Object(r["createVNode"])("td",l,[Object(r["createVNode"])("a",{href:"#",onClick:t[1]||(t[1]=Object(r["withModifiers"])((function(t){e.drillDown("total_registered")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_registered||0),1)]),d,p,b,Object(r["createVNode"])("td",f,[Object(r["createVNode"])("a",{href:"#",onClick:t[2]||(t[2]=Object(r["withModifiers"])((function(t){e.drillDown("cum_total_registered")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_total_registered||0),1)]),m,h]),g,Object(r["createVNode"])("tr",null,[v,O,j,Object(r["createVNode"])("td",_,[Object(r["createVNode"])("a",{href:"#",onClick:t[3]||(t[3]=Object(r["withModifiers"])((function(t){e.drillDown("males_initiated_on_art_first_time")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.males_initiated_on_art_first_time||0),1)]),w,k,y,Object(r["createVNode"])("td",x,[Object(r["createVNode"])("a",{href:"#",onClick:t[4]||(t[4]=Object(r["withModifiers"])((function(t){e.drillDown("cum_males_initiated_on_art_first_time")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_males_initiated_on_art_first_time||0),1)]),N,C]),Object(r["createVNode"])("tr",null,[V,D,T,Object(r["createVNode"])("td",I,[Object(r["createVNode"])("a",{href:"#",onClick:t[5]||(t[5]=Object(r["withModifiers"])((function(t){e.drillDown("initial_non_pregnant_females_all_ages")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.initial_non_pregnant_females_all_ages||0),1)]),R,S,P,Object(r["createVNode"])("td",A,[Object(r["createVNode"])("a",{href:"#",onClick:t[6]||(t[6]=Object(r["withModifiers"])((function(t){e.drillDown("cum_initial_non_pregnant_females_all_ages")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_initial_non_pregnant_females_all_ages||0),1)]),E,B]),Object(r["createVNode"])("tr",null,[F,L,M,Object(r["createVNode"])("td",H,[Object(r["createVNode"])("a",{href:"#",onClick:t[7]||(t[7]=Object(r["withModifiers"])((function(t){e.drillDown("initial_pregnant_females_all_ages")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.initial_pregnant_females_all_ages||0),1)]),U,q,G,Object(r["createVNode"])("td",z,[Object(r["createVNode"])("a",{href:"#",onClick:t[8]||(t[8]=Object(r["withModifiers"])((function(t){e.drillDown("cum_initial_pregnant_females_all_ages")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_initial_pregnant_females_all_ages||0),1)]),Y,W]),Object(r["createVNode"])("tr",null,[$,K,J,Object(r["createVNode"])("td",X,[Object(r["createVNode"])("a",{href:"#",onClick:t[9]||(t[9]=Object(r["withModifiers"])((function(t){e.drillDown("unknown_gender")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.unknown_gender||0),1)]),Q,Z,ee,Object(r["createVNode"])("td",te,[Object(r["createVNode"])("a",{href:"#",onClick:t[10]||(t[10]=Object(r["withModifiers"])((function(t){e.drillDown("cum_unknown_gender")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_unknown_gender||0),1)]),ne,re]),Object(r["createVNode"])("tr",null,[ae,oe,ie,Object(r["createVNode"])("td",ce,[Object(r["createVNode"])("a",{href:"#",onClick:t[11]||(t[11]=Object(r["withModifiers"])((function(t){e.drillDown("initiated_on_art_first_time")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.initiated_on_art_first_time||0),1)]),se,ue,le,Object(r["createVNode"])("td",de,[Object(r["createVNode"])("a",{href:"#",onClick:t[12]||(t[12]=Object(r["withModifiers"])((function(t){e.drillDown("cum_initiated_on_art_first_time")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_initiated_on_art_first_time||0),1)]),pe,be]),Object(r["createVNode"])("tr",null,[fe,me,Object(r["createVNode"])("td",he,[Object(r["createVNode"])("a",{href:"#",onClick:t[13]||(t[13]=Object(r["withModifiers"])((function(t){e.drillDown("re_initiated_on_art")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.re_initiated_on_art||0),1)]),ge,ve,Oe,Object(r["createVNode"])("td",je,[Object(r["createVNode"])("a",{href:"#",onClick:t[14]||(t[14]=Object(r["withModifiers"])((function(t){e.drillDown("cum_re_initiated_on_art")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_re_initiated_on_art||0),1)]),_e,we]),Object(r["createVNode"])("tr",null,[ke,ye,Object(r["createVNode"])("td",xe,[Object(r["createVNode"])("a",{href:"#",onClick:t[15]||(t[15]=Object(r["withModifiers"])((function(t){e.drillDown("transfer_in")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.transfer_in||0),1)]),Ne,Ce,Ve,Object(r["createVNode"])("td",De,[Object(r["createVNode"])("a",{href:"#",onClick:t[16]||(t[16]=Object(r["withModifiers"])((function(t){e.drillDown("cum_transfer_in")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_transfer_in||0),1)]),Te,Ie]),Re,Object(r["createVNode"])("tr",null,[Se,Pe,Object(r["createVNode"])("td",Ae,[Object(r["createVNode"])("a",{href:"#",onClick:t[17]||(t[17]=Object(r["withModifiers"])((function(t){e.drillDown("quarterly_all_males")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.quarterly_all_males||0),1)]),Ee,Be,Fe,Object(r["createVNode"])("td",Le,[Object(r["createVNode"])("a",{href:"#",onClick:t[18]||(t[18]=Object(r["withModifiers"])((function(t){e.drillDown("cum_all_males")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_all_males||0),1)]),Me,He]),Object(r["createVNode"])("tr",null,[Ue,qe,Object(r["createVNode"])("td",Ge,[Object(r["createVNode"])("a",{href:"#",onClick:t[19]||(t[19]=Object(r["withModifiers"])((function(t){e.drillDown("non_pregnant_females")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.non_pregnant_females||0),1)]),ze,Ye,We,Object(r["createVNode"])("td",$e,[Object(r["createVNode"])("a",{href:"#",onClick:t[20]||(t[20]=Object(r["withModifiers"])((function(t){e.drillDown("cum_non_pregnant_females")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_non_pregnant_females||0),1)]),Ke,Je]),Object(r["createVNode"])("tr",null,[Xe,Qe,Object(r["createVNode"])("td",Ze,[Object(r["createVNode"])("a",{href:"#",onClick:t[21]||(t[21]=Object(r["withModifiers"])((function(t){e.drillDown("pregnant_females_all_ages")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.pregnant_females_all_ages||0),1)]),et,tt,nt,Object(r["createVNode"])("td",rt,[Object(r["createVNode"])("a",{href:"#",onClick:t[22]||(t[22]=Object(r["withModifiers"])((function(t){e.drillDown("cum_pregnant_females_all_ages")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_pregnant_females_all_ages||0),1)]),at,ot]),it,Object(r["createVNode"])("tr",null,[ct,st,Object(r["createVNode"])("td",ut,[Object(r["createVNode"])("a",{href:"#",onClick:t[23]||(t[23]=Object(r["withModifiers"])((function(t){e.drillDown("children_below_24_months_at_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.children_below_24_months_at_art_initiation||0),1)]),lt,dt,pt,Object(r["createVNode"])("td",bt,[Object(r["createVNode"])("a",{href:"#",onClick:t[24]||(t[24]=Object(r["withModifiers"])((function(t){e.drillDown("cum_children_below_24_months_at_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_children_below_24_months_at_art_initiation||0),1)]),ft,mt]),Object(r["createVNode"])("tr",null,[ht,gt,Object(r["createVNode"])("td",vt,[Object(r["createVNode"])("a",{href:"#",onClick:t[25]||(t[25]=Object(r["withModifiers"])((function(t){e.drillDown("children_24_months_14_years_at_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.children_24_months_14_years_at_art_initiation||0),1)]),Ot,jt,_t,Object(r["createVNode"])("td",wt,[Object(r["createVNode"])("a",{href:"#",onClick:t[26]||(t[26]=Object(r["withModifiers"])((function(t){e.drillDown("cum_children_24_months_14_years_at_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_children_24_months_14_years_at_art_initiation||0),1)]),kt,yt]),Object(r["createVNode"])("tr",null,[xt,Nt,Object(r["createVNode"])("td",Ct,[Object(r["createVNode"])("a",{href:"#",onClick:t[27]||(t[27]=Object(r["withModifiers"])((function(t){e.drillDown("adults_at_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.adults_at_art_initiation||0),1)]),Vt,Dt,Tt,Object(r["createVNode"])("td",It,[Object(r["createVNode"])("a",{href:"#",onClick:t[28]||(t[28]=Object(r["withModifiers"])((function(t){e.drillDown("cum_adults_at_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_adults_at_art_initiation||0),1)]),Rt,St]),Pt,Object(r["createVNode"])("tr",null,[At,Et,Bt,Object(r["createVNode"])("td",Ft,[Object(r["createVNode"])("a",{href:"#",onClick:t[29]||(t[29]=Object(r["withModifiers"])((function(t){e.drillDown("presumed_severe_hiv_disease_in_infants")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.presumed_severe_hiv_disease_in_infants||0),1)]),Lt,Mt,Ht,Object(r["createVNode"])("td",Ut,[Object(r["createVNode"])("a",{href:"#",onClick:t[30]||(t[30]=Object(r["withModifiers"])((function(t){e.drillDown("cum_presumed_severe_hiv_disease_in_infants")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_presumed_severe_hiv_disease_in_infants||0),1)]),qt,Gt]),Object(r["createVNode"])("tr",null,[zt,Yt,Wt,Object(r["createVNode"])("td",$t,[Object(r["createVNode"])("a",{href:"#",onClick:t[31]||(t[31]=Object(r["withModifiers"])((function(t){e.drillDown("confirmed_hiv_infection_in_infants_pcr")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.confirmed_hiv_infection_in_infants_pcr||0),1)]),Kt,Jt,Xt,Object(r["createVNode"])("td",Qt,[Object(r["createVNode"])("a",{href:"#",onClick:t[32]||(t[32]=Object(r["withModifiers"])((function(t){e.drillDown("cum_confirmed_hiv_infection_in_infants_pcr")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_confirmed_hiv_infection_in_infants_pcr||0),1)]),Zt,en]),Object(r["createVNode"])("tr",null,[tn,nn,rn,Object(r["createVNode"])("td",an,[Object(r["createVNode"])("a",{href:"#",onClick:t[33]||(t[33]=Object(r["withModifiers"])((function(t){e.drillDown("quarterly_children_12_59_months")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.quarterly_children_12_59_months||0),1)]),on,cn,sn,Object(r["createVNode"])("td",un,[Object(r["createVNode"])("a",{href:"#",onClick:t[34]||(t[34]=Object(r["withModifiers"])((function(t){e.drillDown("cum_children_12_59_months")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_children_12_59_months||0),1)]),ln,dn]),Object(r["createVNode"])("tr",null,[pn,bn,fn,Object(r["createVNode"])("td",mn,[Object(r["createVNode"])("a",{href:"#",onClick:t[35]||(t[35]=Object(r["withModifiers"])((function(t){e.drillDown("pregnant_women")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.pregnant_women||0),1)]),hn,gn,vn,Object(r["createVNode"])("td",On,[Object(r["createVNode"])("a",{href:"#",onClick:t[36]||(t[36]=Object(r["withModifiers"])((function(t){e.drillDown("cum_pregnant_women")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_pregnant_women||0),1)]),jn,_n]),Object(r["createVNode"])("tr",null,[wn,kn,yn,Object(r["createVNode"])("td",xn,[Object(r["createVNode"])("a",{href:"#",onClick:t[37]||(t[37]=Object(r["withModifiers"])((function(t){e.drillDown("breastfeeding_mothers")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.breastfeeding_mothers||0),1)]),Nn,Cn,Vn,Object(r["createVNode"])("td",Dn,[Object(r["createVNode"])("a",{href:"#",onClick:t[38]||(t[38]=Object(r["withModifiers"])((function(t){e.drillDown("cum_breastfeeding_mothers")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_breastfeeding_mothers||0),1)]),Tn,In]),Object(r["createVNode"])("tr",null,[Rn,Sn,Pn,Object(r["createVNode"])("td",An,[Object(r["createVNode"])("a",{href:"#",onClick:t[39]||(t[39]=Object(r["withModifiers"])((function(t){e.drillDown("who_stage_two")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.who_stage_two||0),1)]),En,Bn,Fn,Object(r["createVNode"])("td",Ln,[Object(r["createVNode"])("a",{href:"#",onClick:t[40]||(t[40]=Object(r["withModifiers"])((function(t){e.drillDown("cum_who_stage_two")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_who_stage_two||0),1)]),Mn,Hn]),Object(r["createVNode"])("tr",null,[Un,qn,Gn,Object(r["createVNode"])("td",zn,[Object(r["createVNode"])("a",{href:"#",onClick:t[41]||(t[41]=Object(r["withModifiers"])((function(t){e.drillDown("asymptomatic")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.asymptomatic||0),1)]),Yn,Wn,$n,Object(r["createVNode"])("td",Kn,[Object(r["createVNode"])("a",{href:"#",onClick:t[42]||(t[42]=Object(r["withModifiers"])((function(t){e.drillDown("cum_asymptomatic")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_asymptomatic||0),1)]),Jn,Xn]),Object(r["createVNode"])("tr",null,[Qn,Zn,er,Object(r["createVNode"])("td",tr,[Object(r["createVNode"])("a",{href:"#",onClick:t[43]||(t[43]=Object(r["withModifiers"])((function(t){e.drillDown("who_stage_three")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.who_stage_three||0),1)]),nr,rr,ar,Object(r["createVNode"])("td",or,[Object(r["createVNode"])("a",{href:"#",onClick:t[44]||(t[44]=Object(r["withModifiers"])((function(t){e.drillDown("cum_who_stage_three")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_who_stage_three||0),1)]),ir,cr]),Object(r["createVNode"])("tr",null,[sr,ur,lr,Object(r["createVNode"])("td",dr,[Object(r["createVNode"])("a",{href:"#",onClick:t[45]||(t[45]=Object(r["withModifiers"])((function(t){e.drillDown("who_stage_four")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.who_stage_four||0),1)]),pr,br,fr,Object(r["createVNode"])("td",mr,[Object(r["createVNode"])("a",{href:"#",onClick:t[46]||(t[46]=Object(r["withModifiers"])((function(t){e.drillDown("cum_who_stage_four")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_who_stage_four||0),1)]),hr,gr]),Object(r["createVNode"])("tr",null,[vr,Or,jr,Object(r["createVNode"])("td",_r,[Object(r["createVNode"])("a",{href:"#",onClick:t[47]||(t[47]=Object(r["withModifiers"])((function(t){e.drillDown("unknown_other_reason_outside_guidelines")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.unknown_other_reason_outside_guidelines||0),1)]),wr,kr,yr,Object(r["createVNode"])("td",xr,[Object(r["createVNode"])("a",{href:"#",onClick:t[48]||(t[48]=Object(r["withModifiers"])((function(t){e.drillDown("cum_unknown_other_reason_outside_guidelines")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_unknown_other_reason_outside_guidelines||0),1)]),Nr,Cr]),Vr,Object(r["createVNode"])("tr",null,[Dr,Tr,Ir,Object(r["createVNode"])("td",Rr,[Object(r["createVNode"])("a",{href:"#",onClick:t[49]||(t[49]=Object(r["withModifiers"])((function(t){e.drillDown("no_tb")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.no_tb||0),1)]),Sr,Pr,Ar,Object(r["createVNode"])("td",Er,[Object(r["createVNode"])("a",{href:"#",onClick:t[50]||(t[50]=Object(r["withModifiers"])((function(t){e.drillDown("cum_no_tb")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_no_tb||0),1)]),Br,Fr]),Object(r["createVNode"])("tr",null,[Lr,Mr,Hr,Object(r["createVNode"])("td",Ur,[Object(r["createVNode"])("a",{href:"#",onClick:t[51]||(t[51]=Object(r["withModifiers"])((function(t){e.drillDown("tb_within_the_last_two_years")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.tb_within_the_last_two_years||0),1)]),qr,Gr,zr,Object(r["createVNode"])("td",Yr,[Object(r["createVNode"])("a",{href:"#",onClick:t[52]||(t[52]=Object(r["withModifiers"])((function(t){e.drillDown("cum_tb_within_the_last_two_years")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_tb_within_the_last_two_years||0),1)]),Wr,$r]),Object(r["createVNode"])("tr",null,[Kr,Jr,Xr,Object(r["createVNode"])("td",Qr,[Object(r["createVNode"])("a",{href:"#",onClick:t[53]||(t[53]=Object(r["withModifiers"])((function(t){e.drillDown("current_episode_of_tb")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.current_episode_of_tb||0),1)]),Zr,ea,ta,Object(r["createVNode"])("td",na,[Object(r["createVNode"])("a",{href:"#",onClick:t[54]||(t[54]=Object(r["withModifiers"])((function(t){e.drillDown("cum_current_episode_of_tb")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_current_episode_of_tb||0),1)]),ra,aa]),oa,Object(r["createVNode"])("tr",null,[ia,ca,sa,Object(r["createVNode"])("td",ua,[Object(r["createVNode"])("a",{href:"#",onClick:t[55]||(t[55]=Object(r["withModifiers"])((function(t){e.drillDown("kaposis_sarcoma")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.kaposis_sarcoma||0),1)]),la,da,pa,Object(r["createVNode"])("td",ba,[Object(r["createVNode"])("a",{href:"#",onClick:t[56]||(t[56]=Object(r["withModifiers"])((function(t){e.drillDown("cum_kaposis_sarcoma")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.cum_kaposis_sarcoma||0),1)]),fa,ma]),ha,ga,Object(r["createVNode"])("tr",null,[va,Oa,Object(r["createVNode"])("td",ja,[Object(r["createVNode"])("a",{href:"#",onClick:t[57]||(t[57]=Object(r["withModifiers"])((function(t){e.drillDown("total_alive_and_on_art")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_alive_and_on_art||0),1)]),_a,wa]),ka,Object(r["createVNode"])("tr",null,[ya,xa,Na,Object(r["createVNode"])("td",Ca,[Object(r["createVNode"])("a",{href:"#",onClick:t[58]||(t[58]=Object(r["withModifiers"])((function(t){e.drillDown("died_within_the_1st_month_of_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.died_within_the_1st_month_of_art_initiation||0),1)]),Va,Da]),Object(r["createVNode"])("tr",null,[Ta,Ia,Ra,Object(r["createVNode"])("td",Sa,[Object(r["createVNode"])("a",{href:"#",onClick:t[59]||(t[59]=Object(r["withModifiers"])((function(t){e.drillDown("died_within_the_2nd_month_of_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.died_within_the_2nd_month_of_art_initiation||0),1)]),Pa,Aa]),Object(r["createVNode"])("tr",null,[Ea,Ba,Fa,Object(r["createVNode"])("td",La,[Object(r["createVNode"])("a",{href:"#",onClick:t[60]||(t[60]=Object(r["withModifiers"])((function(t){e.drillDown("died_within_the_3rd_month_of_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.died_within_the_3rd_month_of_art_initiation||0),1)]),Ma,Ha]),Object(r["createVNode"])("tr",null,[Ua,qa,Ga,Object(r["createVNode"])("td",za,[Object(r["createVNode"])("a",{href:"#",onClick:t[61]||(t[61]=Object(r["withModifiers"])((function(t){e.drillDown("died_after_the_3rd_month_of_art_initiation")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.died_after_the_3rd_month_of_art_initiation||0),1)]),Ya,Wa]),Object(r["createVNode"])("tr",null,[$a,Ka,Object(r["createVNode"])("td",Ja,[Object(r["createVNode"])("a",{href:"#",onClick:t[62]||(t[62]=Object(r["withModifiers"])((function(t){e.drillDown("died_total")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.died_total||0),1)]),Xa,Qa]),Object(r["createVNode"])("tr",null,[Za,eo,Object(r["createVNode"])("td",to,[Object(r["createVNode"])("a",{href:"#",onClick:t[63]||(t[63]=Object(r["withModifiers"])((function(t){e.drillDown("defaulted")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.defaulted||0),1)]),no,ro]),Object(r["createVNode"])("tr",null,[ao,oo,Object(r["createVNode"])("td",io,[Object(r["createVNode"])("a",{href:"#",onClick:t[64]||(t[64]=Object(r["withModifiers"])((function(t){e.drillDown("stopped_art")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.stopped_art||0),1)]),co,so]),Object(r["createVNode"])("tr",null,[uo,lo,Object(r["createVNode"])("td",po,[Object(r["createVNode"])("a",{href:"#",onClick:t[65]||(t[65]=Object(r["withModifiers"])((function(t){e.drillDown("transfered_out")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.transfered_out||0),1)]),bo,fo]),mo,ho,go,vo,Object(r["createVNode"])("tr",null,[Oo,jo,_o,wo,ko,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[66]||(t[66]=Object(r["withModifiers"])((function(t){e.drillDown("zero_p")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.zero_p||0),1)]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[67]||(t[67]=Object(r["withModifiers"])((function(t){e.drillDown("zero_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.zero_a||0),1)])]),Object(r["createVNode"])("tr",null,[yo,xo,No,Co,Vo,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[68]||(t[68]=Object(r["withModifiers"])((function(t){e.drillDown("two_p")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.two_p||0),1)]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[69]||(t[69]=Object(r["withModifiers"])((function(t){e.drillDown("two_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.two_a||0),1)])]),Object(r["createVNode"])("tr",null,[Do,To,Io,Ro,So,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",Po,[Ao,Object(r["createVNode"])("div",Eo,[Object(r["createVNode"])("div",Bo,[Object(r["createVNode"])("a",{href:"#",onClick:t[70]||(t[70]=Object(r["withModifiers"])((function(t){e.drillDown("four_pp")}),["prevent"])),id:"four_pp"},Object(r["toDisplayString"])(e.indicators.four_pp||0),1)]),Object(r["createVNode"])("div",Fo,[Object(r["createVNode"])("a",{href:"#",onClick:t[71]||(t[71]=Object(r["withModifiers"])((function(t){e.drillDown("four_pa")}),["prevent"])),id:"four_pa"},Object(r["toDisplayString"])(e.indicators.four_pa||0),1)])])])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[72]||(t[72]=Object(r["withModifiers"])((function(t){e.drillDown("four_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.four_a||0),1)])]),Object(r["createVNode"])("tr",null,[Lo,Mo,Ho,Uo,qo,Go,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[73]||(t[73]=Object(r["withModifiers"])((function(t){e.drillDown("five_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.five_a||0),1)])]),Object(r["createVNode"])("tr",null,[zo,Yo,Wo,$o,Ko,Jo,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[74]||(t[74]=Object(r["withModifiers"])((function(t){e.drillDown("six_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.six_a||0),1)])]),Object(r["createVNode"])("tr",null,[Xo,Qo,Zo,ei,ti,ni,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[75]||(t[75]=Object(r["withModifiers"])((function(t){e.drillDown("seven_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.seven_a||0),1)])]),Object(r["createVNode"])("tr",null,[ri,ai,oi,ii,ci,si,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[76]||(t[76]=Object(r["withModifiers"])((function(t){e.drillDown("eight_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.eight_a||0),1)])]),Object(r["createVNode"])("tr",null,[ui,li,di,pi,bi,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",fi,[mi,Object(r["createVNode"])("div",hi,[Object(r["createVNode"])("div",gi,[Object(r["createVNode"])("a",{href:"#",onClick:t[77]||(t[77]=Object(r["withModifiers"])((function(t){e.drillDown("nine_pp")}),["prevent"])),id:"nine_pp"},Object(r["toDisplayString"])(e.indicators.nine_pp||0),1)]),Object(r["createVNode"])("div",vi,[Object(r["createVNode"])("a",{href:"#",onClick:t[78]||(t[78]=Object(r["withModifiers"])((function(t){e.drillDown("nine_pa")}),["prevent"])),id:"nine_pa"},Object(r["toDisplayString"])(e.indicators.nine_pa||0),1)])])])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[79]||(t[79]=Object(r["withModifiers"])((function(t){e.drillDown("nine_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.nine_a||0),1)])]),Object(r["createVNode"])("tr",null,[Oi,ji,_i,wi,ki,yi,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[80]||(t[80]=Object(r["withModifiers"])((function(t){e.drillDown("ten_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.ten_a||0),1)])]),Object(r["createVNode"])("tr",null,[xi,Ni,Ci,Vi,Di,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",Ti,[Ii,Object(r["createVNode"])("div",Ri,[Object(r["createVNode"])("div",Si,[Object(r["createVNode"])("a",{href:"#",onClick:t[81]||(t[81]=Object(r["withModifiers"])((function(t){e.drillDown("eleven_pp")}),["prevent"])),id:"eleven_pp"},Object(r["toDisplayString"])(e.indicators.eleven_pp),1)]),Object(r["createVNode"])("div",Pi,[Object(r["createVNode"])("a",{href:"#",onClick:t[82]||(t[82]=Object(r["withModifiers"])((function(t){e.drillDown("eleven_pa")}),["prevent"])),id:"eleven_pa"},Object(r["toDisplayString"])(e.indicators.eleven_pa),1)])])])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[83]||(t[83]=Object(r["withModifiers"])((function(t){e.drillDown("eleven_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.eleven_a||0),1)])]),Object(r["createVNode"])("tr",null,[Ai,Ei,Bi,Fi,Li,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",Mi,[Hi,Object(r["createVNode"])("div",Ui,[Object(r["createVNode"])("div",qi,[Object(r["createVNode"])("a",{href:"#",onClick:t[84]||(t[84]=Object(r["withModifiers"])((function(t){e.drillDown("twelve_pp")}),["prevent"])),id:"twelve_pp"},Object(r["toDisplayString"])(e.indicators.twelve_pp||0),1)]),Object(r["createVNode"])("div",Gi,[Object(r["createVNode"])("a",{href:"#",onClick:t[85]||(t[85]=Object(r["withModifiers"])((function(t){e.drillDown("twelve_pa")}),["prevent"])),id:"twelve_pa"},Object(r["toDisplayString"])(e.indicators.twelve_pa||0),1)])])])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[86]||(t[86]=Object(r["withModifiers"])((function(t){e.drillDown("twelve_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.twelve_a||0),1)])]),Object(r["createVNode"])("tr",null,[zi,Yi,Wi,$i,Ki,Ji,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[87]||(t[87]=Object(r["withModifiers"])((function(t){e.drillDown("thirteen_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.thirteen_a||0),1)])]),Object(r["createVNode"])("tr",null,[Xi,Qi,Zi,ec,tc,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",nc,[rc,Object(r["createVNode"])("div",ac,[Object(r["createVNode"])("div",oc,[Object(r["createVNode"])("a",{href:"#",onClick:t[88]||(t[88]=Object(r["withModifiers"])((function(t){e.drillDown("fourteen_pp")}),["prevent"])),id:"fourteen_pp"},Object(r["toDisplayString"])(e.indicators.fourteen_pp||0),1)]),Object(r["createVNode"])("div",ic,[Object(r["createVNode"])("a",{href:"#",onClick:t[89]||(t[89]=Object(r["withModifiers"])((function(t){e.drillDown("fourteen_pa")}),["prevent"])),id:"fourteen_pa"},Object(r["toDisplayString"])(e.indicators.fourteen_pa||0),1)])])])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[90]||(t[90]=Object(r["withModifiers"])((function(t){e.drillDown("fourteen_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.fourteen_a||0),1)])]),Object(r["createVNode"])("tr",null,[cc,sc,uc,lc,dc,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",pc,[bc,Object(r["createVNode"])("div",fc,[Object(r["createVNode"])("div",mc,[Object(r["createVNode"])("a",{href:"#",onClick:t[91]||(t[91]=Object(r["withModifiers"])((function(t){e.drillDown("fifteen_pp")}),["prevent"])),id:"fifteen_pp"},Object(r["toDisplayString"])(e.indicators.fifteen_pp||0),1)]),Object(r["createVNode"])("div",hc,[Object(r["createVNode"])("a",{href:"#",onClick:t[92]||(t[92]=Object(r["withModifiers"])((function(t){e.drillDown("fifteen_pa")}),["prevent"])),id:"fifteen_pa"},Object(r["toDisplayString"])(e.indicators.fifteen_pa||0),1)])])])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[93]||(t[93]=Object(r["withModifiers"])((function(t){e.drillDown("fifteen_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.fifteen_a||0),1)])]),Object(r["createVNode"])("tr",null,[gc,vc,Oc,jc,_c,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[94]||(t[94]=Object(r["withModifiers"])((function(t){e.drillDown("sixteen_p")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.sixteen_p||0),1)]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[95]||(t[95]=Object(r["withModifiers"])((function(t){e.drillDown("sixteen_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.sixteen_a||0),1)])]),Object(r["createVNode"])("tr",null,[wc,kc,yc,xc,Nc,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",Cc,[Vc,Object(r["createVNode"])("div",Dc,[Object(r["createVNode"])("div",Tc,[Object(r["createVNode"])("a",{href:"#",onClick:t[96]||(t[96]=Object(r["withModifiers"])((function(t){e.drillDown("seventeen_pp")}),["prevent"])),id:"seventeen_pp"},Object(r["toDisplayString"])(e.indicators.seventeen_pp||0),1)]),Object(r["createVNode"])("div",Ic,[Object(r["createVNode"])("a",{href:"#",onClick:t[97]||(t[97]=Object(r["withModifiers"])((function(t){e.drillDown("seventeen_pa")}),["prevent"])),id:"seventeen_pa"},Object(r["toDisplayString"])(e.indicators.seventeen_pa||0),1)])])])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[98]||(t[98]=Object(r["withModifiers"])((function(t){e.drillDown("seventeen_a")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.seventeen_a||0),1)])]),Object(r["createVNode"])("tr",null,[Rc,Sc,Pc,Ac,Ec,Object(r["createVNode"])("td",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[99]||(t[99]=Object(r["withModifiers"])((function(t){e.drillDown("unknown_regimen")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.unknown_regimen||0),1)])]),Bc,Object(r["createVNode"])("tr",Fc,[Lc,Mc,Hc,Uc,Object(r["createVNode"])("td",qc,[Object(r["createVNode"])("a",{href:"#",onClick:t[100]||(t[100]=Object(r["withModifiers"])((function(t){e.drillDown("total_pregnant_women")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_pregnant_women||0),1)])]),Object(r["createVNode"])("tr",null,[Gc,zc,Yc,Wc,Object(r["createVNode"])("td",$c,[Object(r["createVNode"])("a",{href:"#",onClick:t[101]||(t[101]=Object(r["withModifiers"])((function(t){e.drillDown("total_breastfeeding_women")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_breastfeeding_women||0),1)])]),Object(r["createVNode"])("tr",null,[Kc,Jc,Xc,Qc,Object(r["createVNode"])("td",Zc,[Object(r["createVNode"])("a",{href:"#",onClick:t[102]||(t[102]=Object(r["withModifiers"])((function(t){e.drillDown("total_other_patients")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_other_patients||0),1)])]),es,Object(r["createVNode"])("tr",null,[ts,ns,rs,as,Object(r["createVNode"])("td",os,[Object(r["createVNode"])("a",{href:"#",onClick:t[103]||(t[103]=Object(r["withModifiers"])((function(t){e.drillDown("tb_not_suspected")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.tb_not_suspected||0),1)])]),Object(r["createVNode"])("tr",null,[is,cs,ss,us,Object(r["createVNode"])("td",ls,[Object(r["createVNode"])("a",{href:"#",onClick:t[104]||(t[104]=Object(r["withModifiers"])((function(t){e.drillDown("tb_suspected")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.tb_suspected||0),1)])]),Object(r["createVNode"])("tr",null,[ds,ps,bs,fs,Object(r["createVNode"])("td",ms,[Object(r["createVNode"])("a",{href:"#",onClick:t[105]||(t[105]=Object(r["withModifiers"])((function(t){e.drillDown("tb_confirmed_currently_not_yet_on_tb_treatment")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.tb_confirmed_currently_not_yet_on_tb_treatment||0),1)])]),Object(r["createVNode"])("tr",null,[hs,gs,vs,Os,Object(r["createVNode"])("td",js,[Object(r["createVNode"])("a",{href:"#",onClick:t[106]||(t[106]=Object(r["withModifiers"])((function(t){e.drillDown("tb_confirmed_on_tb_treatment")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.tb_confirmed_on_tb_treatment||0),1)])]),Object(r["createVNode"])("tr",null,[_s,ws,ks,ys,Object(r["createVNode"])("td",xs,[Object(r["createVNode"])("a",{href:"#",onClick:t[107]||(t[107]=Object(r["withModifiers"])((function(t){e.drillDown("unknown_tb_status")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.unknown_tb_status||0),1)])]),Ns,Object(r["createVNode"])("tr",null,[Cs,Vs,Ds,Ts,Object(r["createVNode"])("td",Is,[Object(r["createVNode"])("a",{href:"#",onClick:t[108]||(t[108]=Object(r["withModifiers"])((function(t){e.drillDown("total_patients_without_side_effects")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_patients_without_side_effects||0),1)])]),Object(r["createVNode"])("tr",null,[Rs,Ss,Ps,As,Object(r["createVNode"])("td",Es,[Object(r["createVNode"])("a",{href:"#",onClick:t[109]||(t[109]=Object(r["withModifiers"])((function(t){e.drillDown("total_patients_with_side_effects")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_patients_with_side_effects||0),1)])]),Object(r["createVNode"])("tr",null,[Bs,Fs,Ls,Ms,Object(r["createVNode"])("td",Hs,[Object(r["createVNode"])("a",{href:"#",onClick:t[110]||(t[110]=Object(r["withModifiers"])((function(t){e.drillDown("unknown_side_effects")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.unknown_side_effects||0),1)])]),Us,Object(r["createVNode"])("tr",null,[qs,Gs,zs,Ys,Object(r["createVNode"])("td",Ws,[Object(r["createVNode"])("a",{href:"#",onClick:t[111]||(t[111]=Object(r["withModifiers"])((function(t){e.drillDown("patients_with_0_6_doses_missed_at_their_last_visit")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.patients_with_0_6_doses_missed_at_their_last_visit||0),1)])]),Object(r["createVNode"])("tr",null,[$s,Ks,Js,Xs,Object(r["createVNode"])("td",Qs,[Object(r["createVNode"])("a",{href:"#",onClick:t[112]||(t[112]=Object(r["withModifiers"])((function(t){e.drillDown("patients_with_7_plus_doses_missed_at_their_last_visit")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.patients_with_7_plus_doses_missed_at_their_last_visit||0),1)])]),Object(r["createVNode"])("tr",null,[Zs,eu,tu,nu,Object(r["createVNode"])("td",ru,[Object(r["createVNode"])("a",{href:"#",onClick:t[113]||(t[113]=Object(r["withModifiers"])((function(t){e.drillDown("patients_with_unknown_adhrence")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.patients_with_unknown_adhrence||0),1)])]),au,Object(r["createVNode"])("tr",null,[ou,iu,cu,Object(r["createVNode"])("td",su,[Object(r["createVNode"])("a",{href:"#",onClick:t[114]||(t[114]=Object(r["withModifiers"])((function(t){e.drillDown("newly_initiated_on_ipt")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.newly_initiated_on_ipt||0),1)]),uu,Object(r["createVNode"])("td",lu,[Object(r["createVNode"])("a",{href:"#",onClick:t[115]||(t[115]=Object(r["withModifiers"])((function(t){e.drillDown("newly_initiated_on_3hp")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.newly_initiated_on_3hp||0),1)]),du]),Object(r["createVNode"])("tr",null,[pu,bu,fu,Object(r["createVNode"])("td",mu,[Object(r["createVNode"])("a",{href:"#",onClick:t[116]||(t[116]=Object(r["withModifiers"])((function(t){e.drillDown("total_patients_on_arvs_and_cpt")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_patients_on_arvs_and_cpt||0),1)]),hu,Object(r["createVNode"])("td",gu,[Object(r["createVNode"])("a",{href:"#",onClick:t[117]||(t[117]=Object(r["withModifiers"])((function(t){e.drillDown("total_patients_on_arvs_and_ipt")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_patients_on_arvs_and_ipt||0),1)]),vu]),Ou,Object(r["createVNode"])("tr",null,[ju,_u,wu,Object(r["createVNode"])("td",ku,[Object(r["createVNode"])("span",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[118]||(t[118]=Object(r["withModifiers"])((function(t){e.drillDown("total_patients_on_family_planning")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_patients_on_family_planning||0),1)]),yu])]),xu,Object(r["createVNode"])("tr",null,[Nu,Cu,Vu,Object(r["createVNode"])("td",Du,[Object(r["createVNode"])("span",null,[Object(r["createVNode"])("a",{href:"#",onClick:t[119]||(t[119]=Object(r["withModifiers"])((function(t){e.drillDown("total_patients_on_family_planning")}),["prevent"]))},Object(r["toDisplayString"])(e.indicators.total_patients_with_screened_bp||0),1)]),Tu])]),Iu])})),Su=Object(r["defineComponent"])({props:{indicators:{type:Object,default:function(){return{}}}},emits:["onClickIndicator"],methods:{drillDown:function(e){this.$emit("onClickIndicator",e)}}}),Pu=(n("59cf"),n("6b0d")),Au=n.n(Pu);const Eu=Au()(Su,[["render",Ru],["__scopeId","data-v-08569aec"]]);t["a"]=Eu},"0a4e":function(e,t,n){},"0a79":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-7c293cad"),o=a((function(e,t,n,a,o,i){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{id:"view-port",class:e.showFull?"":"half"},[Object(r["renderSlot"])(e.$slots,"default")],2)})),i=Object(r["defineComponent"])({name:"ViewPort",props:{showFull:{type:Boolean,default:function(){return!0}}}}),c=(n("a4d3f"),n("6b0d")),s=n.n(c);const u=s()(i,[["render",o],["__scopeId","data-v-7c293cad"]]);t["a"]=u},"0ac8":function(e,t,n){"use strict";n("c8b2")},"0ba8":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,a=n("c0e2");t["b"]=new a["TinyEmitter"],function(e){e["SHOW_MODAL"]="show-modal"}(r||(r={}))},"0c79":function(e,t,n){},"0cb1":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("bee2"),a=n("d4ec"),o=n("262e"),i=n("2caf"),c=n("cc6f"),s=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,57,r)}return Object(r["a"])(n)}(c["a"])},"0f25":function(e,t,n){"use strict";n("b0c0");var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-toolbar"),u=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{color:e.color},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.footerBtns,(function(e,t){return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:t,slot:e.slot,onClick:function(t){return e.onClick(e)},color:e.color,class:e.styleClass,size:e.size},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name),1)]})),_:2},1032,["slot","onClick","color","class","size"])),[[r["vShow"],e.visible]])})),128))]})),_:1},8,["color"])]})),_:1})}var o=n("2909"),i=(n("d81d"),n("8a30")),c=Object(r["defineComponent"])({name:"HisNavFooter",data:function(){return{footerBtns:[]}},created:function(){this.$emit("onFooterInstance",this)},props:{color:{type:String,default:"dark"},state:{type:Object},btns:{type:Object,required:!0}},components:{IonButton:i["d"],IonFooter:i["o"],IonToolbar:i["V"]},watch:{state:{handler:function(e){e&&(this.footerBtns=this.footerBtns.map((function(t){return t.visibleOnStateChange&&(t.visible=t.visibleOnStateChange(e)),t})))},deep:!0,immediate:!0},btns:{handler:function(e){e&&(this.footerBtns=Object(o["a"])(e))},deep:!0,immediate:!0}}}),s=n("6b0d"),u=n.n(s);const l=u()(c,[["render",a]]);t["a"]=l},"0fa1":function(e,t,n){"use strict";n.d(t,"a",(function(){return k})),n.d(t,"b",(function(){return x})),n.d(t,"c",(function(){return C}));var r=n("1da1"),a=(n("96cf"),n("e9c4"),n("d3b7"),n("159b"),n("b0c0"),n("a434"),n("4de4"),n("d81d"),n("ddb0"),n("7a23")),o=Object(a["withScopeId"])("data-v-433be29f");Object(a["pushScopeId"])("data-v-433be29f");var i=Object(a["createTextVNode"])("Select activities"),c=Object(a["createTextVNode"])("finish");Object(a["popScopeId"])();var s=o((function(e,t,n,r,s,u){var l=Object(a["resolveComponent"])("ion-title"),d=Object(a["resolveComponent"])("ion-toolbar"),p=Object(a["resolveComponent"])("ion-header"),b=Object(a["resolveComponent"])("ion-checkbox"),f=Object(a["resolveComponent"])("ion-col"),m=Object(a["resolveComponent"])("ion-row"),h=Object(a["resolveComponent"])("multi-column-view"),g=Object(a["resolveComponent"])("ion-content"),v=Object(a["resolveComponent"])("ion-button"),O=Object(a["resolveComponent"])("ion-footer");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(p,null,{default:o((function(){return[Object(a["createVNode"])(d,null,{default:o((function(){return[Object(a["createVNode"])(l,null,{default:o((function(){return[i]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(g,null,{default:o((function(){return[Object(a["createVNode"])(h,{items:e.appActivities,numberOfColumns:2},{default:o((function(e){var t=e.entries;return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(t,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("div",{class:"his-card clickable",key:t,onClick:function(t){return e.selected=!e.selected}},[Object(a["createVNode"])(m,null,{default:o((function(){return[Object(a["createVNode"])(f,{size:"1"},{default:o((function(){return[Object(a["createVNode"])(b,{modelValue:e.selected,"onUpdate:modelValue":function(t){return e.selected=t},onClick:function(t){return e.selected=!e.selected}},null,8,["modelValue","onUpdate:modelValue","onClick"])]})),_:2},1024),Object(a["createVNode"])(f,{class:"ion-text-center his-md-text"},{default:o((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.value),1)]})),_:2},1024)]})),_:2},1024)],8,["onClick"])})),128))]})),_:1},8,["items"])]})),_:1}),Object(a["createVNode"])(O,null,{default:o((function(){return[Object(a["createVNode"])(d,null,{default:o((function(){return[Object(a["createVNode"])(v,{onClick:e.postActivities,color:"success",disabled:0==e.selectedActivities.length,size:"large",style:{float:"right"}},{default:o((function(){return[c]})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1})],64)})),u=n("2909"),l=(n("ac1f"),n("841c"),n("a15b"),n("8a30")),d=n("b5e4"),p=n("1c74"),b=n("2ef0"),f=n("92c1"),m=Object(a["defineComponent"])({name:"Modal",props:{activities:{type:Object,required:!0},property:{type:String,default:"activities"}},watch:{activities:{handler:function(e){e&&(this.appActivities=Object(u["a"])(e),this.getActivities())},immediate:!0}},methods:{getActivities:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["e"].getJson("user_properties",{property:e.property});case 2:n=t.sent,Object(b["isEmpty"])(n)?Object(d["e"])("Activities not found"):e.appActivities=e.appActivities.map((function(e){return n.property_value.search(e.value)>=0&&(e.selected=!0),e}));case 4:case"end":return t.stop()}}),t)})))()},postActivities:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={property:e.property,property_value:e.selectedActivities},t.next=3,p["e"].postJson("user_properties",n);case 3:if(r=t.sent,r){t.next=8;break}Object(d["e"])("Could not save activities"),t.next=10;break;case 8:return t.next=10,l["cb"].dismiss();case 10:case"end":return t.stop()}}),t)})))()}},computed:{selectedActivities:function(){return this.appActivities.filter((function(e){return 1==e.selected})).map((function(e){return e.value})).join(",")}},data:function(){return{content:"Content",appActivities:[]}},components:{IonButton:l["d"],IonContent:l["n"],IonHeader:l["q"],IonTitle:l["U"],IonToolbar:l["V"],IonCheckbox:l["k"],MultiColumnView:f["a"]}}),h=(n("d77d"),n("6b0d")),g=n.n(h);const v=g()(m,[["render",s],["__scopeId","data-v-433be29f"]]);var O,j=v,_=n("50e7"),w=n("3e53");function k(e,t){sessionStorage.getItem(O.NextTask)||sessionStorage.setItem(O.NextTask,JSON.stringify({patientID:e,tasks:[]}));var n=JSON.parse(sessionStorage.getItem(O.NextTask));e===n.patientID?n.tasks.push(t):(n.patientID=e,n.tasks=[t]),sessionStorage.setItem(O.NextTask,JSON.stringify(n))}function y(e,t,n){var r=sessionStorage.getItem(O.NextTask);if(!r)return-1;var a=JSON.parse(r);if(e!=a.patientID)return-1;var o="",i=-1;return a.tasks.forEach((function(e,t){e.from===n.name&&(o=e.to,i=t)})),o?(a.tasks.splice(i,1),sessionStorage.setItem(O.NextTask,JSON.stringify(a)),t.push(o),1):-1}function x(e,t){return N.apply(this,arguments)}function N(){return N=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,c,s,u,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=l.length>2&&void 0!==l[2]?l[2]:{},e.prev=1,Object(b["isEmpty"])(r)){e.next=6;break}if(a=y(t,n,r),-1==a){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,_["a"].nextTask(t);case 8:if(o=e.sent,i=o.name,!i){e.next=19;break}if(c=i.toLowerCase(),s=w["a"].getActiveApp(),!s){e.next=17;break}if(u=s.primaryPatientActivites.filter((function(e){return e.name.toLowerCase()===c})),!u.length||"function"!==typeof u[0].action){e.next=17;break}return e.abrupt("return",u[0].action({patientID:t,router:n}));case 17:return n.push({name:c,params:{patient_id:t}}),e.abrupt("return");case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](1),console.warn(e.t0);case 24:n.push("/patient/dashboard/".concat(t));case 25:case"end":return e.stop()}}),e,null,[[1,21]])}))),N.apply(this,arguments)}function C(e){return V.apply(this,arguments)}function V(){return V=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"activities",r=t.filter((function(e){return"boolean"===typeof e.availableOnActivitySelection&&e.availableOnActivitySelection||"boolean"!==typeof e.availableOnActivitySelection})).map((function(e){return{value:e.workflowID||e.name,selected:!1}})),e.next=4,l["cb"].create({component:j,cssClass:"large-modal",backdropDismiss:!1,componentProps:{activities:r,property:n}});case 4:return a=e.sent,a.present(),e.next=8,a.onDidDismiss();case 8:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}(function(e){e["NextTask"]="next-task"})(O||(O={}))},1028:function(e,t,n){"use strict";n("28c5")},"10be":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-7454247c");Object(r["pushScopeId"])("data-v-7454247c");var o={class:"keypad"};Object(r["popScopeId"])();var i=a((function(e,t,n,i,c,s){var u=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("ion-chip"),d=Object(r["resolveComponent"])("center"),p=Object(r["resolveComponent"])("base-keyboard"),b=Object(r["resolveComponent"])("ion-content");return Object(r["openBlock"])(),Object(r["createBlock"])(b,null,{default:a((function(){return[Object(r["createVNode"])("div",o,[Object(r["createVNode"])(u,{value:e.value,disabled:!0,class:"keypad-input"},null,8,["value"]),Object(r["createVNode"])(d,null,{default:a((function(){return[Object(r["createVNode"])(l,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.title||"keypad"),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(p,{btnSize:"96px",layout:e.keypad,onKeyPress:e.keypress},null,8,["layout","onKeyPress"])])]})),_:1})})),c=n("1da1"),s=(n("96cf"),n("d3b7"),n("25f0"),n("ac1f"),n("466d"),n("caad"),n("2532"),n("c924")),u=n("3800"),l=n("2345"),d=n("fe70"),p=Object(r["defineComponent"])({components:{BaseKeyboard:s["a"]},props:{title:{type:String},preset:{type:String},onKeyPress:{type:Function,required:!0},strictNumbers:{type:Boolean,default:!1}},data:function(){return{value:"0",keypad:u["d"]}},watch:{preset:{handler:function(e){e&&(this.value=e.toString())},immediate:!0}},methods:{keypress:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.match(/done/i)){n.next=5;break}return n.next=3,d["g"].dismiss(t.value);case 3:n.next=16;break;case 5:if(!t.strictNumbers){n.next=14;break}if(!e.includes(".")||!t.value.includes(".")){n.next=8;break}return n.abrupt("return");case 8:e.includes(".")||"0"!==t.value||(t.value=""),t.value=Object(l["a"])(e,t.value),t.value||(t.value="0"),"".concat(parseInt(t.value))===t.value?t.onKeyPress(parseInt(t.value)):t.onKeyPress(t.value),n.next=16;break;case 14:t.value=Object(l["a"])(e,t.value),t.onKeyPress(t.value);case 16:case"end":return n.stop()}}),n)})))()}}}),b=(n("27f1"),n("6b0d")),f=n.n(b);const m=f()(p,[["render",i],["__scopeId","data-v-7454247c"]]);t["a"]=m},"113a":function(e,t,n){},"133b":function(e,t,n){"use strict";n("9582")},"133d":function(e,t,n){"use strict";n("d6d4")},1406:function(e,t,n){},1497:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=n("5969"),s=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(){var e;return Object(r["a"])(this,n),e=t.call(this),e.programID=23,e}return Object(a["a"])(n,[{key:"getSamplesDrawnReport",value:function(){return this.getReport("samples_drawn")}},{key:"getLabResultsReport",value:function(){return this.getReport("lab_test_results")}}]),n}(c["a"])},"14e3":function(e,t,n){},"156d":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,a=n("5530"),o=n("1da1"),i=(n("96cf"),n("d3b7"),n("159b"),n("caad"),n("2532"),n("e9c4"),n("99af"),n("ac1f"),n("466d"),n("0ba8"));(function(e){e["BEFORE_API_REQUEST"]="before_api_request",e["AFTER_API_REQUEST"]="after_api_request",e["ON_API_CRASH"]="un_reachable_api"})(r||(r={}));var c=function(){function e(){return t.apply(this,arguments)}function t(){return t=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/config.json");case 2:if(t=e.sent,t.ok){e.next=5;break}throw"Unable to retrieve configuration file/ Invalid config.json";case 5:return e.prev=5,e.next=8,t.json();case 8:return n=e.sent,r=n.apiURL,a=n.apiPort,o=n.apiProtocol,i=n.appConf,c=n.apps,s=n.thirdpartyApps,u=n.isPocSite,sessionStorage.setItem("apiURL",r),sessionStorage.setItem("apiPort",a),sessionStorage.setItem("apiProtocol",o),sessionStorage.setItem("appConf",JSON.stringify(i)),sessionStorage.setItem("apps",JSON.stringify(c)),sessionStorage.setItem("thirdpartyApps",JSON.stringify(s)),sessionStorage.setItem("isPocSite",u),e.abrupt("return",{host:r,port:a,protocol:o,thirdpartyapps:s,isPocSite:u});case 26:throw e.prev=26,e.t0=e["catch"](5),console.error(e.t0),'API Configuration file "/config.json" has errors. Please check console log for more details';case 30:case"end":return e.stop()}}),e,null,[[5,26]])}))),t.apply(this,arguments)}function n(){var e,t=localStorage.apiURL,n=localStorage.apiPort,r=localStorage.apiProtocol,a=localStorage.thirdpartyApps,o=null===(e=localStorage.isPocSite)||void 0===e||e;if(t&&n&&r)return{host:t,port:n,protocol:r,thirdpartyapps:a,isPocSite:o}}function c(){var e,t=sessionStorage.apiURL,n=sessionStorage.apiPort,r=sessionStorage.apiProtocol,a=sessionStorage.thirdpartyApps,o=null===(e=sessionStorage.isPocSite)||void 0===e||e;if(t&&n&&r)return{host:t,port:n,protocol:r,thirdpartyapps:a,isPocSite:o}}function s(){var t=n(),r=c();return localStorage.useLocalStorage&&t?t:r||e()}function u(e){return l.apply(this,arguments)}function l(){return l=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return n=e.sent,e.abrupt("return","".concat(n.protocol,"://").concat(n.host,":").concat(n.port,"/api/v1/").concat(t));case 4:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(){return{Authorization:sessionStorage.apiKey,"Content-Type":"application/json"}}function p(e,t,n){localStorage.setItem("useLocalStorage","true"),localStorage.setItem("apiURL",t),localStorage.setItem("apiPort",n),localStorage.setItem("apiProtocol",e)}function b(e){e.forEach((function(t){e.includes(t)&&localStorage.removeItem(t)}))}function f(e,t){return m.apply(this,arguments)}function m(){return m=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Object(a["a"])(Object(a["a"])({},n),{},{mode:"cors"}),"headers"in n||(n=Object(a["a"])(Object(a["a"])({},n),{},{headers:d()})),e.next=4,u(t);case 4:return o=e.sent,e.prev=5,i["b"].emit(r.BEFORE_API_REQUEST,t),e.next=9,fetch(o,n);case 9:return c=e.sent,i["b"].emit(r.AFTER_API_REQUEST,c),e.abrupt("return",c);case 14:e.prev=14,e.t0=e["catch"](5),console.error(e.t0),"".concat(e.t0).match(/NetworkError|Failed to fetch/i)?i["b"].emit(r.ON_API_CRASH,e.t0):i["b"].emit(r.AFTER_API_REQUEST,{});case 18:case"end":return e.stop()}}),e,null,[[5,14]])}))),m.apply(this,arguments)}var h=function(e){return f(e,{method:"GET"})},g=function(e,t){return f(e,{method:"POST",body:JSON.stringify(t)})},v=function(e,t){return f(e,{method:"DELETE",body:JSON.stringify(t)})},O=function(e,t){return f(e,{method:"PUT",body:JSON.stringify(t)})},j=function(){return h("_health")};return{get:h,post:g,put:O,remove:v,getConfig:s,setLocalStorage:p,removeOnly:b,expandPath:u,healthCheck:j,getFileConfig:e}}();t["b"]=c},1718:function(e,t,n){"use strict";function r(e){return"/assets/images/".concat(e)}n.d(t,"a",(function(){return r}))},"177d":function(e,t,n){},1799:function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-04a5a269");Object(r["pushScopeId"])("data-v-04a5a269");var o={class:"pagination"},i={class:"btn-group"},c=Object(r["createTextVNode"])(" First "),s=Object(r["createTextVNode"])(" Last ");Object(r["popScopeId"])();var u=a((function(e,t,n,u,l,d){var p=Object(r["resolveComponent"])("ion-button"),b=Object(r["resolveComponent"])("ion-icon");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])("div",i,[Object(r["createVNode"])(p,{color:"light",onClick:e.setFirstPage,disabled:e.isInFirstPage},{default:a((function(){return[c]})),_:1},8,["onClick","disabled"]),Object(r["createVNode"])(p,{color:"light",onClick:e.prevPage},{default:a((function(){return[Object(r["createVNode"])(b,{icon:e.caretBack},null,8,["icon"])]})),_:1},8,["onClick"]),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.pages,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(p,{onClick:function(t){return e.show()},color:e.isActive?"primary":"light",key:e.index},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name),1)]})),_:2},1032,["onClick","color"])})),128)),Object(r["createVNode"])(p,{color:"light",onClick:e.nextPage},{default:a((function(){return[Object(r["createVNode"])(b,{icon:e.caretForward},null,8,["icon"])]})),_:1},8,["onClick"]),Object(r["createVNode"])(p,{color:"light",onClick:e.setLastPage,disabled:e.isInLastPage},{default:a((function(){return[s]})),_:1},8,["onClick","disabled"])]),Object(r["createVNode"])("h6",null,"Page "+Object(r["toDisplayString"])(e.currentPage+1)+" of "+Object(r["toDisplayString"])(e.totalPages),1)])})),l=(n("a9e3"),n("ff79")),d=n("8a30"),p=Object(r["defineComponent"])({components:{IonIcon:d["r"],IonButton:d["d"]},props:{maxVisibleButtons:{type:Number,required:!1,default:3},totalPages:{type:Number,required:!0}},emits:["onChangePage"],setup:function(e,t){var n=t.emit,a=Object(r["ref"])(0),o=Object(r["computed"])((function(){return 0===a.value})),i=Object(r["computed"])((function(){return a.value===e.totalPages})),c=Object(r["computed"])((function(){return 0===a.value?0:a.value===e.totalPages?e.totalPages-e.maxVisibleButtons:a.value-1})),s=function(e){return n("onChangePage",e)},u=Object(r["computed"])((function(){for(var t=[],n=function(e){t.push({index:e,name:e+1,show:function(){return a.value=e},isActive:e===a.value})},r=c.value;r<=Math.min(c.value+e.maxVisibleButtons-1,e.totalPages-1);r++)n(r);return t}));Object(r["watch"])(e,(function(e){var t=e.totalPages;"number"===typeof t&&(a.value=0)}),{immediate:!0,deep:!0}),Object(r["watch"])(a,(function(e){return s(e)}));var d=function(){return a.value=0},p=function(){return a.value=e.totalPages-1},b=function(){a.value>0&&(a.value-=1)},f=function(){a.value+1<e.totalPages&&(a.value+=1)};return{currentPage:a,caretBack:l["n"],caretForward:l["q"],startPage:c,pages:u,isInFirstPage:o,isInLastPage:i,nextPage:f,prevPage:b,setPage:s,setFirstPage:d,setLastPage:p}}}),b=(n("f099"),n("6b0d")),f=n.n(b);const m=f()(p,[["render",u],["__scopeId","data-v-04a5a269"]]);t["a"]=m},"18aa":function(e,t,n){},"18ab":function(e,t,n){},"19ff":function(e,t,n){},"1afa":function(e,t,n){},"1b47":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-23709ba4"),o=a((function(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("action-header"),u=Object(r["resolveComponent"])("ion-radio"),l=Object(r["resolveComponent"])("ion-label"),d=Object(r["resolveComponent"])("ion-item"),p=Object(r["resolveComponent"])("ion-radio-group"),b=Object(r["resolveComponent"])("ion-list"),f=Object(r["resolveComponent"])("ion-content"),m=Object(r["resolveComponent"])("action-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(s,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(r["createVNode"])(f,{class:"ion-text-center"},{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[Object(r["createVNode"])(p,{value:e.activeLabel},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.list,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{class:"his-md-text",onClick:function(n){return e.onclick(t)},key:n},{default:a((function(){return[Object(r["createVNode"])(u,{slot:"start",value:t},null,8,["value"]),Object(r["createVNode"])(l,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1},8,["value"])]})),_:1})]})),_:1}),Object(r["createVNode"])(m,{buttons:e.buttons},null,8,["buttons"])],64)})),i=n("1da1"),c=n("5530"),s=(n("96cf"),n("d81d"),n("ac1f"),n("466d"),n("b0c0"),n("8efc")),u=n("8a30"),l=n("b5e4"),d=Object(r["defineComponent"])({components:{IonList:u["y"],IonItem:u["w"],IonContent:u["n"],IonRadio:u["G"],IonRadioGroup:u["H"]},mixins:[s["a"]],data:function(){return{activeLabel:""}},props:{list:{type:Object,required:!0}},methods:{onclick:function(e){this.activeLabel=e}},computed:{buttons:function(){var e=this;return this.actionButtons.map((function(t){return Object(c["a"])(Object(c["a"])({},t),{},{onClick:function(){var n=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.role||!t.role.match(/default/i)){n.next=2;break}return n.abrupt("return",u["cb"].dismiss({action:t.name}));case 2:if(!t.role||!t.role.match(/action/i)||e.activeLabel){n.next=4;break}return n.abrupt("return",Object(l["e"])("Please select one of the options"));case 4:return n.next=6,u["cb"].dismiss({selection:e.activeLabel,action:t.name});case 6:case"end":return n.stop()}}),n)})));function r(){return n.apply(this,arguments)}return r}()})}))}}}),p=(n("bdcb"),n("6b0d")),b=n.n(p);const f=b()(d,[["render",o],["__scopeId","data-v-23709ba4"]]);t["a"]=f},"1b4f":function(e,t,n){"use strict";n("2658")},"1bb3":function(e,t,n){"use strict";n("c54c")},"1bc0":function(e,t,n){},"1c3d":function(e,t,n){},"1c70":function(e,t,n){},"1c74":function(e,t,n){"use strict";n.d(t,"b",(function(){return v})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return _})),n.d(t,"e",(function(){return y}));var r=n("5530"),a=n("b85c"),o=n("1da1"),i=n("bee2"),c=n("d4ec"),s=n("262e"),u=n("2caf"),l=n("9072"),d=(n("96cf"),n("99af"),n("caad"),n("d81d"),n("b0c0"),n("2532"),n("d3b7"),n("156d")),p=n("bef6"),b=n("3e53"),f=n("5d6c"),m=n("89b4"),h=n("f768"),g=n("2ef0"),v=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e,r){var a;return Object(c["a"])(this,n),a=t.call(this,"ENTITY Error: ".concat(e)),a.entity=r,a}return Object(i["a"])(n)}(Object(l["a"])(Error)),O=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e,r){var a;return Object(c["a"])(this,n),a=t.call(this,e),a.errors=r,a}return Object(i["a"])(n)}(Object(l["a"])(Error)),j=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e){return Object(c["a"])(this,n),t.call(this,"RECORD NOT FOUND: ".concat(e))}return Object(i["a"])(n)}(Object(l["a"])(Error)),_=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e,r){var a;return Object(c["a"])(this,n),a=t.call(this,e),a.errors=r,a}return Object(i["a"])(n)}(Object(l["a"])(Error)),w=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e){return Object(c["a"])(this,n),t.call(this,"API SERVICE_ERROR: ".concat(e))}return Object(i["a"])(n)}(Object(l["a"])(Error)),k=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e){return Object(c["a"])(this,n),t.call(this,"API ERROR: ".concat(e))}return Object(i["a"])(n)}(Object(l["a"])(Error)),y=function(){function e(){Object(c["a"])(this,e)}return Object(i["a"])(e,null,[{key:"ajxGet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d["b"].get("".concat(e,"?").concat(p["a"].parameterizeObjToString(t)))}},{key:"getText",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["b"].get(t);case 2:if(n=e.sent,!n||!n.ok){e.next=5;break}return e.abrupt("return",null===n||void 0===n?void 0:n.text());case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getJsonSWR",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="".concat(e,"?").concat(p["a"].parameterizeObjToString(t)),a=Object(f["a"])(r,this.getJson,n),o=a.data;return o}},{key:"getJson",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=Object(g["isEmpty"])(n)?t:"".concat(t,"?").concat(p["a"].parameterizeObjToString(n)),e.abrupt("return",this.jsonResponseHandler(d["b"].get(r)));case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postJson",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.jsonResponseHandler(d["b"].post(t,n)));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"putJson",value:function(e,t){return this.jsonResponseHandler(d["b"].put(e,t))}},{key:"void",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.jsonResponseHandler(d["b"].remove(t,n)));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getThirdpartyApps",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,d["b"].getConfig();case 3:return e.t1=e.sent.thirdpartyapps,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"jsonResponseHandler",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,c,s,u,l,d,p,b;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(n=e.sent,!n){e.next=39;break}if(![200,201].includes(n.status)){e.next=6;break}return e.abrupt("return",null===n||void 0===n?void 0:n.json());case 6:if(400!==n.status){e.next=12;break}return e.next=9,null===n||void 0===n?void 0:n.json();case 9:throw r=e.sent,a=r.errors,new _(n.statusText,a);case 12:if(404!==n.status){e.next=18;break}return e.next=15,null===n||void 0===n?void 0:n.json();case 15:throw o=e.sent,i=o.errors,new j(i);case 18:if(422!==n.status){e.next=25;break}return e.next=21,null===n||void 0===n?void 0:n.json();case 21:throw c=e.sent,s=c.errors,u=c.entity,new v(s,u);case 25:if(502!==n.status){e.next=31;break}return e.next=28,null===n||void 0===n?void 0:n.json();case 28:throw l=e.sent,d=l.errors,new w(d||"Getway Error");case 31:if(409!==n.status){e.next=37;break}return e.next=34,null===n||void 0===n?void 0:n.json();case 34:throw p=e.sent,b=p.errors,new O(n.statusText,b);case 37:if(500!==n.status){e.next=39;break}throw new k("An internal server errror has occured");case 39:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getApiDate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJson("current_time");case 2:if(t=e.sent,!t){e.next=5;break}return e.abrupt("return",t.date);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getApiVersion",value:function(){return sessionStorage.getItem("APIVersion")||"-"}},{key:"getActiveApp",value:function(){return b["a"].getActiveApp()||{}}},{key:"getUserID",value:function(){var e=sessionStorage.getItem("userID");return e?parseInt(e):null}},{key:"getUserLocation",value:function(){return sessionStorage.getItem("userLocation")}},{key:"getLocationName",value:function(){return sessionStorage.getItem("locationName")}},{key:"getSessionDate",value:function(){return sessionStorage.getItem("sessionDate")||""}},{key:"getCachedApiDate",value:function(){return sessionStorage.getItem("apiDate")}},{key:"setSessionDate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getApiDate();case 2:if(n=e.sent,!n){e.next=7;break}return sessionStorage.setItem("apiDate",n),sessionStorage.setItem("sessionDate",t),e.abrupt("return");case 7:throw"Unable to set api date";case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetSessionDate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getApiDate();case 2:if(t=e.sent,!t){e.next=7;break}return sessionStorage.removeItem("apiDate"),sessionStorage.setItem("sessionDate",t),e.abrupt("return");case 7:throw"Unable to reset session date";case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isBDE",value:function(){var e=sessionStorage.getItem("apiDate"),t=sessionStorage.getItem("sessionDate");return e&&e!=t}},{key:"getSiteUUID",value:function(){return sessionStorage.siteUUID||""}},{key:"getProgramName",value:function(){var e=this.getActiveApp();return"applicationName"in e?e.applicationName:""}},{key:"getSuspendedProgram",value:function(){return sessionStorage.getItem("suspendedApp")||""}},{key:"getProgramID",value:function(){var e=this.getActiveApp();return"programID"in e?e.programID:0}},{key:"getUserRoles",value:function(){var e=sessionStorage.getItem("userRoles");return e?JSON.parse(e):[]}},{key:"getUserName",value:function(){return sessionStorage.username}},{key:"getCoreVersion",value:function(){return localStorage.getItem(m["b"].CORE_VERSION)||"-"}},{key:"getAppVersion",value:function(){return localStorage.getItem(m["b"].CORE_VERSION)||"-"}},{key:"getFullVersion",value:function(){return"".concat(this.getCoreVersion()," / ").concat(this.getApiVersion())}},{key:"getAvailableApps",value:function(){var e,t=JSON.parse(sessionStorage.getItem("userPrograms")||"[]").map((function(e){return e["program_id"]})),n=[],o=Object(a["a"])(JSON.parse(sessionStorage.getItem("apps")||"[]"));try{for(o.s();!(e=o.n()).done;){var i=e.value,c=Object(g["find"])(h["a"],{applicationName:i.name})||{},s=Object(g["isEmpty"])(t)||t.includes(c.programID);i.available&&!Object(g["isEmpty"])(c)&&n.push(Object(r["a"])(Object(r["a"])({},c),{},{hasPriviledge:s}))}}catch(u){o.e(u)}finally{o.f()}return n}},{key:"isUsingLocalStorage",value:function(){return"true"===localStorage.getItem("useLocalStorage")}},{key:"isPocSite",value:function(){return"false"!==sessionStorage.isPocSite}}]),e}();y.delay=function(e){return new Promise((function(t){return setTimeout(t,e)}))}},"1ea3":function(e,t,n){},"1eb2":function(e,t,n){},"1f9a":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("5530"),a=n("1da1"),o=n("d4ec"),i=n("bee2"),c=n("262e"),s=n("2caf"),u=(n("d3b7"),n("ddb0"),n("96cf"),n("1c74")),l=n("ad60"),d=n("d10e"),p=n("45eb"),b=n("7e84"),f=function(e){Object(c["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(o["a"])(this,n),t.call(this)}return Object(i["a"])(n,null,[{key:"create",value:function(e){return Object(p["a"])(Object(b["a"])(n),"postJson",this).call(this,"/person_attributes",e)}}]),n}(u["e"]),m=n("4db7"),h=function(e){Object(c["a"])(n,e);var t=Object(s["a"])(n);function n(){var e;return Object(o["a"])(this,n),e=t.call(this),e.personId=0,e}return Object(i["a"])(n,[{key:"getPersonID",value:function(){return this.personId}},{key:"setPersonID",value:function(e){this.personId=e}},{key:"registerPatient",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createPerson(t);case 2:return e.next=4,this.createPersonAttributes(n);case 4:return e.next=6,this.createPatient();case 6:return e.next=8,this.printPatient();case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"registerGuardian",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createPerson(t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updatePerson",value:function(e){return new d["a"](e).update(this.personId)}},{key:"createPerson",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new d["a"](t).create();case 2:return n=e.sent,this.personId=n.person_id,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createPatient",value:function(){return l["a"].createPatient(this.personId)}},{key:"createPersonAttributes",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.t0=regeneratorRuntime.keys(t);case 1:if((e.t1=e.t0()).done){e.next=7;break}return n=e.t1.value,e.next=5,f.create(Object(r["a"])(Object(r["a"])({},t[n]),{},{person_id:this.personId}));case 5:e.next=1;break;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"printPatient",value:function(){return new m["a"](this.personId).printNidLbl()}}]),n}(u["e"])},"20a4":function(e,t,n){"use strict";n("068b")},"20d7":function(e,t,n){},"221a":function(e,t,n){"use strict";n("b625")},2240:function(e,t,n){},2345:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("ac1f"),n("466d"),n("99af"),n("fb6a");function r(e,t,n){var r=t;if(e.match(/enter/i))return"".concat(r,"\r\n");if(e.match(/clear/i))return"";if(r=e.match(/delete|del/i)?r.match(/unknown/i)||r.match(/n\/a/i)?"":r.substring(0,r.length-1):e.match(/space/i)?"".concat(t," "):e.match(/unknown/i)?"Unknown":e.match(/n\/a/i)?"N/A":r.match(/unknown/i)||r.match(/n\/a/i)?e:"".concat(t).concat(e),"string"===typeof r&&r)switch(n){case"lowercase":r=r.toLowerCase();break;case"uppercase":r=r.toUpperCase();break;default:r=r.charAt(0).toUpperCase()+r.slice(1);break}return r}},"236c":function(e,t,n){"use strict";n("c144")},"23e6":function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("5530"),a=n("2909"),o=n("1da1"),i=n("3835"),c=n("d4ec"),s=n("bee2"),u=n("45eb"),l=n("7e84"),d=n("262e"),p=n("2caf"),b=(n("96cf"),n("d81d"),n("7db0"),n("d3b7"),n("b0c0"),n("caad"),n("ac1f"),n("466d"),n("4de4"),n("a15b"),n("498a"),n("5319"),n("99af"),n("4e82"),n("07ac"),n("e9c4"),n("7941")),f=function(e,t){var n=e.filter((function(e){return e.type.patient_identifier_type_id===t}));return n.length>0?n[0].identifier:""},m=n("7957"),h=n("1c74"),g=n("9283"),v=n("aee2"),O=n("2ef0"),j=n("0011"),_=function(e){Object(d["a"])(n,e);var t=Object(p["a"])(n);function n(){return Object(c["a"])(this,n),t.call(this)}return Object(s["a"])(n,null,[{key:"create",value:function(e,t,r){return Object(u["a"])(Object(l["a"])(n),"postJson",this).call(this,"patient_identifiers",{identifier:r,identifier_type:t,patient_id:e})}}]),n}(h["e"]),w=n("4db7"),k=n("5a0c"),y=n.n(k),x=function(e){Object(d["a"])(n,e);var t=Object(p["a"])(n);function n(e){var r;return Object(c["a"])(this,n),r=t.call(this),r.patient=e,r}return Object(s["a"])(n,[{key:"getWeightLossPercentageFromTrail",value:function(e){var t=e.map((function(e){return e.weight})),n=Object(i["a"])(t,2),r=n[0],a=n[1];if(!r||!a)return!1;var o=parseFloat(a)-parseFloat(r),c=o/a*100;return Math.round(c)}},{key:"getGuardian",value:function(){return n.getJson("people/".concat(this.getID(),"/relationships"))}},{key:"assignNpid",value:function(){return n.assignNHID(this.getID(),h["e"].getProgramID())}},{key:"createArvNumber",value:function(e){return _.create(this.getID(),4,e)}},{key:"updateARVNumber",value:function(e){var t,r=(null===(t=this.getIdentifiers().find((function(e){return"ARV Number"===e.type.name})))||void 0===t?void 0:t.patient_identifier_id)||"";return n.reassignARVNumber(r,{identifier:e})}},{key:"updateMWNationalId",value:function(e){return _.create(this.getID(),28,e)}},{key:"isMale",value:function(){return["Male","M"].includes(this.getGender())}},{key:"isFemale",value:function(){return["Female","F"].includes(this.getGender())}},{key:"isPregnant",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getFirstObs(this.getID(),"Is patient pregnant");case 2:return t=e.sent,e.abrupt("return",t&&!!t.value_coded.match(/Yes/i)&&m["a"].obsInValidPeriod(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasPregnancyObsToday",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getFirstObsDatetime(this.getID(),"Is patient pregnant");case 2:return t=e.sent,e.abrupt("return",t&&g["b"].toStandardHisFormat(t)===h["e"].getSessionDate()&&this.isFemale());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isChildBearing",value:function(){var e=this.getAge();return this.isFemale()&&e>=12&&e<=50}},{key:"getInitialWeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",m["a"].getLastValueNumber(this.getID(),"weight"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRecentWeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",m["a"].getFirstValueNumber(this.getID(),"weight")||-1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialHeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",m["a"].getLastValueNumber(this.getID(),"Height"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRecentHeightObs",value:function(){return m["a"].getFirstObs(this.getID(),"Height")}},{key:"getRecentHeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",m["a"].getFirstValueNumber(this.getID(),"Height")||-1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWeightHistory",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m["a"].getAll(this.getID(),"weight");case 3:return t=e.sent,e.abrupt("return",t.map((function(e){return{weight:e.value_numeric,date:e.obs_datetime}})));case 7:return e.prev=7,e.t0=e["catch"](0),console.warn(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCompleteTBTherapyHistory",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getAll(this.getID(),"TB treatment history");case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.value_text.match(/Complete/i)})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialBMI",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",m["a"].getLastValueNumber(this.getID(),"BMI"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBMI",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRecentWeight();case 2:return t=e.sent,e.next=5,this.getRecentHeight();case 5:if(n=e.sent,t&&n){e.next=8;break}return e.abrupt("return",0);case 8:return r=this.isMale()?"M":"F",e.next=11,v["a"].getBMI(t,n,r,this.getAge());case 11:return a=e.sent,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"calculateWeightPercentile",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRecentWeight();case 2:return t=e.sent,e.next=5,this.getMedianWeightHeight();case 5:return n=e.sent,e.prev=6,e.abrupt("return",parseFloat(t)/parseFloat(n["weight"])*100);case 10:return e.prev=10,e.t0=e["catch"](6),e.abrupt("return",0);case 13:case"end":return e.stop()}}),e,this,[[6,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMedianWeightHeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",h["e"].getJson("patients/".concat(this.getID(),"/median_weight_height"),{date:h["e"].getSessionDate()}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getObj",value:function(){return this.patient}},{key:"getID",value:function(){return this.patient.patient_id}},{key:"getPatientInfoString",value:function(){var e=[this.getFullName(),"(".concat(this.getGender(),")"),this.getBirthdate(),", ".concat(this.getCurrentDistrict())];return e.join(" ")}},{key:"getCurrentDistrict",value:function(){return this.getAddresses().currentDistrict}},{key:"getGender",value:function(){return this.patient.person.gender}},{key:"getAge",value:function(){return y()(h["e"].getSessionDate()).diff(this.patient.person.birthdate,"years")}},{key:"getAgeInMonths",value:function(){return 12*this.getAge()}},{key:"getBirthdate",value:function(){return this.patient.person.birthdate}},{key:"getGivenName",value:function(){return this.patient.person.names[0].given_name}},{key:"getFamilyName",value:function(){return this.patient.person.names[0].family_name}},{key:"getMiddleName",value:function(){return this.patient.person.names[0].middle_name}},{key:"normaliseName",value:function(e){return e.replace(/n\/a|unknown|null|undefined/gi,"").trim()}},{key:"printNationalID",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new w["a"](this.getID()).printNidLbl());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFullName",value:function(){try{var e=this.patient.person.names[0],t=e.given_name,n=e.family_name,r=e.middle_name;return this.normaliseName("".concat(t," ").concat(r," ").concat(n))}catch(a){return console.error(a),"Unknown"}}},{key:"getDocID",value:function(){var e=this.findIdentifierByType("DDE person document ID");return e.match(/unknown/i)?null:e}},{key:"getNationalID",value:function(){return this.findIdentifierByType("National id")}},{key:"getMWNationalID",value:function(){return this.findIdentifierByType("Malawi National ID")}},{key:"getArvNumber",value:function(){return this.findIdentifierByType("ARV Number")}},{key:"hasActiveFilingNumber",value:function(){return this.hasIdentifierType("Filing number")}},{key:"hasDormantFilingNumber",value:function(){return this.hasIdentifierType("Archived filing number")}},{key:"hasIdentifierType",value:function(e){var t=Object(O["find"])(this.patient.patient_identifiers,{type:{name:e}});return!!t}},{key:"getFilingNumber",value:function(){var e=this.patient.patient_identifiers.filter((function(e){return"Filing number"===e.type.name||"Archived filing number"===e.type.name}));return Object(O["isEmpty"])(e)?"N/A":e[0].identifier}},{key:"findIdentifierByType",value:function(e){return this.patient.patient_identifiers.filter((function(t){return t.type.name===e})).sort((function(e,t){return e["date_created"]<t["date_created"]?1:0})).reduce((function(e,t){return"Unknown"===e?t.identifier:e}),"Unknown")}},{key:"getIdentifiers",value:function(){return this.patient.patient_identifiers}},{key:"getHomeDistrict",value:function(){return this.getAddresses().ancestryDistrict}},{key:"getHomeTA",value:function(){return this.getAddresses().ancestryTA}},{key:"getHomeVillage",value:function(){return this.getAddresses().ancestryVillage}},{key:"getCurrentVillage",value:function(){return this.getAddresses().currentVillage}},{key:"getCurrentTA",value:function(){return this.getAddresses().currentTA}},{key:"getClosestLandmark",value:function(){return this.getAttribute(19)}},{key:"getPhoneNumber",value:function(){return this.getAttribute(12)}},{key:"getAttribute",value:function(e){return Object(b["a"])(this.patient.person.person_attributes,e)}},{key:"getPatientIdentifier",value:function(e){return f(this.patient.patient_identifiers,e)}},{key:"patientIsComplete",value:function(){return[this.getGender(),this.getBirthdate(),this.getGivenName(),this.getFamilyName()].concat(Object(a["a"])(Object.values(this.getAddresses()))).every((function(e){return!Object(j["d"])(e)}))}},{key:"getAddresses",value:function(){var e={ancestryDistrict:"",ancestryTA:"",ancestryVillage:"",currentDistrict:"",currentTA:"",currentVillage:""};if(this.patient.person.addresses.length>0){var t=this.patient.person.addresses[0];e.ancestryDistrict=t.address2,e.ancestryTA=t.county_district,e.ancestryVillage=t.neighborhood_cell,e.currentDistrict=t.state_province,e.currentTA=t.township_division,e.currentVillage=t.city_village}return e}}],[{key:"mergePatients",value:function(e){return e["program_id"]=Object(u["a"])(Object(l["a"])(n),"getProgramID",this).call(this),Object(u["a"])(Object(l["a"])(n),"postJson",this).call(this,"dde/patients/merge",e)}},{key:"voidPatient",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(u["a"])(Object(l["a"])(n),"void",this).call(this,"patients/".concat(e),{reason:t})}},{key:"search",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])(Object(l["a"])(n),"getJson",this).call(this,"/search/patients",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"findByNpid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u["a"])(Object(l["a"])(n),"getJson",this).call(this,"search/patients/by_npid",Object(r["a"])({npid:e},t))}},{key:"findByOtherID",value:function(e,t){return Object(u["a"])(Object(l["a"])(n),"getJson",this).call(this,"search/patients/by_identifier",{type_id:e,identifier:t})}},{key:"findByID",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])(Object(l["a"])(n),"getJson",this).call(this,"/patients/".concat(t)));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"assignNHID",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["a"])(Object(l["a"])(n),"postJson",this).call(this,"/patients/".concat(t,"/npid"),{program_id:r}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"reassignARVNumber",value:function(e,t){return Object(u["a"])(Object(l["a"])(n),"putJson",this).call(this,"patient_identifiers/"+e,t)}},{key:"toPatient",value:function(e){return JSON.parse(e)}},{key:"patientToJson",value:function(e){return JSON.stringify(e)}},{key:"getPatientVisits",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["a"])(Object(l["a"])(n),"getJson",this).call(this,"patients/".concat(t,"/visits"),{program_id:Object(u["a"])(Object(l["a"])(n),"getProgramID",this).call(this),include_defaulter_dates:1==r});case 2:if(a=e.sent,!a){e.next=5;break}return e.abrupt("return",a.sort((function(e,t){return new Date(e)<new Date(t)?1:0})));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(h["e"])},2414:function(e,t,n){"use strict";n("5979")},"24f9":function(e,t,n){},2658:function(e,t,n){},2680:function(e,t,n){"use strict";n("8d67")},2706:function(e,t,n){"use strict";n("ac1f"),n("466d"),n("d3b7"),n("25f0"),n("99af"),n("4de4");var r=n("2ef0");function a(e){try{for(var t in e){var n=e[t]();if(n)return n}}catch(r){return[r]}}function o(e){return Object(r["isEmpty"])(e)||!e.value?["Value is required"]:null}function i(e){var t=/^(\+?265|0)(((88|9[89])\d{7})|(1\d{6})|(2\d{8})|(31\d{8}))$/;return e&&e.value.match(t)?null:["Not a valid phone number"]}function c(e){var t=/^(?=[a-zA-Z0-9]*$)(?=\d+[a-zA-Z]|[a-zA-Z]+\d)([a-zA-Z\d]){8}$/;return Object(r["isEmpty"])(e)||!e.value.toString().match(t)?["Not a valid Malawi National ID number"]:null}function s(e){var t=/\b(?:(?:2(?:[0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9])\.){3}(?:(?:2([0-4][0-9]|5[0-5])|[0-1]?[0-9]?[0-9]))\b/;return e&&e.value.match(t)?null:["Not a valid IP address"]}function u(e){var t=/^(?=.{2,100}$)[a-z!A-Z]+(?:['_.\-!\][a-z]+[a-z!A-Z])*$/;return e&&e.label.match(t)?null:["Invalid name Input"]}function l(e){return isNaN(parseInt(e.value))?["Value must be a number"]:null}function d(e,t,n){var r=e?e.label.length:0;return r>=t&&r<=n?null:["Value length not within range of ".concat(t," - ").concat(n)]}function p(e,t,n){var r=parseInt(e.label);return r>=t&&r<=n?null:["".concat(r," not within range of ").concat(t," - ").concat(n)]}function b(e){var t=e.filter((function(e){var t=e.value||e.other.value;return"No"===t}));return t.length==e.length?["All values can not be no"]:null}function f(e){var t=["all must be selected"];if(!e)return t;var n=e.filter((function(e){return""===e.value}));return n.length>0?t:null}function m(e,t){return e===t?["Values can not be the same"]:null}t["a"]={validateSeries:a,required:o,isMWPhoneNumber:i,isName:u,isNumber:l,hasLengthRangeOf:d,rangeOf:p,neitherOr:b,anyEmpty:f,notTheSame:m,isIPAddress:s,isMWNationalID:c}},2777:function(e,t,n){"use strict";n("ada7")},"279d":function(e,t,n){"use strict";n("4fc5")},"27c5":function(e,t,n){},"27f1":function(e,t,n){"use strict";n("a3fb")},"28ac":function(e,t,n){},"28c5":function(e,t,n){},2989:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=(n("99af"),n("cc6f")),s=n("b89f"),u=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(e,a){return Object(r["a"])(this,n),t.call(this,e,84,a)}return Object(a["a"])(n,[{key:"printSocialHistory",value:function(){return(new s["a"]).printLbl("/programs/".concat(this.programID,"/patients/").concat(this.patientID,"/labels/history"))}}]),n}(c["a"])},"2a82":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-6cb84542"),o=a((function(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("ion-input"),u=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-row"),d=Object(r["resolveComponent"])("ion-grid"),p=Object(r["resolveComponent"])("view-port"),b=Object(r["resolveComponent"])("his-keyboard");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(p,{showFull:!1},{default:a((function(){return[Object(r["createVNode"])(d,null,{default:a((function(){return[Object(r["createVNode"])(l,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.addressInputs,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:n},{default:a((function(){return[Object(r["createVNode"])(s,{mode:"md",inputmode:"numeric",type:"number",max:255,class:[{"highlighted-input":n===e.activeIndex},"input_display"],modelValue:e.addressInputs[n],"onUpdate:modelValue":function(t){return e.addressInputs[n]=t},onIonFocus:function(t){return e.onAddressClick(n)},style:{textAlign:"center"},placeholder:"0"},null,8,["class","modelValue","onUpdate:modelValue","onIonFocus"])]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1}),e.showKeyboard?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,onKeyPress:e.keypress,kbConfig:e.numbers},null,8,["onKeyPress","kbConfig"])):Object(r["createCommentVNode"])("",!0)],64)})),i=(n("d81d"),n("07ac"),n("d3b7"),n("a15b"),n("db10")),c=n("3800"),s=n("0a79"),u=n("51c8"),l=n("2345"),d=n("8a30"),p=n("2ef0"),b=Object(r["defineComponent"])({components:{IonInput:d["v"],IonRow:d["J"],IonCol:d["m"],IonGrid:d["p"],HisKeyboard:i["a"],ViewPort:s["a"]},mixins:[u["a"]],watch:{clear:function(){this.addressInputs={first:"",second:"",third:"",fourth:""}}},setup:function(e,t){var n=this,a=t.emit;Object(r["onActivated"])((function(){return a("onFieldActivated",n)}));var o=Object(r["ref"])(!1),i=Object(r["ref"])(""),s=Object(r["ref"])({first:"",second:"",third:"",fourth:""});function u(e){if(i.value){var t=i.value,n=Object(l["a"])(e,s.value[t]);if(n.length>3)switch(i.value){case"first":i.value="second";break;case"second":i.value="third";break;case"third":i.value="fourth";break;case"fourth":i.value=""}else s.value[t]="0"===n.charAt(0)&&n.length>1?n.substring(1):n}}function d(e){i.value=e,o.value=!0}return Object(r["watch"])(s,(function(e){if(e){var t=Object.values(e).map((function(e){return!Object(p["isEmpty"])(e)}));if(t.every(Boolean)){var n=Object.values(e).map((function(e){return e})).join(".");a("onValue",{label:n,value:n})}else a("onValue",null)}}),{deep:!0,immediate:!0}),{keypress:u,activeIndex:i,onAddressClick:d,showKeyboard:o,addressInputs:s,numbers:[c["i"],[["Delete"],["Clear"]]]}}}),f=(n("b913"),n("6b0d")),m=n.n(f);const h=m()(b,[["render",o],["__scopeId","data-v-6cb84542"]]);t["a"]=h},"2b07":function(e,t,n){"use strict";n("0c79")},"2b3a":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-e96f5a64");Object(r["pushScopeId"])("data-v-e96f5a64");var o=Object(r["createTextVNode"])("Select Module"),i=Object(r["createTextVNode"])(" Close ");Object(r["popScopeId"])();var c=a((function(e,t,n,c,s,u){var l=Object(r["resolveComponent"])("ion-title"),d=Object(r["resolveComponent"])("ion-label"),p=Object(r["resolveComponent"])("ion-toolbar"),b=Object(r["resolveComponent"])("ion-header"),f=Object(r["resolveComponent"])("application-card"),m=Object(r["resolveComponent"])("ion-col"),h=Object(r["resolveComponent"])("ion-row"),g=Object(r["resolveComponent"])("ion-content"),v=Object(r["resolveComponent"])("ion-button"),O=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(b,null,{default:a((function(){return[Object(r["createVNode"])(p,null,{default:a((function(){return[Object(r["createVNode"])(l,null,{default:a((function(){return[o]})),_:1}),Object(r["createVNode"])(d,{style:{"font-weight":"bold",padding:"0.5em"},slot:"end"},{default:a((function(){return[Object(r["createTextVNode"])(" Version: "+Object(r["toDisplayString"])(e.appVersion),1)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(g,null,{default:a((function(){return[Object(r["createVNode"])(h,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.apps,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:n,"size-md":"4","size-sm":"12"},{default:a((function(){return[Object(r["createVNode"])(f,{class:{inactive:!e.clickable(t),clickable:e.clickable(t)},onClick:function(n){return e.setApplication(t)},name:t.applicationName,details:t.applicationDescription,programID:t.programID,iconURL:e.img(t.applicationIcon)},null,8,["class","onClick","name","details","programID","iconURL"])]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(r["createVNode"])(O,null,{default:a((function(){return[Object(r["createVNode"])(p,null,{default:a((function(){return[e.noAppPriviledges||e.canClose?(Object(r["openBlock"])(),Object(r["createBlock"])(v,{key:0,color:"danger",size:"large",onClick:e.closeModal},{default:a((function(){return[i]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})],64)})),s=(n("d3b7"),n("b0c0"),Object(r["withScopeId"])("data-v-1e3d0694"));Object(r["pushScopeId"])("data-v-1e3d0694");var u={class:"his-md-text"};Object(r["popScopeId"])();var l=s((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-img"),l=Object(r["resolveComponent"])("ion-card-title"),d=Object(r["resolveComponent"])("ion-card-header"),p=Object(r["resolveComponent"])("ion-card-content"),b=Object(r["resolveComponent"])("center"),f=Object(r["resolveComponent"])("ion-card");return Object(r["openBlock"])(),Object(r["createBlock"])(f,{class:"his-card"},{default:s((function(){return[Object(r["createVNode"])(b,null,{default:s((function(){return[Object(r["createVNode"])(c,{src:e.iconURL},null,8,["src"]),Object(r["createVNode"])(d,null,{default:s((function(){return[Object(r["createVNode"])(l,null,{default:s((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(p,null,{default:s((function(){return[Object(r["createVNode"])("b",u,Object(r["toDisplayString"])(e.details),1)]})),_:1})]})),_:1})]})),_:1})})),d=n("8a30"),p=Object(r["defineComponent"])({props:["name","details","programID","iconURL"],components:{IonCard:d["f"],IonCardContent:d["g"],IonCardTitle:d["j"],IonCardHeader:d["h"],IonImg:d["s"]}}),b=(n("1bb3"),n("6b0d")),f=n.n(b);const m=f()(p,[["render",l],["__scopeId","data-v-1e3d0694"]]);var h=m,g=n("1718"),v=Object(r["defineComponent"])({name:"Modal",props:{title:{type:String,default:""},apps:{type:Array,default:function(){return[]}},appVersion:{type:String},canClose:{type:Boolean,default:function(){return!1}},isPocSite:{type:Boolean,default:!0}},computed:{noAppPriviledges:function(){return this.apps.every((function(e){return!e.hasPriviledge}))}},methods:{clickable:function(e){return console.log(this.isPocSite),this.isPocSite===e.isPocApp&&e.hasPriviledge},closeModal:function(){this.noAppPriviledges?this.$router.push("/login"):d["cb"].dismiss()},img:function(e){return Object(g["a"])(e)},setApplication:function(e){this.clickable(e)&&d["cb"].dismiss(e)}},components:{IonFooter:d["o"],IonContent:d["n"],IonHeader:d["q"],IonTitle:d["U"],IonToolbar:d["V"],ApplicationCard:h,IonButton:d["d"],IonCol:d["m"],IonRow:d["J"]}});n("d246");const O=f()(v,[["render",c],["__scopeId","data-v-e96f5a64"]]);t["a"]=O},"2b47":function(e,t,n){"use strict";var r=n("7a23"),a={class:"tool-bar-medium-card"};function o(e,t,n,o,i,c){return Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["renderSlot"])(e.$slots,"default")])}var i=Object(r["defineComponent"])({name:"ToolBarMediumCard"}),c=n("6b0d"),s=n.n(c);const u=s()(i,[["render",o]]);t["a"]=u},"2b75":function(e,t,n){"use strict";n("397b")},"2be2":function(e,t,n){},"2c00":function(e,t,n){"use strict";n("72b9")},"2cef":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("45eb"),c=n("7e84"),s=n("262e"),u=n("2caf"),l=(n("96cf"),n("99af"),n("1c74")),d=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"voidRelation",value:function(e,t,n){return l["e"].void("people/".concat(e,"/relationships/").concat(t),{reason:n})}},{key:"amendRelation",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,r,a,o){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.voidRelation(t,a,"Updating guardian relationship");case 2:return e.abrupt("return",n.createRelation(t,r,o));case 3:case"end":return e.stop()}}),e)})));function t(t,n,r,a){return e.apply(this,arguments)}return t}()},{key:"getRelations",value:function(){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"types/relationships")}},{key:"createRelation",value:function(e,t,r){return Object(i["a"])(Object(c["a"])(n),"postJson",this).call(this,"people/".concat(e,"/relationships"),{relationship_type_id:r,relation_id:t})}}]),n}(l["e"])},"2d93":function(e,t,n){"use strict";n("14e3")},"2ed9":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));n("d3b7"),n("d81d"),n("caad"),n("2532");var r,a=n("8a30"),o=n("7a23");(function(e){e["ACTIVE_PLATFORM"]="cur_platform"})(r||(r={}));var i=["ios","iphone","android","tablet","mobileweb","ipad"],c=["desktop","electron"],s=function(e){return Object(a["Z"])().map((function(t){return e.includes(t)})).some(Boolean)},u=function(){return s(i)||!s(c)},l=function(){return s(c)||!u()},d=localStorage.getItem(r.ACTIVE_PLATFORM),p=Object(o["ref"])(null!=d?d:l()?"desktop":"mobile"),b=Object(o["computed"])((function(){return"mobile"===p.value})),f=function(e){Object(o["nextTick"])((function(){localStorage.setItem(r.ACTIVE_PLATFORM,e),p.value=e}))};function m(){return{platformType:Object(o["readonly"])(p),useVirtualInput:b,isMobile:u,isDesktop:l,setPlatformType:f}}},"2ee9":function(e,t,n){"use strict";n("beb6")},"2ef6":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("96cf"),n("5969")),u=n("ad8d"),l=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.gender="",e.ageGroup=u["a"][0],e.initialize=!0,e.rebuildOutcome=!0,e}return Object(o["a"])(n,[{key:"init",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.initialize=!0,e.next=3,this.getCohort();case 3:if(t=e.sent,!t||"created"!==t.temp_disaggregated){e.next=7;break}return this.initialize=!1,e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"setAgeGroup",value:function(e){this.ageGroup=e}},{key:"setInitialization",value:function(e){this.initialize=e}},{key:"setRebuildOutcome",value:function(e){this.rebuildOutcome=e}},{key:"setGender",value:function(e){this.gender=e}},{key:"getGender",value:function(){return this.gender}},{key:"getCohort",value:function(){return this.getReport("cohort_disaggregated",{age_group:"".concat(this.ageGroup),rebuild_outcome:"".concat(this.rebuildOutcome),initialize:"".concat(this.initialize)})}},{key:"getTxIpt",value:function(){return this.getReport("clients_given_ipt",{gender:this.gender,age_group:"".concat(this.ageGroup)})}},{key:"getTxCurrTB",value:function(){return this.getReport("screened_for_tb",{gender:this.gender,age_group:"".concat(this.ageGroup)})}},{key:"getRegimenDistribution",value:function(){return this.getReport("disaggregated_regimen_distribution",{gender:"".concat(this.gender),age_group:"".concat(this.ageGroup)})}}]),n}(s["a"])},"2f2a":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-075ff202"),o=a((function(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("ion-row");return Object(r["openBlock"])(),Object(r["createBlock"])(l,{style:{"border-top":"solid 1px rgb(196 190 196)"}},{default:a((function(){return[e.showPerPageFilter?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0},{default:a((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("select",{class:"input_display","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.itemsPerPage=t}),disabled:e.disablePerPageFilter},[Object(r["createVNode"])("option",{selected:5===e.itemsPerPage,value:5},"5 rows/page",8,["selected"]),Object(r["createVNode"])("option",{selected:10===e.itemsPerPage,value:10},"10 rows/page",8,["selected"]),Object(r["createVNode"])("option",{selected:20===e.itemsPerPage,value:20},"20 rows/page",8,["selected"]),Object(r["createVNode"])("option",{selected:50===e.itemsPerPage,value:50},"50 rows/page",8,["selected"]),Object(r["createVNode"])("option",{selected:100===e.itemsPerPage,value:100},"100 rows/page",8,["selected"]),Object(r["createVNode"])("option",{selected:1e3===e.itemsPerPage,value:1e3},"1000 rows/page",8,["selected"]),Object(r["createVNode"])("option",{selected:e.itemsPerPage===e.totalRowCount,value:e.totalRowCount},"Show all rows("+Object(r["toDisplayString"])(e.totalRowCount)+")",9,["selected","value"])],8,["disabled"]),[[r["vModelSelect"],e.itemsPerPage]])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(s,null,{default:a((function(){return[Object(r["createVNode"])(u,{disabled:e.disableSearchFilter,class:"input_display search_input",value:e.searchFilter,onClick:e.launchSearcher,placeholder:"Search here..."},null,8,["disabled","value","onClick"])]})),_:1})]})),_:1})})),i=n("1da1"),c=(n("96cf"),n("a9e3"),n("8a30")),s=n("e6e9"),u=n("d95e"),l=Object(r["defineComponent"])({emits:["onItemsPerPage","onSearchFilter"],components:{IonCol:c["m"],IonRow:c["J"],IonInput:c["v"]},props:{totalRowCount:{type:Number,default:15e3},disableSearchFilter:{type:Boolean,default:!1},disablePerPageFilter:{type:Boolean,default:!1},showPerPageFilter:{type:Boolean,default:!1}},setup:function(e,t){var n=t.emit,a=Object(r["ref"])(50),o=Object(r["ref"])("");function l(e,t){return d.apply(this,arguments)}function d(){return d=Object(i["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,c["cb"].create({component:s["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:t,onFinish:n}});case 2:r=e.sent,r.present();case 4:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(){l({id:"search",helpText:"Search table data",defaultValue:function(){return o.value},type:u["b"].TT_TEXT},(function(e){o.value=e?e.value:"",n("onSearchFilter",o.value)}))}return Object(r["watch"])(a,(function(e){"number"===typeof e&&n("onItemsPerPage",e)}),{immediate:!0}),{itemsPerPage:a,searchFilter:o,launchKeyboard:l,launchSearcher:p}}}),d=(n("a430"),n("6b0d")),p=n.n(d);const b=p()(l,[["render",o],["__scopeId","data-v-075ff202"]]);t["a"]=b},"2fd5":function(e,t,n){"use strict";n("a4d3"),n("e01a");var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("his-text-input"),s=Object(r["resolveComponent"])("ion-chip"),u=Object(r["resolveComponent"])("ion-text"),l=Object(r["resolveComponent"])("ion-label"),d=Object(r["resolveComponent"])("ion-checkbox"),p=Object(r["resolveComponent"])("ion-item"),b=Object(r["resolveComponent"])("ion-list"),f=Object(r["resolveComponent"])("view-port"),m=Object(r["resolveComponent"])("his-keyboard");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(f,{showFull:!e.showKeyboard},{default:Object(r["withCtx"])((function(){return[e.showKeyboard?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,value:e.selected,onOnValue:t[1]||(t[1]=function(t){return e.onKbValue(t,e.showKeyboard)}),disabled:!1},null,8,["value"])):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.checkedItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:n},[Object(r["createVNode"])(s,{color:"danger",onClick:function(n){return e.uncheck(t.label)}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1032,["onClick"])])})),128)),Object(r["createVNode"])(b,{class:"view-port-content"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.filtered,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:n,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{class:"his-md-text"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),e.isDescription(t.description,t.isChecked)?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,color:t.description.color},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("p",null,[Object(r["createVNode"])("i",null,Object(r["toDisplayString"])(t.description.text),1)])]})),_:2},1032,["color"])):Object(r["createCommentVNode"])("",!0)]})),_:2},1024),Object(r["createVNode"])(d,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e},onIonChange:function(n){return e.onselect(t,n)},disabled:null===t||void 0===t?void 0:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]})),_:2},1032,["color","lines"])})),128))]})),_:1})]})),_:1},8,["showFull"]),e.showKeyboard?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):Object(r["createCommentVNode"])("",!0)],64)}var o=n("2909"),i=n("5530"),c=n("1da1"),s=(n("d3b7"),n("159b"),n("4de4"),n("d81d"),n("96cf"),n("8a30")),u=n("82a9"),l=n("2ef0"),d=Object(r["defineComponent"])({components:{IonCheckbox:s["k"],IonText:s["R"],IonChip:s["l"]},name:"HisMultipleSelect",mixins:[u["a"]],methods:{onselect:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n.$nextTick(Object(c["a"])(regeneratorRuntime.mark((function r(){var a,c,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(c=Object(i["a"])({},e),c.isChecked=t.target.checked,"function"!==typeof(null===c||void 0===c||null===(a=c.other)||void 0===a?void 0:a.onEvent)){r.next=5;break}return r.next=5,c.other.onEvent(c.isChecked);case 5:if(!n.onValue||!c.isChecked){r.next=11;break}return r.next=8,n.onValue(c,n.fdata,n.cdata);case 8:if(s=r.sent,s){r.next=11;break}return r.abrupt("return",t.target.checked=!1);case 11:if(!n.onValueUpdate){r.next=15;break}return r.next=14,n.onValueUpdate(Object(o["a"])(n.listData),c,n.fdata,n.cdata);case 14:n.listData=r.sent;case 15:n.$emit("onValue",n.getChecked(n.listData));case 16:case"end":return r.stop()}}),r)}))));case 1:case"end":return r.stop()}}),r)})))()},uncheck:function(e){this.listData.forEach((function(t){t.label===e&&(t.isChecked=!1)}))},getChecked:function(e){return e.filter((function(e){return e.isChecked}))},isDescription:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!e&&(null===e||void 0===e||!e.show||("onChecked"===e.show&&t||"always"===e.show))}},computed:{checkedItems:function(){return this.getChecked(this.listData)}},watch:{clear:function(){this.listData=this.listData.map((function(e){return e.isChecked=!1,e}))},footerButtonEvent:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e||"function"!==typeof(null===(r=e.onClickComponentEvents)||void 0===r?void 0:r.refreshOptions)){n.next=5;break}return n.next=3,null===(a=e.onClickComponentEvents)||void 0===a?void 0:a.refreshOptions(e,t.listData,t.fdata,t.cdata);case 3:t.listData=n.sent,t.$emit("onValue",t.getChecked(t.listData));case 5:case"end":return n.stop()}}),n)})))()},deep:!0,immediate:!0}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$emit("onFieldActivated",e),Object(l["isEmpty"])(e.listData)||!e.config.buildOptionsOnce){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.options(e.fdata,e.getChecked(e.listData),e.cdata,e.listData);case 5:e.listData=t.sent,e.$emit("onValue",e.getChecked(e.listData));case 7:case"end":return t.stop()}}),t)})))()}}),p=n("6b0d"),b=n.n(p);const f=b()(d,[["render",a]]);t["a"]=f},"2fdd":function(e,t,n){},3063:function(e,t,n){},3130:function(e,t,n){"use strict";n("78dc")},"318c":function(e,t,n){},"32b3":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return p}));var r,a=n("3835"),o=n("1da1"),i=n("d4ec"),c=n("bee2"),s=n("262e"),u=n("2caf"),l=(n("d81d"),n("4e82"),n("07ac"),n("96cf"),n("cc6f")),d=n("7957");(function(e){e["Prescription"]="htnPrescription"})(r||(r={}));var p=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e,r){return Object(i["a"])(this,n),t.call(this,e,48,r)}return Object(c["a"])(n,[{key:"getSystolicBp",value:function(){return d["a"].getFirstValueNumber(this.patientID,"Systolic blood pressure")}},{key:"getDiastolicBp",value:function(){return d["a"].getFirstValueNumber(this.patientID,"Diastolic blood pressure")}},{key:"onBpDrugs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].getFirstValueCoded(this.patientID,"Treatment status");case 2:return t=e.sent,e.abrupt("return",!!t&&"Yes"===t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBPTrail",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getJson("/patients/".concat(this.patientID,"/bp_trail"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCurrentDrugs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getJson("/patients/".concat(this.patientID,"/current_bp_drugs"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getLastDrugs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getJson("/patients/".concat(this.patientID,"/last_bp_drugs_dispensation"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getAdherence",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].postJson("/patients/".concat(this.patientID,"/remaining_bp_drugs"),{drug_id:t,pills:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"enrollPatient",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].postJson("/patients/".concat(this.patientID,"/update_or_create_htn_state"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getDrugs",value:function(){return{HCZ:{drugs:[{drugName:"HCZ (25mg tablet)",drugID:275,amount:"25mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null}],selected:null,notes:[]},Enalapril:{drugs:[{drugName:"Enalapril (5mg tablet)",drugID:942,amount:"5mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Enalapril (10mg tablet)",drugID:943,amount:"10mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]},Amlodipine:{drugs:[{drugName:"Amlodipine (5mg tablet)",drugID:558,amount:"5mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Amlodipine (10mg tablet)",drugID:559,amount:"10mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]},Atenolol:{drugs:[{drugName:"Atenolol (50mg tablet)",drugID:117,amount:"50mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null},{drugName:"Atenolol(100mg tablet)",drugID:11,amount:"100mg",current:!1,selected:!1,isChecked:!1,dispensed:null,expectedRemaining:null,adherence:null,remaining:null}],selected:null,notes:[]}}}}],[{key:"getBpGrade",value:function(e,t){return e<140&&t<90?"normal":e>=140&&e<160||t>=100&&t<110?"grade 1":e>=180&&t>110||e>=180?"grade 3":e>=160&&e<180||t>=110?"grade 2":"N/A"}},{key:"isBpNormotensive",value:function(e){var t=this,n=Object.values(e).sort((function(e,t){return e.date<t.date?1:0})).map((function(e){return t.getBpGrade(e.sbp,e.dbp)})),r=Object(a["a"])(n,2),o=r[0],i=r[1];return"normal"===o&&"normal"===i}},{key:"htnDrugReferences",value:function(){return[{drug_id:275,drug_name:"HCZ (25mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:942,drug_name:"Enalapril (5mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:943,drug_name:"Enalapril (10mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:558,drug_name:"Amlodipine (5mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:559,drug_name:"Amlodipine (10mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:117,drug_name:"Atenolol (50mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"},{drug_id:11,drug_name:"Atenolol(100mg tablet)",units:"tab(s)",am:0,noon:0,pm:1,frequency:"Daily (QOD)"}]}}]),n}(l["a"])},"331e":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("96cf"),n("cc6f")),u=n("8158"),l=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,122,r)}return Object(o["a"])(n,[{key:"fetchLatestTriageEncounter",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.getObs({concept_id:u["a"].getConceptID("History of COVID-19 contact"),start_date:this.date,end_date:this.date,person_id:this.patientID});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"getComplaintsList",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"",e.abrupt("return",u["a"].getConceptSet(t,n));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(s["a"])},3385:function(e,t,n){"use strict";n("44a7")},"341d":function(e,t,n){"use strict";n("b6f2")},3612:function(e,t,n){"use strict";n("6dff")},"364b":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-07ecd408");Object(r["pushScopeId"])("data-v-07ecd408");var o={id:"consistency_check"};Object(r["popScopeId"])();var i=a((function(e,t,n,a,i,c){return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(this.reportConsistency,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:t},Object(r["toDisplayString"])(e),1)})),128))])})),c=(n("d81d"),n("4de4"),n("d3b7"),n("2ef0")),s=Object(r["defineComponent"])({data:function(){return{reportConsistency:[]}},props:{indicators:{type:Object,default:function(){return{}}}},watch:{indicators:{handler:function(e){Object(c["isEmpty"])(e)||this.runValidations(e)},deep:!0,immediate:!0}},methods:{runValidations:function(e){this.reportConsistency=this.getRuleChecks().filter((function(t){if(t.sum){var n=t.sum.map((function(t){return e[t]})).reduce((function(e,t){return e+t}),0);return t.comparator(e,n)}return!1})).map((function(e){return e.error()}))},getRuleChecks:function(){return[{sum:["initial_non_pregnant_females_all_ages","males_initiated_on_art_first_time","initial_pregnant_females_all_ages","unknown_gender","re_initiated_on_art","transfer_in"],comparator:function(e,t){return e["total_registered"]!=t},error:function(){return"\n                    Section 26 - 32: Total registered (Quartely) is not equal to\n                    CHECK: Total FT + Re Patients re-initiated on ART + TI Patients transferred in on ART\n                "}},{sum:["cum_initial_non_pregnant_females_all_ages","cum_males_initiated_on_art_first_time","cum_initial_pregnant_females_all_ages","cum_unknown_gender","cum_re_initiated_on_art","cum_transfer_in"],comparator:function(e,t){return e["cum_total_registered"]!=t},error:function(){return"\n                    Section 26 - 32: Total registered (Cummulative) is not equal to\n                    CHECK: Total FT + Re Patients re-initiated on ART + TI Patients transferred in on ART\n                "}},{sum:["quarterly_all_males","non_pregnant_females","pregnant_females_all_ages"],comparator:function(e,t){return e["total_registered"]!=t},error:function(){return"\n                    Section 33 - 35: Total registered (Quartely) is not equal to\n                    M Males (all ages) + FNP Non-pregnant Females (all ages)  + FP Pregnant Females (all ages)  \n                "}},{sum:["cum_all_males","cum_non_pregnant_females","cum_pregnant_females_all_ages"],comparator:function(e,t){return e["cum_total_registered"]!=t},error:function(){return"\n                    Section 33 - 35: Total registered (Cummulative) is not equal to\n                    M Males (all ages) + FNP Non-pregnant Females (all ages)  + FP Pregnant Females (all ages) \n                "}},{sum:["children_below_24_months_at_art_initiation","children_24_months_14_years_at_art_initiation","adults_at_art_initiation"],comparator:function(e,t){return e["total_registered"]!=t},error:function(){return"\n                    Section 36 - 38: Total registered (Quartely) is not equal to\n                    A Children below 24 m at ART initiation + B Children 24 m - 14 yrs at ART initiation + C Adults 15 years+ at ART initiation \n                "}},{sum:["cum_children_below_24_months_at_art_initiation","cum_children_24_months_14_years_at_art_initiation","cum_adults_at_art_initiation"],comparator:function(e,t){return e["cum_total_registered"]!=t},error:function(){return"\n                    Section 36 - 38: Total registered (Cummulative) is not equal to\n                    A Children below 24 m at ART initiation + B Children 24 m - 14 yrs at ART initiation + C Adults 15 years+ at ART initiation \n                "}},{sum:["presumed_severe_hiv_disease_in_infants","confirmed_hiv_infection_in_infants_pcr","quarterly_children_12_59_months","pregnant_women","breastfeeding_mothers","who_stage_two","asymptomatic","who_stage_three","who_stage_four","unknown_other_reason_outside_guidelines"],comparator:function(e,t){return e["total_registered"]!=t},error:function(){return"\n                    Section 39 - 48: Total registered (Quartely) is not equal to\n                    Pres. Sev. HIV disease age <12 m + PCR Infants <12 mths PCR + U5 Children 12-59mths\n                    Preg Pregnant women + BF Breastfeeding mothers + CD4 CD4 below threshold\n                    Asy Asymptomatic / mild + WHO stage 3 + WHO stage 4\n                    Unknown / reason outside guidelines\n                "}},{sum:["cum_presumed_severe_hiv_disease_in_infants","cum_confirmed_hiv_infection_in_infants_pcr","cum_children_12_59_months","cum_pregnant_women","cum_breastfeeding_mothers","cum_who_stage_two","cum_asymptomatic","cum_who_stage_three","cum_who_stage_four","cum_unknown_other_reason_outside_guidelines"],comparator:function(e,t){return e["cum_total_registered"]!=t},error:function(){return"\n                    Section 39 - 48: Total registered (Cummulative) is not equal to\n                    Pres. Sev. HIV disease age <12 m + PCR Infants <12 mths PCR + U5 Children 12-59mths\n                     + Preg Pregnant women + BF Breastfeeding mothers + CD4 CD4 below threshold\n                     + Asy Asymptomatic / mild + WHO stage 3 + WHO stage 4\n                     + Unknown / reason outside guidelines\n                "}},{sum:["no_tb","tb_within_the_last_two_years","current_episode_of_tb"],comparator:function(e,t){return e["total_registered"]!=t},error:function(){return"\n                    Section 49 - 51: Total registered (Quartely) is not equal to\n                    Nev/>2yrs\tNever TB / TB over 2 years ago + Last 2yrs\tTB within the last 2 years + Curr Current episode of TB\n                "}},{sum:["cum_no_tb","cum_tb_within_the_last_two_years","cum_current_episode_of_tb"],comparator:function(e,t){return e["cum_total_registered"]!=t},error:function(){return"\n                    Section 49 - 51: Total registered (Cummulative) is not equal to\n                    Nev/>2yrs\tNever TB / TB over 2 years ago + Last 2yrs\tTB within the last 2 years + Curr Current episode of TB \n                "}},{sum:["total_alive_and_on_art","died_total","defaulted","stopped_art","transfered_out"],comparator:function(e,t){return e["cum_total_registered"]!=t},error:function(){return'\n                    Section 53 - 61: Total registered (Cummulative) is not equal to\n                    Total alive and on ART + Died total + Defaulted (more than 2 months overdue after expected to have run out of ARVs \n                     + Stopped taking ARVs (clinician or patient own decision, last known alive\n                     + Transferred Out";\n                '}},{sum:["zero_p","zero_a","two_p","two_a","four_pp","four_pa","four_a","five_a","six_a","seven_a","eight_a","nine_pp","nine_pa","nine_a","ten_a","eleven_pp","eleven_pa","eleven_a","twelve_pp","twelve_pa","twelve_a","unknown_regimen","thirteen_a","fourteen_a","sixteen_a","seventeen_a","fourteen_pp","fourteen_pa","fifteen_pp","fifteen_pa","fifteen_a","sixteen_p","seventeen_pa","seventeen_pp"],comparator:function(e,t){return e["total_alive_and_on_art"]!=t},error:function(){return"Section 64 - 80: Total alive and on ART is not equal to Regimens sections"}},{sum:["total_pregnant_women","total_breastfeeding_women","total_other_patients"],comparator:function(e,t){return e["total_alive_and_on_art"]!=t},error:function(){return"\n                    Section 81 - 83: Total alive and on ART is not equal to\n                    Pregnant + Breastfeeding + All others (not circled)\n                "}},{sum:["tb_not_suspected","tb_suspected","tb_confirmed_currently_not_yet_on_tb_treatment","tb_confirmed_on_tb_treatment","unknown_tb_status"],comparator:function(e,t){return e["total_alive_and_on_art"]!=t},error:function(){return"\n                    Section 84 - 88: Total alive and on ART is not equal to\n                    TB not suspected + TB suspected + TB conf., not on Rx + TB conf., on TB Rx + Unknown (not circled)\n                "}},{sum:["total_patients_without_side_effects","total_patients_with_side_effects","unknown_side_effects"],comparator:function(e,t){return e["total_alive_and_on_art"]!=t},error:function(){return"\n                    Section 88 - 91: Total alive and on ART is not equal to\n                    None + Any side effects + Unknown (not circled)\n                "}},{sum:["patients_with_0_6_doses_missed_at_their_last_visit","patients_with_7_plus_doses_missed_at_their_last_visit","patients_with_unknown_adhrence"],comparator:function(e,t){return e["total_alive_and_on_art"]!=t},error:function(){return"\n                    Section 92 - 94: Total alive and on ART is not equal to\n                    0 – 3 doses missed + 4+ doses missed + Unknown (not circled)\n                "}}]}}}),u=(n("3612"),n("6b0d")),l=n.n(u);const d=l()(s,[["render",i],["__scopeId","data-v-07ecd408"]]);t["a"]=d},"369d":function(e,t,n){"use strict";n("88b2")},"36ad":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-729e92ae"),o=a((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-input");return Object(r["openBlock"])(),Object(r["createBlock"])(c,{ref:"input",class:"input_display",modelValue:e.text,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.text=t}),type:e.type,disabled:e.disabled,readonly:e.useVirtualInput,autocapitalize:"sentences"},null,8,["modelValue","type","disabled","readonly"])})),i=n("8a30"),c=n("2ed9"),s=Object(r["defineComponent"])({name:"HisInput",components:{IonInput:i["v"]},setup:function(){var e=Object(c["a"])(),t=e.useVirtualInput;return{useVirtualInput:t}},data:function(){return{text:""}},watch:{value:function(e){this.text=e},text:function(e){this.$emit("onValue",e)}},props:{value:{required:!1},type:{type:String,default:function(){return"text"}},disabled:{type:Boolean,default:function(){return!1}}}}),u=(n("7b79"),n("6b0d")),l=n.n(u);const d=l()(s,[["render",o],["__scopeId","data-v-729e92ae"]]);t["a"]=d},"374c":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["createVNode"])("b",null,"TODAY",-1),o=Object(r["createVNode"])("b",null,"Unknown",-1);function i(e,t,n,i,c,s){var u=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("view-port"),d=Object(r["resolveComponent"])("picker-selector"),p=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("ion-button"),m=Object(r["resolveComponent"])("ion-grid");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(l,{showFull:!1},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{class:"input_display",readonly:!0,value:e.value},null,8,["value"]),Object(r["renderSlot"])(e.$slots,"default",{date:e.value})]})),_:3}),Object(r["createVNode"])(m,{class:"his-floating-keyboard"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{"sm-size":"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{value:e.getYear,onOnIncrement:t[1]||(t[1]=function(t){return e.add("year")}),onOnDecrement:t[2]||(t[2]=function(t){return e.subtract("year")})},null,8,["value"])]})),_:1}),Object(r["createVNode"])(p,{"sm-size":"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{value:e.getMonth,onOnIncrement:t[3]||(t[3]=function(t){return e.add("month")}),onOnDecrement:t[4]||(t[4]=function(t){return e.subtract("month")})},null,8,["value"])]})),_:1}),Object(r["createVNode"])(p,{"sm-size":"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{value:e.getDay,onOnIncrement:t[5]||(t[5]=function(t){return e.add("day")}),onOnDecrement:t[6]||(t[6]=function(t){return e.subtract("day")})},null,8,["value"])]})),_:1})]})),_:1}),Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{class:"ion-text-center"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{color:"success",style:{width:"100%",height:"6vh"},onClick:e.today},{default:Object(r["withCtx"])((function(){return[a]})),_:1},8,["onClick"])]})),_:1}),Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{disabled:!e.config.allowUnknown,color:"warning",style:{width:"100%",height:"6vh"},onClick:t[7]||(t[7]=function(t){return e.value="Unknown"})},{default:Object(r["withCtx"])((function(){return[o]})),_:1},8,["disabled"])]})),_:1})]})),_:1})]})),_:1})],64)}var c=n("1da1"),s=(n("96cf"),n("0a79")),u=n("51c8"),l=n("9283"),d=n("1c74"),p=Object(r["withScopeId"])("data-v-0a5e8d79");Object(r["pushScopeId"])("data-v-0a5e8d79");var b=Object(r["createTextVNode"])(" + "),f=Object(r["createTextVNode"])(" - ");Object(r["popScopeId"])();var m=p((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-row"),l=Object(r["resolveComponent"])("ion-grid");return Object(r["openBlock"])(),Object(r["createBlock"])(l,{class:"his-card"},{default:p((function(){return[Object(r["createVNode"])(u,null,{default:p((function(){return[Object(r["createVNode"])(s,{size:"12"},{default:p((function(){return[Object(r["createVNode"])(c,{onClick:e.onIncrement,color:"light",class:"w-button"},{default:p((function(){return[b]})),_:1},8,["onClick"])]})),_:1})]})),_:1}),Object(r["createVNode"])(u,null,{default:p((function(){return[Object(r["createVNode"])(s,{class:"ion-text-center ion-margin-vertical large-text"},{default:p((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.value),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(u,null,{default:p((function(){return[Object(r["createVNode"])(s,{size:"12"},{default:p((function(){return[Object(r["createVNode"])(c,{onClick:e.onDecrement,color:"light",class:"w-button"},{default:p((function(){return[f]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})})),h=n("8a30"),g=Object(r["defineComponent"])({components:{IonGrid:h["p"],IonRow:h["J"],IonCol:h["m"],IonButton:h["d"]},props:{value:{type:String,required:!0}},emits:["onIncrement","onDecrement"],setup:function(e,t){var n=function(){return t.emit("onIncrement")},r=function(){return t.emit("onDecrement")};return{onIncrement:n,onDecrement:r}}}),v=(n("5b4a"),n("6b0d")),O=n.n(v);const j=O()(g,[["render",m],["__scopeId","data-v-0a5e8d79"]]);var _=j,w=Object(r["defineComponent"])({components:{PickerSelector:_,IonInput:h["v"],ViewPort:s["a"],IonGrid:h["p"],IonCol:h["m"],IonRow:h["J"],IonButton:h["d"]},mixins:[u["a"]],data:function(){return{value:"",date:"",isInit:!0}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),"function"===typeof e.config.initialDate?e.date=new Date(e.config.initialDate()):e.date=new Date,t.next=4,e.setDefaultValue();case 4:e.isInit=!1;case 5:case"end":return t.stop()}}),t)})))()},methods:{setDefaultValue:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.defaultValue||e.value){t.next=5;break}return t.next=3,e.defaultValue(e.fdata,e.cdata);case 3:n=t.sent,n&&(e.isInit=!1,e.date=new Date(n));case 5:case"end":return t.stop()}}),t)})))()},add:function(e){this.date=l["b"].add(this.fmt(this.date),e,1)},subtract:function(e){this.date=l["b"].subtract(this.fmt(this.date),e,1)},today:function(){this.date=new Date(d["e"].getSessionDate())},fmt:function(e){return l["b"].toStandardHisFormat(e)}},computed:{getYear:function(){return l["b"].getYear(this.fmt(this.date))},getMonth:function(){return l["b"].getMonth(this.fmt(this.date))},getDay:function(){return l["b"].getDay(this.fmt(this.date))}},watch:{date:function(e){this.isInit||(this.value=l["b"].toStandardHisFormat(e))},value:function(e){e?this.$emit("onValue",{label:e,value:this.value}):this.$emit("onValue",null)},clear:function(){this.value=""}}});const k=O()(w,[["render",i]]);t["a"]=k},3800:function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"l",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"k",(function(){return c})),n.d(t,"i",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"j",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"h",(function(){return b})),n.d(t,"f",(function(){return f}));var r=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["","Done",""]],a=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["Clear","%","/"]],o=[["1","2","3"],["4","5","6"],["7","8","9"],["Del.","0","Clear"]],i=[["1","2","3","<"],["4","5","6",">"],["7","8","9","="],["","0",""]],c=[["1","2","3","+","-","/","*"],["4","5","6","%","=","<",">","Qwerty"],["7","8","9",".",","],["","0",""]],s=[["1","2","3"],["4","5","6"],["7","8","9"],["","0",""]],u=[["1","2","3","4","5","6","7"],["8","9","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31"]],l=[["a","b","c","d","e","f","g","h","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],d=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","'"],["z","x","c","v","b","n","m",",",".","A-Z"]],p=[["1","2","3","4","5","6","7","8","9","0"],["a","b","c","d","e","f","g","h","-","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],b=[["1","2","3","4","5","6","7","8","9","0","Del"],["q","w","e","r","t","y","u","i","o","p","Clear"],["a","s","d","f","g","h","j","k","l",".","Caps"],["z","x","c","v","b","n","m","<",">","/","Enter"]],f=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","Del."],["z","x","c","v","b","n","m","Caps","Login"]]},"397b":function(e,t,n){},"3a89":function(e,t,n){},"3aa1":function(e,t,n){},"3b8c":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("96cf"),n("d3b7"),n("b0c0"),n("ac1f"),n("466d"),n("99af"),n("159b"),n("d81d"),n("cc6f")),u=n("7957"),l=n("5a0c"),d=n.n(l),p=n("2ef0"),b=n("71c3"),f=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,53,r)}return Object(o["a"])(n,[{key:"getFamilyPlanningMethods",value:function(){return["ORAL CONTRACEPTIVE PILLS","DEPO-PROVERA","INTRAUTERINE CONTRACEPTION","CONTRACEPTIVE IMPLANT","MALE CONDOMS","FEMALE CONDOMS","TUBAL LIGATION","NONE"]}},{key:"hasCompleteTptDispensations",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b["a"].getAllDrugOrders(this.patientID);case 3:return t=e.sent,n=t.reduce((function(e,t){var n=t.drug.name;return n.match(/Isoniazid/i)&&(e["isoniazid"]+=t.quantity),n.match(/Rifapentine/i)&&(e["rifapentine"]+=t.quantity),e}),{rifapentine:0,isoniazid:0}),r=n.rifapentine,a=n.isoniazid,e.abrupt("return",a>=168||a>=36&&r>=72);case 8:return e.prev=8,e.t0=e["catch"](0),console.error(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"patientHitMenopause",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getFirstObs(this.patientID,"Why does the woman not use birth control");case 2:return t=e.sent,e.abrupt("return",!(!t||"string"!==typeof(null===t||void 0===t?void 0:t.value_text))&&(!!t.value_text.match(/menopause/i)&&s["a"].obsInValidPeriod(t)));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasTreatmentHistoryObs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getFirstObs(this.patientID,"Previous TB treatment history");case 2:return t=e.sent,e.abrupt("return",t&&s["a"].obsInValidPeriod(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"patientCompleted3HP",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getFirstObs(this.patientID,"Previous TB treatment history");case 2:return t=e.sent,e.abrupt("return",!!(t&&"string"===typeof t.value_text&&s["a"].obsInValidPeriod(t)&&t.value_text.match(/complete/i)));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDrugSideEffects",value:function(){return s["a"].getJson("programs/".concat(s["a"].getProgramID(),"/patients/").concat(this.patientID,"/medication_side_effects"),{date:this.date})}},{key:"getClient",value:function(){return s["a"].getFirstValueCoded(this.patientID,"Patient Present")}},{key:"clientDueForCxCa",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getJson("last_cxca_screening_details",{id:this.patientID,date:this.date});case 2:if(t=e.sent,Object(p["isEmpty"])(t)){e.next=7;break}return n=t["date_screened"],r=d()(this.date).diff(n,"years"),e.abrupt("return",r>=1);case 7:return e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"clientHasHadAHysterectomy",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getFirstValueCoded(this.patientID,"Reason for NOT offering CxCa");case 2:if(t=e.sent,"Hysterectomy"!==t){e.next=5;break}return e.abrupt("return",!0);case 5:return e.next=7,s["a"].getFirstValueText(this.patientID,"Treatment");case 7:if(n=e.sent,"Hysterectomy"!==n){e.next=10;break}return e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getTLObs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=function(e){return e&&"Tubal ligation"===e.value_coded&&s["a"].obsInValidPeriod(e)},e.next=3,s["a"].getFirstObs(this.patientID,"Family planning");case 3:if(n=e.sent,!t(n)){e.next=8;break}return e.abrupt("return",t(n));case 8:return e.next=10,s["a"].getFirstObs(this.patientID,"Method of family planning");case 10:return r=e.sent,e.abrupt("return",t(r));case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getPreviousDrugs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getJson("patients/".concat(this.patientID,"/drugs_received"));case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return n={},t.forEach((function(e){n[e.drug_inventory_id]=e})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"familyPlanningMethods",value:function(e,t){var n={"ORAL CONTRACEPTIVE PILLS":{"DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"DEPO-PROVERA":{"ORAL CONTRACEPTIVE PILLS":"N","INTRAUTERINE CONTRACEPTION":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"INTRAUTERINE CONTRACEPTION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","CONTRACEPTIVE IMPLANT":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"CONTRACEPTIVE IMPLANT":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"MALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","FEMALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"FEMALE CONDOMS":{"ORAL CONTRACEPTIVE PILLS":"Y","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"Y","CONTRACEPTIVE IMPLANT":"Y","MALE CONDOMS":"Y","RYTHM METHOD":"Y","TUBAL LIGATION":"N",VASECTOMY:"Y"},"RYTHM METHOD":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"Y","CONTRACEPTIVE IMPLANT":"N","TUBAL LIGATION":"N",VASECTOMY:"N"},"TUBAL LIGATION":{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N",VASECTOMY:"N"},VASECTOMY:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"Y","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"Y","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"Y","RYTHM METHOD":"N","TUBAL LIGATION":"N"},NONE:{"ORAL CONTRACEPTIVE PILLS":"N","DEPO-PROVERA":"N","INTRAUTERINE CONTRACEPTION":"N","MALE CONDOMS":"N","FEMALE CONDOMS":"N","CONTRACEPTIVE IMPLANT":"N","RYTHM METHOD":"N","TUBAL LIGATION":"N"}},r=n[e];return t.map((function(e){return"N"===r[e.label]?{label:e.label,value:e.value,isChecked:!1,disabled:!0}:{label:e.label,value:e.value,isChecked:e.isChecked,disabled:!1}}))}}]),n}(s["a"])},"3c35":function(e,t,n){},"3d6c":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=(n("4de4"),n("d3b7"),n("caad"),n("2532"),n("1c74")),s=[{drugID:105,shortName:"Acyclovir 200mg",fullName:"Acyclovir 200mg",packSizes:[30]},{drugID:1044,shortName:"ABC 120 /3TC 60mg",fullName:"Abacavir and Lamivudine 120mg pack of 60 tablets",packSizes:[60],categories:["p"]},{drugID:969,shortName:"ABC 600 / 3TC 300mg",fullName:"Abacavir sulfate 600mg / Lamivudine 300mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:932,shortName:"ATV 300 / r 100mg",fullName:"Atazanavir / Ritonavir 300 / 100mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:39,shortName:"AZT 300 /3TC 150mg",fullName:"Zidovudine / lamivudine 300 / 150mg, tin of 60 tablets",packSizes:[60],categories:["a"]},{drugID:731,shortName:"AZT 300 / 3TC 150 / NVP 200mg",fullName:"Zidovudine / lamivudine /Nevirapine 300 / 150 / 200mg, tin of 60 tablets",packSizes:[60],categories:["a"]},{drugID:732,shortName:"AZT 60 / 3TC 30 / NVP 50mg",fullName:"Zidovudine / lamivudine /Nevirapine 60 / 30 / 50mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:736,shortName:"AZT 60 / 3TC 30mg",fullName:"Zidovudine / lamivudine 60 / 30mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:963,shortName:"CPT 120mg",fullName:"Cotrimoxazole 120mg, blister pack of 1000 dispersible tablets",packSizes:[1e3],categories:["p"]},{drugID:297,shortName:"CPT 480mg",fullName:"Cotrimoxazole 480mg, tin of 1000 tablets",packSizes:[1e3],categories:["a"]},{drugID:576,shortName:"CPT 960mg",fullName:"Cotrimoxazole 960mg, blister pack of 1000 tablets",packSizes:[1e3],categories:["a"]},{drugID:976,shortName:"DRV 600mg",fullName:"Darunavir 600mg pack of 60 tablets",packSizes:[60],categories:["a"]},{drugID:980,shortName:"DTG 10mg",fullName:"Dolutegravir 10mg pack of 90 tablets",packSizes:[90]},{drugID:982,shortName:"DTG 50mg",fullName:"Dolutegravir 50mg pack of 30 tablets",packSizes:[30],categories:["a"]},{drugID:30,shortName:"EFV 200mg",fullName:"Efavirenz 200mg, tin of 90 tablets",packSizes:[90],categories:["p"]},{drugID:11,shortName:"EFV 600mg",fullName:"Efavirenz 600mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:978,shortName:"ETV 100mg",fullName:"Etravirine 100mg, tin of 120 tablets",packSizes:[120],categories:["a"]},{drugID:24,shortName:"Isoniazid 100mg",fullName:"Isoniazid (H) 100mg, blist packs of 100 tablets",packSizes:[100],categories:["p"]},{drugID:991,shortName:"Isoniazid 300mg",fullName:"Isoniazid (H) 300mg, blist packs of 1000 tablets",packSizes:[1e3,672]},{drugID:74,shortName:"LPV 100 / r 25mg",fullName:"Lopinavir / Ritonavir 100 / 25mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:73,shortName:"LPV 200 / r 50mg",fullName:"Lopinavir / Ritonavir 200 / 50mg, tin of 120 tablets",packSizes:[120],categories:["a"]},{drugID:1045,shortName:"LPV 40 / r 10mg granules",fullName:"Lopinavir/Ritonavir(LPV/r ), 40/10mg granules, pack of 120 sachets",packSizes:[120]},{drugID:979,shortName:"LPV 40 / r 10mg pellets",fullName:"Lopinavir/Ritonavir(LPV/r ), 40/10mg granules, pack of 120 pellets",packSizes:[120],categories:["p"]},{drugID:22,shortName:"NVP 200mg",fullName:"Nevirapine 200mg, tin of 60 tablets",packSizes:[60],categories:["a"]},{drugID:968,shortName:"NVP 50mg",fullName:"Nevirapine 50mg, tin of 60 tablets",packSizes:[60],categories:["p"]},{drugID:1039,shortName:"Pyridoxine 25mg",fullName:"Pyridoxine (25mg)",packSizes:[1e3],categories:["a"]},{drugID:977,shortName:"r 100mg",fullName:"Ritonavir 100mg pack of 60 tablets",packSizes:[60],categories:["a"]},{drugID:1043,shortName:"RAL 25mg",fullName:"Raltegravir 25mg pack of 60 tablets",packSizes:[60],categories:["p"]},{drugID:954,shortName:"RAL 400mg",fullName:"Raltegravir 400mg pack of 60 tablets",packSizes:[60],categories:["a"]},{drugID:1056,shortName:"Rifapentine 150mg",fullName:"Rifapentine 150mg pack of 24 tablets",packSizes:[24],categories:["a"]},{drugID:734,shortName:"TDF 300 / 3TC 300mg ",fullName:"Lamivudine / Tenofovir disoproxil fumarate 300 / 300mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:735,shortName:"TDF 300 / 3TC 300 / EFV 600mg",fullName:"Tenofovir disoproxil fumarate / Lamivudine / Efavirenz 300 / 300 / 600mg, tin of 30 tablets",packSizes:[30],categories:["a"]},{drugID:983,shortName:"TDF 300 / 3TC 300 / DTG 50mg",fullName:"Tenofovir Disoproxil Fumarate/Lamivudine/Dolutegravir (TDF/3TC /DTG), 300/300/50mg, pack of 90 tablets",packSizes:[90],categories:["a"]}],u=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(r["a"])(this,n),t.call(this)}return Object(a["a"])(n,[{key:"postItems",value:function(e){return c["e"].postJson("/pharmacy/batches",e)}},{key:"getItems",value:function(){return c["e"].getJson("pharmacy/items",{paginate:!1})}},{key:"getItem",value:function(e){return c["e"].getJson("pharmacy/items",{drug_id:e})}},{key:"updateItem",value:function(e,t){return c["e"].putJson("pharmacy/items/".concat(e),t)}},{key:"relocateItems",value:function(e,t){return c["e"].postJson("pharmacy/items/".concat(e,"/reallocate"),t)}},{key:"disposeItems",value:function(e,t){return c["e"].postJson("pharmacy/items/".concat(e,"/dispose"),t)}},{key:"getConsumptionRate",value:function(e){return c["e"].getJson("pharmacy/drug_consumption",{drug_id:e})}},{key:"drugList",value:function(){return s}}],[{key:"getShortName",value:function(e){var t=s.filter((function(t){return t.drugID===e}));return t.length>0?t[0].shortName:""}},{key:"getPackSize",value:function(e){var t=s.filter((function(t){return t.drugID===e}));return t.length>0?t[0].packSizes[0]:30}},{key:"getPaedeatricDrugs",value:function(){return console.log(s.filter((function(e){var t;return null===(t=e.categories)||void 0===t?void 0:t.includes("p")}))),s.filter((function(e){var t;return null===(t=e.categories)||void 0===t?void 0:t.includes("p")}))}},{key:"getAdultDrugs",value:function(){return s.filter((function(e){var t;return null===(t=e.categories)||void 0===t?void 0:t.includes("a")}))}}]),n}(c["e"])},"3db2":function(e,t,n){"use strict";n("d26c")},"3e2c":function(e,t,n){"use strict";n("ffe1")},"3e53":function(e,t,n){"use strict";var r=n("1da1"),a=n("2909"),o=n("5530"),i=(n("96cf"),n("99af"),n("f768")),c=n("2b3a"),s=n("8a30"),u=n("2ef0"),l=(n("caad"),n("4db7")),d=n("c1e4"),p=n("cc74"),b=n("7a23"),f=Object(b["createTextVNode"])(" Refresh "),m=Object(b["createTextVNode"])(" Close ");function h(e,t,n,r,a,o){var i=Object(b["resolveComponent"])("ion-title"),c=Object(b["resolveComponent"])("ion-toolbar"),s=Object(b["resolveComponent"])("ion-header"),u=Object(b["resolveComponent"])("text-skeleton"),l=Object(b["resolveComponent"])("ion-label"),d=Object(b["resolveComponent"])("ion-item"),p=Object(b["resolveComponent"])("ion-list"),h=Object(b["resolveComponent"])("ion-content"),g=Object(b["resolveComponent"])("ion-button"),v=Object(b["resolveComponent"])("ion-footer"),O=Object(b["resolveComponent"])("ion-page");return Object(b["openBlock"])(),Object(b["createBlock"])(O,null,{default:Object(b["withCtx"])((function(){return[Object(b["createVNode"])(s,null,{default:Object(b["withCtx"])((function(){return[Object(b["createVNode"])(c,null,{default:Object(b["withCtx"])((function(){return[Object(b["createVNode"])(i,{class:"his-lg-text"},{default:Object(b["withCtx"])((function(){return[Object(b["createTextVNode"])(Object(b["toDisplayString"])(e.dialogTitle),1)]})),_:1})]})),_:1})]})),_:1}),Object(b["createVNode"])(h,null,{default:Object(b["withCtx"])((function(){return[e.isLoading?(Object(b["openBlock"])(),Object(b["createBlock"])(u,{key:0,itemCount:5})):Object(b["createCommentVNode"])("",!0),e.isLoading?Object(b["createCommentVNode"])("",!0):(Object(b["openBlock"])(),Object(b["createBlock"])(p,{key:1},{default:Object(b["withCtx"])((function(){return[(Object(b["openBlock"])(!0),Object(b["createBlock"])(b["Fragment"],null,Object(b["renderList"])(e.items,(function(e,t){return Object(b["openBlock"])(),Object(b["createBlock"])(d,{class:"his-md-text",key:t},{default:Object(b["withCtx"])((function(){return[Object(b["createVNode"])(l,null,{default:Object(b["withCtx"])((function(){return[Object(b["createTextVNode"])(Object(b["toDisplayString"])(e.label),1)]})),_:2},1024),Object(b["createVNode"])("b",{style:{backgroundColor:e.color||"",padding:"0.4em"},innerHTML:e.value},null,12,["innerHTML"])]})),_:2},1024)})),128))]})),_:1}))]})),_:1}),Object(b["createVNode"])(v,null,{default:Object(b["withCtx"])((function(){return[Object(b["createVNode"])(c,null,{default:Object(b["withCtx"])((function(){return[Object(b["createVNode"])(g,{disabled:e.isLoading,onClick:e.updateData,color:"success",size:"large",slot:"end"},{default:Object(b["withCtx"])((function(){return[f]})),_:1},8,["disabled","onClick"]),Object(b["createVNode"])(g,{disabled:e.isLoading,onClick:e.onClose,size:"large",slot:"end"},{default:Object(b["withCtx"])((function(){return[m]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1})}var g=n("b5e4"),v=n("ded6"),O=Object(b["defineComponent"])({setup:function(e){var t=Object(b["ref"])(e.title),n=Object(b["ref"])(!1),a=Object(b["ref"])([]);function o(){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.value=!0,"function"!==typeof e.loadData){r.next=11;break}return r.prev=2,r.next=5,e.loadData(t);case 5:a.value=r.sent,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](2),Object(g["c"])("".concat(r.t0));case 11:n.value=!1;case 12:case"end":return r.stop()}}),r,null,[[2,8]])}))),i.apply(this,arguments)}return Object(b["onMounted"])((function(){o()})),{items:a,dialogTitle:t,isLoading:n,updateData:o}},props:{title:{type:String,default:""},loadData:{type:Function,required:!0},onClose:{type:Function,required:!0}},components:{TextSkeleton:v["a"],IonPage:s["F"],IonTitle:s["U"],IonHeader:s["q"],IonContent:s["n"],IonFooter:s["o"],IonToolbar:s["V"],IonButton:s["d"],IonItem:s["w"],IonList:s["y"]}}),j=n("6b0d"),_=n.n(j);const w=_()(O,[["render",h]]);var k,y=w,x=n("fa73"),N=n("5a0c"),C=n.n(N),V=n("8734"),D={GlobalAppSettings:[{name:"Session Management",icon:"time.png",files:[{name:"Change session date",pathUrl:"/session/date"}]},{name:"Portal Settings",icon:"portal.png",condition:function(){return d["a"].isAdmin()},files:[{name:"Portal settings",pathUrl:"/portal/config"}]},{name:"Network",icon:"portal.png",condition:function(){return d["a"].isAdmin()},files:[{name:"IP Configuration",pathUrl:"/settings/host"}]},{name:"Location",icon:"location.png",files:[{name:"Print Location",pathUrl:"/print/location"},{name:"Set Site Location",condition:function(){return d["a"].isAdmin()},pathUrl:"/location/update/site"},{name:"Set Site Code",condition:function(){return d["a"].isAdmin()},pathUrl:"/location/update/code"}]},{name:"User management",icon:"edit-user.png",files:[{name:"New user",condition:function(){return d["a"].isAdmin()},pathUrl:"/user?activity=add"},{name:"Edit Users",condition:function(){return d["a"].isAdmin()},pathUrl:"/user?activity=edit"},{name:"Change Password",pathUrl:"/user?activity=edit&update_password=true"},{name:"System usage report",pathUrl:"/users/usage",condition:function(){return d["a"].isAdmin()}}]},{name:"Data Management",icon:"list.png",condition:function(){return d["a"].isAdmin()},files:[{name:"View Duplicates",pathUrl:"/view_duplicates"},{name:"Manage Drug Sets",pathUrl:"/anc/drugset",condition:function(){var e;return!!G.getActiveApp()&&"ANC"===(null===(e=G.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Data Cleaning",pathUrl:"/anc/datacleaning",condition:function(){var e;return!!G.getActiveApp()&&"ANC"===(null===(e=G.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Data Cleaning",pathUrl:"/data_cleaning",condition:function(){var e;return!!G.getActiveApp()&&"ART"===(null===(e=G.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Merge patients",pathUrl:"/patients/merge",condition:function(){var e;return!!G.getActiveApp()&&"ART"===(null===(e=G.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Patient visit stats",pathUrl:"/art/patient_visits",condition:function(){var e;return!!G.getActiveApp()&&"ART"===(null===(e=G.getActiveApp())||void 0===e?void 0:e.applicationName)}},{name:"Data cleaning verification",pathUrl:"/art/data_cleaning_verification",condition:function(){var e;return!!G.getActiveApp()&&"ART"===(null===(e=G.getActiveApp())||void 0===e?void 0:e.applicationName)}}]},{name:"DDE Settings",icon:"programs.png",condition:function(){return d["a"].isAdmin()},files:[{name:"DDE Activation",pathUrl:"/preferences?label=Activate DDE&property=".concat(p["a"].DDE_ENABLED)},{name:"DDE NPID Status",action:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["cb"].create({component:y,backdropDismiss:!1,componentProps:{title:"DDE NPID Status",loadData:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(V["a"])(400);case 2:return e.next=4,x["a"].getRemainingNpids();case 4:if(n=e.sent,!n){e.next=15;break}return r=n["npid_status"][0],a=r["location_id"],o=r["avg_consumption_rate_per_day"]||1,i=r["unassigned"],c=r["assigned"],s=Math.floor(i/o),u=C()(r["date_last_updated"]).format("DD/MMM/YYYY HH:mm:ss"),t.value=r["location_name"]+" DDE NPID Status",e.abrupt("return",[{label:"Location ID",value:a},{label:"Estimated days left",value:s,color:function(){var e="";return s<=30&&(e="#FFFF00"),s<=20&&(e="#FFA500"),s<=15&&(e="#ff0000"),e}()},{label:"Unassigned",value:i},{label:"Assigned",value:c},{label:"Average consumption per day",value:o},{label:"Last update",value:u}]);case 15:return e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),onClose:function(){return s["cb"].dismiss()}}});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]},{name:"Malawi National ID Settings",icon:"card.png",condition:function(){return d["a"].isAdmin()},files:[{name:"Malawi National ID Scanner Activation",pathUrl:"/preferences?label=Activate Scanning of Malawi National ID&property=".concat(p["a"].MALAWI_NATIONAL_ID_SCANNER_ENABLED)}]}],GlobalProgramActivities:[{id:"npid",name:"National Health ID (Print)",description:"Print Patient National Health ID",action:function(e){var t,n=e.patient,r=(null===(t=G.getActiveApp())||void 0===t?void 0:t.applicationName)||"",a=new l["a"](n.patient_id);return a.printNidLbl(["RADIOLOGY","Registration"].includes(r))},icon:"barcode.svg"},{id:"lab activities",name:"Lab activities",description:"Do lab orders",icon:"lab.png"},{id:"demographics",name:"Demographics (Print)",description:"Print Patient Demographics",action:function(e){var t=e.patient,n=new l["a"](t.patient_id);return n.printDemographicsLbl()},icon:"print.png",condition:function(){var e;return"CxCa"!==(null===(e=G.getActiveApp())||void 0===e?void 0:e.applicationName)}},{id:"demographics_edit",name:"Demographics (Edit)",description:"Edit Patient Demographics",action:function(e,t){var n=e.patient;t.push({path:"/patient/registration",query:{edit_person:n.patient_id}})},icon:"print.png"},{id:"guardian_edit",name:"Edit Guardians",description:"Edit guardian information",action:function(e,t){var n=e.patient;t.push({path:"/guardian/registration/".concat(n.patient_id),query:{edit_guardian:!0}})},icon:"print.png"},{id:"change_session_Date",name:"Change session date",action:function(e,t){var n=e.patient;t.push({path:"/session/date",query:{patient_id:n.patient_id}})},description:"Change session date (for retrospective entry)",icon:"time.png"},{id:"program_management",name:"Program(s)",description:"View / update patient's programs",action:function(e,t){var n=e.patient;t.push({path:"/patient/programs/".concat(n.patient_id)})},icon:"programs.png"},{id:"visit_summary",name:"Visit Summary (Print)",description:"Print Patient Visit Summary",action:function(e){var t=e.patient,n=e.visitDate,r=new l["a"](t.patient_id);return r.printVisitSummaryLbl(n)},icon:"folder.png",condition:function(){var e;return"CxCa"!==(null===(e=G.getActiveApp())||void 0===e?void 0:e.applicationName)}},{id:"enter_lab_result",name:"Enter Lab Result",description:"Enter Lab Test Result",action:function(e,t){var n=e.patient;t.push({path:"/lab/results/".concat(n.patient_id)})},icon:"enter.png"}]},T=n("1c74"),I=n("0fa1");function R(e){var t=Object(o["a"])({},e);return t.secondaryPatientActivites=[].concat(Object(a["a"])(D.GlobalProgramActivities),Object(a["a"])(t.secondaryPatientActivites)),t.globalPropertySettings?t.globalPropertySettings=[].concat(Object(a["a"])(D.GlobalAppSettings),Object(a["a"])(t.globalPropertySettings)):t.globalPropertySettings=D.GlobalAppSettings,t}function S(){var e=sessionStorage.getItem(k.APPLICATION_NAME);if(e){var t=Object(u["find"])(i["a"],{applicationName:e});if(t)return R(t)}}function P(){var e=S();e&&sessionStorage.setItem(k.SUSPENDED_APP,e.applicationName)}function A(e){return E.apply(this,arguments)}function E(){return E=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2&&void 0!==o[2]&&o[2],sessionStorage.setItem(k.APPLICATION_NAME,t.applicationName),a=R(t),"function"!==typeof t.init||r){e.next=7;break}return e.next=7,t.init(n);case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function B(){var e=sessionStorage.getItem(k.SUSPENDED_APP);if(e){var t=Object(u["find"])(i["a"],{applicationName:e});t&&(sessionStorage.removeItem(k.SUSPENDED_APP),A(t,"",!0))}}function F(e,t,n){return L.apply(this,arguments)}function L(){return L=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=c.length>3&&void 0!==c[3]?c[3]:void 0,o=Object(u["find"])(i["a"],{applicationName:t}),!o){e.next=10;break}return P(),e.next=6,A(o);case 6:if("function"!==typeof a){e.next=9;break}return e.next=9,a();case 9:Object(I["b"])(n,r);case 10:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function M(){return H.apply(this,arguments)}function H(){return H=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",n=i.length>1&&void 0!==i[1]&&i[1],e.next=4,s["cb"].create({component:c["a"],cssClass:"large-modal",backdropDismiss:!1,componentProps:{isPocSite:T["e"].isPocSite(),appVersion:T["e"].getFullVersion(),apps:T["e"].getAvailableApps(),canClose:n}});case 4:return r=e.sent,r.present(),e.next=8,r.onDidDismiss();case 8:if(a=e.sent,o=a.data,o&&!Object(u["isEmpty"])(o)){e.next=12;break}return e.abrupt("return");case 12:return sessionStorage.getItem(k.SUSPENDED_APP)&&sessionStorage.removeItem(k.SUSPENDED_APP),e.abrupt("return",A(o,t));case 14:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}function U(){return q.apply(this,arguments)}function q(){return q=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=sessionStorage.getItem(k.SUSPENDED_APP),!t){e.next=7;break}return e.next=4,Object(g["a"])("Do you want to resume "+t+" application?");case 4:if(n=e.sent,!n){e.next=7;break}return e.abrupt("return",B());case 7:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}(function(e){e["SUSPENDED_APP"]="suspendedApp",e["APPLICATION_NAME"]="applicationName"})(k||(k={}));var G=t["a"]={doAppManagementTasks:U,resumeSuspendedApp:B,startApplication:A,switchAppWorkflow:F,selectApplication:M,getActiveApp:S}},"41b4":function(e,t,n){},4366:function(e,t,n){},4445:function(e,t,n){"use strict";n("24f9")},4469:function(e,t,n){},"44a7":function(e,t,n){},"44e3":function(e,t,n){"use strict";var r=n("2909"),a=n("4f96"),o=n("1da1"),i=n("5530"),c=n("3835"),s=(n("96cf"),n("4e82"),n("ac1f"),n("1276"),n("d81d"),n("fb6a"),n("99af"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0"),n("b0c0"),n("1c74")),u=n("7a23"),l=n("b446"),d=n("23e6"),p=n("9283"),b=n("8a30"),f=n("d6aa"),m=n("5969"),h=n("d95e"),g=n("2706"),v=n("9ceb"),O=n("2ef0"),j=Object(u["defineComponent"])({data:function(){return{fields:[],report:{},reportReady:!1,period:"",startDate:"",endDate:"",customFileName:"",drillDownCache:{}}},methods:{toDate:function(e){return p["b"].toStandardHisDisplayFormat(e)},sortByArvNumber:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"arv_number";try{return e.sort((function(e,r){return t.getArvInt(e[n])>t.getArvInt(r[n])?1:-1}))}catch(r){return console.error(r),e}},getArvInt:function(e){if("string"===typeof e){var t=e.split("-"),n=Object(c["a"])(t,3),r=(n[0],n[1],n[2]),a=parseInt(r);return"number"===typeof a?a:0}return 0},tdARV:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return v["a"].td(e,Object(i["a"])({sortValue:this.getArvInt(e)},t))},confirmPatient:function(e){return this.$router.push("/patients/confirm?person_id=".concat(e))},drilldownAsyncRows:function(e,t,n){var r=arguments;return Object(o["a"])(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=!(r.length>3&&void 0!==r[3])||r[3],a.next=3,b["cb"].create({component:f["a"],cssClass:"large-modal",componentProps:{title:e,columns:t,asyncRows:n,canExport:o,showFilters:!0,rowsPerPage:50,paginated:!0,showReportStamp:!1,footerColor:"light",onFinish:function(){return b["cb"].dismiss()}}});case 3:i=a.sent,i.present();case 5:case"end":return a.stop()}}),a)})))()},drilldownData:function(e,t,n,r){return Object(o["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,b["cb"].create({component:f["a"],cssClass:"large-modal",componentProps:{title:e,columns:t,rows:n,rowParser:r,rowsPerPage:50,showFilters:!0,paginated:!0,showReportStamp:!1,footerColor:"light",onFinish:function(){return b["cb"].dismiss()}}});case 2:o=a.sent,o.present();case 4:case"end":return a.stop()}}),a)})))()},getDefaultDrillDownTable:function(){var e=this,t=[[v["a"].thTxt("ARV number"),v["a"].thTxt("Gender"),v["a"].thTxt("Birth Date"),v["a"].thTxt("Actions")]],n=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var i,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=0,s=n.map(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var s,u,l,p,f,m,h,g,j,_;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(s=null,u=null,!Object(O["isArray"])(n)){t.next=10;break}if(l=Object(c["a"])(n,2),p=l[0],f=l[1],u=p,!(f in e.drillDownCache)){t.next=8;break}return m=Object(a["a"])(e.drillDownCache[f]),m[0],h=m.slice(1),t.abrupt("return",[u].concat(Object(r["a"])(h)));case 8:t.next=13;break;case 10:if(s=n,!(s in e.drillDownCache)){t.next=13;break}return t.abrupt("return",e.drillDownCache[s]);case 13:return t.next=15,d["a"].findByID(s);case 15:return g=t.sent,j=new d["a"](g),_=[],u&&(i=1,_.push(u)),_.push(e.tdARV(j.getArvNumber())),_.push(v["a"].td(j.getGender())),_.push(v["a"].tdDate(j.getBirthdate().toString())),_.push(v["a"].tdBtn("Show",Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b["cb"].dismiss({});case 2:e.$router.push({path:"/patient/dashboard/".concat(s)});case 3:case"end":return t.stop()}}),t)}))))),e.drillDownCache[s]=_,t.abrupt("return",_);case 25:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=4,Promise.all(s);case 4:return u=t.sent,t.abrupt("return",u.sort((function(e,t){return e[i].sortValue>t[i].sortValue?1:-1})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{rowParser:n,columns:t}},runTableDrill:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Drilldown patients",n=this.getDefaultDrillDownTable(),r=n.columns,a=n.rowParser;this.drilldownData(t,r,e,a)},drill:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Drill table";return e&&e.length>0?v["a"].tdLink(e.length,(function(){return t.runTableDrill(e,n)})):v["a"].td(0)},getQuaterOptions:function(){var e=m["a"].getReportQuarters();return e.map((function(e){return{label:e.name,value:e.start,other:e}}))},getDateDurationFields:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s["e"].getSessionDate(),i="2000-01-01";return[{id:"quarter",helpText:"Select Quarter",type:h["b"].TT_SELECT,condition:function(){return t},validation:function(e){return g["a"].required(e)},options:function(){var e=m["a"].getReportQuarters(a),t=e.map((function(e){return{label:e.name,value:e.start,other:e}}));return n&&(t=[{label:"Set custom period",value:"custom_period",other:{}}].concat(Object(r["a"])(t))),t}}].concat(Object(r["a"])(Object(l["b"])({id:"start_date",helpText:"Start",required:!0,condition:function(e){return e.quarter&&"custom_period"===e.quarter.value||!t},minDate:function(){return i},maxDate:function(){return o},estimation:{allowUnknown:!1},computeValue:function(e){return e}})),Object(r["a"])(Object(l["b"])({id:"end_date",helpText:"End",required:!0,condition:function(e){return e.quarter&&"custom_period"===e.quarter.value||!t},unload:function(t,n,r,a){"next"===n&&(e.endDate=a.end_date)},minDate:function(e,t){return t.start_date},maxDate:function(){return o},estimation:{allowUnknown:!1},computeValue:function(e){return e}})))}}});const _=j;t["a"]=_},4582:function(e,t,n){},"48de":function(e,t,n){},"4a46":function(e,t,n){"use strict";n("41b4")},"4ba2":function(e,t,n){"use strict";var r=n("5530"),a=n("7a23"),o=Object(a["withScopeId"])("data-v-47b6d7e8");Object(a["pushScopeId"])("data-v-47b6d7e8");var i={class:"header-text-list"},c=Object(a["createTextVNode"])("Title "),s=Object(a["createTextVNode"])("Period "),u={key:1},l={key:0},d=Object(a["createTextVNode"])(" Error(s) found. Click for more "),p=Object(a["createTextVNode"])(" Report is Consistent "),b={class:"report-content"},f=Object(a["createTextVNode"])("Date Created: "),m=Object(a["createTextVNode"])("His-Core Version: "),h=Object(a["createTextVNode"])("API Version: ");Object(a["popScopeId"])();var g=o((function(e,t,n,g,v,O){var j=Object(a["resolveComponent"])("his-standard-form"),_=Object(a["resolveComponent"])("ion-title"),w=Object(a["resolveComponent"])("ion-img"),k=Object(a["resolveComponent"])("ion-thumbnail"),y=Object(a["resolveComponent"])("ion-chip"),x=Object(a["resolveComponent"])("ion-label"),N=Object(a["resolveComponent"])("ion-item"),C=Object(a["resolveComponent"])("ion-toolbar"),V=Object(a["resolveComponent"])("ion-header"),D=Object(a["resolveComponent"])("report-table"),T=Object(a["resolveComponent"])("ion-content"),I=Object(a["resolveComponent"])("ion-footer"),R=Object(a["resolveComponent"])("his-footer"),S=Object(a["resolveComponent"])("ion-page");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["withDirectives"])(Object(a["createVNode"])(j,{onOnFinish:e.onFinish,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"]),[[a["vShow"],!e.canShowReport]]),e.canShowReport?(Object(a["openBlock"])(),Object(a["createBlock"])(S,{key:0},{default:o((function(){return[Object(a["createVNode"])(V,null,{default:o((function(){return[Object(a["createVNode"])(C,null,{default:o((function(){return[e.showtitleOnly?(Object(a["openBlock"])(),Object(a["createBlock"])(_,{key:0},{default:o((function(){return[Object(a["createVNode"])("span",{innerHTML:e.title},null,8,["innerHTML"])]})),_:1})):Object(a["createCommentVNode"])("",!0),e.showtitleOnly?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(N,{key:1},{default:o((function(){return[Object(a["createVNode"])(k,{slot:"start"},{default:o((function(){return[Object(a["createVNode"])(w,{src:e.logo},null,8,["src"])]})),_:1}),Object(a["createVNode"])(x,null,{default:o((function(){return[Object(a["createVNode"])("ul",i,[Object(a["createVNode"])("li",null,[c,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.title),1)]),Object(a["createVNode"])("li",null,[s,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.period),1)]),(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.headerInfoList,(function(e,t){var n,r;return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t},[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.label)+" ",1),e&&null!==e&&void 0!==e&&null!==(n=e.other)&&void 0!==n&&n.onclick?(Object(a["openBlock"])(),Object(a["createBlock"])("a",{key:0,href:"#",onClick:Object(a["withModifiers"])((function(t){return e.other.onclick()}),["prevent"])},Object(a["toDisplayString"])(e.value),9,["onClick"])):Object(a["createCommentVNode"])("",!0),!e||null!==e&&void 0!==e&&null!==(r=e.other)&&void 0!==r&&r.onclick?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])("b",u,[Object(a["createVNode"])("span",{innerHTML:e.value},null,8,["innerHTML"])]))])})),128)),e.showValidationStatus?(Object(a["openBlock"])(),Object(a["createBlock"])("li",l,[e.hasErrors?(Object(a["openBlock"])(),Object(a["createBlock"])(y,{key:0,onClick:e.showErrors,color:"danger"},{default:o((function(){return[Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.errorCount),1),d]})),_:1},8,["onClick"])):Object(a["createCommentVNode"])("",!0),e.hasErrors?Object(a["createCommentVNode"])("",!0):(Object(a["openBlock"])(),Object(a["createBlock"])(y,{key:1,color:"success"},{default:o((function(){return[p]})),_:1}))])):Object(a["createCommentVNode"])("",!0)])]})),_:1})]})),_:1}))]})),_:1})]})),_:1}),Object(a["createVNode"])(T,null,{default:o((function(){return[Object(a["createVNode"])("div",b,[Object(a["createVNode"])(D,{rows:e.rows,columns:e.columns,showFilters:e.showFilters,config:Object(r["a"])(Object(r["a"])({},e.config),{},{tableCssTheme:e.tableCssTheme}),onOnActiveColumns:e.onActiveColumns,onOnActiveRows:e.onActiveRows},null,8,["rows","columns","showFilters","config","onOnActiveColumns","onOnActiveRows"])])]})),_:1}),Object(a["createVNode"])(I,null,{default:o((function(){return[Object(a["createVNode"])(C,null,{default:o((function(){return[Object(a["createVNode"])(y,{color:"primary"},{default:o((function(){return[f,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.date),1)]})),_:1}),Object(a["createVNode"])(y,{color:"primary"},{default:o((function(){return[m,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.coreVersion),1)]})),_:1}),Object(a["createVNode"])(y,{color:"primary"},{default:o((function(){return[h,Object(a["createVNode"])("b",null,Object(a["toDisplayString"])(e.apiVersion),1)]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(R,{btns:e.btns},null,8,["btns"])]})),_:1})):Object(a["createCommentVNode"])("",!0)],64)})),v=n("2909"),O=n("1da1"),j=(n("96cf"),n("d3b7"),n("159b"),n("b0c0"),n("ac1f"),n("466d"),n("99af"),n("0f25")),_=n("80e3"),w=n("ba82"),k=n("9ceb"),y=n("7920"),x=n("8a30"),N=n("b5e4"),C=n("1718"),V=n("1c74"),D=n("5a0c"),T=n.n(D),I=n("2ef0"),R=Object(a["withScopeId"])("data-v-0ed0c7a2");Object(a["pushScopeId"])("data-v-0ed0c7a2");var S=Object(a["createTextVNode"])(" Close ");Object(a["popScopeId"])();var P=R((function(e,t,n,r,o,i){var c=Object(a["resolveComponent"])("ion-title"),s=Object(a["resolveComponent"])("ion-toolbar"),u=Object(a["resolveComponent"])("ion-header"),l=Object(a["resolveComponent"])("ion-item"),d=Object(a["resolveComponent"])("ion-list"),p=Object(a["resolveComponent"])("ion-grid"),b=Object(a["resolveComponent"])("ion-button"),f=Object(a["resolveComponent"])("ion-footer");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(u,null,{default:R((function(){return[Object(a["createVNode"])(s,null,{default:R((function(){return[Object(a["createVNode"])(c,null,{default:R((function(){return[Object(a["createTextVNode"])(Object(a["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(a["createVNode"])(p,{class:"selector"},{default:R((function(){return[Object(a["createVNode"])(d,null,{default:R((function(){return[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.errors,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])(l,{class:"his-md-text ion-padding",key:t},{default:R((function(){return[Object(a["createVNode"])("span",{innerHTML:"(".concat(t+1,") ").concat(e)},null,8,["innerHTML"])]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(a["createVNode"])(f,null,{default:R((function(){return[Object(a["createVNode"])(s,null,{default:R((function(){return[Object(a["createVNode"])(b,{class:"close-btn",color:"danger",size:"large",onClick:e.closeModal,slot:"end"},{default:R((function(){return[S]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)})),A=Object(a["defineComponent"])({components:{IonGrid:x["p"],IonList:x["y"],IonItem:x["w"],IonFooter:x["o"],IonButton:x["d"],IonToolbar:x["V"],IonHeader:x["q"],IonTitle:x["U"]},props:{title:{type:String,default:"Report Errors"},errors:{type:Array,required:!0}},methods:{closeModal:function(){return Object(O["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x["cb"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()}}}),E=(n("054e"),n("6b0d")),B=n.n(E);const F=B()(A,[["render",P],["__scopeId","data-v-0ed0c7a2"]]);var L=F,M=Object(a["defineComponent"])({components:{HisStandardForm:y["a"],IonHeader:x["q"],ReportTable:_["a"],HisFooter:j["a"],IonPage:x["F"],IonContent:x["n"],IonToolbar:x["V"],IonChip:x["l"],IonFooter:x["o"],IonLabel:x["x"],IonThumbnail:x["T"],IonItem:x["w"],IonImg:x["s"]},props:{showValidationStatus:{type:Boolean,default:!1},validationErrors:{type:Array,default:function(){return[]}},config:{type:Object},headerInfoList:{type:Array,default:function(){return[]}},reportPrefix:{type:String,default:"HIS-Core"},reportLogo:{type:String},showtitleOnly:{type:Boolean,default:!1},title:{type:String,required:!0},period:{type:String},showFilters:{type:Boolean,default:!1},fields:{type:Object},columns:{type:Object,required:!0},rows:{type:Object,required:!0},customBtns:{type:Array,default:function(){return[]}},hasServerSideCaching:{type:Boolean,default:!1},canExportPDf:{type:Boolean,default:!0},canExportCsv:{type:Boolean,default:!0},enabledPDFHorizontalPageBreak:{type:Boolean,default:!1},onFinishBtnAction:{type:Function},onReportConfiguration:{type:Function,required:!0},onDefaultConfiguration:{type:Function},customFileName:{type:String,default:""}},data:function(){return{date:"",formData:{},btns:[],computeFormData:{},activeColumns:[],activeRows:[],isLoadingData:!1,canShowReport:!1,siteUUID:V["e"].getSiteUUID(),apiVersion:V["e"].getApiVersion(),coreVersion:V["e"].getCoreVersion(),artVersion:V["e"].getAppVersion(),tableCssTheme:"art-report-theme"}},watch:{validationErrors:{handler:function(e){Object(I["isEmpty"])(e)||this.showErrors()},deep:!0,immediate:!0},fields:{handler:function(e){Object(I["isEmpty"])(e)||this.btns.forEach((function(e){"Back"===e.name&&(e.visible=!0)}))},immediate:!0}},computed:{logo:function(){if(!this.reportLogo&&"string"===typeof this.reportPrefix){if(this.reportPrefix.match(/pepfar/i))return Object(C["a"])("login-logos/PEPFAR.png");if(this.reportPrefix.match(/moh/i))return Object(C["a"])("login-logos/Malawi-Coat_of_arms_of_arms.png")}return Object(C["a"])("reports.png")},hasErrors:function(){return!Object(I["isEmpty"])(this.validationErrors)},errorCount:function(){return this.validationErrors?this.validationErrors.length:0}},methods:{showErrors:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x["cb"].create({component:L,backdropDismiss:!1,cssClass:"large-modal",componentProps:{errors:e.validationErrors}});case 2:n=t.sent,n.present();case 4:case"end":return t.stop()}}),t)})))()},refreshTimeStamp:function(){this.date=T()().format("DD/MMM/YYYY HH:MM:ss")},onActiveColumns:function(e){this.activeColumns=e},onActiveRows:function(e){this.activeRows=e},getFileName:function(){return this.customFileName?this.customFileName:"".concat(this.reportPrefix," ").concat(V["e"].getLocationName()," ").concat(this.title," ").concat(this.period)},onLoadDefault:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.canShowReport=!0,t.next=3,e.presentLoading();case 3:if(t.prev=3,e.refreshTimeStamp(),!e.onDefaultConfiguration){t.next=8;break}return t.next=8,e.onDefaultConfiguration();case 8:x["ab"].dismiss(),t.next=16;break;case 11:t.prev=11,t.t0=t["catch"](3),Object(N["c"])(t.t0),console.error(t.t0),x["ab"].dismiss();case 16:case"end":return t.stop()}}),t,null,[[3,11]])})))()},onFinish:function(e,t){var n=arguments,r=this;return Object(O["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=n.length>2&&void 0!==n[2]&&n[2],r.formData=e,r.computeFormData=t,r.canShowReport=!0,a.next=6,r.presentLoading();case 6:return a.prev=6,r.refreshTimeStamp(),a.next=10,r.onReportConfiguration(r.formData,r.computeFormData,o);case 10:x["ab"].dismiss(),a.next=18;break;case 13:a.prev=13,a.t0=a["catch"](6),Object(N["c"])(a.t0),console.error(a.t0),x["ab"].dismiss();case 18:case"end":return a.stop()}}),a,null,[[6,13]])})))()},reloadReport:function(){var e=arguments,t=this;return Object(O["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]&&e[0],Object(I["isEmpty"])(t.formData)&&Object(I["isEmpty"])(t.computeFormData)){n.next=5;break}return n.next=4,t.onFinish(t.formData,t.computeFormData,r);case 4:return n.abrupt("return");case 5:if(!t.onDefaultConfiguration){n.next=8;break}return n.next=8,t.onLoadDefault();case 8:case"end":return n.stop()}}),n)})))()},presentLoading:function(){return Object(O["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,x["ab"].create({message:"Please wait...",backdropDismiss:!1});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e)})))()}},created:function(){var e=this;this.onDefaultConfiguration&&this.onLoadDefault(),this.btns=this.customBtns,this.btns.push({name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExportCsv,onClick:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(k["b"])(e.activeColumns,e.activeRows),r=n.columns,a=n.rows,Object(w["a"])(r,[].concat(Object(v["a"])(a),[["Date Created: ".concat(e.date)],["Quarter: ".concat(e.period)],["HIS-Core Version: ".concat(e.coreVersion)],["API Version: ".concat(e.apiVersion)],["Site UUID: ".concat(e.siteUUID)]]),e.getFileName());case 2:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}),this.btns.push({name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExportPDf,onClick:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(k["b"])(e.activeColumns,e.activeRows),r=n.columns,a=n.rows,Object(w["b"])(r,a,e.getFileName(),e.enabledPDFHorizontalPageBreak);case 2:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}),this.btns.push({name:"Refresh/Rebuild",size:"large",slot:"end",color:"warning",visible:!0,onClick:function(){var t=Object(O["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=!1,!e.hasServerSideCaching){t.next=5;break}return t.next=4,Object(N["a"])("Do you want to rebuild report cache?",{header:"Rebuild Report"});case 4:n=t.sent;case 5:e.reloadReport(n);case 6:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}),this.btns.push({name:"Back",size:"large",slot:"end",color:"primary",visible:!Object(I["isEmpty"])(this.fields),onClick:function(){return e.canShowReport=!1}}),this.btns.push({name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:function(){e.onFinishBtnAction?e.onFinishBtnAction():e.$router.push({path:"/"})}})}});n("4a46");const H=B()(M,[["render",g],["__scopeId","data-v-47b6d7e8"]]);t["a"]=H},"4ccf":function(e,t,n){},"4cf3":function(e,t,n){"use strict";n("1afa")},"4db7":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=(n("99af"),n("b89f")),s=n("bef6"),u=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(e){var a;return Object(r["a"])(this,n),a=t.call(this),a.patient=e,a.baseUrl="patients/".concat(a.patient,"/labels/"),a}return Object(a["a"])(n,[{key:"getLblUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s["a"].parameterizeObjToString(t);return"".concat(this.baseUrl).concat(e).concat(n?"?"+n:"")}},{key:"printPatientLbl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.printLbl(this.getLblUrl(e,t))}},{key:"printFilingNumberLbl",value:function(){return this.printPatientLbl("filing_number")}},{key:"printNidLbl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.printPatientLbl("national_health_id?qr_code=".concat(e))}},{key:"printVisitSummaryLbl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c["a"].getSessionDate(),t="programs/".concat(c["a"].getProgramID(),"/").concat(this.baseUrl,"/visits?date=").concat(e);return this.printLbl(t)}},{key:"printDemographicsLbl",value:function(){var e="programs/".concat(c["a"].getProgramID(),"/").concat(this.baseUrl,"/patient_history");return this.printLbl(e)}},{key:"printTransferOutLbl",value:function(){return this.printPatientLbl("transfer_out")}},{key:"printLabOrderLbl",value:function(e){return this.printLbl("lab/labels/order?order_id=".concat(e))}}]),n}(c["a"])},"4e4d":function(e,t,n){"use strict";n("4e77")},"4e77":function(e,t,n){},"4f45":function(e,t,n){},"4fc5":function(e,t,n){},"50e0":function(e,t,n){},"50e7":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("45eb"),c=n("7e84"),s=n("262e"),u=n("2caf"),l=(n("96cf"),n("99af"),n("b0c0"),n("1c74")),d=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"nextTask",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/workflows/".concat(Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this),"/").concat(e),{date:Object(i["a"])(Object(c["a"])(n),"getSessionDate",this).call(this)})}},{key:"getNextTaskParams",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:"",a=r,e.prev=2,a){e.next=9;break}return e.next=6,n.nextTask(t);case 6:o=e.sent,i=o.name,a=i;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),a="";case 14:return e.abrupt("return",{name:a.toLowerCase(),params:{patient_id:t}});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(l["e"])},"519d":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("bee2"),a=n("d4ec"),o=n("262e"),i=n("2caf"),c=n("cc6f"),s=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,9,r)}return Object(r["a"])(n)}(c["a"])},"51c8":function(e,t,n){"use strict";n("a9e3");var r=n("fe70"),a=n("7a23"),o=Object(a["defineComponent"])({data:function(){return{isReadyOnly:!1}},created:function(){this.isReadyOnly=!Object(r["d"])("desktop")},emits:["onValue","onFieldActivated"],props:{config:{type:Object,default:function(){return{}}},preset:{type:Object,default:function(){return{label:"",value:""}}},defaultValue:{type:Function},fdata:{type:Object,required:!0},cdata:{type:Object,required:!0},clear:{type:Number,required:!0},options:{type:Function,default:function(){return[]}},activationState:{type:String,default:""},onValue:{type:Function},onValueUpdate:{type:Function},footerButtonEvent:{type:Object}}});const i=o;t["a"]=i},5245:function(e,t,n){"use strict";n("6ec4")},5357:function(e,t,n){"use strict";n("5b1c")},"55ff":function(e,t,n){"use strict";n("f085")},5713:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("45eb"),c=n("7e84"),s=n("262e"),u=n("2caf"),l=(n("96cf"),n("1c74")),d=n("8158"),p=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"createAddress",value:function(e,t,n){return this.postJson("addresses",{address_type:e,addresses_name:t,parent_location:n})}},{key:"getLabs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/programs/".concat(l["e"].getProgramID(),"/lab_tests/labs"),e)}},{key:"getFacilities",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/locations",e)}},{key:"getSpecialistClinics",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["a"].getConceptID("Specialist clinic");case 2:return t=e.sent,e.abrupt("return",Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/concept_set",{id:t}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRegions",value:function(){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/regions")}},{key:"getDistricts",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/districts",{region_id:e,page_size:1e3})}},{key:"getDistrictByID",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/districts",{district_id:e})}},{key:"getVillages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/villages",{traditional_authority_id:e,name:t})}},{key:"getVillage",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/villages",{village_id:e})}},{key:"getVillagesByName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/villages",{name:e,page:t})}},{key:"getTraditionalAuthorities",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/traditional_authorities",{district_id:e,name:t})}},{key:"getTraditionalAuthorityById",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/traditional_authorities",{traditional_authority_id:e})}}]),n}(l["e"])},5969:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("5530"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("99af"),n("1c74")),u=n("9283"),l=n("5a0c"),d=n.n(l),p=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.endDate="",e.startDate="",e.quarter="",e.date=s["e"].getSessionDate(),e.programID=s["e"].getProgramID(),e}return Object(o["a"])(n,[{key:"getDateIntervalPeriod",value:function(){return"".concat(u["b"].toStandardHisDisplayFormat(this.startDate)," - ").concat(u["b"].toStandardHisDisplayFormat(this.endDate))}},{key:"setStartDate",value:function(e){this.startDate=e}},{key:"setEndDate",value:function(e){this.endDate=e}},{key:"setQuarter",value:function(e){this.quarter=e}},{key:"getReport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s["e"].getJson(e,this.buildRequest(t))}},{key:"buildRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={date:this.date,program_id:this.programID};return this.startDate&&this.endDate&&(t["start_date"]=this.startDate,t["end_date"]=this.endDate),this.quarter&&(t["quarter"]=this.quarter),Object(r["a"])(Object(r["a"])({},t),e)}}],[{key:"getQuarterBounds",value:function(e){var t=function(t){return d()("".concat(e,"-").concat(t,"-01")).daysInMonth()},n=function(t){return"".concat(e,"-").concat(t,"-01 00:00")},r=function(n){return"".concat(e,"-").concat(n,"-").concat(t(n)," 00:00")};return{Q1:{qtr:1,start:n("01"),end:r("03")},Q2:{qtr:2,start:n("04"),end:r("06")},Q3:{qtr:3,start:n("07"),end:r("09")},Q4:{qtr:4,start:n("10"),end:r("12")}}}},{key:"getQtrByDate",value:function(e){var t=this.getQuarterBounds(e.getFullYear());for(var n in t){var r=t[n],a=r.start,o=r.end;if(e>=new Date(a)&&e<=new Date(o))return t[n]}return null}},{key:"buildQtrObj",value:function(e,t){var n=this.getQuarterBounds(t),r=n[e],a=r.start,o=r.end;return{start:a,end:o,name:"".concat(e," ").concat(t)}}},{key:"getReportQuarters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=[],n=new Date,r=n.getFullYear(),a=r;n=new Date("".concat(a,"-").concat(n.getMonth()+1,"-").concat(n.getDate()," 00:00"));var o=this.getQtrByDate(n),i=o.qtr,c=0;4===i&&t.push(this.buildQtrObj("Q1",r+1));while(c<e)0===c&&i<4&&t.push(this.buildQtrObj("Q".concat(i+1),r)),t.push(this.buildQtrObj("Q".concat(i),r)),i=i>0?i-=1:i,r=0==i?r-1:r,i=0==i?i+=4:i,c++;return t}}]),n}(s["e"])},5979:function(e,t,n){},"59cf":function(e,t,n){"use strict";n("9ad3")},"5a7d":function(e,t,n){},"5b1c":function(e,t,n){},"5b4a":function(e,t,n){"use strict";n("1ea3")},"5b71":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=n("9b7c"),s=n("cc6f"),u=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(e){var a;return Object(r["a"])(this,n),a=t.call(this,e,57),a.patientID=e,a.testTypeID=-1,a.resultDate="",a.testID=-1,a}return Object(a["a"])(n,[{key:"createLabResult",value:function(e){return s["a"].postJson("lab/tests/".concat(this.testID,"/results"),{encounter_id:this.encounterID,date:this.resultDate,measures:e})}},{key:"getTestID",value:function(){return this.testID}},{key:"getTestTypeID",value:function(){return this.testTypeID}},{key:"setTestTypeID",value:function(e){this.testTypeID=e}},{key:"setResultDate",value:function(e){this.resultDate=e}},{key:"setTestID",value:function(e){this.testID=e}},{key:"getTestsWithoutResults",value:function(){return c["a"].getOrders(this.patientID,{status:"drawn"})}},{key:"getTestIndicators",value:function(){return c["a"].getJson("lab/test_result_indicators",{test_type_id:this.testTypeID})}}]),n}(s["a"])},"5ba0":function(e,t,n){"use strict";n("b46d")},"5e75":function(e,t,n){"use strict";var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("base-input"),s=Object(r["resolveComponent"])("view-port"),u=Object(r["resolveComponent"])("his-keyboard");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{value:e.value,onOnValue:e.onKbValue},null,8,["value","onOnValue"])]})),_:1}),Object(r["createVNode"])(u,{kbConfig:e.keyboard,onKeyPress:e.keypress,disabled:!1},null,8,["kbConfig","onKeyPress"])],64)}var o=n("1da1"),i=(n("96cf"),n("36ad")),c=n("db10"),s=n("2345"),u=n("6be2"),l=n("0a79"),d=n("51c8"),p=Object(r["defineComponent"])({components:{BaseInput:i["a"],HisKeyboard:c["a"],ViewPort:l["a"]},mixins:[d["a"]],data:function(){return{value:"",keyboard:u["d"]}},activated:function(){this.$emit("onFieldActivated",this),"boolean"===typeof this.config.noChars&&(this.keyboard=this.config.noChars?u["d"]:u["f"])},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setDefaultValue(),e.config.keypad&&(e.keyboard=e.config.keypad),t.next=4,e.setDefaultValue();case 4:case"end":return t.stop()}}),t)})))()},methods:{setDefaultValue:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof e.defaultValue){t.next=5;break}return t.next=3,e.defaultValue(e.fdata,e.cdata);case 3:n=t.sent,n&&(e.value="".concat(n));case 5:case"end":return t.stop()}}),t)})))()},onKbValue:function(e){this.value=e},keypress:function(e){this.value=Object(s["a"])(e,this.value)}},watch:{value:function(e){this.$emit("onValue",e?{label:e,value:e}:null)},clear:function(){this.value=""}}}),b=n("6b0d"),f=n.n(b);const m=f()(p,[["render",a]]);t["a"]=m},"5f2c":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("4e82"),n("96cf"),n("cc6f")),u=n("71c3"),l=n("1c74"),d=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"fetchAvailableDrugStock",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJson("pharmacy/items",{drug_id:t});case 2:if(n=e.sent,!(n&&n.length>0)){e.next=5;break}return e.abrupt("return",n.reduce((function(e,t){return e+t.current_quantity}),0));case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(l["e"]),p=n("d1ca"),b={11:[30],21:[25],22:[60],24:[30,60,90,100],30:[90],39:[60],73:[120],74:[60],76:[1e3],297:[30,60,90],576:[30,60,90],613:[60],731:[60],732:[60],733:[60],734:[30],735:[30],736:[60],738:[60],931:[30,60,90],932:[30],954:[60],963:[30,60,90],968:[60],969:[30],971:[30,60,90],976:[60],977:[30],982:[30],983:[30,90],1039:[30,60,90],1043:[60],1044:[30],1056:[24],1216:[3,6,12]},f=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){var o;return Object(a["a"])(this,n),o=t.call(this,e,54,r),o.drugHistory=[],o.currentDrugOrder=[],o.useDrugManagement=!1,o}return Object(o["a"])(n,[{key:"loadDrugManagementEnabled",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["b"].drugManagementEnabled();case 2:this.useDrugManagement=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDrugHistory",value:function(){return this.drugHistory}},{key:"getCurrentOrder",value:function(){return this.currentDrugOrder}},{key:"buildDispensations",value:function(e,t,n){for(var r=[],a=0;a<n;a++)r.push({drug_order_id:e,date:this.date,quantity:t/n});return r}},{key:"saveDispensations",value:function(e){return s["a"].postJson("/dispensations",{dispensations:e,program_id:s["a"].getProgramID()})}},{key:"voidOrder",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].void("/dispensations/".concat(t),{}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"loadDrugHistory",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u["a"].getDrugOrderHistory(this.patientID);case 3:t=e.sent,t&&(this.drugHistory=t),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.warn(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadCurrentDrugOrder",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getDrugOrders(this.patientID);case 2:if(t=e.sent,!t){e.next=11;break}if(!this.useDrugManagement){e.next=10;break}return n=t.map(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d.fetchAvailableDrugStock(t.drug.drug_id);case 2:return t["available_stock"]=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,Promise.all(n);case 8:return this.currentDrugOrder=e.sent,e.abrupt("return");case 10:this.currentDrugOrder=t;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getDrugPackSizes",value:function(e){return e in b?b[e]:[30,60,90]}},{key:"calcCompletePack",value:function(e,t){var n=e.barcodes.sort((function(e,t){return e.tabs-t.tabs}));if(0==n.length||0==t)return t;for(var r in n){var a=n[r].tabs;if(parseInt(a)>=t)return a}var o=parseInt(n[n.length-1].tabs);return o}}]),n}(s["a"])},"5fd1":function(e,t,n){"use strict";n("d3b7"),n("ddb0");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-85e67da8");Object(r["pushScopeId"])("data-v-85e67da8");var o={class:"his-lg-text"};Object(r["popScopeId"])();var i=a((function(e,t,n,i,c,s){var u=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-label"),d=Object(r["resolveComponent"])("ion-segment-button"),p=Object(r["resolveComponent"])("ion-segment"),b=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("ion-grid"),m=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(m,{showFull:!0},{default:a((function(){return[Object(r["createVNode"])(f,{class:"view-port-content"},{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{size:e.getSize,key:n},{default:a((function(){return[Object(r["createVNode"])(f,null,{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[Object(r["createVNode"])(u,{size:"6",class:"ion-col"},{default:a((function(){return[Object(r["createVNode"])("span",o,Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(u,{size:"6"},{default:a((function(){return[Object(r["createVNode"])(p,{mode:"ios",modelValue:t.value,"onUpdate:modelValue":function(e){return t.value=e},onIonChange:function(){return e.onChange(t)}},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.other.values,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{class:"yes-no his-lg-text",key:t,value:e.value},{default:a((function(){return[Object(r["createVNode"])(l,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onIonChange"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["size"])})),128))]})),_:1})]})),_:1})]})),_:1})])})),c=n("1da1"),s=(n("96cf"),n("d81d"),n("4de4"),n("82a9")),u=n("8a30"),l=n("2ef0"),d=Object(r["defineComponent"])({components:{IonRow:u["J"],IonGrid:u["p"],IonLabel:u["x"],IonCol:u["m"],IonSegmentButton:u["M"],IonSegment:u["L"]},name:"HisMultiYesNo",mixins:[s["a"]],watch:{footerButtonEvent:{handler:function(e){var t,n;e&&"function"===typeof(null===(t=e.onClickComponentEvents)||void 0===t?void 0:t.refreshOptions)&&(this.listData=null===(n=e.onClickComponentEvents)||void 0===n?void 0:n.refreshOptions(e,this.listData,this.fdata,this.cdata),this.$emit("onValue",Object(l["isEmpty"])(this.listData)?null:this.listData))},deep:!0,immediate:!0},clear:function(){this.listData=this.listData.map((function(e){return e.value="",e}))}},computed:{getSize:function(){return this.listData.length>6?"6":"12"}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),n=e.listData.filter((function(e){return""!=e.value})),t.next=4,e.options(e.fdata,n);case 4:e.listData=t.sent;case 5:case"end":return t.stop()}}),t)})))()},methods:{onChange:function(e){var t=this;this.$nextTick(Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.listData.map((function(e){return""!=e.value})),"function"!==typeof t.onValue){n.next=8;break}return n.next=4,t.onValue(e,t.fdata,t.cdata);case 4:if(a=n.sent,a){n.next=8;break}return e.value="",n.abrupt("return");case 8:if("function"!==typeof t.onValueUpdate){n.next=12;break}return n.next=11,t.onValueUpdate(t.listData,e);case 11:t.listData=n.sent;case 12:r.every(Boolean)&&t.$emit("onValue",t.listData);case 13:case"end":return n.stop()}}),n)}))))}}}),p=(n("3db2"),n("6b0d")),b=n.n(p);const f=b()(d,[["render",i],["__scopeId","data-v-85e67da8"]]);t["a"]=f},6460:function(e,t,n){},"6547c":function(e,t,n){},"65d1":function(e,t,n){"use strict";n("19ff")},"66c5":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("99af"),n("96cf"),n("cc6f")),u=n("ad60"),l=n("cc74"),d=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){var o;return Object(a["a"])(this,n),o=t.call(this,e,51,r),o.sitePrefix="",o}return Object(o["a"])(n,[{key:"getSitePrefix",value:function(){return this.sitePrefix}},{key:"loadSitePrefix",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["b"].sitePrefix();case 2:this.sitePrefix=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createArvNumber",value:function(e){return u["a"].postJson("/patient_identifiers/",{patient_id:this.patientID,identifier_type:4,identifier:e})}},{key:"buildArvNumber",value:function(e){return"".concat(this.sitePrefix,"-ARV-").concat(e)}}]),n}(s["a"])},"66fd":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,a=n("ad49");function o(e){return a["a"].set(r.PACS_ENABLED,"".concat(e))}function i(){return a["a"].isProp("".concat(r.PACS_ENABLED,"=true"))}(function(e){e["PACS_ENABLED"]="enable_pacs"})(r||(r={})),t["b"]={enablePACs:o,isPACsEnabled:i}},6967:function(e,t,n){"use strict";n("0a4e")},"69b6":function(e,t,n){"use strict";n("03b0")},"69c8":function(e,t,n){},"69cf":function(e,t,n){"use strict";var r=n("7a23"),a={key:0,style:{color:"red","font-weight":"bold"}};function o(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("base-input"),u=Object(r["resolveComponent"])("view-port"),l=Object(r["resolveComponent"])("his-keyboard");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{value:e.value,onOnValue:e.onKbValue},null,8,["value","onOnValue"]),e.errors?(Object(r["openBlock"])(),Object(r["createBlock"])("span",a," **"+Object(r["toDisplayString"])(e.errors)+"** ",1)):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(l,{kbConfig:e.keyboard,onKeyPress:e.keypress,disabled:!1},null,8,["kbConfig","onKeyPress"])],64)}var i=n("1da1"),c=(n("ac1f"),n("466d"),n("d3b7"),n("25f0"),n("96cf"),n("36ad")),s=n("db10"),u=n("2345"),l=n("6be2"),d=n("0a79"),p=n("3800"),b=n("51c8"),f=Object(r["defineComponent"])({components:{BaseInput:c["a"],HisKeyboard:s["a"],ViewPort:d["a"]},mixins:[b["a"]],data:function(){return{value:"",errors:"",minDays:1,maxDays:30,keyboard:[]}},activated:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),n=p["g"],e.config?(e.config.year&&e.config.month&&(n=e.generateKeypad(e.config.year(e.fdata),e.config.month(e.fdata))),e.config.keyboardActions?e.keyboard=[n,e.config.keyboardActions]:e.keyboard=[n,[["Unknown"]]]):e.keyboard=l["b"],t.next=5,e.setDefaultValue();case 5:case"end":return t.stop()}}),t)})))()},methods:{onKbValue:function(e){this.value=e,this.emitValue()},keypress:function(e){this.value=Object(u["a"])(e,""),this.emitValue()},emitValue:function(){this.errors="";var e=this.value;if(e)if(e.toString().match(/unknown/i))this.$emit("onValue",{label:"Unknown",value:"Unknown"});else{if(isNaN(e))return this.errors="Invalid number",void this.$emit("onValue",null);e=parseInt(e),e<this.minDays||e>this.maxDays?(this.errors="Value number is out of range",this.$emit("onValue",null)):this.$emit("onValue",{label:e,value:e})}else this.$emit("onValue",null)},generateKeypad:function(e,t){var n=[[]];this.maxDays=new Date(e,t,0).getDate();for(var r=0,a=0,o=0;o<this.maxDays;++o)a>7&&(++r,n[r]=[],a=0),n[r].push("".concat(o+1)),++a;return n},setDefaultValue:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.defaultValue||e.value){t.next=5;break}return t.next=3,e.defaultValue(e.fdata,e.cdata);case 3:n=t.sent,n&&(e.value=n,e.emitValue());case 5:case"end":return t.stop()}}),t)})))()}},watch:{clear:function(){this.value=""}}}),m=n("6b0d"),h=n.n(m);const g=h()(f,[["render",o]]);t["a"]=g},"6ba7":function(e,t,n){"use strict";n("1bc0")},"6be2":function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return l})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return b}));var r=n("3800"),a=[r["k"],[["","Delete"]]],o=[r["i"],[["Delete"]]],i=[r["i"],[["Delete","Unknown"]]],c=[r["i"],[["N/A"],["Delete","Unknown"]]],s=[r["i"],[["Delete"]]],u=[r["i"],[["Unknown","Delete"],["Qwerty","A-Z"]]],l=[r["g"],[["Unknown"]]],d=[r["a"],[["0-9","Delete"],["Qwerty","Unknown"],["","Space"]]],p=[r["j"],[["","Delete"],["?123","0-9"],["Space","Unknown"]]],b=[{btn:"0-9",keyboard:u},{btn:"?123",keyboard:a},{btn:"A-Z",keyboard:d},{btn:"Qwerty",keyboard:p}]},"6d32":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=(n("99af"),n("1c74")),s=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(r["a"])(this,n),t.call(this)}return Object(a["a"])(n,null,[{key:"getAllArvRegimens",value:function(){return this.getJson("programs/".concat(this.getProgramID(),"/all_arv_regimens"))}},{key:"getRegimens",value:function(e){return this.getJson("programs/".concat(this.getProgramID(),"/regimens"),{patient_id:e})}},{key:"getRegimensByWeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.getJson("programs/".concat(this.getProgramID(),"/regimens"),{weight:e,tb_dosage:t})}},{key:"getCustomIngridients",value:function(){return this.getJson("programs/".concat(this.getProgramID(),"/custom_regimen_ingredients"))}},{key:"getCurrentRegimen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getSessionDate();return this.getJson("programs/".concat(this.getProgramID(),"/").concat(e),{date:t})}},{key:"getRegimenExtras",value:function(e,t){return this.getJson("programs/".concat(this.getProgramID(),"/regimen_extras"),{name:e,weight:t})}}]),n}(c["e"])},"6dce":function(e,t,n){"use strict";n("c481")},"6dff":function(e,t,n){},"6ec4":function(e,t,n){},"6ef9":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-59175e58"),o=a((function(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("ion-input"),u=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("base-input"),d=Object(r["resolveComponent"])("ion-row"),p=Object(r["resolveComponent"])("ion-grid"),b=Object(r["resolveComponent"])("ion-label"),f=Object(r["resolveComponent"])("ion-item"),m=Object(r["resolveComponent"])("ion-list"),h=Object(r["resolveComponent"])("view-port"),g=Object(r["resolveComponent"])("his-keyboard");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(h,{showFull:!1},{default:a((function(){return[Object(r["createVNode"])(p,null,{default:a((function(){return[Object(r["createVNode"])(d,null,{default:a((function(){return[e.prependValue?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,"size-md":"4"},{default:a((function(){return[Object(r["createVNode"])(s,{readonly:e.isReadOnly,value:e.prependValue,class:"input_display",disabled:!0},null,8,["readonly","value"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(u,{"size-md":""},{default:a((function(){return[Object(r["createVNode"])(l,{type:e.inputType,value:e.value,onOnValue:e.onKbValue},null,8,["type","value","onOnValue"])]})),_:1})]})),_:1})]})),_:1}),e.listData.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,class:"view-port-content"},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(f,{class:"his-md-text",button:"",key:n,onClick:function(n){return e.onselect(t)}},{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(g,{initalKeyboardName:e.initalKeyboardName,kbConfig:e.keyboard,onKeyPress:e.keypress,disabled:!1},null,8,["initalKeyboardName","kbConfig","onKeyPress"])],64)})),i=n("1da1"),c=(n("d3b7"),n("25f0"),n("99af"),n("96cf"),n("36ad")),s=n("db10"),u=n("2345"),l=n("6be2"),d=n("0a79"),p=n("51c8"),b=n("2ef0"),f=n("8a30"),m=Object(r["defineComponent"])({components:{IonInput:f["v"],IonRow:f["J"],IonCol:f["m"],IonGrid:f["p"],BaseInput:c["a"],HisKeyboard:s["a"],ViewPort:d["a"],IonList:f["y"],IonItem:f["w"],IonLabel:f["x"]},mixins:[p["a"]],data:function(){return{value:"",prependValue:"",initalKeyboardName:"",keyboard:{},listData:[]}},computed:{inputType:function(){return this.config&&"inputType"in this.config?this.config.inputType:"text"}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.keyboard=(null===(n=e.config)||void 0===n?void 0:n.customKeyboard)||l["h"],e.config&&e.config.initialKb&&(e.initalKeyboardName=e.config.initialKb);case 2:case"end":return t.stop()}}),t)})))()},activated:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$emit("onFieldActivated",e),!e.config||!e.config.prependValue){t.next=5;break}return t.next=4,e.config.prependValue(e.fdata);case 4:e.prependValue=t.sent;case 5:return t.next=7,e.setDefaultValue();case 7:case"end":return t.stop()}}),t)})))()},methods:{setDefaultValue:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.defaultValue||e.value){t.next=5;break}return t.next=3,e.defaultValue(e.fdata,e.cdata);case 3:n=t.sent,n&&(Object(b["isPlainObject"])(n)?(e.emitValue(n),e.value=n.value.toString()):(e.value=n,e.emitValue({label:n,value:n})));case 5:case"end":return t.stop()}}),t)})))()},emitValue:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""!==e.value){n.next=3;break}return t.value="",n.abrupt("return",t.$emit("onValue",null));case 3:if(!t.onValue){n.next=9;break}return n.next=6,t.onValue(e);case 6:if(r=n.sent,r){n.next=9;break}return n.abrupt("return");case 9:e.value=t.prependValue?"".concat(t.prependValue).concat(e.value):e.value,t.value=e.label,t.$emit("onValue",e);case 12:case"end":return n.stop()}}),n)})))()},onselect:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.emitValue(e);case 2:case"end":return n.stop()}}),n)})))()},onKbValue:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.emitValue({label:e,value:e});case 2:case"end":return n.stop()}}),n)})))()},keypress:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=Object(u["a"])(e,t.value,null===(r=t.config)||void 0===r?void 0:r.casing),n.next=3,t.emitValue({label:a,value:a});case 3:case"end":return n.stop()}}),n)})))()}},watch:{value:{handler:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.options){t.next=4;break}return t.next=3,e.options(e.fdata);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()},deep:!0},clear:function(){this.value=""}}}),h=(n("3385"),n("6b0d")),g=n.n(h);const v=g()(m,[["render",o],["__scopeId","data-v-59175e58"]]);t["a"]=v},"6f40":function(e,t,n){},"6f4a":function(e,t,n){},"70b0":function(e,t,n){"use strict";n("f329")},"71c3":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("5530"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("d81d"),n("99af"),n("1c74")),u=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"create",value:function(e){return this.postJson("drug_orders",e)}},{key:"updateDispensationOrders",value:function(e){var t=this;return this.postJson("dispensations",{program_id:this.getProgramID(),dispensations:e.map((function(e){return{date:t.getSessionDate(),drug_order_id:e["order_id"],quantity:e["quantity"]}}))})}},{key:"getDrugOrderHistory",value:function(e){return this.getJson("drug_orders",{patient_id:e})}},{key:"getDrugOrders",value:function(e){return this.getJson("drug_orders",{patient_id:e,date:this.getSessionDate(),program_id:this.getProgramID()})}},{key:"getAllDrugOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return this.getJson("drug_orders",{patient_id:e,program_id:s["e"].getProgramID(),page_size:t})}},{key:"getLastDrugsReceived",value:function(e){return this.getJson("patients/".concat(e,"/last_drugs_received"),{date:this.getSessionDate(),program_id:this.getProgramID()})}},{key:"getDrugDosages",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r={drug_id:t,date:n};return this.getJson("programs/".concat(this.getProgramID(),"/patients/").concat(e,"/drug_doses"),r)}},{key:"getOrderByPatient",value:function(e,t){return this.getJson("/drug_orders",Object(r["a"])({patient_id:e,program_id:this.getProgramID()},t))}}]),n}(s["e"])},"71f2":function(e,t,n){"use strict";n("d3b7"),n("ddb0");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-1c88efd0"),o=a((function(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-label"),l=Object(r["resolveComponent"])("ion-segment-button"),d=Object(r["resolveComponent"])("ion-segment"),p=Object(r["resolveComponent"])("ion-row"),b=Object(r["resolveComponent"])("ion-grid"),f=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(f,{showFull:!1},{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.filtered,(function(n,o){return Object(r["openBlock"])(),Object(r["createBlock"])(p,{button:"",key:o},{default:a((function(){return[Object(r["createVNode"])(s,{size:"6"},{default:a((function(){return[Object(r["createVNode"])("h1",null,Object(r["toDisplayString"])(n.label),1)]})),_:2},1024),Object(r["createVNode"])(s,{size:"6"},{default:a((function(){return[Object(r["createVNode"])(d,{class:"his-sm-text",mode:"ios",onIonChange:t[1]||(t[1]=function(t){return e.segmentChanged(t)}),modelValue:e.value,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.value=t})},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(n.values,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(l,{class:"yes-no",key:t,value:e.value},{default:a((function(){return[Object(r["createVNode"])(u,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["modelValue"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})])})),i=n("1da1"),c=(n("96cf"),n("82a9")),s=n("8a30"),u=Object(r["defineComponent"])({components:{IonRow:s["J"],IonGrid:s["p"],IonLabel:s["x"],IonCol:s["m"],IonSegmentButton:s["M"],IonSegment:s["L"]},name:"HisSelect",mixins:[c["a"]],watch:{clear:function(){this.value=""},value:{handler:function(e){this.$emit("onValue",e)},immediate:!0}},data:function(){return{value:""}},activated:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof e.defaultValue){t.next=5;break}return t.next=3,e.defaultValue(e.fdata,e.cdata);case 3:n=t.sent,null==n&&void 0==n||(e.value="".concat(n));case 5:case"end":return t.stop()}}),t)})))()},methods:{onselect:function(e){this.$emit("onValue",e)},segmentChanged:function(e){this.onselect(e.detail.value)}}}),l=(n("1028"),n("6b0d")),d=n.n(l);const p=d()(u,[["render",o],["__scopeId","data-v-1c88efd0"]]);t["a"]=p},"72b9":function(e,t,n){},7365:function(e,t,n){"use strict";var r,a=n("5530"),o=n("3835"),i=n("1da1"),c=(n("ac1f"),n("1276"),n("d3b7"),n("ddb0"),n("b0c0"),n("25f0"),n("d81d"),n("4e82"),n("99af"),n("4de4"),n("07ac"),n("3ca3"),n("96cf"),n("7a23")),s=n("23e6"),u=n("ad60"),l=n("74f4"),d=n("c1e4"),p=n("2ef0"),b=n("0fa1"),f=n("7f35"),m=n("9283");(function(e){e["SET_PROVIDER"]="SET_PROVIDER",e["CHANGE_SESSION_DATE"]="change_session_date",e["GO_TO_PATIENT_DASHBOARD"]="go_to_patient_dashboard",e["CHANGE_PATIENT_OUTCOME"]="change_outcome",e["CONTINUE"]="continue",e["EXIT"]="exit"})(r||(r={}));var h=function(e){return m["b"].toStandardHisDisplayFormat(e)},g={"Warn if attempting to create new encounters for a deceased patient":{priority:1,actions:{alert:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.outcomeStartDate,e.next=3,Object(f["a"])("Data Integrity Issue Found","Patient died on ".concat(h(n)),"Proceeding with this outcome might affect accuracy of some reports",[{name:"Cancel",slot:"end",color:"primary"},{name:"Change outcome",slot:"end",color:"primary"},{name:"Continue Anyway",slot:"end",color:"danger"}]);case 3:return a=e.sent,e.abrupt("return","Cancel"===a?r.GO_TO_PATIENT_DASHBOARD:"Change outcome"===a?r.CHANGE_PATIENT_OUTCOME:r.CONTINUE);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{outcome:function(e){return"Patient died"===e},outcomeStartDate:function(e,t){var n=t.sessionDate;return n>=e}}},"A patient's date of birth must not be less than Session Date":{priority:2,actions:{alert:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.birthDate,a=t.sessionDate,e.next=3,Object(f["a"])("Data integrity issue found","","Session date ".concat(h(a)," is less than birth date of ").concat(h(n)),[{name:"Cancel",slot:"end",color:"danger"},{name:"Change session date",slot:"end",color:"success"}]);case 3:return o=e.sent,e.abrupt("return","Change session date"===o?r.CHANGE_SESSION_DATE:r.GO_TO_PATIENT_DASHBOARD);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{birthDate:function(e,t){var n=t.sessionDate;return n<e}}},"Select Encounter provider when in back data entry":{priority:3,actions:{selection:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.providers,a=t.encounterName,o=t.sessionDate,i=t.apiDate,e.next=3,Object(f["c"])("Please select a provider for ".concat(a),"BDE: ".concat(h(o)," | Current: ").concat(h(i)),n,[{name:"Cancel",color:"danger",slot:"start",role:"default"},{name:"Confirm",slot:"end",role:"action"}]);case 3:return c=e.sent,e.abrupt("return","Cancel"===c.action?{value:-1,flowState:r.GO_TO_PATIENT_DASHBOARD}:{value:c.selection,flowState:r.SET_PROVIDER});case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{isBdeMode:function(e){return e}}}},v=n("c21d"),O=n("7920"),j=n("8734"),_=n("b5e4"),w=Object(c["defineComponent"])({components:{HisStandardForm:O["a"]},data:function(){return{patient:{},fields:[],patientID:"",providerID:-1,providers:[],facts:{sessionDate:"",apiDate:"",encounterName:"N/A",providers:[],isBdeMode:!1,birthDate:"",outcome:"",outcomeStartDate:""},ready:!1}},watch:{$route:{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e.params.patient_id||t.patientID==e.params.patient_id){n.next=11;break}return t.patientID=e.params.patient_id,n.next=4,s["a"].findByID(t.patientID);case 4:return r=n.sent,t.patient=new s["a"](r),n.next=8,t.setEncounterFacts();case 8:return n.next=10,t.checkEncounterGuidelines();case 10:t.ready=!0;case 11:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},computed:{cancelDestination:function(){return this.patientDashboardUrl()}},methods:{runflowState:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={};if(a[r.SET_PROVIDER]=function(e){var n=e.split(" "),a=Object(o["a"])(n,1),i=a[0],c=Object(p["find"])(t.providers,{username:i});return c&&(t.providerID=c.person_id),r.CONTINUE},a[r.CHANGE_SESSION_DATE]=function(){return t.$router.push("/session/date?patient_dashboard_redirection_id=".concat(t.patientID)),r.EXIT},a[r.CHANGE_PATIENT_OUTCOME]=function(){return t.$router.push("/patient/programs/".concat(t.patientID)),r.EXIT},a[r.GO_TO_PATIENT_DASHBOARD]=function(){return t.gotoPatientDashboard(),r.EXIT},e in a)return a[e](n)},checkEncounterGuidelines:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,a,o,i,c,s,u,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=Object(v["a"])(e.facts,g),t.next=3,Object(j["a"])(200);case 3:t.t0=regeneratorRuntime.keys(n);case 4:if((t.t1=t.t0()).done){t.next=22;break}if(a=t.t1.value,c=n[a],null===c||void 0===c||null===(o=c.actions)||void 0===o||!o.alert){t.next=15;break}return t.t2=e,t.next=11,null===c||void 0===c||null===(s=c.actions)||void 0===s?void 0:s.alert(e.facts);case 11:if(t.t3=t.sent,u=t.t2.runflowState.call(t.t2,t.t3),u!==r.EXIT){t.next=15;break}return t.abrupt("return");case 15:if(null===c||void 0===c||null===(i=c.actions)||void 0===i||!i.selection){t.next=20;break}return t.next=18,null===c||void 0===c||null===(l=c.actions)||void 0===l?void 0:l.selection(e.facts);case 18:d=t.sent,e.runflowState(d.flowState,d.value);case 20:t.next=4;break;case 22:case"end":return t.stop()}}),t)})))()},setEncounterFacts:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new l["a"](e.patientID).getProgram();case 3:n=t.sent,e.facts.outcome=n.outcome,e.facts.outcomeStartDate=n.startDate,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error(t.t0),Object(_["c"])("".concat(t.t0));case 12:if(e.facts.sessionDate=u["a"].getSessionDate(),e.facts.apiDate=u["a"].getCachedApiDate(),e.facts.isBdeMode=u["a"].isBDE(),e.facts.birthDate=e.patient.getBirthdate(),e.facts.encounterName=e.$route.name?e.$route.name.toString().toUpperCase():"N/A",!u["a"].isBDE()){t.next=22;break}return t.next=20,d["a"].getUsers();case 20:e.providers=t.sent,e.facts.providers=e.providers.sort((function(e,t){var n=e.username.toUpperCase(),r=t.username.toUpperCase();return n<r?-1:n>r?1:0})).map((function(e){var t,n="".concat(e.username);if(!Object(p["isEmpty"])(null===e||void 0===e||null===(t=e.person)||void 0===t?void 0:t.names)){var r,a=(null===(r=e.person)||void 0===r?void 0:r.names)||[],i=Object(o["a"])(a,1),c=i[0];n+=" (".concat(c.given_name," ").concat(c.family_name,")")}return n}));case 22:case"end":return t.stop()}}),t,null,[[0,8]])})))()},toOption:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{label:e,value:e,other:t}},mapStrToOptions:function(e){return e.map((function(e){return{label:e,value:e}}))},patientDashboardUrl:function(){return"/patient/dashboard/".concat(this.patientID)},gotoPatientDashboard:function(){return this.$router.push({path:this.patientDashboardUrl()})},nextTask:function(){return Object(b["b"])(this.patientID,this.$router)},yesNoOptions:function(){return[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},toYesNoOption:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{label:e,value:"",other:Object(a["a"])(Object(a["a"])({},t),{},{values:this.yesNoOptions()})}},mapOptions:function(e){return e.map((function(e){return{label:e,value:e}}))},yesNoUnknownOptions:function(){return[{label:"Yes",value:"Yes"},{label:"No",value:"No"},{label:"Unknown",value:"Unknown"}]},resolveObs:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object.values(e).filter((function(e){return e&&(e.tag===t||""===t)})).reduce((function(e,t){var n=t.obs?t.obs:t;return Array.isArray(n)?e=e.concat(n):"function"===typeof n?e.push(n()):e.push(n),e}),[]);return Promise.all(n)},inArray:function(e,t){try{return e.filter((function(e){return t(e)})).length>0}catch(n){return!1}},validateSeries:function(e){try{for(var t in e){var n=e[t]();if(n)return n}}catch(r){return[r]}}}});const k=w;t["a"]=k},"749f":function(e,t,n){},"74f4":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("96cf"),n("d81d"),n("4de4"),n("d3b7"),n("b0c0"),n("99af"),n("ad60")),u=n("cc6f"),l=n("b89f"),d=n("2ef0"),p=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e){var r;return Object(a["a"])(this,n),r=t.call(this),r.patientId=e,r.patientProgramId=-1,r.programId=s["a"].getProgramID(),r.stateId=-1,r.programDate=s["a"].getSessionDate(),r.stateDate="",r}return Object(o["a"])(n,[{key:"getProgramId",value:function(){return this.programId}},{key:"getStateDate",value:function(){return this.stateDate}},{key:"getProgramDate",value:function(){return this.programDate}},{key:"getPatientProgramId",value:function(){return this.patientProgramId}},{key:"getPrograms",value:function(){return s["a"].getPatientPrograms(this.patientId)}},{key:"getProgram",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={program:"N/A",outcome:"N/A",startDate:"",endDate:""},e.next=3,this.getPrograms();case 3:if(n=e.sent,!Object(d["isEmpty"])(n)){e.next=6;break}return e.abrupt("return",t);case 6:return r=n.filter((function(e){return e.program.program_id===s["a"].getProgramID()})).map((function(e){var t=e.patient_states,n="",r="",a="N/A";if(!Object(d["isEmpty"])(t)){var o=t.length-1;n=t[o].start_date,r=t[o].end_date,a=t[o].name}return{program:e.program.name,outcome:a,startDate:n,endDate:r}})),e.abrupt("return",Object(d["isEmpty"])(r)?t:r[0]);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getProgramStates",value:function(){return s["a"].getPatientStates(this.patientId,this.programId)}},{key:"getProgramOutcomes",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getProgramWorkflows(this.programId);case 2:return t=e.sent,e.abrupt("return",t.length>0?t[0].states:[]);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"voidProgram",value:function(e){return s["a"].voidProgram(this.patientProgramId,e)}},{key:"voidState",value:function(e){return s["a"].voidState(this.patientId,this.programId,this.stateId,e)}},{key:"enrollProgram",value:function(){return s["a"].enrollProgram(this.patientId,this.programId,this.programDate)}},{key:"printTransferout",value:function(e){var t=new l["a"];return t.printLbl("/programs/".concat(this.programId,"/patients/").concat(this.patientId,"/labels/transfer_out?date=").concat(e))}},{key:"transferOutEncounter",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new u["a"](this.patientId,119),n.setDate(this.stateDate),e.next=4,n.createEncounter();case 4:if(r=e.sent,r){e.next=7;break}throw"Unable to transfer out encounter";case 7:return e.abrupt("return",n.saveValueTextObs("Transfer to",t.name));case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateState",value:function(){return s["a"].createState(this.patientId,this.programId,{state:this.stateId,date:this.stateDate})}},{key:"setProgramDate",value:function(e){this.programDate=e}},{key:"setStateDate",value:function(e){this.stateDate=e}},{key:"setPatientProgramId",value:function(e){this.patientProgramId=e}},{key:"setProgramId",value:function(e){this.programId=e}},{key:"setStateId",value:function(e){this.stateId=e}}]),n}(s["a"])},7510:function(e,t,n){"use strict";n("c18c")},"76ad":function(e,t,n){},"76df":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("1da1"),a=(n("96cf"),n("7f35"));function o(e){return i.apply(this,arguments)}function i(){return i=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"action-sheet-modal",e.next=3,Object(a["c"])("Are you sure you want to void record?","Please specify reason for voiding this record",["Mistake/ Wrong Entry","Duplicate","System Error"],[{name:"Cancel",slot:"start"},{name:"Void",color:"danger",slot:"end",role:"action"}],"",n);case 3:if(r=e.sent,!r.selection||"Void"!==r.action){e.next=7;break}return e.next=7,t(r.selection);case 7:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}},"76f1":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("d4ec"),a=n("bee2"),o=n("45eb"),i=n("7e84"),c=n("262e"),s=n("2caf"),u=n("1c74"),l=function(e){Object(c["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(r["a"])(this,n),t.call(this)}return Object(a["a"])(n,null,[{key:"getDrugs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])(Object(i["a"])(n),"getJson",this).call(this,"/drugs",e)}}]),n}(u["e"])},"77fd":function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-1b2b2db4");Object(r["pushScopeId"])("data-v-1b2b2db4");var o=Object(r["createTextVNode"])("Risk Factors"),i=Object(r["createTextVNode"])(" Close "),c=Object(r["createTextVNode"])(" Manage BP "),s=Object(r["createTextVNode"])(" Save ");Object(r["popScopeId"])();var u=a((function(e,t,n,u,l,d){var p=Object(r["resolveComponent"])("ion-title"),b=Object(r["resolveComponent"])("ion-toolbar"),f=Object(r["resolveComponent"])("ion-header"),m=Object(r["resolveComponent"])("ion-label"),h=Object(r["resolveComponent"])("ion-checkbox"),g=Object(r["resolveComponent"])("ion-item"),v=Object(r["resolveComponent"])("ion-list"),O=Object(r["resolveComponent"])("ion-col"),j=Object(r["resolveComponent"])("ion-row"),_=Object(r["resolveComponent"])("ion-grid"),w=Object(r["resolveComponent"])("ion-content"),k=Object(r["resolveComponent"])("ion-button"),y=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(f,null,{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[Object(r["createVNode"])(p,null,{default:a((function(){return[o]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(w,{style:{overflowY:"hidden",background:"grey"}},{default:a((function(){return[Object(r["createVNode"])(_,null,{default:a((function(){return[Object(r["createVNode"])(j,null,{default:a((function(){return[Object(r["createVNode"])(O,null,{default:a((function(){return[Object(r["createVNode"])(v,{style:{overflowY:"auto",height:"78vh"}},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.riskFactors,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:e},{default:a((function(){return[Object(r["createVNode"])(m,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name),1)]})),_:2},1024),Object(r["createVNode"])(h,{modelValue:e.isChecked,"onUpdate:modelValue":function(t){return e.isChecked=t},slot:"start"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(y,null,{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[Object(r["createVNode"])(k,{size:"large",onClick:e.exit,slot:"start",color:"danger"},{default:a((function(){return[i]})),_:1},8,["onClick"]),e.showManageBPButton?(Object(r["openBlock"])(),Object(r["createBlock"])(k,{key:0,size:"large",onClick:e.manageBP,slot:"start"},{default:a((function(){return[c]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(k,{size:"large",color:"success",onClick:e.postActivities,slot:"end"},{default:a((function(){return[s]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)})),l=n("1da1"),d=(n("96cf"),n("d81d"),n("d3b7"),n("159b"),n("c740"),n("8a30")),p=n("bee2"),b=n("d4ec"),f=n("262e"),m=n("2caf"),h=n("cc6f"),g=function(e){Object(f["a"])(n,e);var t=Object(m["a"])(n);function n(e,r){return Object(b["a"])(this,n),t.call(this,e,30,r)}return Object(p["a"])(n)}(h["a"]),v=n("8158"),O=Object(r["defineComponent"])({name:"Modal",props:{factors:{type:Object,required:!0},title:{type:String,default:""}},computed:{showManageBPButton:function(){return"bp_management"!=this.$route.name}},created:function(){this.patientID=parseInt("".concat(this.$route.params.patient_id))},methods:{postActivities:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new g(e.patientID,-1),t.next=3,n.createEncounter();case 3:if(r=t.sent,!r){t.next=12;break}return t.next=7,e.buildObs();case 7:return a=t.sent,t.next=10,n.saveObservationList(a);case 10:return t.next=12,e.closeModal();case 12:case"end":return t.stop()}}),t)})))()},manageBP:function(){this.$router.push("/art/encounters/bp_management/".concat(this.patientID))},exit:function(){d["cb"].dismiss([])},closeModal:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["cb"].dismiss(e.riskFactors);case 2:case"end":return t.stop()}}),t)})))()},buildObs:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.riskFactors.map((function(e){var t=!0===e.isChecked?"Yes":"No",n=v["a"].getConceptID(t,!0),r=v["a"].getConceptID(e.concept,!0);return{concept_id:r,value_coded:n}})));case 1:case"end":return t.stop()}}),t)})))()}},data:function(){return{patientID:-1,riskFactors:[{name:"Diabetes",isChecked:!1,concept:"Diabetes"},{name:"Cronic kidney disease",isChecked:!1,concept:"CKD"},{name:"Past history of IHD or CVD",isChecked:!1,concept:"history of CVD"},{name:"First degree relative with IHD or CVD <65",isChecked:!1,concept:"relative with CVD"},{name:"Patient currently smokes",isChecked:!1,concept:"patient smokes"}]}},mounted:function(){var e=this;this.factors.forEach((function(t){if("Yes"===t.value){var n=e.riskFactors.findIndex((function(e){return e.concept===t.concept}));e.riskFactors[n].isChecked=!0}}))},components:{IonButton:d["d"],IonContent:d["n"],IonHeader:d["q"],IonTitle:d["U"],IonToolbar:d["V"],IonLabel:d["x"],IonList:d["y"],IonItem:d["w"],IonCheckbox:d["k"],IonRow:d["J"],IonFooter:d["o"],IonGrid:d["p"],IonCol:d["m"]}}),j=(n("9719"),n("6b0d")),_=n.n(j);const w=_()(O,[["render",u],["__scopeId","data-v-1b2b2db4"]]);t["a"]=w},"78dc":function(e,t,n){},7920:function(e,t,n){"use strict";var r=n("7a23");function a(e,t,n,a,o,i){return Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.formType),{fields:e.fields,skipSummary:e.skipSummary,activeField:e.activeField,cancelDestinationPath:e.cancelDestinationPath,onOnFinish:e.onFinish,onFinish:e.onFinishAction,onOnIndex:e.onIndex},null,8,["fields","skipSummary","activeField","cancelDestinationPath","onOnFinish","onFinish","onOnIndex"])}var o=n("9441"),i=Object(r["defineComponent"])({name:"HisStandardForm",components:{TouchScreenForm:o["a"]},emits:["onFinish","onIndex"],data:function(){return{formType:"touch-screen-form"}},props:{onFinishAction:{type:Function},skipSummary:{type:Boolean,default:!1},activeField:{type:String},fields:{type:Object,required:!0},cancelDestinationPath:{type:String,required:!1}},methods:{onFinish:function(e,t){this.$emit("onFinish",e,t)},onIndex:function(e){this.$emit("onIndex",e)}}}),c=n("6b0d"),s=n.n(c);const u=s()(i,[["render",a]]);t["a"]=u},7941:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("4de4"),n("d3b7");var r=function(e,t){var n=e.filter((function(e){return e.person_attribute_type_id==t}));return n.length>0?n[0].value:""}},7957:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n("3835"),a=n("5530"),o=n("1da1"),i=n("d4ec"),c=n("bee2"),s=n("45eb"),u=n("7e84"),l=n("262e"),d=n("2caf"),p=(n("99af"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("96cf"),n("8158")),b=n("9283"),f=n("2ef0"),m=function(e){Object(l["a"])(n,e);var t=Object(d["a"])(n);function n(){return Object(i["a"])(this,n),t.call(this)}return Object(c["a"])(n,null,[{key:"get",value:function(e){return Object(s["a"])(Object(u["a"])(n),"getJson",this).call(this,"/observations/".concat(e))}},{key:"create",value:function(e){return Object(s["a"])(Object(u["a"])(n),"postJson",this).call(this,"/observations",e)}},{key:"voidObs",value:function(e){return Object(s["a"])(Object(u["a"])(n),"void",this).call(this,"observations/"+e,{})}},{key:"saveObs",value:function(e,t){return this.create({encounter_id:e,observations:[t]})}},{key:"saveObsArray",value:function(e,t){return this.create({encounter_id:e,observations:t})}},{key:"buildValueCoded",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:this.getSessionDate(),e.next=3,p["a"].getConceptID(t,!0);case 3:if(a=e.sent,"number"!==typeof n){e.next=8;break}e.t0=n,e.next=11;break;case 8:return e.next=10,p["a"].getConceptID(n,!0);case 10:e.t0=e.sent;case 11:return o=e.t0,e.abrupt("return",{concept_id:a,value_coded:o,obs_datetime:r});case 13:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"buildGroupValueCoded",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,r){var o,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=i.length>3&&void 0!==i[3]?i[3]:this.getSessionDate(),e.t0=a["a"],e.t1=a["a"],e.t2={},e.next=6,this.buildValueCoded(t,n,o);case 6:return e.t3=e.sent,e.t4=(0,e.t1)(e.t2,e.t3),e.t5={},e.next=11,this.buildValueCoded(n,r,o);case 11:return e.t6=e.sent,e.t7={child:e.t6},e.abrupt("return",(0,e.t0)(e.t4,e.t5,e.t7));case 14:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"buildValueCodedFromConceptId",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:this.getSessionDate(),e.next=3,p["a"].getConceptID(t,!0);case 3:return a=e.sent,e.abrupt("return",{concept_id:a,value_coded:n,obs_datetime:r});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"buildValueText",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:this.getSessionDate(),e.next=3,p["a"].getConceptID(t,!0);case 3:return a=e.sent,e.abrupt("return",{concept_id:a,value_text:n,obs_datetime:r});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"buildValueNumber",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,c,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]?s[2]:null,a=s.length>3&&void 0!==s[3]?s[3]:null,o=s.length>4&&void 0!==s[4]?s[4]:this.getSessionDate(),e.next=5,p["a"].getConceptID(t,!0);case 5:return i=e.sent,c={concept_id:i,value_numeric:n,obs_datetime:o},r&&Object.assign(c,{value_modifier:r}),a&&Object.assign(c,{order_id:a}),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"buildValueDate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:this.getSessionDate(),e.next=3,p["a"].getConceptID(t,!0);case 3:return a=e.sent,e.abrupt("return",{concept_id:a,value_datetime:n,obs_datetime:r});case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getObservations",value:function(e,t){return Object(s["a"])(Object(u["a"])(n),"getJson",this).call(this,"/observations?person_id=".concat(e,"&concept_id=").concat(t))}},{key:"getObs",value:function(e){return Object(s["a"])(Object(u["a"])(n),"getJson",this).call(this,"/observations",e)}},{key:"getFirstObs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var o,i,c,s,u,l,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=d.length>2&&void 0!==d[2]?d[2]:this.getSessionDate(),i=!(d.length>3&&void 0!==d[3])||d[3],e.next=4,p["a"].getConceptID(a,i);case 4:return c=e.sent,e.next=7,n.getObs({person_id:t,concept_id:c,date:o,page_size:1});case 7:if(s=e.sent,Object(f["isEmpty"])(s)){e.next=15;break}if(u=Object(r["a"])(s,1),l=u[0],"number"!==typeof l["value_coded"]){e.next=14;break}return e.next=13,p["a"].getConceptName(l["value_coded"]);case 13:l["value_coded"]=e.sent;case 14:return e.abrupt("return",l);case 15:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"obsInValidPeriod",value:function(e){return e&&p["a"].getSessionDate()>=b["b"].toStandardHisFormat(e.obs_datetime)}},{key:"getFirstObsValue",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=c.length>3&&void 0!==c[3]?c[3]:this.getSessionDate(),o=!(c.length>4&&void 0!==c[4])||c[4],e.next=4,this.getFirstObs(t,n,a,o);case 4:if(i=e.sent,Object(f["isEmpty"])(i)){e.next=7;break}return e.abrupt("return",i[r]);case 7:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"getLastObsValue",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:"value_coded",a=c.length>3&&void 0!==c[3]?c[3]:this.getSessionDate(),o=!(c.length>4&&void 0!==c[4])||c[4],e.next=5,this.getAll(t,n,a,o);case 5:if(i=e.sent,Object(f["isEmpty"])(i)){e.next=8;break}return e.abrupt("return",i[i.length-1][r]);case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAll",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:this.getSessionDate(),a=!(c.length>3&&void 0!==c[3])||c[3],e.next=4,p["a"].getConceptID(n,a);case 4:return o=e.sent,e.next=7,this.getObs({person_id:t,concept_id:o,date:r});case 7:if(i=e.sent,Object(f["isEmpty"])(i)){e.next=10;break}return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAllValueCoded",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:this.getSessionDate(),a=!(i.length>3&&void 0!==i[3])||i[3],e.next=4,this.getAll(t,n,r,a);case 4:return o=e.sent,e.abrupt("return",Object(f["isEmpty"])(o)?[]:Promise.all(o.map((function(e){return p["a"].getConceptName(e["value_coded"])}))));case 6:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getFirstValueText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.getFirstObsValue(e,t,"value_text",n,r)}},{key:"getLastValueText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.getLastObsValue(e,t,"value_text",n,r)}},{key:"getFirstValueCoded",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.getFirstObsValue(e,t,"value_coded",n,r)}},{key:"getLastValueCoded",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.getLastObsValue(e,t,"value_coded",n,r)}},{key:"getFirstValueNumber",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.getFirstObsValue(e,t,"value_numeric",n,r)}},{key:"getLastValueNumber",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.getLastObsValue(e,t,"value_numeric",n,r)}},{key:"getFirstValueDatetime",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.getFirstObsValue(e,t,"value_datetime",n,r)}},{key:"getLastValueDatetime",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.getLastObsValue(e,t,"value_datetime",n,r)}},{key:"getFirstObsDatetime",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getSessionDate(),r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return this.getFirstObsValue(e,t,"obs_datetime",n,r)}},{key:"resolvePrimaryValue",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r="",null!=t.value_datetime&&(r=b["b"].toStandardHisDisplayFormat(t.value_datetime)),null!=t.value_text&&(r=t.value_text),null!=t.value_numeric&&(r=t.value_numeric),"number"!==typeof t.value_coded){e.next=8;break}return e.next=7,Object(s["a"])(Object(u["a"])(n),"getConceptName",this).call(this,t.value_coded);case 7:r=e.sent;case 8:return null!=t.value_modifier&&(r="".concat(r," ").concat(t.value_modifier)),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(p["a"])},"79af":function(e,t,n){},"79fe":function(e,t,n){},"7ac4":function(e,t,n){},"7b3a":function(e,t,n){},"7b79":function(e,t,n){"use strict";n("20d7")},"7cf4":function(e,t,n){},"7d28":function(e,t,n){"use strict";n("6f40")},"7d9b":function(e,t,n){"use strict";n("28ac")},"7def":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("45eb"),c=n("7e84"),s=n("262e"),u=n("2caf"),l=(n("96cf"),n("d81d"),n("1c74")),d=(n("99af"),function(e){var t=e.given_name,n=e.family_name,r=e.middle_name?e.middle_name:"";return"".concat(t," ").concat(r," ").concat(n)}),p=n("7941"),b=n("2ef0"),f=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"getRelationships",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/people/".concat(e,"/relationships"))}},{key:"getGuardianDetails",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRelationships(t).then((function(e){return e.map((function(e){var t=Object(b["get"])(e,"relation.names[0]");return{name:t?d(t):"",relationshipType:Object(b["get"])(e,"type.b_is_to_a",""),phoneNumber:Object(p["a"])(Object(b["get"])(e,"relation.person_attributes",[]),12)}}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(l["e"])},"7e31":function(e,t,n){"use strict";n("8ccc")},"7e73":function(e,t,n){"use strict";n("d3b7"),n("fb6a"),n("4e82"),n("b64b");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.reduce((function(n,r,a){return a%t===0&&n.push(e.slice(a,a+t)),n}),[])}function a(e,t){return Object.keys(e).sort((function(e,n){return t(e,n)})).reduce((function(t,n){return t[n]=e[n],t}),{})}t["a"]={convertArrayToTurples:r,orderObj:a}},"7f35":function(e,t,n){"use strict";n.d(t,"d",(function(){return N})),n.d(t,"b",(function(){return V})),n.d(t,"a",(function(){return T})),n.d(t,"c",(function(){return R}));var r=n("1da1"),a=(n("96cf"),n("7a23"));function o(e,t,n,r,o,i){var c=Object(a["resolveComponent"])("action-header"),s=Object(a["resolveComponent"])("his-table"),u=Object(a["resolveComponent"])("ion-content"),l=Object(a["resolveComponent"])("action-footer");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(c,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(a["createVNode"])(u,null,{default:Object(a["withCtx"])((function(){return[Object(a["createVNode"])(s,{columns:e.columns,rowColors:e.rowColors,rows:e.rows},null,8,["columns","rowColors","rows"])]})),_:1}),Object(a["createVNode"])(l,{buttons:e.actionButtons},null,8,["buttons"])],64)}var i=n("a3a5"),c=n("8efc"),s=Object(a["defineComponent"])({mixins:[c["a"]],components:{HisTable:i["a"]},props:{rowColors:{type:Object},columns:{type:Object,required:!0},rows:{type:Object,required:!0}}}),u=n("6b0d"),l=n.n(u);const d=l()(s,[["render",o]]);var p=d,b=Object(a["withScopeId"])("data-v-1c798292");Object(a["pushScopeId"])("data-v-1c798292");var f={class:"info-content his-md-text"};Object(a["popScopeId"])();var m=b((function(e,t,n,r,o,i){var c=Object(a["resolveComponent"])("action-header"),s=Object(a["resolveComponent"])("ion-content"),u=Object(a["resolveComponent"])("action-footer");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(c,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(a["createVNode"])(s,null,{default:b((function(){return[Object(a["createVNode"])("div",f,[Object(a["createVNode"])("h2",{class:e.color},Object(a["toDisplayString"])(e.bodyTitle),3),Object(a["createVNode"])("p",{class:"description",innerHTML:e.bodyText},null,8,["innerHTML"])])]})),_:1}),Object(a["createVNode"])(u,{buttons:e.actionButtons},null,8,["buttons"])],64)})),h=Object(a["defineComponent"])({mixins:[c["a"]],props:{bodyTitle:{type:String,required:!0},bodyText:{type:String,required:!1}}});n("55ff");const g=l()(h,[["render",m],["__scopeId","data-v-1c798292"]]);var v=g,O=n("1b47"),j=Object(a["withScopeId"])("data-v-d609962e"),_=j((function(e,t,n,r,o,i){var c=Object(a["resolveComponent"])("action-header"),s=Object(a["resolveComponent"])("ion-content"),u=Object(a["resolveComponent"])("action-footer");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])(c,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),Object(a["createVNode"])(s,null,{default:j((function(){return[Object(a["createVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],null,Object(a["renderList"])(e.list,(function(e,t){return Object(a["openBlock"])(),Object(a["createBlock"])("li",{key:t},[Object(a["createVNode"])("span",{class:"his-md-text",innerHTML:e},null,8,["innerHTML"])])})),128))])]})),_:1}),Object(a["createVNode"])(u,{buttons:e.actionButtons},null,8,["buttons"])],64)})),w=Object(a["defineComponent"])({mixins:[c["a"]],props:{list:{type:Array,required:!0}}});n("4cf3");const k=l()(w,[["render",_],["__scopeId","data-v-d609962e"]]);var y=k,x=n("8a30");function N(e,t,n,r,a){return C.apply(this,arguments)}function C(){return C=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,a,o){var i,c,s,u,l,d=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=d.length>5&&void 0!==d[5]?d[5]:"",c=d.length>6&&void 0!==d[6]?d[6]:[],e.next=4,x["cb"].create({component:p,backdropDismiss:!1,cssClass:"action-sheet-modal",componentProps:{title:t,subtitle:n,columns:r,rows:a,rowColors:c,actionButtons:o,color:i}});case 4:return s=e.sent,s.present(),e.next=8,s.onDidDismiss();case 8:return u=e.sent,l=u.data,e.abrupt("return",l.action);case 11:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function V(e,t,n,r){return D.apply(this,arguments)}function D(){return D=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,c,s,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:"",e.next=3,x["cb"].create({component:y,backdropDismiss:!1,cssClass:"action-sheet-modal",componentProps:{title:t,subtitle:n,actionButtons:a,list:r,color:o}});case 3:return i=e.sent,i.present(),e.next=7,i.onDidDismiss();case 7:return c=e.sent,s=c.data,e.abrupt("return",s.action);case 10:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function T(e,t,n,r){return I.apply(this,arguments)}function I(){return I=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,c,s,u=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:"",e.next=3,x["cb"].create({component:v,backdropDismiss:!1,cssClass:"action-sheet-modal",componentProps:{title:t,bodyTitle:n,bodyText:r,actionButtons:a,color:o}});case 3:return i=e.sent,i.present(),e.next=7,i.onDidDismiss();case 7:return c=e.sent,s=c.data,e.abrupt("return",s.action);case 10:case"end":return e.stop()}}),e)}))),I.apply(this,arguments)}function R(e,t,n,r){return S.apply(this,arguments)}function S(){return S=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,c,s,u,l=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=l.length>4&&void 0!==l[4]?l[4]:"darkred",i=l.length>5&&void 0!==l[5]?l[5]:"action-sheet-modal",e.next=4,x["cb"].create({component:O["a"],backdropDismiss:!1,cssClass:i,componentProps:{title:t,subtitle:n,color:o,list:r,actionButtons:a}});case 4:return c=e.sent,c.present(),e.next=8,c.onDidDismiss();case 8:return s=e.sent,u=s.data,e.abrupt("return",u);case 11:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}},"7fa1":function(e,t,n){},"7fe8":function(e,t,n){"use strict";n("2240")},8081:function(e,t,n){"use strict";n("da71")},"80b5":function(e,t,n){"use strict";var r=n("1da1"),a=n("5530"),o=(n("96cf"),n("d81d"),n("ac1f"),n("466d"),n("4de4"),n("d3b7"),n("99af"),n("b0c0"),n("e86e")),i=n("d95e"),c=n("2706"),s=n("d10e"),u=n("b446"),l=n("9283"),d=n("23e6"),p=n("2ef0"),b=n("b5e4"),f=n("5713"),m=n("1c74");function h(e){return e.map((function(e){return{label:e,value:e}}))}t["a"]={resolvePerson:function(e){var t={};for(var n in e){var r=e[n];Object(p["isPlainObject"])(r)&&"person"in r&&(Object(p["isPlainObject"])(r.person)?t=Object(a["a"])(Object(a["a"])({},t),r.person):t[n]=r["person"])}return t},getGivenNameField:function(){return{id:"given_name",helpText:"First name",type:i["b"].TT_TEXT,computedValue:function(e){return{person:e.value}},validation:function(e){return c["a"].isName(e)},options:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.given_name){e.next=5;break}return e.next=3,s["a"].searchGivenName(t.given_name.value);case 3:return n=e.sent,e.abrupt("return",h(n));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},getFamilyNameField:function(){return{id:"family_name",helpText:"Last name",type:i["b"].TT_TEXT,computedValue:function(e){return{person:e.value}},validation:function(e){return c["a"].isName(e)},options:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.family_name){e.next=5;break}return e.next=3,s["a"].searchFamilyName(t.family_name.value);case 3:return n=e.sent,e.abrupt("return",h(n));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},getGenderField:function(){return{id:"gender",helpText:"Gender",type:i["b"].TT_SELECT,computedValue:function(e){return{person:e.value}},validation:function(e){return c["a"].required(e)},options:function(){return[{label:"Female",value:"F"},{label:"Male",value:"M"}]}}},getDobConfig:function(){return{id:"birth_date",summaryLabel:"Date of Birth",helpText:"Birth",required:!0,minDate:function(){return l["b"].estimateDateFromAge(100)},maxDate:function(){return s["a"].getSessionDate()},estimation:{allowUnknown:!0,allowUnknownMonthDay:!0,estimationFieldType:u["a"].AGE_ESTIMATE_FIELD},computeValue:function(e,t){return{date:e,isEstimate:t,person:{birthdate:e,birthdate_estimated:t}}}}},getHomeRegionField:function(){return{id:"home_region",helpText:"Region of origin",type:i["b"].TT_SELECT,group:"person",requireNext:!1,computedValue:function(e){return{person:e.label}},validation:function(e){return c["a"].required(e)},options:function(){return Object(o["f"])()}}},getHomeDistrictField:function(){return{id:"home_district",helpText:"Home District",type:i["b"].TT_SELECT,requireNext:!1,dynamicHelpText:function(e){return e.home_region&&e.home_region.label.match(/foreign/i)?"Home Country":"Home District"},computedValue:function(e){return{person:e.label}},options:function(e){return Object(o["a"])(e.home_region.value)}}},addCustomLocationBtnForTAorVillage:function(e,t){return{name:"Add ".concat(e),slot:"end",color:"success",onClick:function(){var n=Object(r["a"])(regeneratorRuntime.mark((function n(r,a,o){var i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!("string"!=typeof o.filter||o.filter.length<3)){n.next=2;break}return n.abrupt("return",Object(b["e"])("Please enter a valid ".concat(e)));case 2:if(Object(p["isEmpty"])(o.filtered)){n.next=4;break}return n.abrupt("return",Object(b["e"])("Can't add existing ".concat(e)));case 4:return n.next=6,Object(b["a"])("Do you want to add ".concat(e," ").concat(o.filter,"?"));case 6:if(i=n.sent,i){n.next=9;break}return n.abrupt("return");case 9:return n.next=11,f["a"].createAddress(e,o.filter,r[t].value);case 11:if(c=n.sent,!c){n.next=16;break}o.filter=o.filter.toUpperCase(),n.next=17;break;case 16:return n.abrupt("return",Object(b["e"])("Unable to add ".concat(e)));case 17:case"end":return n.stop()}}),n)})));function a(e,t,r){return n.apply(this,arguments)}return a}()}},getHomeTaField:function(){return{id:"home_traditional_authority",helpText:"Home TA",type:i["b"].TT_SELECT,requireNext:!1,config:{showKeyboard:!0,isFilterDataViaApi:!0,footerBtns:[this.addCustomLocationBtnForTAorVillage("TA","home_district")]},defaultOutput:function(){return{label:"N/A",value:"N/A"}},defaultComputedOutput:function(e){return e.home_region&&e.home_region.label.match(/foreign/i)?{person:"Unknown"}:null},computedValue:function(e){return{person:e.label}},validation:function(e){return c["a"].required(e)},options:function(e,t){return Object(o["h"])(e.home_district.value,t)}}},getHomeVillageField:function(){return{id:"home_village",helpText:"Home Village",type:i["b"].TT_SELECT,config:{showKeyboard:!0,isFilterDataViaApi:!0,footerBtns:[this.addCustomLocationBtnForTAorVillage("Village","home_traditional_authority")]},requireNext:!1,defaultOutput:function(){return{label:"N/A",value:"N/A"}},defaultComputedOutput:function(e){return e.home_region&&e.home_region.label.match(/foreign/i)?{person:"Unknown"}:null},computedValue:function(e){return{person:e.label}},validation:function(e){return c["a"].required(e)},options:function(e,t){return Object(o["i"])(e.home_traditional_authority.value,t)}}},getCurrentRegionField:function(){return{id:"current_region",helpText:"Current Region",requireNext:!1,type:i["b"].TT_SELECT,computedValue:function(e){return{person:e.label}},validation:function(e){return c["a"].required(e)},options:function(){return Object(o["f"])()}}},getCurrentDistrictField:function(){return{id:"current_district",helpText:"District",requireNext:!1,type:i["b"].TT_SELECT,dynamicHelpText:function(e){return e.current_region&&e.current_region.label.match(/foreign/i)?"Current Country":"Current District"},computedValue:function(e){return{person:e.label}},validation:function(e){return c["a"].required(e)},options:function(e){return Object(o["a"])(e.current_region.value)}}},getCurrentTAfield:function(){return{id:"current_traditional_authority",helpText:"Current TA",requireNext:!1,type:i["b"].TT_SELECT,config:{showKeyboard:!0,isFilterDataViaApi:!0,footerBtns:[this.addCustomLocationBtnForTAorVillage("TA","current_district")]},defaultOutput:function(){return{label:"N/A",value:"N/A"}},defaultComputedOutput:function(e){return e.current_region&&e.current_region.label.match(/foreign/i)?{person:"Unknown"}:null},computedValue:function(e){return{person:e.label}},validation:function(e){return c["a"].required(e)},options:function(e,t){return Object(o["h"])(e.current_district.value,t)}}},getCurrentVillageField:function(){return{id:"current_village",helpText:"Current Village",requireNext:!1,type:i["b"].TT_SELECT,config:{showKeyboard:!0,isFilterDataViaApi:!0,footerBtns:[this.addCustomLocationBtnForTAorVillage("Village","current_traditional_authority")]},defaultOutput:function(){return{label:"N/A",value:"N/A"}},defaultComputedOutput:function(e){return e.current_region&&e.current_region.label.match(/foreign/i)?{person:"Unknown"}:null},computedValue:function(e){return{person:e.label}},validation:function(e){return c["a"].required(e)},options:function(e,t){return Object(o["i"])(e.current_traditional_authority.value,t)}}},getCellNumberField:function(){return{id:"cell_phone_number",helpText:"Cell phone number",group:"person",type:i["b"].TT_NUMBER,computedValue:function(e){return{person:e.label}},validation:function(e){if(!e||!e.value.match(/Unknown/i)&&!e.value.match(/n\/a/i))return c["a"].isMWPhoneNumber(e)},config:{noChars:!1}}},getLandmarkFields:function(){return[{id:"default_landmarks",proxyID:"landmark",helpText:"Closest Landmark or Plot Number",type:i["b"].TT_SELECT,appearInSummary:function(e){return"Other"!=e.default_landmarks.value},computedValue:function(e){return{person:e.value}},validation:function(e){return c["a"].required(e)},options:function(){return h(["Catholic Church","CCAP","Seventh Day","Mosque","Primary School","Borehole","Secondary School","College","Market","Football Ground","Other"])}},{id:"other_landmark",proxyID:"landmark",helpText:"Closest Landmark or Plot Number",type:i["b"].TT_NOTE,condition:function(e){return"Other"===e.default_landmarks.value},computedValue:function(e){return{person:e.value}},validation:function(e){return c["a"].required(e)}}]},getFacilityLocationField:function(){return{id:"location",helpText:"Please select facility name",type:i["b"].TT_SELECT,computedValue:function(e){return{person:e.label}},validation:function(e){return c["a"].required(e)},options:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(o["b"])(t)},config:{showKeyboard:!0,isFilterDataViaApi:!0}}},getPersonNameFromPersonObj:function(e,t){return e.names.length?e.names[0][t]:""},getAttrFromPersonObj:function(e,t){return Array.isArray(e.person_attributes)&&e.person_attributes.length?e.person_attributes.reduce((function(e,n){return n.type.name===t?n.value:e}),""):""},getAddressFromPersonObj:function(e,t){if(Array.isArray(e.addresses)&&e.addresses.length){var n=e.addresses[0],r={home_district:"address2",home_village:"neighborhood_cell",home_traditional_authority:"county_district",current_village:"city_village",current_traditional_authority:"township_division",current_district:"state_province"};return n[r[t]]}return""},mapPersonData:function(e){var t=this.getPersonNameFromPersonObj(e,"given_name"),n=this.getPersonNameFromPersonObj(e,"family_name"),r=this.getAddressFromPersonObj(e,"home_district"),a=this.getAddressFromPersonObj(e,"home_village"),o=this.getAddressFromPersonObj(e,"home_traditional_authority");return{id:e.person_id,name:"".concat(t," ").concat(n),given_name:t,family_name:n,gender:e.gender,birth_date:e.birthdate,birthdate_estimated:e.birthdate_estimated,home_district:r,home_village:a,home_traditional_authority:o,home_address:"".concat(r," ").concat(a),current_district:this.getAddressFromPersonObj(e,"current_district"),current_traditional_authority:this.getAddressFromPersonObj(e,"current_traditional_authority"),cell_phone_number:this.getAttrFromPersonObj(e,"Cell Phone Number"),landmark:this.getAttrFromPersonObj(e,"Landmark Or Plot Number")}},getPersonAttributeOptions:function(e){var t=new d["a"](e),n=function(e,t){return t in e?e[t]():"-"};return{label:t.getPatientInfoString(),value:t.getID()||t.getNationalID(),other:{npid:t.getNationalID(),person:e,options:[{label:"National ID",value:n(t,"getNationalID")},{label:"ARV Number",value:n(t,"getArvNumber"),other:{show:function(){return"ART"===m["e"].getProgramName()}}},{label:"Name",value:n(t,"getFullName")},{label:"Gender",value:n(t,"getGender")},{label:"Birthdate",value:n(t,"getBirthdate")},{label:"Home District",value:n(t,"getHomeDistrict")},{label:"Home Village",value:n(t,"getHomeVillage")},{label:"Current District",value:n(t,"getCurrentDistrict")},{label:"Current T/A",value:n(t,"getCurrentTA")},{label:"Cellphone",value:n(t,"getPhoneNumber")}]}}}}},"80e3":function(e,t,n){"use strict";n("4e82");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-00cf8d9b");Object(r["pushScopeId"])("data-v-00cf8d9b");var o={key:0,class:"stick-report-header"},i={key:1},c={key:2},s={key:0},u={key:1},l={key:0,class:"no-data-section vertically-align"},d={key:0},p={key:1};Object(r["popScopeId"])();var b=a((function(e,t,n,b,f,m){var h=Object(r["resolveComponent"])("ion-icon"),g=Object(r["resolveComponent"])("ion-skeleton-text"),v=Object(r["resolveComponent"])("ion-button");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])("table",{class:["report-table",e.config.tableCssTheme||""]},[e.tableColumns?(Object(r["openBlock"])(),Object(r["createBlock"])("thead",o,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.tableColumns,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(t,a){return Object(r["openBlock"])(),Object(r["createBlock"])("th",{key:a,colspan:t.colspan||0,onClick:function(n){return e.sort(a,t)},style:t.style,class:t.cssClass},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.th)+" ",1),e.sortedIndex===a&&t.sortable&&n+1===e.tableColumns.length?(Object(r["openBlock"])(),Object(r["createBlock"])(h,{key:0,icon:"ascSort"===e.sortOrder?e.arrowUp:e.arrowDown},null,8,["icon"])):Object(r["createCommentVNode"])("",!0)],14,["colspan","onClick"])})),128))])})),128))])):Object(r["createCommentVNode"])("",!0),e.isLoading?(Object(r["openBlock"])(),Object(r["createBlock"])("tbody",i,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.skeletonRows,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",{colspan:e.columnLength},[Object(r["createVNode"])(g,{animated:"",style:{width:"100%",height:"30px"}})],8,["colspan"])])})),128))])):Object(r["createCommentVNode"])("",!0),e.noData?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("tbody",c,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.activeRows,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(t,o){var i,c,l;return Object(r["openBlock"])(),Object(r["createBlock"])("td",{key:o,colspan:t.colspan||0,class:t.cssClass,style:t.style},[t.event?(Object(r["openBlock"])(),Object(r["createBlock"])("div",s,["link"===(null===t||void 0===t||null===(i=t.event)||void 0===i?void 0:i.obj)?(Object(r["openBlock"])(),Object(r["createBlock"])("a",{key:0,href:"#",class:["his-sm-text",t.cssClass],style:t.style,onClick:Object(r["withModifiers"])((function(e){return t.event.click()}),["prevent"])},Object(r["toDisplayString"])(t.td),15,["onClick"])):Object(r["createCommentVNode"])("",!0),"button"===t.event.obj?(Object(r["openBlock"])(),Object(r["createBlock"])(v,{key:1,color:(null===t||void 0===t||null===(c=t.event)||void 0===c?void 0:c.color)||"",class:t.cssClass,style:t.style,disabled:void 0!=(null===t||void 0===t||null===(l=t.event)||void 0===l?void 0:l.disabled)&&!0===t.event.disabled,onClick:function(r){return t.event.click(n,e.activeRows,e.tableRows)}},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.td),1)]})),_:2},1032,["color","class","style","disabled","onClick"])):Object(r["createCommentVNode"])("",!0)])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",u,[Object(r["createVNode"])("span",{class:"his-sm-text",innerHTML:t.td},null,8,["innerHTML"])]))],14,["colspan"])})),128))])})),128))]))],2),e.noData?(Object(r["openBlock"])(),Object(r["createBlock"])("h1",l,[e.errorMessage?(Object(r["openBlock"])(),Object(r["createBlock"])("span",d,Object(r["toDisplayString"])(e.errorMessage),1)):(Object(r["openBlock"])(),Object(r["createBlock"])("span",p," No data available in table "))])):Object(r["createCommentVNode"])("",!0)],64)})),f=n("53ca"),m=n("2909"),h=n("1da1"),g=(n("96cf"),n("a9e3"),n("99af"),n("d81d"),n("4de4"),n("d3b7"),n("ac1f"),n("466d"),n("25f0"),n("4d63"),n("2c3e"),n("ff79")),v=n("9ceb"),O=n("2ef0"),j=n("8734"),_=n("b5e4"),w=n("8a30"),k=Object(r["defineComponent"])({emits:["onActiveRows","onActiveColumns","onPagination","onIsLoading","onTableRows"],components:{IonButton:w["d"],IonIcon:w["r"],IonSkeletonText:w["P"]},props:{config:{type:Object,default:{}},columns:{type:Object,required:!0},rows:{type:Object,default:function(){return[]}},newPage:{type:Number},rowsPerPage:{type:Number},asyncRows:{type:Function},rowParser:{type:Function},searchFilter:{type:String},showFilters:{type:Boolean,default:!1},paginated:{type:Boolean,default:!1}},data:function(){return{arrowUp:g["k"],arrowDown:g["i"],caretBack:g["n"],caretForward:g["q"],sortedIndex:-1,sortOrder:"descSort",tableColumns:[],tableRows:[],paginatedRows:[],activeRows:[],currentPage:0,itemsPerPage:20,isLoading:!1,errorMessage:""}},watch:{isLoading:{handler:function(e){"boolean"===typeof e&&this.$emit("onIsLoading",e)},immediate:!0},newPage:{handler:function(e){"number"===typeof e&&this.onChangePage(e)},immediate:!0},rowsPerPage:{handler:function(e){"number"===typeof e&&(this.itemsPerPage=e)},immediate:!0},itemsPerPage:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(Object(O["isEmpty"])(t.tableRows)){n.next=7;break}return t.currentPage=0,n.next=4,Object(j["a"])(100);case 4:return t.paginateTableRows(e),n.next=7,t.setPage(t.currentPage);case 7:case"end":return n.stop()}}),n)})))()},tableRows:{handler:function(e){Object(O["isEmpty"])(e)||this.$emit("onTableRows",e)},immediate:!0,deep:!0},searchFilter:function(e){e?this.activeRows=this.searchDataSet(e,this.paginated?this.activeRows:this.tableRows):this.paginated?this.setPage(this.currentPage):this.activeRows=this.tableRows},activeRows:{handler:function(e){this.$emit("onActiveRows",e)},immediate:!0,deep:!0},columns:{handler:function(e){if(!Object(O["isEmpty"])(e)){if(this.showIndex()){var t=Object(m["a"])(this.columns),n=this.columns.length-1;t[n]=[v["a"].thNum("#")].concat(Object(m["a"])(t[n])),this.tableColumns=t}else this.tableColumns=e;this.$emit("onActiveColumns",this.tableColumns)}},immediate:!0,deep:!0},asyncRows:{handler:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.errorMessage="","function"!==typeof e){n.next=24;break}return t.isLoading=!0,n.prev=3,n.t0=t,n.next=7,e();case 7:if(n.t1=n.sent,t.tableRows=n.t0.addColumnIndexes.call(n.t0,n.t1),!t.paginated){n.next=15;break}return t.paginateTableRows(),n.next=13,t.setPage(0);case 13:n.next=16;break;case 15:t.activeRows=t.tableRows;case 16:n.next=23;break;case 18:n.prev=18,n.t2=n["catch"](3),t.errorMessage="".concat(n.t2),Object(_["c"])(n.t2),console.error(n.t2);case 23:t.isLoading=!1;case 24:case"end":return n.stop()}}),n,null,[[3,18]])})))()},immediate:!0,deep:!0},rows:{handler:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.errorMessage="",e&&!Object(O["isEmpty"])(e)){n.next=5;break}return t.activeRows=[],t.tableRows=[],n.abrupt("return");case 5:if(t.tableRows=t.addColumnIndexes(e),!t.paginated){n.next=12;break}return t.paginateTableRows(),n.next=10,t.setPage(0);case 10:n.next=13;break;case 12:t.activeRows=t.tableRows;case 13:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{showIndex:function(){return!(!this.config||!("showIndex"in this.config))&&this.config.showIndex},addColumnIndexes:function(e){return this.showIndex()?e.map((function(e,t){var n=[v["a"].td(t+1)];return Array.isArray(e)?n.concat(e):[].concat(n,[e])})):e},paginateTableRows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.paginatedRows=Object(O["chunk"])(this.tableRows,e||this.itemsPerPage),this.$emit("onPagination",this.paginatedRows)},setPage:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.activeRows=[],r=t.paginatedRows[e],r){n.next=4;break}return n.abrupt("return");case 4:if(n.prev=4,t.isLoading=!0,"function"!==typeof t.rowParser){n.next=12;break}return n.next=9,t.rowParser(r);case 9:n.t0=n.sent,n.next=13;break;case 12:n.t0=r;case 13:t.activeRows=n.t0,n.next=21;break;case 16:n.prev=16,n.t1=n["catch"](4),Object(_["c"])(n.t1),t.errorMessage="".concat(n.t1),console.error(n.t1);case 21:t.isLoading=!1;case 22:case"end":return n.stop()}}),n,null,[[4,16]])})))()},sort:function(e,t){var n=this;return Object(h["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n.showIndex()||"function"!==typeof n.rowParser||0==e){r.next=2;break}return r.abrupt("return");case 2:if(e===n.sortedIndex?n.sortOrder="ascSort"===n.sortOrder?"descSort":"ascSort":n.sortOrder="ascSort",n.sortedIndex=e,!(n.sortOrder in t)){r.next=13;break}if(!n.paginated){r.next=12;break}return n.tableRows=t[n.sortOrder](e,n.tableRows),n.paginateTableRows(),r.next=10,n.setPage(n.currentPage);case 10:r.next=13;break;case 12:n.activeRows=t[n.sortOrder](e,n.tableRows);case 13:case"end":return r.stop()}}),r)})))()},searchDataSet:function(e,t){return t.filter((function(t){var n=t.filter((function(t){return"object"===Object(f["a"])(t)&&null!=t&&"td"in t&&(("string"===typeof t.td||"number"===typeof t.td)&&t.td.toString().match(new RegExp(e,"i")))}));return!Object(O["isEmpty"])(n)}))},onChangePage:function(e){var t=this;return Object(h["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.currentPage=e,n.next=3,t.setPage(e);case 3:case"end":return n.stop()}}),n)})))()}},computed:{noData:function(){return!this.isLoading&&Object(O["isEmpty"])(this.activeRows)},columnLength:function(){try{return this.tableColumns[0].length}catch(e){return console.warn(e),5}},skeletonRows:function(){for(var e=[],t=this.config.skeletonTextRows?this.config.skeletonTextRows:10,n=0;n<t;++n)e.push(n);return e}}}),y=(n("fbf9"),n("6b0d")),x=n.n(y);const N=x()(k,[["render",b],["__scopeId","data-v-00cf8d9b"]]);t["a"]=N},8158:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("45eb"),c=n("7e84"),s=n("262e"),u=n("2caf"),l=(n("96cf"),n("4de4"),n("d3b7"),n("caad"),n("2532"),n("4e82"),n("ac1f"),n("466d"),n("b0c0"),n("4d63"),n("2c3e"),n("25f0"),n("1c74")),d=[{categories:[],concept_id:2137,name:"BMI"},{categories:[],concept_id:1717,name:"Patient using family planning"},{categories:[],concept_id:856,name:"HIV viral load"},{concept_id:6328,name:"New"},{categories:[],concept_id:7977,name:"Hemorrhage"},{categories:[],concept_id:7156,name:"Eclampsia"},{categories:[],concept_id:8758,name:"Episiotomy"},{categories:[],concept_id:228,name:"APH"},{categories:[],concept_id:230,name:"PPH"},{categories:[],concept_id:2895,name:"Alive"},{categories:[],concept_id:9656,name:"Previous HIV Test Results"},{categories:[],concept_id:2473,name:"B-HCG"},{categories:[],concept_id:9655,name:"Previous HIV Test Done"},{categories:[],concept_id:9657,name:"Previous HIV Test Date"},{categories:[],concept_id:3340,name:"Currently taking alcohol"},{categories:[],concept_id:1057,name:"Never Married"},{categories:[],concept_id:5555,name:"Married"},{categories:[],concept_id:1056,name:"Seperated"},{categories:[],concept_id:1058,name:"Divorced"},{categories:[],concept_id:6686,name:"Ultrasound"},{categories:[],concept_id:7433,name:"Presentation"},{categories:[],concept_id:7979,name:"Fetal Heart Beat"},{categories:[],concept_id:9637,name:"Fetal movement heard"},{categories:[],concept_id:9562,name:"Fetal movement felt"},{categories:[],concept_id:7835,name:"Fundus"},{categories:[],concept_id:7837,name:"Position"},{categories:[],concept_id:7142,name:"Multiple gestation"},{categories:[],concept_id:7919,name:"LIQUOR"},{categories:[],concept_id:9563,name:"Last Fetal movement felt"},{categories:[],concept_id:7836,name:"Lie"},{categories:[],concept_id:9654,name:"Fetal heart movement seen"},{categories:[],concept_id:7839,name:"Fetal heart rate"},{categories:["anc_medical_history"],concept_id:5,name:"Asthma"},{categories:["anc_medical_history"],concept_id:155,name:"Epilepsy"},{categories:["anc_medical_history"],concept_id:174,name:"Sexually transmitted infection"},{categories:["anc_medical_history"],concept_id:1063,name:"Blood transfusion"},{categories:["anc_medical_history"],concept_id:6033,name:"Renal disease"},{categories:["anc_medical_history"],concept_id:7978,name:"Spine/Leg Deformity"},{categories:["anc_medical_history"],concept_id:8809,name:"Hypertension"},{categories:[],concept_id:7439,name:"Procedure done"},{categories:["anc_surgical_history"],concept_id:1171,name:"Caesarean section"},{categories:["anc_surgical_history"],concept_id:1719,name:"Tubal ligation"},{categories:["anc_surgical_history"],concept_id:3593,name:"Biopsy"},{categories:["anc_surgical_history","reason_for_no_cxca"],concept_id:5276,name:"Hysterectomy"},{categories:["anc_surgical_history"],concept_id:7440,name:"Uterine evacuation"},{categories:["anc_surgical_history"],concept_id:7441,name:"Exam under anaesthesia"},{categories:["anc_surgical_history"],concept_id:7443,name:"Total abdominal hysterectomy +/- adnexectomy"},{categories:["anc_surgical_history"],concept_id:7444,name:"Subtotal abdominal hysterectomy +/- adnexectomy"},{categories:["anc_surgical_history"],concept_id:7462,name:"Suturing of cervical or vaginal injury under anaesthesia"},{categories:["anc_surgical_history"],concept_id:7469,name:"Vaginal Reconstruction"},{categories:["anc_surgical_history"],concept_id:7470,name:"Exploratory laparatomy +/- adnexectomy"},{categories:["anc_surgical_history"],concept_id:7471,name:"Cauterization of vulva or perineal warts"},{categories:["anc_surgical_history"],concept_id:7472,name:"Marsupilisation"},{categories:["anc_surgical_history"],concept_id:7474,name:"Salpingectomy"},{categories:["anc_surgical_history"],concept_id:7475,name:"Dilation and curettage"},{categories:["anc_medical_history","anc_surgical_history"],concept_id:7477,name:"Fistula repair"},{categories:["anc_surgical_history"],concept_id:7478,name:"Myomectomy"},{categories:["anc_surgical_history"],concept_id:7480,name:"Hysterescopy"},{categories:["anc_surgical_history"],concept_id:7481,name:"Cystoscopy"},{categories:["anc_surgical_history"],concept_id:7482,name:"Vulvectomy"},{categories:["anc_surgical_history"],concept_id:8380,name:"Suturing of perineum"},{categories:["anc_surgical_history"],concept_id:8381,name:"Repair of uterus"},{categories:["anc_surgical_history"],concept_id:8765,name:"Cystectomy"},{categories:["anc_surgical_history"],concept_id:8766,name:"Ceclage"},{categories:["anc_surgical_history"],concept_id:8767,name:"Bilateral tubal ligation"},{categories:["anc_surgical_history"],concept_id:8773,name:"Excision"},{categories:["anc_surgical_history"],concept_id:9058,name:"Evacuation/Manual Vacuum Aspiration"},{categories:["anc_surgical_history"],concept_id:9304,name:"Polypectomy"},{categories:["anc_surgical_history"],concept_id:9305,name:"Decapitation"},{categories:["anc_surgical_history"],concept_id:9306,name:"Abdominal Washout"},{categories:["anc_surgical_history"],concept_id:9307,name:"Vaginal hysterectomy"},{categories:["anc_surgical_history"],concept_id:9308,name:"Gaped episiotomy repair"},{categories:["anc_surgical_history"],concept_id:9309,name:"Macdonald suture"},{categories:["anc_surgical_history"],concept_id:9314,name:"Oophorectomy"},{categories:[],concept_id:7124,name:"Tetanus toxoid vaccine"},{categories:[],concept_id:6408,name:"Other conditions"},{categories:[],concept_id:10546,name:"Punch Biopsy"},{categories:[],concept_id:10547,name:"LLETZ sample"},{categories:[],concept_id:1115,name:"Normal"},{categories:[],concept_id:10551,name:"CIN 1"},{categories:[],concept_id:10552,name:"CIN 2"},{categories:[],concept_id:10553,name:"CIN 3"},{categories:[],concept_id:10554,name:"Carcinoma in Situ"},{categories:[],concept_id:2588,name:"Invasive cancer of cervix"},{categories:[],concept_id:10550,name:"Benign cervical warts"},{categories:[],concept_id:1107,name:"Not available"},{categories:[],concept_id:7918,name:"Bleeding"},{categories:[],concept_id:5276,name:"Hysterectomy"},{categories:[],concept_id:10521,name:"Cryotherapy"},{categories:[],concept_id:10002,name:"Leep"},{categories:[],concept_id:9053,name:"Palliative Care"},{categories:[],concept_id:10560,name:"LLETZ"},{categories:[],concept_id:10557,name:"Conisation"},{categories:[],concept_id:9996,name:"Thermocoagulation"},{categories:[],concept_id:10549,name:"Chronic cervicitis"},{categories:[],concept_id:3580,name:"Patient refused"},{categories:[],concept_id:10556,name:"Hysyrectomy"},{categories:[],concept_id:10558,name:"Trachelectomy"},{categories:[],concept_id:3626,name:"Discharged"},{categories:[],concept_id:8882,name:"Continue follow-up"},{categories:[],concept_id:10559,name:"No Dysplasia/Cancer"},{categories:[],concept_id:1742,name:"Patient died"},{categories:[],concept_id:8739,name:"Cervical cancer stage 1"},{categories:[],concept_id:8787,name:"Cervical cancer stage 2"},{categories:[],concept_id:8788,name:"Cervical cancer stage 3"},{categories:[],concept_id:8740,name:"Cervical cancer stage 4"},{categories:[],concept_id:10041,name:"VIA Negative"},{categories:[],concept_id:10032,name:"Suspect Cancer"},{categories:[],concept_id:10023,name:"PAP Smear Normal"},{categories:[],concept_id:10025,name:"HPV negative"},{categories:[],concept_id:10028,name:"No visible Lesion"},{categories:[],concept_id:6537,name:"Other Gynae"},{categories:[],concept_id:10042,name:"VIA Positive"},{categories:[],concept_id:10024,name:"PAP Smear Abnormal"},{categories:[],concept_id:10026,name:"HPV Positive"},{categories:[],concept_id:10027,name:"Visible Lesion"},{categories:[],concept_id:174,name:"STI"},{categories:[],concept_id:149,name:"Cervicitis"},{categories:[],name:"Result Given to Client",concept_id:9764},{categories:[],name:"INH 300 / RFP 300 (3HP)",concept_id:10565},{categories:[],concept_id:10563,name:"Drug received from previous facility"},{categories:[],concept_id:10564,name:"Date drug received from previous facility"},{categories:[],concept_id:6397,name:"Height for age percent of median"},{categories:[],concept_id:6969,name:"Refer to clinician"},{categories:[],concept_id:10031,name:"Further Investigation and Management"},{categories:[],concept_id:9066,name:"Cancer of cervix"},{categories:[],concept_id:10030,name:"Large Lesion (Greater than 75 percent)"},{categories:[],concept_id:1739,name:"Referral reason"},{categories:[],concept_id:9514,name:"VIA Results"},{categories:[],concept_id:9522,name:"Patient went for VIA?"},{concept_id:2690,name:"TB treatment"},{categories:[],concept_id:7459,name:"TB status"},{categories:[],concept_id:7455,name:"TB suspected"},{categories:[],concept_id:7454,name:"TB NOT suspected"},{categories:[],concept_id:7458,name:"Confirmed TB on treatment"},{categories:[],concept_id:7456,name:"Confirmed TB NOT on treatment"},{categories:[],concept_id:10583,name:"TB Status at Initiation"},{categories:[],concept_id:10584,name:"Current"},{categories:[],concept_id:10585,name:"Last 2 years"},{categories:[],concept_id:10586,name:"More than 2 years"},{categories:[],concept_id:10587,name:"Never"},{categories:[],concept_id:9195,name:"Discuss with spouse"},{categories:[],concept_id:7951,name:"Other side effect"},{categories:[],concept_id:7755,name:"Malawi ART side effects"},{categories:[],concept_id:9994,name:"CxCa test date"},{categories:[],concept_id:10008,name:"Reason for NOT offering CxCa"},{categories:[],concept_id:9992,name:"Offer CxCa"},{categories:["reason_for_no_cxca"],concept_id:8387,name:"Not due for screening"},{categories:["reason_for_no_cxca"],concept_id:10007,name:"Client preferred counseling"},{categories:["reason_for_no_cxca"],concept_id:1175,name:"Not applicable"},{categories:["reason_for_no_cxca"],concept_id:3580,name:"Patient refused"},{categories:["reason_for_no_cxca"],concept_id:10001,name:"Chemotherapy"},{categories:["reason_for_no_cxca"],concept_id:10543,name:"Services not available"},{categories:["reason_for_no_cxca"],concept_id:10544,name:"Provider not available"},{categories:[],concept_id:7215,name:"Other (Specify)"},{categories:[],concept_id:1618,name:"Family planning"},{categories:[],concept_id:374,name:"Method of family planning"},{categories:[],concept_id:2431,name:"Other reason for not seeking services"},{categories:[],concept_id:2592,name:"Clinician notes"},{categories:[],concept_id:6986,name:"Transferred"},{categories:[],concept_id:1588,name:"Previous TB treatment history"},{categories:["bp_measures"],concept_id:5085,name:"Systolic blood pressure"},{categories:["bp_measures"],concept_id:5086,name:"Diastolic blood pressure"},{categories:[],concept_id:7054,name:"Art clinic location"},{categories:[],concept_id:8677,name:"Specific presenting complaint"},{categories:[],concept_id:8578,name:"Presenting complaint"},{categories:[],concept_id:10319,name:"Presenting complaint group"},{categories:[],concept_id:6266,name:"Trauma"},{categories:[],concept_id:7027,name:"General"},{categories:[],concept_id:7411,name:"ILI"},{categories:[],concept_id:7644,name:"Respiratory"},{categories:[],concept_id:7661,name:"Gastrointestinal"},{categories:[],concept_id:9546,name:"Haema"},{categories:[],concept_id:9551,name:"Nephro"},{categories:[],concept_id:9560,name:"Cardiovascular"},{categories:["art_patient_type"],order:1,concept_id:7572,name:"New patient"},{categories:["art_patient_type"],order:2,concept_id:10522,name:"Drug Refill"},{categories:["risk factors","anc_medical_history"],concept_id:3720,name:"Diabetes"},{categories:["risk factors"],concept_id:7623,name:"CKD"},{categories:["risk factors"],concept_id:9499,name:"history of CVD"},{categories:["risk factors"],concept_id:9501,name:"relative with CVD"},{categories:["risk factors"],concept_id:3339,name:"patient smokes"},{categories:["risk factors"],concept_id:2318,name:"Patient drinks alcohol"},{categories:[],concept_id:9675,name:"Referral"},{categories:[],concept_id:1054,name:"Marital status"},{categories:[],concept_id:8366,name:"Religion"},{categories:[],concept_id:6541,name:"Referred"},{categories:[],concept_id:8717,name:"Specialist clinic"},{categories:[],concept_id:6734,name:"Admit to ward"},{categories:[],concept_id:9674,name:"Re-visiting"},{categories:[],concept_id:3753,name:"HIV status"},{categories:[],concept_id:7878,name:"HIV test location"},{categories:[],concept_id:7409,name:"Qech outpatient diagnosis list"},{categories:["anc_diagnosis"],concept_id:123,name:"Malaria"},{categories:["anc_diagnosis"],concept_id:3,name:"Anaemia"},{categories:["anc_diagnosis"],concept_id:7941,name:"Pre-eclampsia"},{categories:["anc_diagnosis"],concept_id:9665,name:"Vaginal bleeding"},{categories:["anc_diagnosis"],concept_id:9664,name:"Early rupture of membranes"},{categories:["anc_diagnosis"],concept_id:7883,name:"Premature labour"},{categories:["anc_diagnosis"],concept_id:43,name:"Pneumonia"},{categories:[],concept_id:9227,name:"Malaria Test Result"},{categories:[],concept_id:703,name:"Positive"},{categories:[],concept_id:9436,name:"Inconclusive"},{categories:[],concept_id:6698,name:"Trace"},{categories:[],concept_id:664,name:"Negative"},{categories:[],concept_id:6542,name:"Primary diagnosis"},{categories:[],concept_id:6543,name:"Secondary diagnosis"},{categories:[],concept_id:2688,name:"Clinical notes construct"},{categories:[],concept_id:1837,name:"HIV test date"},{categories:[],concept_id:6189,name:"Type of visit"},{categories:[],concept_id:3003,name:"Transfer to"},{categories:[],concept_id:7414,name:"Transfer from"},{categories:[],concept_id:1744,name:"Patient transferred out"},{categories:[],concept_id:9144,name:"Repeat / Missing"},{categories:[],concept_id:3280,name:"Targeted"},{categories:[],concept_id:1345,name:"Confirmatory"},{categories:[],concept_id:6368,name:"Stat"},{categories:[],concept_id:432,name:"Routine"},{categories:[],concept_id:730,name:"CD4 percent"},{categories:[],concept_id:2552,name:"Agrees to followup"},{categories:[],concept_id:7882,name:"Confirmatory HIV test date"},{categories:[],concept_id:2516,name:"Date ART started"},{categories:[],concept_id:1499,name:"Drug start date"},{categories:[],concept_id:7750,name:"Location of ART initiation"},{categories:[],concept_id:6394,name:"Has the patient taken ART in the last two weeks"},{categories:[],concept_id:7752,name:"Has the patient taken ART in the last two months"},{categories:[],concept_id:7751,name:"Date ART last taken"},{categories:[],concept_id:6981,name:"ART number at previous location"},{categories:[],concept_id:7881,name:"Confirmatory HIV test location"},{categories:[],concept_id:7754,name:"Ever received ART"},{categories:[],concept_id:7937,name:"Ever registered at ART clinic"},{categories:[],concept_id:6393,name:"Has transfer letter"},{categories:[],concept_id:9685,name:"Phone"},{categories:[],concept_id:9686,name:"Home visit"},{categories:["art_extra_medication_order"],concept_id:9974,name:"3HP (RFP + INH)"},{categories:[],concept_id:656,name:"IPT"},{categories:["side_effect"],sortIndex:{side_effect:10},concept_id:1773,name:"Heavy alcohol use"},{categories:["tb_symptom","side_effect"],sortIndex:{side_effect:4,tb_symptom:4},concept_id:8260,name:"Weight loss / Failure to thrive / malnutrition"},{categories:[],concept_id:9661,name:"Contraindications"},{categories:[],concept_id:7567,name:"Drug induced"},{categories:["tb_symptom","side_effect","adverse_effect"],sortIndex:{side_effect:9,tb_symptom:3},concept_id:6029,name:"Night sweats"},{categories:["tb_symptom","0_art_regimen_side_effect","9_art_regimen_side_effect","14_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:1,tb_symptom:2},concept_id:5945,name:"Fever"},{categories:["0_art_regimen_side_effect","2_art_regimen_side_effect","4_art_regimen_side_effect","8_art_regimen_side_effect","9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","12_art_regimen_side_effect","13_art_regimen_side_effect","14_art_regimen_side_effect","16_art_regimen_side_effect","17_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:3},concept_id:5980,name:"Vomiting"},{categories:["5_art_regimen_side_effect","9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:5},concept_id:877,name:"Dizziness"},{categories:["9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","13_art_regimen_side_effect","14_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:7},concept_id:620,name:"Headache"},{categories:["13_art_regimen_side_effect","14_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:2},concept_id:5978,name:"Nausea"},{categories:["0_art_regimen_side_effect","2_art_regimen_side_effect","4_art_regimen_side_effect","5_art_regimen_side_effect","6_art_regimen_side_effect","7_art_regimen_side_effect","8_art_regimen_side_effect","9_art_regimen_side_effect","10_art_regimen_side_effect","11_art_regimen_side_effect","12_art_regimen_side_effect","13_art_regimen_side_effect","14_art_regimen_side_effect","adverse_effect"],concept_id:843,name:"Treatment failure"},{categories:["2_art_regimen_side_effect","4_art_regimen_side_effect","8_art_regimen_side_effect","11_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:6},concept_id:1458,name:"Lactic acidosis"},{categories:["tb_symptom","0_art_regimen_side_effect","9_art_regimen_side_effect","15_art_regimen_side_effect","16_art_regimen_side_effect","17_art_regimen_side_effect","side_effect","adverse_effect"],sortIndex:{side_effect:8,tb_symptom:1},concept_id:107,name:"Cough"},{categories:["11_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:1},concept_id:821,name:"Peripheral neuropathy"},{categories:["0_art_regimen_contraindication","2_art_regimen_contraindication","6_art_regimen_contraindication","7_art_regimen_contraindication","8_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:3},concept_id:215,name:"Jaundice"},{categories:["2_art_regimen_contraindication","4_art_regimen_contraindication","8_art_regimen_contraindication","11_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:5},concept_id:2148,name:"Lipodystrophy"},{categories:["5_art_regimen_contraindication","6_art_regimen_contraindication","7_art_regimen_contraindication","10_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:7},concept_id:9242,name:"Kidney Failure"},{categories:["4_art_regimen_contraindication","5_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:2},concept_id:219,name:"Psychosis"},{categories:["4_art_regimen_contraindication","5_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:4},concept_id:9440,name:"Gynaecomastia"},{categories:["2_art_regimen_contraindication","4_art_regimen_contraindication","8_art_regimen_contraindication","11_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:6},concept_id:3,name:"Anemia"},{categories:["0_art_regimen_contraindication","contraindication","adverse_effect"],sortIndex:{contraindication:9},concept_id:512,name:"Skin rash"},{categories:["contraindication","adverse_effect"],sortIndex:{contraindication:8},concept_id:867,name:"Insomnia"},{categories:[],concept_id:1588,name:"TB treatment history"},{categories:["fast_track"],concept_id:9533,name:"Adult 18 years +"},{categories:["fast_track"],concept_id:9534,name:"On ART for 12 months "},{categories:["fast_track"],concept_id:9535,name:"On 1st line ART"},{categories:["fast_track"],concept_id:9537,name:"Good current adherence"},{categories:["fast_track"],concept_id:9536,name:"Last VL <1000"},{categories:["fast_track"],concept_id:9538,name:"Pregnant / Breastfeeding"},{categories:["fast_track"],concept_id:9539,name:"Side effects / HIV-rel. diseases"},{categories:["fast_track"],concept_id:9540,name:"Needs BP / diabetes treatment"},{categories:["fast_track"],concept_id:9527,name:"Started IPT <12m ago"},{categories:["fast_track"],concept_id:2186,name:"Any sign for TB"},{categories:["reasons_for_art","stage_1_conditions_adults_who_reason"],concept_id:7561,name:"WHO STAGE I ADULT"},{categories:["reasons_for_art","stage_1_conditions_pedaids_who_reason","stage_1_conditions_adults_who_reason"],concept_id:7041,name:"WHO STAGE I ADULT AND PEDS"},{categories:["reasons_for_art","stage_1_conditions_pedaids_who_reason"],concept_id:7049,name:"WHO STAGE I PEDS"},{categories:["reasons_for_art","stage_2_conditions_adults_who_reason"],concept_id:7046,name:"WHO STAGE II ADULT"},{categories:["reasons_for_art","stage_2_conditions_pedaids_who_reason","stage_2_conditions_adults_who_reason"],concept_id:7042,name:"WHO STAGE II ADULT AND PEDS"},{categories:["reasons_for_art","stage_2_conditions_pedaids_who_reason"],concept_id:7050,name:"WHO STAGE II PEDS"},{categories:["reasons_for_art","stage_3_conditions_adults_who_reason"],concept_id:7047,name:"WHO STAGE III ADULT"},{categories:["reasons_for_art","stage_3_conditions_pedaids_who_reason","stage_3_conditions_adults_who_reason"],concept_id:7043,name:"WHO STAGE III ADULT AND PEDS"},{categories:["reasons_for_art","stage_3_conditions_pedaids_who_reason"],concept_id:7051,name:"WHO STAGE III PEDS"},{categories:["reasons_for_art","stage_4_conditions_adults_who_reason"],concept_id:7048,name:"WHO STAGE IV ADULT"},{categories:["reasons_for_art","stage_4_conditions_pedaids_who_reason","stage_4_conditions_adults_who_reason"],concept_id:7044,name:"WHO STAGE IV ADULT AND PEDS"},{categories:["reasons_for_art","stage_4_conditions_pedaids_who_reason"],concept_id:7052,name:"WHO STAGE IV PEDS"},{categories:[],concept_id:1805,name:"Patient present"},{categories:[],concept_id:2122,name:"Guardian present"},{categories:[],concept_id:5092,name:"SP02"},{categories:[],concept_id:5087,name:"Pulse"},{categories:[],concept_id:5088,name:"Temp"},{categories:[],concept_id:1484,name:"Treatment status"},{categories:[],concept_id:3140,name:"Reason for poor treatment adherence"},{categories:[],concept_id:6987,name:"Drug adherence"},{categories:[],concept_id:2540,name:"Number of tablets brought to clinic"},{categories:[],concept_id:7880,name:"Confirmatory hiv test type"},{categories:["hiv_test_types"],concept_id:1040,name:"HIV rapid test"},{categories:["hiv_test_types"],concept_id:844,name:"HIV DNA polymerase chain reaction"},{categories:["hiv_test_types"],concept_id:1118,name:"Not done"},{categories:["hiv_test_types"],concept_id:1067,name:"Unknown"},{categories:["reason_for_art"],concept_id:8263,name:"PRESUMED SEVERE HIV"},{categories:["reason_for_art"],concept_id:844,name:"HIV DNA POLYMERASE CHAIN REACTION"},{categories:["reason_for_art"],concept_id:1169,name:"HIV infected"},{categories:["reason_for_art"],concept_id:1755,name:"PATIENT PREGNANT"},{categories:["reason_for_art"],concept_id:5632,name:"BREASTFEEDING"},{categories:["reason_for_art"],concept_id:5006,name:"Asymptomatic"},{categories:["reason_for_art"],concept_id:8376,name:"LYMPHOCYTE COUNT BELOW THRESHOLD WITH WHO STAGE 1"},{categories:["reason_for_art"],concept_id:7559,name:"LYMPHOCYTE COUNT BELOW THRESHOLD WITH WHO STAGE 2"},{categories:[""],concept_id:2743,name:"Who stages criteria present"},{categories:[""],concept_id:7965,name:"Is patient breast feeding"},{categories:[""],concept_id:6131,name:"Is patient pregnant"},{categories:[""],concept_id:7563,name:"Reason for ART eligibility"},{categories:[""],concept_id:7562,name:"Who stage"},{categories:[""],concept_id:2540,name:"Pills brought"},{categories:[""],concept_id:5089,name:"weight"},{categories:[],concept_id:5090,name:"Height"},{categories:["art_medication_order"],concept_id:9974,name:"Rifapentine"},{categories:["art_medication_order","art_extra_medication_order"],concept_id:916,name:"CPT"},{categories:["art_medication_order","art_extra_medication_order"],concept_id:656,name:"INH"},{categories:[""],concept_id:6784,name:"Appointment type"},{categories:[""],concept_id:1779,name:"Reason for ARV switch"},{categories:[""],concept_id:9561,name:"Assess for fast track"},{categories:[""],concept_id:1282,name:"Medication orders"},{categories:[""],concept_id:8471,name:"Fast track"},{categories:[""],concept_id:7755,name:"Art Side effects"},{categories:["art_medication_order"],concept_id:1085,name:"Antiretroviral drugs"},{categories:[""],concept_id:1066,name:"No"},{categories:[""],concept_id:1065,name:"Yes"},{categories:[""],concept_id:5096,name:"Appointment date"},{categories:[""],concept_id:3289,name:"Type of patient"},{categories:["art_patient_type"],concept_id:9684,order:3,name:"External consultation"},{categories:[""],concept_id:6830,name:"Cd4 count location"},{categories:[""],concept_id:6831,name:"Cd4 count datetime"},{categories:[""],concept_id:5497,name:"CD4 count"},{categories:["cd4_count"],concept_id:8208,name:"cd4 less than or equal to 750"},{categories:["cd4_count"],concept_id:8262,name:"cd4 less than or equal to 250"},{categories:["cd4_count"],concept_id:8207,name:"cd4 less than or equal to 350"},{categories:["cd4_count"],concept_id:9389,name:"cd4 less than or equal to 500"},{categories:["whole_staging_numbers"],concept_id:9145,name:"WHO STAGE 1"},{categories:["whole_staging_numbers"],concept_id:9146,name:"WHO STAGE 2"},{categories:["whole_staging_numbers"],concept_id:2932,name:"WHO STAGE 3"},{categories:["whole_staging_numbers"],concept_id:2933,name:"WHO STAGE 4"},{categories:["whole_staging_numbers"],concept_id:7561,name:"WHO STAGE I ADULT"},{categories:["whole_staging_numbers"],concept_id:7041,name:"WHO STAGE I ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7049,name:"WHO STAGE I PEDS"},{categories:["whole_staging_numbers"],concept_id:7046,name:"WHO STAGE II ADULT"},{categories:["whole_staging_numbers"],concept_id:7042,name:"WHO STAGE II ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7050,name:"WHO STAGE II PEDS"},{categories:["whole_staging_numbers"],concept_id:7047,name:"WHO STAGE III ADULT"},{categories:["whole_staging_numbers"],concept_id:7043,name:"WHO STAGE III ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7051,name:"WHO STAGE III PEDS"},{categories:["whole_staging_numbers"],concept_id:7048,name:"WHO STAGE IV ADULT"},{categories:["whole_staging_numbers"],concept_id:7044,name:"WHO STAGE IV ADULT AND PEDS"},{categories:["whole_staging_numbers"],concept_id:7052,name:"WHO STAGE IV PEDS"},{categories:["pshd_condition","stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:7548,name:"Cryptococcal meningitis or other extrapulmonary cryptococcosis"},{categories:["pshd_condition","stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:5340,name:"Candidiasis of oseophagus, trachea and bronchi or lungs"},{categories:["stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:1547,name:"Extrapulmonary tuberculosis (EPTB)"},{categories:["stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:507,name:"Kaposis sarcoma"},{categories:["stage_3_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:1215,name:"Bacterial pneumonia, severe recurrent"},{categories:["stage_4_conditions_adults","staging_4_conditions","who_staging_conditions"],concept_id:7959,name:"Non-typhoidal Salmonella bacteraemia, recurrent"},{categories:["stage_4_conditions_adults","stage_4_conditions_pedaids","who_staging_conditions","staging_4_conditions"],concept_id:7957,name:"Symptomatic HIV-associated nephropathy or cardiomyopathy"},{categories:["stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:2587,name:"Cerebral or B-cell non Hodgkin lymphoma"},{categories:["pshd_condition","stage_4_conditions_pedaids","stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:882,name:"Pneumocystis pneumonia"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:5344,name:"Chronic herpes simplex infection (orolabial, gential / anorectal >1 month or visceral at any site)"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:7551,name:"Cytomegalovirus infection (retinitis or infection or other organs)"},{categories:["pshd_condition","stage_4_conditions_adults","who_staging_conditions"],concept_id:2583,name:"Toxoplasmosis of the brain"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:2588,name:"Invasive cancer of cervix"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:7040,name:"Unspecified stage 4 condition"},{categories:["stage_4_conditions_adults","who_staging_conditions","staging_4_conditions"],concept_id:6408,name:"Other"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:1362,name:"HIV encephalopathy"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:2585,name:"Disseminated non-tuberculosis mycobacterial infection"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7549,name:"Cryptosporidiosis, chronic with diarroea"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7956,name:"Isosporiasis >1 month"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7550,name:"Disseminated mycosis (coccidiomycosis or histoplasmosis)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:5046,name:"Progressive multifocal leukoencephalopathy"},{categories:["pshd_condition","stage_4_conditions_pedaids","who_staging_conditions"],concept_id:3068,name:"Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"},{categories:["who_staging_conditions"],concept_id:2894,name:"Bacterial infections, severe recurrent  (empyema, pyomyositis, meningitis, bone/joint infections but EXCLUDING pneumonia)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7960,name:"Chronic herpes simplex infection (orolabial or cutaneous >1 month or visceral at any site)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7552,name:"Cytomegalovirus infection: rentinitis or other organ (from age 1 month)"},{categories:["pshd_condition","stage_4_conditions_pedaids","who_staging_conditions","staging_4_conditions"],concept_id:5048,name:"Toxoplasmosis of the brain (from age 1 month)"},{categories:["stage_4_conditions_pedaids","who_staging_conditions"],concept_id:7961,name:"Recto-vaginal fistula, HIV-associated"},{categories:["severe_hiv_wasting_syndrome","stage_3_conditions_adults","who_staging_conditions"],concept_id:7540,name:"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"},{categories:["severe_hiv_wasting_syndrome","stage_3_conditions_adults","who_staging_conditions"],concept_id:5018,name:"Diarrhoea, chronic (>1 month) unexplained"},{categories:["severe_hiv_wasting_syndrome","stage_3_conditions_adults","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:5027,name:"Fever, persistent unexplained, intermittent or constant, >1 month"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:8206,name:"Pulmonary tuberculosis (current)"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:7539,name:"Tuberculosis (PTB or EPTB) within the last 2 years"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:5334,name:"Oral candidiasis"},{categories:["stage_3_conditions_adults","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7546,name:"Acute necrotizing ulcerative gingivitis or periodontitis"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:2582,name:"Anaemia, unexplained < 8 g/dl"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:7954,name:"Neutropaenia, unexplained < 500 /mm(cubed)"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:7541,name:"Severe bacterial infections (pneumonia, empyema, pyomyositis, bone/joint, meningitis, bacteraemia)"},{categories:["stage_3_conditions_adults","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7955,name:"Thrombocytopaenia, chronic < 50,000 /mm(cubed)"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:8205,name:"Hepatitis B or C infection"},{categories:["stage_3_conditions_pedaids","stage_3_conditions_adults","who_staging_conditions"],concept_id:5337,name:"Oral hairy leukoplakia"},{categories:["stage_3_conditions_adults","who_staging_conditions"],concept_id:7039,name:"Unspecified stage 3 condition"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7543,name:"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7544,name:"Diarrhoea, persistent unexplained (14 days or more)"},{categories:["pshd_condition","stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7545,name:"Oral candidiasis (from age 2 months)"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:7547,name:"Lymph node tuberculosis"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:5024,name:"Symptomatic lymphoid interstitial pneumonia"},{categories:["stage_3_conditions_pedaids","who_staging_conditions"],concept_id:2889,name:"Chronic HIV-associated lung disease, including bronchiectasis"},{categories:["stage_2_conditions_adults","who_staging_conditions"],concept_id:5332,name:"Moderate weight loss less than or equal to 10 percent, unexplained"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:5012,name:"Respiratory tract infections, recurrent (sinusitis, tonsilitus, otitis media, pharyngitis)"},{categories:["stage_2_conditions_adults","who_staging_conditions"],concept_id:2578,name:"Seborrhoeic dermatitis"},{categories:["stage_2_conditions_adults","stage_2_conditions_pedaids","who_staging_conditions"],concept_id:7536,name:"Papular pruritic eruptions / Fungal nail infections"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:836,name:"Herpes zoster"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:2575,name:"Angular cheilitis"},{categories:["stage_2_conditions_pedaids","stage_2_conditions_adults","who_staging_conditions"],concept_id:2576,name:"Oral ulcerations, recurrent"},{categories:["stage_2_conditions_adults","who_staging_conditions"],concept_id:7038,name:"Unspecified stage 2 condition"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:7537,name:"Hepatosplenomegaly, persistent unexplained"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:2891,name:"Lineal gingival erythema"},{categories:["anc_diagnosis","stage_2_conditions_pedaids","who_staging_conditions"],concept_id:6775,name:"Wart virus infection, extensive"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:6776,name:"Molluscum contagiosum, extensive"},{categories:["stage_2_conditions_pedaids","who_staging_conditions"],concept_id:1210,name:"Parotid enlargement, persistent unexplained"},{categories:["stage_1_conditions_pedaids","stage_1_conditions_adults","who_staging_conditions"],concept_id:5327,name:"Asymptomatic HIV infection"},{categories:["stage_1_conditions_pedaids","stage_1_conditions_adults","who_staging_conditions"],concept_id:5328,name:"Persistent generalized lymphadenopathy"},{categories:[],concept_id:8426,name:"Radiology Orders"},{name:"Hand x-ray",concept_id:10337},{name:"Foot x-ray",concept_id:10334},{name:"Leg x-ray",concept_id:10342},{name:"Pelvis x-ray",concept_id:10343},{name:"Shoulder x-ray",concept_id:10344},{concept_id:10539,name:"History of COVID-19 contact"}],p=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"getConceptsByCategory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=d.filter((function(t){try{return t.categories.includes(e)}catch(n){return!1}}));return t?n.sort((function(t,n){try{return t.sortIndex[e]>n.sortIndex[e]?1:0}catch(r){return 0}})):n}},{key:"getConceptSet",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r,a,o,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"",e.next=3,this.getConceptID(t);case 3:if(a=e.sent,o=Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"concept_set",{id:a,name:r}),!o){e.next=7;break}return e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getConceptName",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=this.getCachedConceptName(t),!n){e.next=3;break}return e.abrupt("return",n);case 3:return e.abrupt("return",this.getConceptNameFromApi(t));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getConceptID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return this.getCachedConceptID(e,t)}catch(n){return this.getConceptIDFromApi(e)}}},{key:"getCachedConceptID",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=d.filter((function(n){return t?n.name===e:n.name.match(new RegExp(e,"i"))}));return this.resolveConcept(n,e)}},{key:"getConceptIDFromApi",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"concepts",{name:t});case 2:return r=e.sent,e.abrupt("return",this.resolveConcept(r,t));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getConceptNameFromApi",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"concepts/".concat(t));case 2:if(r=e.sent,!r){e.next=5;break}return e.abrupt("return",r.concept_names[0].name);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCachedConceptName",value:function(e){var t=d.filter((function(t){return t.concept_id===e}));if(t.length>=1)return t[0].name}},{key:"resolveConcept",value:function(e,t){if(1===e.length)return e[0].concept_id;throw"Concept name ".concat(t," was not found or has a duplicates")}}]),n}(l["e"])},"82a9":function(e,t,n){"use strict";var r=n("2909"),a=n("1da1"),o=(n("4de4"),n("d3b7"),n("ac1f"),n("466d"),n("4d63"),n("2c3e"),n("25f0"),n("96cf"),n("7a23")),i=n("db10"),c=n("2345"),s=n("36ad"),u=n("6be2"),l=n("0a79"),d=n("51c8"),p=n("8a30"),b=n("2ef0"),f=Object(o["defineComponent"])({components:{IonList:p["y"],IonItem:p["w"],IonLabel:p["x"],HisTextInput:s["a"],HisKeyboard:i["a"],ViewPort:l["a"],IonGrid:p["p"],IonRow:p["J"],IonCol:p["m"],IonInfiniteScroll:p["t"],IonInfiniteScrollContent:p["u"],IonContent:p["n"]},mixins:[d["a"]],data:function(){return{showKeyboard:!1,selected:"",filter:"",filtered:[],keyboard:u["h"],listData:[],infiniteScroll:{enabled:!1,page:1,limit:10,threshold:"100px",handler:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()}}},created:function(){var e,t,n,r,a,o,i,c,s,u,l;this.showKeyboard=!0===(null===(e=this.config)||void 0===e?void 0:e.showKeyboard),this.infiniteScroll.enabled=!0===(null===(t=this.config)||void 0===t||null===(n=t.infiniteScroll)||void 0===n?void 0:n.enabled),this.infiniteScroll.page=(null===(r=this.config)||void 0===r||null===(a=r.infiniteScroll)||void 0===a?void 0:a.page)||1,this.infiniteScroll.limit=(null===(o=this.config)||void 0===o||null===(i=o.infiniteScroll)||void 0===i?void 0:i.limit)||10,this.infiniteScroll.threshold=(null===(c=this.config)||void 0===c||null===(s=c.infiniteScroll)||void 0===s?void 0:s.threshold)||"100px",this.infiniteScroll.handler=null===(u=this.config)||void 0===u||null===(l=u.infiniteScroll)||void 0===l?void 0:l.handler},watch:{footerButtonEvent:{handler:function(e){if(Object(b["isPlainObject"])(e.onClickComponentEvents)){var t=(null===e||void 0===e?void 0:e.onClickComponentEvents)||{};if(t&&"function"===typeof t.setValue){var n=t.setValue(e);"string"===typeof n&&(this.filter=n,this.selected=n)}}},deep:!0},listData:{handler:function(e){e&&(this.filtered=e)},deep:!0,immediate:!0},filter:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=3;break}return t.filtered=t.listData,n.abrupt("return");case 3:if(null===(r=t.config)||void 0===r||!r.isFilterDataViaApi){n.next=9;break}return n.next=6,t.options(t.fdata,e);case 6:return t.filtered=n.sent,t.selected===t.filter&&(a=Object(b["find"])(t.filtered,{label:t.filter}),a&&t.$emit("onValue",a)),n.abrupt("return");case 9:t.infiniteScroll.enabled&&(t.infiniteScroll.page=1),t.filtered=t.listData.filter((function(e){return t.isMatch(e.label,t.filter)}));case 11:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{isMatch:function(e,t){return e.match(new RegExp(t,"i"))},clearSelection:function(){this.filter="",this.selected=""},onKbValue:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.selected!==e&&(this.filter=e,this.selected=this.filter)},keypress:function(e){this.filter||(this.selected=""),this.filter=Object(c["a"])(e,this.selected),this.selected=this.filter},pushData:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.infiniteScroll.enabled||"function"!==typeof t.infiniteScroll.handler){n.next=6;break}return t.infiniteScroll.page++,n.next=4,t.infiniteScroll.handler(t.filter,t.infiniteScroll.page,t.infiniteScroll.limit);case 4:o=n.sent,(a=t.listData).push.apply(a,Object(r["a"])(o));case 6:e.target.complete();case 7:case"end":return n.stop()}}),n)})))()}}}),m=(n("7d28"),n("6b0d")),h=n.n(m);const g=h()(f,[["__scopeId","data-v-7b5e2256"]]);t["a"]=g},"83af":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("96cf"),n("99af"),n("cc6f")),u=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,7,r)}return Object(o["a"])(n,[{key:"getNextAppointment",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s["a"].getProgramID(),e.abrupt("return",s["a"].getJson("/programs/".concat(t,"/patients/").concat(this.patientID,"/next_appointment_date"),{date:this.date}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}],[{key:"getDailiyAppointments",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s["a"].getProgramID(),e.abrupt("return",s["a"].getJson("/programs/".concat(n,"/booked_appointments"),{date:t,paginate:!1}));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(s["a"])},"84ef":function(e,t,n){},"85d6":function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r,a=n("1da1"),o=n("d4ec"),i=n("bee2"),c=n("262e"),s=n("2caf"),u=(n("96cf"),n("ac1f"),n("466d"),n("cc6f")),l=n("5713"),d=(n("caad"),n("2532"),n("d3b7"),n("b0c0"),n("8158")),p=n("b5e4"),b={"Adults with stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:function(e){return 4===e}}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{reasonForArt:function(e){return"WHO STAGE IV ADULT"===e}}},"Adults with stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:function(e){return 3===e}}},"Adults with stage 2 conditions":{concept:"WHO STAGE II ADULT",priority:4,conditions:{stage:function(e){return 2===e}}},"Adults with stage 1 conditions":{concept:"WHO STAGE I ADULT",priority:5,conditions:{stage:function(e){return 1===e}}}},f={"Children with stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:1,conditions:{stage:function(e){return 4===e}}},"Classify as stage 4 when reason for ART is WHO STAGE 4":{concept:"WHO STAGE IV PEDS",priority:2,conditions:{reasonForArt:function(e){return"WHO STAGE IV PEDS"===e}}},"For children with stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:3,conditions:{stage:function(e){return 3===e}}},"Children with stage 2 conditions":{concept:"WHO STAGE II PEDS",priority:4,conditions:{stage:function(e){return 2===e}}},"Children with stage 1 conditions":{concept:"WHO STAGE I PEDS",priority:5,conditions:{stage:function(e){return 1===e}}}},m={"Warn if Severe weight loss is selected when actual patient BMI is acceptable":{priority:1,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["a"])("Patient's BMI of ".concat(t.bmi," greater than 18.5, do you wish to proceed?"),{confirmBtnLabel:"Yes, keep severe weightloss",cancelBtnLabel:"No, cancel"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{selectedCondition:function(e){return"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"===e},bmi:function(e){return e>18.5}}},"Warn for contradicting stage defining conditions":{priority:1,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["a"])("CONTRADICTING STAGE DEFINING CONDITIONS",{confirmBtnLabel:"Keep Asymptomatic",cancelBtnLabel:"Keep other(s)"});case 2:if(n=e.sent,!n){e.next=10;break}return t.stage=1,t.selectedConditions=[],t.stageThreeConditions=[],t.stageFourConditions=[],t.stageTwoConditions=[],e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{selectedCondition:function(e){return"Asymptomatic HIV infection"===e},stage:function(e){return e>=2}}}},h={"For children whose current weight percentile is less than 70":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:function(e){return"Child has a low weight percentile of ".concat(e.weightPercentile)}},conditions:{selectedCondition:function(e){return"Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)"===e},weightPercentile:function(e){return e<70}}},"Enable Moderate unexplained malnutrition for children whose weight for height is 70-79%":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:function(e){return"Child has weight percentile of ".concat(e.weightPercentile)}},conditions:{selectedCondition:function(e){return"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"===e},weightPercentile:function(e){return e>=70&&e<=79}}},"Disable moderate weight loss when Severe unexplained weight loss is chosen":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:function(){return"Severe weight loss/manutrition was already selected"}},conditions:{selectedCondition:function(e){return"Moderate unexplained wasting/malnutrition not responding to treatment (weight-for-height/ -age 70-79% or muac 11-12 cm)"===e},selectedConditions:function(e){return e.includes("Severe unexplained wasting or malnutrition not responding to treatment (weight-for-height/ -age <70% or MUAC less than 11cm or oedema)")}}}},g={"Adults with a BMI less than 16":{priority:1,actions:{isChecked:!0},description:{color:"danger",show:"always",info:function(e){return"Adult has a low BMI of ".concat(e.bmi)}},conditions:{selectedCondition:function(e){return"Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained"===e},bmi:function(e){return e<16}}},"Adults whose BMI is between 16 and 18":{priority:3,actions:{isChecked:!0},description:{color:"warning",show:"onChecked",info:function(e){return"BMI of ".concat(e.bmi," is between 16 and 18")}},conditions:{selectedCondition:function(e){return"Moderate weight loss less than or equal to 10 percent, unexplained"===e},bmi:function(e){return e>=16&&e<=18.5}}},"Disable Moderate weight loss if severe weightloss is selected":{priority:2,actions:{isChecked:!1,disabled:!0},description:{color:"secondary",show:"always",info:function(){return"Severe weight loss was already selected"}},conditions:{selectedCondition:function(e){return"Moderate weight loss less than or equal to 10 percent, unexplained"===e},selectedConditions:function(e){return e.includes("Severe weight loss >10% and/or BMI <18.5kg/m^2, unexplained")}}}},v={"Has stage 4 conditions":{concept:"WHO STAGE IV PEDS",priority:1,conditions:{stage:function(e){return 4===e}}},"Has stage 3 conditions":{concept:"WHO STAGE III PEDS",priority:2,conditions:{stage:function(e){return 3===e}}},"Children under twelve months who tested positive on Rapid test and have presumed severe HIV":{concept:"PRESUMED SEVERE HIV",priority:3,conditions:{ageInMonths:function(e){return e<12},selectedConditions:function(e){var t=d["a"].getConceptsByCategory("pshd_condition");for(var n in t)if(e.includes(n))return!0;return!1},testType:function(e){return"HIV rapid test"===e}}},"Children under twelve who tested positive via HIV DNA Polymerase Chain Reaction test":{concept:"HIV DNA POLYMERASE CHAIN REACTION",priority:4,conditions:{ageInMonths:function(e){return e<12},testType:function(e){return"HIV DNA POLYMERASE CHAIN REACTION"===e}}},"Children who are less than 24 months":{concept:"HIV infected",priority:5,conditions:{ageInMonths:function(e){return e<24}}},"Children between 24 and 56 months who have stage 2 or 1 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 750",priority:6,conditions:{ageInMonths:function(e){return e>=24&&e<=56},cd4:function(e){return e<=750},cd4Modifier:function(e){return"<"===e||"="===e},stage:function(e){return e<=2}}},"Children with CD4 count less than 500 and have stage 1 and stage 2 conditions":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:7,conditions:{cd4:function(e){return e<=500},cd4Modifier:function(e){return"<"===e||"="===e},stage:function(e){return e<=2}}},"Children over the date 2014-04-01 who are more than five years old and have cd4 count less than 500":{concept:"CD4 COUNT LESS THAN OR EQUAL TO 500",priority:9,conditions:{date:function(e){return e>="2014-04-01"},age:function(e){return e>5},cd4:function(e){return e<=500},cd4Modifier:function(e){return"<"===e||"="===e}}},"Children over date 2014-04-01 and less than Five years old":{concept:"HIV infected",priority:10,conditions:{date:function(e){return e>="2014-04-01"},age:function(e){return e<=5}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:11,conditions:{stage:function(e){return e<=2}}}},O={"Has stage 4 conditions":{concept:"WHO STAGE IV ADULT",priority:1,conditions:{stage:function(e){return 4===e}}},"Has HIV wasting syndrome identified in stage 3":{concept:"WHO STAGE IV ADULT",priority:2,conditions:{selectedConditions:function(e){var t=d["a"].getConceptsByCategory("severe_hiv_wasting_syndrome"),n=t.reduce((function(t,n){return e.includes(n.name)?t+1:0}),0);return n>=2}}},"Has stage 3 conditions":{concept:"WHO STAGE III ADULT",priority:3,conditions:{stage:function(e){return 3===e}}},"CD4 less than 350 for adults before 2014":{concept:"cd4 less than or equal to 350",priority:4,conditions:{date:function(e){return e<"2014-04-01"},cd4:function(e){return e<=350},cd4Modifier:function(e){return"<"===e||"="===e}}},"CD4 less than 250 for adults after 2014":{concept:"cd4 less than or equal to 250",priority:4,conditions:{date:function(e){return e>="2014-04-01"},cd4:function(e){return e<=250},cd4Modifier:function(e){return"<"===e||"="===e}}},"CD4 less than 350 for adults after 2014":{concept:"cd4 less than or equal to 350",priority:5,conditions:{date:function(e){return e>="2014-04-01"},cd4:function(e){return e<=350},cd4Modifier:function(e){return"<"===e||"="===e}}},"CD4 less than 500 for adults after 2014":{concept:"cd4 less than or equal to 500",priority:6,conditions:{date:function(e){return e>="2014-04-01"},cd4:function(e){return e<=500},cd4Modifier:function(e){return"<"===e||"="===e}}},"Women who are breast feeding":{concept:"BREASTFEEDING",priority:8,conditions:{gender:function(e){return"F"===e},breastFeeding:function(e){return"Yes"===e},stage:function(e){return e<=2}}},"Women who are pregnant":{concept:"PATIENT PREGNANT",priority:7,conditions:{gender:function(e){return"F"===e},pregnant:function(e){return"Yes"===e},stage:function(e){return e<=2}}},"Asymptomatic patient with either stage one or stage two conditions":{concept:"Asymptomatic",priority:9,conditions:{stage:function(e){return e<=2}}}};(function(e){e["ADULT_STAGE_4"]="stage_4_conditions_adults",e["ADULT_STAGE_3"]="stage_3_conditions_adults",e["ADULT_STAGE_2"]="stage_2_conditions_adults",e["ADULT_STAGE_1"]="stage_1_conditions_adults",e["PEDAID_STAGE_4"]="stage_4_conditions_pedaids",e["PEDAID_STAGE_3"]="stage_3_conditions_pedaids",e["PEDAID_STAGE_2"]="stage_2_conditions_pedaids",e["PEDAID_STAGE_1"]="stage_1_conditions_pedaids"})(r||(r={}));var j=function(e){Object(c["a"])(n,e);var t=Object(s["a"])(n);function n(e,r,a){var i;return Object(o["a"])(this,n),i=t.call(this,e,52,a),i.age=r,i.confirmatoryTest=null,i}return Object(i["a"])(n,[{key:"isAdult",value:function(){return this.age>=15}},{key:"isPedaid",value:function(){return this.age<=14}},{key:"setAge",value:function(e){this.age=e}},{key:"getFacilities",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l["a"].getFacilities({name:e})}},{key:"getConfirmatoryTestType",value:function(){return this.confirmatoryTest}},{key:"cd4CountIsValid",value:function(e){try{return!!e.match(/^(=|<|>)([0-9]*)$/m)}catch(t){return!1}}},{key:"getAlertGuidelines",value:function(){return m}},{key:"getWhoStageGuidelines",value:function(){return this.isAdult()?b:f}},{key:"getProgramEligibilityGuidelines",value:function(){return this.isAdult()?O:v}},{key:"getRecommendedConditionGuidelines",value:function(){return this.isAdult()?g:h}},{key:"getStagingConditions",value:function(e){var t=this.getStagingCategoryByNum(e);return u["a"].getConceptsByCategory(t)}},{key:"getAllWhoStages",value:function(){return u["a"].getConceptsByCategory("whole_staging_numbers")}},{key:"getAllReasonsForART",value:function(){return u["a"].getConceptsByCategory("reason_for_art")}},{key:"buildWhoStageObs",value:function(e){return this.buildValueCoded("Who stage",e)}},{key:"buildWhoCriteriaObs",value:function(e){return this.buildValueCoded("Who stages criteria present",e)}},{key:"buildReasonForArtObs",value:function(e){return this.buildValueCoded("Reason for ART eligibility",e)}},{key:"getStagingCategoryByNum",value:function(e){switch(e){case 1:return this.isAdult()?r.ADULT_STAGE_1:r.PEDAID_STAGE_1;case 2:return this.isAdult()?r.ADULT_STAGE_2:r.PEDAID_STAGE_2;case 3:return this.isAdult()?r.ADULT_STAGE_3:r.PEDAID_STAGE_3;case 4:return this.isAdult()?r.ADULT_STAGE_4:r.PEDAID_STAGE_4;default:return""}}},{key:"loadHivConfirmatoryTestType",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getFirstValueCoded(this.patientID,"Confirmatory hiv test type");case 2:t=e.sent,t&&(this.confirmatoryTest=t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(u["a"])},"866d":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5530"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("b0c0"),n("99af"),n("1c74")),u=n("9283"),l=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r,o){var i,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s["e"].getSessionDate(),u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s["e"].getProgramID();return Object(a["a"])(this,n),i=t.call(this),i.startDate=r,i.endDate=o,i.date=c,i.name=e,i.programID=u,i}return Object(o["a"])(n,[{key:"requestReport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s["e"].getJson("radiology_reports",Object(r["a"])({program_id:this.programID,report_name:this.name,start_date:this.startDate,end_date:this.endDate,date:this.date},e))}},{key:"periodStr",value:function(){var e=function(e){return u["b"].toStandardHisDisplayFormat(e)};return"".concat(e(this.startDate)," - ").concat(e(this.endDate))}}]),n}(s["e"])},8675:function(e,t,n){"use strict";n("ecea")},8734:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d3b7");function r(e){return new Promise((function(t){setTimeout((function(){t("")}),e)}))}},"87e7":function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return p}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=n("5969"),s=["0A","2A","4A","5A","6A","7A","8A","9A","10A","11A","12A","13A","14A","15A","16A","17A","0P","2P","4PP","4PA","9PP","9PA","11PP","11PA","12PP","12PA","14PP","14PA","15PP","15PA","16P","17PP","17PA"],u=["0A","2A","4A","5A","6A","7A","8A","9A","10A","11A","12A","13A","14A","15A","16A","17A","0P","2P","4P","4PP","4PA","9P","9PP","9PA","11P","11PP","11PA","12PP","12PA","14P","14PP","14PA","15P","15PP","15PA","16P","17P","17PP","17PA"],l=["10 - 13.9 Kg","14 - 19.9 Kg","20 - 24.9 Kg","25 - 29.9 Kg","3 - 3.9 Kg","30 - 34.9 Kg","35 - 39.9 Kg","4 - 4.9 Kg","40 Kg +","40 - 49.9 Kg","50 Kg +","6 - 9.9 Kg","Unknown"],d=["pellets","tablets","granules"],p=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(){var e;return Object(r["a"])(this,n),e=t.call(this),e.type="pepfar",e}return Object(a["a"])(n,[{key:"setReportType",value:function(e){this.type=e}},{key:"getTptNewInitiations",value:function(){return this.getReport("programs/".concat(this.programID,"/reports/tpt_newly_initiated"))}},{key:"getRegimenFormulationReport",value:function(e,t){return this.getReport("programs/".concat(this.programID,"/reports/regimens_and_formulations"),{regimen:e,formulation:t})}},{key:"getRegimenReport",value:function(){return this.getReport("regimen_report",{type:this.type})}},{key:"getRegimenSwitchReport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getReport("regimen_switch",{pepfar:e})}},{key:"getRegimensByWeight",value:function(){return this.getReport("programs/".concat(this.programID,"/reports/regimens_by_weight_and_gender"))}},{key:"getSCReport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getReport("sc_arvdisp",{pepfar:e})}}]),n}(c["a"])},"88b2":function(e,t,n){},8945:function(e,t,n){"use strict";n("5a7d")},"89b4":function(e,t,n){"use strict";n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return h}));var r,a=n("3835"),o=n("1da1"),i=n("bee2"),c=n("d4ec"),s=n("262e"),u=n("2caf"),l=n("9072"),d=(n("96cf"),n("99af"),n("d3b7"),n("25f0"),n("e9c4"),n("d81d"),n("ac1f"),n("1276"),n("5319"),n("156d")),p=n("9283"),b="4.15.25",f=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e){var r;return Object(c["a"])(this,n),r=t.call(this),r.message='Your current API Version of "'.concat(e,'" does not meet "').concat(b,'". Contact administrator to update your API Version'),r}return Object(i["a"])(n)}(Object(l["a"])(Error)),m=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(c["a"])(this,n),e=t.call(this),e.message="Invalid username/password",e}return Object(i["a"])(n)}(Object(l["a"])(Error));(function(e){e["CORE_VERSION"]="core_version"})(r||(r={}));var h=function(){function e(){Object(c["a"])(this,e),this.token="",this.username="",this.roles=[],this.programs=[],this.userID=-1,this.sessionDate="",this.systemVersion="",this.coreVersion=""}return Object(i["a"])(e,[{key:"setUsername",value:function(e){this.username=e}},{key:"loadConfig",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",d["b"].getFileConfig());case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"login",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.requestLogin(t);case 2:if(n=e.sent,!n){e.next=20;break}return r=n.authorization,a=r.token,o=r.user,this.token=a,this.roles=o.roles,this.programs=o.programs,this.userID=o.user_id,e.next=11,this.getSystemDate();case 11:return this.sessionDate=e.sent,e.next=14,this.getApiVersion();case 14:return this.systemVersion=e.sent,e.next=17,this.getHeadVersion();case 17:this.coreVersion=e.sent,e.next=21;break;case 20:throw"Unable to login";case 21:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"startSession",value:function(){sessionStorage.setItem("apiKey",this.token),sessionStorage.setItem("username",this.username),sessionStorage.setItem("userID",this.userID.toString()),sessionStorage.setItem("userRoles",JSON.stringify(this.roles)),sessionStorage.setItem("userPrograms",JSON.stringify(this.programs)),sessionStorage.setItem("sessionDate",this.sessionDate),sessionStorage.setItem("APIVersion",this.systemVersion),localStorage.setItem(r.CORE_VERSION,this.coreVersion)}},{key:"clearSession",value:function(){sessionStorage.clear()}},{key:"requestLogin",value:function(e){return this.postLogin("auth/login",{username:this.username,password:e})}},{key:"validateIfCorrectAPIVersion",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o,i,c,s,u,l,d,p,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getApiVersion();case 2:if(t=e.sent,n=function(e){return e.replace("v","").split("-")[0].split(".").map((function(e){return parseInt(e||"0")}))},r=n(t),o=Object(a["a"])(r,3),i=o[0],c=o[1],s=o[2],u=n(b),l=Object(a["a"])(u,3),d=l[0],p=l[1],m=l[2],!(i>=d&&c>=p&&s>=m)){e.next=8;break}return e.abrupt("return",!0);case 8:throw new f(t);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"checkTimeIntegrity",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSystemDate();case 2:if(t=e.sent,n=p["b"].currentDate(),t){e.next=6;break}throw"Unable to fetch server date";case 6:return e.abrupt("return",n===t);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"initDateSync",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;setInterval(Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getSystemDate();case 2:n=t.sent,sessionStorage.getItem("apiDate")?sessionStorage.setItem("apiDate",n):sessionStorage.setItem("sessionDate",n);case 4:case"end":return t.stop()}}),t)}))),t)}},{key:"setActiveVersion",value:function(e){return localStorage.setItem(r.CORE_VERSION,e)}},{key:"getActiveCoreVersion",value:function(){return localStorage.getItem(r.CORE_VERSION)}},{key:"getHeadVersion",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("HEAD",{method:"GET"});case 2:return t=e.sent,e.next=5,null===t||void 0===t?void 0:t.text();case 5:return n=e.sent,e.abrupt("return",n&&n.length<=25?n:"-");case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"versionLockingIsEnabled",value:function(){var e=this.getAppConf("enableVersionLocking");return"boolean"!==typeof e||e}},{key:"getAppConf",value:function(e){var t=sessionStorage.getItem("appConf");if(t)try{var n=JSON.parse(t);return n[e]}catch(r){console.error(r)}return null}},{key:"getApiVersion",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJson("version");case 2:return t=e.sent,e.abrupt("return",t&&t["System version"]?t["System version"]:"-");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getSystemDate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getJson("current_time");case 2:return t=e.sent,n=t.date,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getJson",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["b"].get(t);case 2:if(n=e.sent,!n||!n.ok){e.next=5;break}return e.abrupt("return",null===n||void 0===n?void 0:n.json());case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postLogin",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d["b"].post(t,n);case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return");case 5:if(!r.ok){e.next=7;break}return e.abrupt("return",r.json());case 7:if(401!==r.status){e.next=9;break}throw new m;case 9:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),e}()},"8bab":function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u}));var r,a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=n("5969");(function(e){e["GENERAL"]="General",e["CHILDREN"]="Children",e["WOMEN"]="Women"})(r||(r={}));var u=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.quarter="",e.regenerate=!1,e.ageGroup=r.GENERAL,e}return Object(o["a"])(n,[{key:"setRegenerate",value:function(e){this.regenerate=e}},{key:"getAgeGroup",value:function(){return this.ageGroup}},{key:"setQuarter",value:function(e){this.quarter=e}},{key:"setAgeGroup",value:function(e){this.ageGroup=e}},{key:"getSurvivalAnalysis",value:function(){return this.getReport("cohort_survival_analysis",{quarter:this.quarter,regenerate:this.regenerate,date:this.date,age_group:this.ageGroup,program_id:this.programID})}}]),n}(s["a"])},"8bc7":function(e,t,n){},"8c28":function(e,t,n){},"8ccc":function(e,t,n){},"8d25":function(e,t,n){"use strict";n("4ccf")},"8d67":function(e,t,n){},"8df6":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("caad"),n("d81d"),n("b0c0"),n("96cf"),n("cc6f")),u=n("8158"),l=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){var o;return Object(a["a"])(this,n),o=t.call(this,e,5,r),o.patientType="N/A",o.locationName="",o}return Object(o["a"])(n,[{key:"setLocationName",value:function(e){this.locationName=e}},{key:"setPatientType",value:function(e){this.patientType=e}},{key:"getType",value:function(){return this.patientType}},{key:"loadPatientType",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getFirstValueCoded("Type of patient");case 2:t=e.sent,t&&(this.patientType=t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"save",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.savePatientType(this.patientType);case 2:if(!this.locationName||!["External consultation","Drug Refill"].includes(this.patientType)){e.next=5;break}return e.next=5,this.saveLocationClinic(this.locationName);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveLocationClinic",value:function(e){return this.saveValueTextObs("Art clinic location",e)}},{key:"savePatientType",value:function(e){return this.saveValueCodedObs("Type of patient",e)}}],[{key:"getPatientTypes",value:function(){return u["a"].getConceptsByCategory("art_patient_type").map((function(e){var t=e.name;return{label:t,value:t}}))}},{key:"isDrugRefillPatient",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getFirstValueCoded(t,"Type of patient");case 2:return n=e.sent,e.abrupt("return",n&&"Drug Refill"===n);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(s["a"])},"8efc":function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-069a3628");Object(r["pushScopeId"])("data-v-069a3628");var o={key:0};Object(r["popScopeId"])();var i=a((function(e,t,n,i,c,s){var u=Object(r["resolveComponent"])("ion-title"),l=Object(r["resolveComponent"])("ion-toolbar"),d=Object(r["resolveComponent"])("ion-header");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:a((function(){return[Object(r["createVNode"])(l,null,{default:a((function(){return[Object(r["createVNode"])(u,{class:"ion-text-center"},{default:a((function(){return[Object(r["createVNode"])("span",{class:["his-lg-text",e.color]},Object(r["toDisplayString"])(e.title),3),e.subtitle?(Object(r["openBlock"])(),Object(r["createBlock"])("h1",o,Object(r["toDisplayString"])(e.subtitle),1)):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})})),c=n("8a30"),s=Object(r["defineComponent"])({components:{IonToolbar:c["V"],IonTitle:c["U"],IonHeader:c["q"]},props:{title:{type:String,required:!0},subtitle:{type:String},color:{type:String}}}),u=(n("b744"),n("6b0d")),l=n.n(u);const d=l()(s,[["render",i],["__scopeId","data-v-069a3628"]]);var p=d,b={style:{padding:"10px"}};function f(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("dynamic-nav");return Object(r["openBlock"])(),Object(r["createBlock"])("div",b,[Object(r["createVNode"])(c,{color:"light",btns:e.btns},null,8,["btns"])])}var m=n("1da1"),h=(n("96cf"),n("d81d"),n("b0c0"),n("0f25")),g=Object(r["defineComponent"])({components:{DynamicNav:h["a"]},props:{buttons:{type:Object,default:function(){return[]}}},computed:{btns:function(){return this.buttons.map((function(e){return e.size="large",e.color=e.color||"primary",e.visible=!0,e.styleClass="full-width-ion-btn",e.onClick||(e.onClick=Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["cb"].dismiss({action:e.name});case 2:case"end":return t.stop()}}),t)})))),e}))}}});const v=l()(g,[["render",f]]);var O=v,j=Object(r["defineComponent"])({components:{ActionHeader:p,ActionFooter:O},props:{title:{type:String,required:!0},subtitle:{type:String},actionButtons:{type:Object,required:!0},color:{type:String}}});const _=j;t["a"]=_},9128:function(e,t,n){"use strict";n("b681")},"91e4":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("d81d"),n("07ac"),n("b65f"),n("4e82"),n("96cf"),n("5969")),u=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.stock=[],e}return Object(o["a"])(n,[{key:"loadStock",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getJson("pharmacy/items",{paginate:!1});case 2:this.stock=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadTrail",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getJson("pharmacy/audit_trail",{paginate:!1});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"groupStock",value:function(){var e={};for(var t in this.stock){var n=this.stock[t],r=n["drug_id"];e[r]||(e[r]={current_quantity:0,expiry_dates:[],pack_size:n.pack_size,drug_name:null===n["drug_name"]?n["drug_legacy_name"]:n["drug_name"]}),0!==n.current_quantity&&(e[r]["current_quantity"]+=parseFloat(n.current_quantity),e[r]["expiry_dates"].push(n["expiry_date"]))}return Object.values(e).map((function(e){var t="0";t=null==e.pack_size?e.current_quantity+"(tabs)":Math.trunc(e.current_quantity/e.pack_size);var n=e.expiry_dates.sort((function(e,t){return+new Date(e)-+new Date(t)}))[0];return{drugName:e.drug_name,currentQuantity:t,expiryDate:n}}))}}]),n}(s["a"])},9283:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("3835"),a=(n("ac1f"),n("466d"),n("1276"),n("d3b7"),n("25f0"),n("99af"),n("5a0c")),o=n.n(a),i="YYYY-MM-DD",c="DD/MMM/YYYY";function s(){return sessionStorage.getItem("sessionDate")||o()().format(i)}function u(){return o()().format(c)}function l(){return o()().format(i)}function d(e,t){return o()(e).diff(t,"days")}function p(e){return o()().diff(e,"years")}function b(e){return o()(e).format("HH:mm")}function f(e){var t=o()(e).format(c);return t.match(/invalid/i)?"":t}function m(e){var t=o()(e).format(i);return t.match(/invalid/i)?"":t}function h(e){var t=o()(s()).subtract(e,"years");return t.format(i)}function g(e){return o()(s()).subtract(e,"years").year()}function v(e){return o()(e).year()}function O(e){return o()(e).format("MMM")}function j(e){return o()(e).date()}function _(e,t,n){return o()(e).add(n,t)}function w(e,t,n){return o()(e).subtract(n,t)}function k(){return o()().year()}function y(){return o()().month()}function x(){return o()().date()}function N(e,t){var n=new Date(e);return n.setDate(n.getDate()-t),m(n)}function C(e){var t=h(e).split("-"),n=Object(r["a"])(t,1),a=n[0];return parseInt(a)}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=t.toString(),a=n.toString(),o=e,i=function(e){return e.toString().match(/Unknown/i)};return parseInt(o.toString())<1900&&(o="1900"),t&&!i(t)||(r="07"),n&&!i(n)||(a="15"),m("".concat(o,"-").concat(r,"-").concat(a))}function D(e){var t=new Date(e),n=t.getMonth(),r=t.getFullYear();return n<3?{start:"".concat(r,"-01-01"),end:"".concat(r,"-03-31")}:n<6?{start:"".concat(r,"-04-01"),end:"".concat(r,"-06-30")}:n<9?{start:"".concat(r,"-07-01"),end:"".concat(r,"-09-30")}:{start:"".concat(r,"-10-01"),end:"".concat(r,"-12-31")}}function T(e,t,n){var r=o()(e);return t&&n?r.isSame(t)||r.isAfter(t)&&r.isBefore(n):n?r.isSame(n)||r.isBefore(n):!t||(r.isSame(t)||r.isAfter(t))}t["b"]={currentDate:l,getYearOfAge:C,getYear:v,dateDiffInDays:d,getAgeInYears:p,toStandardHisTimeFormat:b,toStandardHisDisplayFormat:f,currentDisplayDate:u,stitchDate:V,toStandardHisFormat:m,estimateDateFromAge:h,getYearFromAge:g,getCurrentYear:k,getCurrentMonth:y,getCurrentDay:x,getDateBeforeByDays:N,getMonth:O,getDay:j,add:_,subtract:w,getDateQuarter:D,rangeOf:T}},"92c1":function(e,t,n){"use strict";var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-col"),s=Object(r["resolveComponent"])("ion-row"),u=Object(r["resolveComponent"])("ion-grid");return Object(r["openBlock"])(),Object(r["createBlock"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.computedItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:n,size:e.grid[e.numberOfColumns]},{default:Object(r["withCtx"])((function(){return[Object(r["renderSlot"])(e.$slots,"default",{entries:t})]})),_:2},1032,["size"])})),128))]})),_:1})]})),_:1})}n("a9e3");var o=n("8a30"),i=n("2ef0"),c=Object(r["defineComponent"])({name:"MultiColumnView",components:{IonGrid:o["p"],IonRow:o["J"],IonCol:o["m"]},props:{items:{type:Object,required:!0},numberOfColumns:{type:Number,default:1}},setup:function(e){var t={1:12,2:6,3:4,4:3,6:2},n=Object(r["computed"])((function(){return Object(i["chunk"])(e.items,Math.ceil(e.items.length/e.numberOfColumns))}));return{computedItems:n,grid:t}}}),s=n("6b0d"),u=n.n(s);const l=u()(c,[["render",a]]);t["a"]=l},9441:function(e,t,n){"use strict";n("b0c0");var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-title"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("info-card"),l=Object(r["resolveComponent"])("ion-row"),d=Object(r["resolveComponent"])("ion-toolbar"),p=Object(r["resolveComponent"])("ion-header"),b=Object(r["resolveComponent"])("ion-content"),f=Object(r["resolveComponent"])("ion-button"),m=Object(r["resolveComponent"])("ion-footer"),h=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.currentField),1),Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){var t,n;return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{class:"his-lg-text"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.helpText),1)]})),_:1})]})),_:1}),null!==(t=e.currentField)&&void 0!==t&&null!==(n=t.config)&&void 0!==n&&n.toolbarInfo?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0},{default:Object(r["withCtx"])((function(){var t,n;return[Object(r["createVNode"])(u,{style:{height:"100%"},items:null===(t=e.currentField)||void 0===t||null===(n=t.config)||void 0===n?void 0:n.toolbarInfo},null,8,["items"])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(),Object(r["createBlock"])(r["KeepAlive"],null,[(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.currentField.type),{key:e.currentField.id,config:e.currentField.config,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,footerButtonEvent:e.ftBtnEvent,onOnValue:e.onFieldValue,onOnFieldActivated:e.onFieldActivated},null,8,["config","options","preset","clear","fdata","cdata","activationState","onValue","defaultValue","onValueUpdate","footerButtonEvent","onOnValue","onOnFieldActivated"]))],1024))]})),_:1}),Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{color:"dark"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.footerBtns,(function(t,n){return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:n,slot:t.slot||"start",class:t.styleClass,onClick:function(n){return e.onFtButtonClicked(t)},color:t.color||"primary",size:t.size||"large",disabled:e.onDisabledBtnState(t,"disabled",!1)},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.name),1)]})),_:2},1032,["slot","class","onClick","color","size","disabled"])),[[r["vShow"],e.onVisibleBtnState(t,"visible")]])})),128))]})),_:1})]})),_:1})]})),_:1})],64)}var o=n("2909"),i=n("1da1"),c=n("5530"),s=(n("96cf"),n("99af"),n("caad"),n("2532"),n("4de4"),n("d3b7"),n("159b"),n("a15b"),n("d95e")),u=n("2ef0"),l=n("8a30"),d=n("b5e4"),p=Object(r["withScopeId"])("data-v-1842fa50"),b=p((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-col"),s=Object(r["resolveComponent"])("ion-row"),u=Object(r["resolveComponent"])("ion-grid"),l=Object(r["resolveComponent"])("tool-bar-medium-card");return Object(r["openBlock"])(),Object(r["createBlock"])(l,null,{default:p((function(){return[Object(r["createVNode"])(u,null,{default:p((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.rowItems,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:t},{default:p((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{class:"col his-sm-text",key:t},{default:p((function(){return[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.label)+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.value),1)]})),_:2},1024)})),128))]})),_:2},1024)})),128))]})),_:1})]})),_:1})})),f=n("2b47"),m=n("7e73"),h=Object(r["defineComponent"])({name:"HisResultCard",components:{ToolBarMediumCard:f["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"]},props:{items:{type:Object,required:!0}},computed:{rowItems:function(){return m["a"].convertArrayToTurples(this.items,2)}}}),g=(n("369d"),n("6b0d")),v=n.n(g);const O=v()(h,[["render",b],["__scopeId","data-v-1842fa50"]]);var j=O,_=Object(r["defineComponent"])({name:"TouchscreenForm",components:Object(c["a"])({InfoCard:j,IonButtons:l["e"],IonPage:l["F"],IonContent:l["n"],IonFooter:l["o"],IonToolbar:l["V"],IonButton:l["d"],IonHeader:l["q"],IonTitle:l["U"],IonCol:l["m"],IonRow:l["J"]},s["a"]),emits:["onFinish","onIndex"],props:{onFinish:{type:Function},skipSummary:{type:Boolean,default:!1},activeField:{type:String},fields:{type:Object,required:!0},cancelDestinationPath:{type:String}},data:function(){return{ftBtnEvent:{eventIndex:0,btnName:"",btnOutput:null},helpText:"",valueClearIndex:0,currentIndex:0,currentField:{},currentFieldContext:null,formData:{},computedFormData:{},footerBtns:[],currentFields:[],state:""}},watch:{fields:{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(Object(u["isEmpty"])(e)){n.next=11;break}if(t.buildFormData(e),r=e,t.skipSummary||(r=[].concat(Object(o["a"])(r),[t.getDefaultSummaryField()])),t.currentFields=r,!t.activeField){n.next=9;break}t.mountField(t.activeField),n.next=11;break;case 9:return n.next=11,t.onNext();case 11:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0},state:{handler:function(e){["onValue","onClear","next","prev","onfinish","onload","unload"].includes(e)&&(l["ab"].getTop().then((function(e){return e?l["ab"].dismiss():null})),l["cb"].getTop().then((function(e){return e?l["cb"].dismiss():null})),l["Y"].getTop().then((function(e){return e?l["Y"].dismiss():null})),l["eb"].getTop().then((function(e){return e?l["eb"].dismiss():null})))},immediate:!0,deep:!0},activeField:{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&t.mountField(e);case 1:case"end":return n.stop()}}),n)})))()}}},mounted:function(){this.footerBtns=[this.getCancelBtn()]},methods:{clearValue:function(){this.valueClearIndex+=1,this.setActiveFieldValue(null)},onFtButtonClicked:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.ftBtnEvent.eventIndex+=1,t.ftBtnEvent.btnName=e.name,n.next=4,e.onClick(t.formData,t.computedFormData,t.currentFieldContext);case 4:t.ftBtnEvent.btnOutput=n.sent,e.onClickComponentEvents?t.ftBtnEvent.onClickComponentEvents=e.onClickComponentEvents:t.ftBtnEvent.onClickComponentEvents&&delete t.ftBtnEvent.onClickComponentEvents;case 6:case"end":return n.stop()}}),n)})))()},mountField:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("_NEXT_FIELD_"!==e){n.next=4;break}return n.next=3,t.goNext();case 3:return n.abrupt("return",t.$emit("onIndex",t.currentIndex));case 4:r=Object(u["findIndex"])(t.currentFields,{id:e}),r>=0&&r<=t.currentFields.length&&(t.setActiveField(r),t.$emit("onIndex",r));case 6:case"end":return n.stop()}}),n)})))()},getCancelBtn:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t||{};return{name:n.name||"Cancel",color:n.color||"danger",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.onClick){t.next=2;break}return t.abrupt("return",n.onClick());case 2:return t.next=4,Object(d["a"])("Are you sure you want to cancel?");case 4:r=t.sent,r&&(e.cancelDestinationPath?e.$router.push(e.cancelDestinationPath):e.$router.back());case 6:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()}},getClearBtn:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t||{};return{name:n.name||"Clear",color:n.color||"warning",slot:"end",onClick:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.onClick){t.next=2;break}return t.abrupt("return",n.onClick());case 2:return t.next=4,Object(d["a"])("Are you sure you want to clear field data?");case 4:r=t.sent,r&&e.clearValue();case 6:case"end":return t.stop()}}),t)})));function r(){return t.apply(this,arguments)}return r}()}},getBackBtn:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t||{},r=function(){return!(1===e.currentFields.length||e.currentIndex<=0)};return{name:(null===n||void 0===n?void 0:n.name)||"Back",slot:"end",state:{disabled:{default:function(){return!1},onsubmit:function(){return!0}},visible:{onload:function(){return r()},default:function(){return r()}}},onClick:function(){return n.onClick?n.onClick():e.goBack()}}},getNextBtn:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t||{},r=function(){return!(e.currentIndex+1>=e.currentFields.length||e.currentFields.length<=1)};return{name:(null===n||void 0===n?void 0:n.name)||"Next",color:(null===n||void 0===n?void 0:n.color)||"success",slot:"end",state:{disabled:{onsubmit:function(){return!0},default:function(e){return"requireNext"in e&&!e.requireNext}},visible:{onsubmit:function(){return!1},onfinish:function(){return!1},default:function(){return r()},onload:function(){return r()}}},onClick:function(){return n.onClick?n.onClick():e.goNext()}}},getFinishBtn:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t||{},r=function(){return e.currentIndex+1>=e.currentFields.length};return{name:(null===n||void 0===n?void 0:n.name)||"Finish",color:(null===n||void 0===n?void 0:n.color)||"success",slot:"end",state:{disabled:{default:function(){return!1},onsubmit:function(){return!0}},visible:{onfinish:function(){return!0},onsubmit:function(){return!0},default:function(){return r()},onload:function(){return r()}}},onClick:function(){return n.onClick?n.onClick():e.goNext()}}},onVisibleBtnState:function(e){var t;try{var n,r;if(null!==(n=this.currentField)&&void 0!==n&&null!==(r=n.config)&&void 0!==r&&r.hiddenFooterBtns.includes(e.name))return!1}catch(a){}if(null!==e&&void 0!==e&&null!==(t=e.state)&&void 0!==t&&t.visible){if(this.state in e.state.visible)return e.state.visible[this.state](this.currentField,this.formData);if("default"in e.state.visible)return e.state.visible["default"](this.currentField,this.formData)}return!0},onDisabledBtnState:function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.state)&&void 0!==t&&t.disabled){if(this.state in e.state.disabled)return e.state.disabled[this.state](this.currentField,this.formData);if("default"in e.state.disabled)return e.state.disabled["default"](this.currentField,this.formData)}return!1},getDefaultSummaryField:function(){var e=this;return{id:"__form_summary__",helpText:"Summary",type:s["b"].TT_SUMMARY,config:{hiddenFooterBtns:["Clear"]},options:function(t,n){var r=[],a=function(a){var o=e.currentFields.filter((function(e){return e.id===a||e.proxyID===a}))[0],i=t[a];if(!i||void 0!=o.appearInSummary&&!o.appearInSummary(t,a))return"continue";var c=Array.isArray(i)?i:[i];c.forEach((function(e){o.summaryMapValue?r.push(o.summaryMapValue(e,t,n[a])):r.push({label:o.helpText,value:e.label})}))};for(var o in t)a(o);return r}}},resolveFormValues:function(e){var t={};for(var n in e)null!=e[n]&&(t[n]=e[n]);return t},onFinishAction:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.resolveFormValues(e.formData),r=e.resolveFormValues(e.computedFormData),!e.onFinish){t.next=13;break}return t.prev=3,e.state="onsubmit",t.next=7,e.onFinish(n,r);case 7:t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](3),console.error(t.t0),Object(d["c"])(t.t0);case 13:e.state="onfinish",e.$emit("onFinish",n,r);case 15:case"end":return t.stop()}}),t,null,[[3,9]])})))()},goNext:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.currentField.validation){t.next=5;break}if(n=e.formData[e.currentField.id],r=e.currentField.validation(n,e.formData,e.computedFormData),!r){t.next=5;break}return t.abrupt("return",Object(d["e"])(r.join(", "),2e3));case 5:if(!e.currentField.beforeNext){t.next=10;break}return t.next=8,e.currentField.beforeNext(e.formData[e.currentField.id],e.formData,e.computedFormData,e);case 8:if(t.sent){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,e.onNext();case 12:case"end":return t.stop()}}),t)})))()},goBack:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.currentIndex;case 1:if(!(n>=0)){t.next=21;break}if(r=e.currentFields[n],Object(u["isEmpty"])(e.currentField)||e.currentField.id!==r.id){t.next=5;break}return t.abrupt("continue",18);case 5:return t.prev=5,t.next=8,e.checkFieldCondition(r);case 8:if(t.sent){t.next=10;break}return t.abrupt("continue",18);case 10:t.next=15;break;case 12:return t.prev=12,t.t0=t["catch"](5),t.abrupt("continue",18);case 15:return t.next=17,e.setActiveField(n,"prev");case 17:return t.abrupt("return");case 18:--n,t.next=1;break;case 21:case"end":return t.stop()}}),t,null,[[5,12]])})))()},checkFieldCondition:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.t0=e.condition,!n.t0){n.next=5;break}return n.next=4,e.condition(t.formData,t.computedFormData);case 4:n.t0=!n.sent;case 5:if(!n.t0){n.next=10;break}return"function"===typeof e.onConditionFalse&&e.onConditionFalse(),t.formData[e.id]=e.defaultOutput?e.defaultOutput(t.formData,t.computedFormData):null,e.computedValue&&(t.computedFormData[e.id]=e.defaultComputedOutput?e.defaultComputedOutput(t.formData,t.computedFormData):null),n.abrupt("return",!1);case 10:return n.abrupt("return",!0);case 11:case"end":return n.stop()}}),n)})))()},onFieldActivated:function(e){this.state="onload",this.currentFieldContext=e,this.currentField.onload&&this.currentField.onload(e)},onUnload:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.length>0&&void 0!==e[0]?e[0]:"",n.prev=1,t.state="unload",Object(u["isEmpty"])(t.currentField)||!t.currentField.unload){n.next=7;break}return a=t.formData[t.currentField.id],n.next=7,t.currentField.unload(a,r,t.formData,t.computedFormData,t);case 7:n.next=12;break;case 9:n.prev=9,n.t0=n["catch"](1),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})))()},buildFormData:function(e){var t=this;this.formData={},e.forEach((function(e){e.proxyID&&(t.formData[e.proxyID]=null),t.formData[e.id]=null}))},setActiveFieldValue:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.state="onValue",r=t.currentField.proxyID,a=t.currentField.id,r&&(t.formData[r]=e),t.formData[a]=e,o=null,t.currentField.computedValue&&(e&&(o=t.currentField.computedValue(e,t.formData,t.computedFormData)),r?t.computedFormData[r]=o:t.computedFormData[a]=o),"function"===typeof t.currentField.updateHelpTextOnValue&&(t.helpText=t.currentField.updateHelpTextOnValue(e,o));case 8:case"end":return n.stop()}}),n)})))()},onNext:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.currentFields.length,r=e.currentIndex;case 2:if(!(r<n)){t.next=24;break}if(a=e.currentFields[r],Object(u["isEmpty"])(e.currentField)||e.currentField.id!==a.id){t.next=6;break}return t.abrupt("continue",21);case 6:return t.prev=6,t.next=9,e.checkFieldCondition(a);case 9:if(t.sent){t.next=11;break}return t.abrupt("continue",21);case 11:t.next=16;break;case 13:return t.prev=13,t.t0=t["catch"](6),t.abrupt("continue",21);case 16:if("function"!==typeof e.currentField.exitsForm||!e.currentField.exitsForm(e.formData,e.computedFormData)){t.next=18;break}return t.abrupt("break",24);case 18:return t.next=20,e.setActiveField(r,"next");case 20:return t.abrupt("return");case 21:++r,t.next=2;break;case 24:return t.next=26,e.onFinishAction();case 26:case"end":return t.stop()}}),t,null,[[6,13]])})))()},setActiveField:function(e){var t=arguments,n=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=t.length>1&&void 0!==t[1]?t[1]:"",r.next=3,n.onUnload(o);case 3:n.state=o,n.currentIndex=e,n.currentField=n.currentFields[n.currentIndex],n.helpText=n.currentField.dynamicHelpText?n.currentField.dynamicHelpText(n.formData):"function"===typeof n.currentField.updateHelpTextOnValue?n.currentField.updateHelpTextOnValue(n.formData[n.currentField.id],n.computedFormData[n.currentField.id]):n.currentField.helpText,n.footerBtns=[n.getCancelBtn()],n.currentField.config&&n.currentField.config.footerBtns&&(n.footerBtns=n.footerBtns.concat(n.currentField.config.footerBtns)),i=null===(a=n.currentField.config)||void 0===a?void 0:a.overrideDefaultFooterBtns,n.footerBtns.push(n.getClearBtn(null===i||void 0===i?void 0:i.clearBtn)),n.footerBtns.push(n.getBackBtn(null===i||void 0===i?void 0:i.backBtn)),n.footerBtns.push(n.getNextBtn(null===i||void 0===i?void 0:i.nextBtn)),n.footerBtns.push(n.getFinishBtn(null===i||void 0===i?void 0:i.finishBtn));case 14:case"end":return r.stop()}}),r)})))()},onFieldValue:function(e){this.setActiveFieldValue(e),"requireNext"in this.currentField&&!this.currentField.requireNext&&this.onNext()}}});const w=v()(_,[["render",a]]);t["a"]=w},9582:function(e,t,n){},"958b":function(e,t,n){"use strict";n("1406")},"95a0":function(e,t,n){"use strict";n("cf71")},"95cc":function(e,t,n){},9719:function(e,t,n){"use strict";n("6f4a")},"97ed":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("b85c"),a=n("1da1"),o=n("d4ec"),i=n("bee2"),c=n("262e"),s=n("2caf"),u=(n("b0c0"),n("d3b7"),n("3ca3"),n("ddb0"),n("d81d"),n("99af"),n("96cf"),n("cc6f")),l=n("8158"),d=n("b89f"),p=n("1c74"),b=n("5a0c"),f=n.n(b),m=n("2ef0"),h=function(e){Object(c["a"])(n,e);var t=Object(s["a"])(n);function n(e,r){return Object(o["a"])(this,n),t.call(this,e,121,r)}return Object(i["a"])(n,[{key:"getRadiologyObs",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="radiology/radiology_orders?patient_id="+t,e.next=3,p["e"].getJson(n);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"showPreviousRadiolgy",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getRadiologyObs(t.getID());case 2:if(e.t0=e.sent.length,!(e.t0>0)){e.next=5;break}return e.abrupt("return",!0);case 5:return e.abrupt("return",!1);case 6:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getPreviousRadiologyExaminations",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["e"].getThirdpartyApps();case 2:n=e.sent,a="",o=Object(r["a"])(n);try{for(o.s();!(i=o.n()).done;)c=i.value,"pacs"==c.name&&(a=c.url)}catch(u){o.e(u)}finally{o.f()}return Object(m["isEmpty"])(a)&&(a="opd/encounters/radiology/".concat(this.patientID)),e.next=9,this.getRadiologyObs(t.getID());case 9:if(s=e.sent,s.length>0){e.next=14;break}return e.abrupt("return",!1);case 14:return e.abrupt("return",{data:s,url:a});case 15:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"submitToPacs",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var o,i,c,s,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=Object(r["a"])(t);try{for(i.s();!(c=i.n()).done;)s=c.value,o=s.children[0].accession_number}catch(b){i.e(b)}finally{i.f()}return e.next=4,Promise.all(t.map(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",{main_value_text:t.value_text,obs_id:t.obs_id,sub_value_text:t.children[0].value_text});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:return u=e.sent,l={patient_name:n.getFullName(),patientAge:n.getAge(),patientDOB:n.getBirthdate(),patientGender:n.getGender(),national_id:n.getNationalID(),person_id:n.getID(),encounter_id:this.getEncounterID(),date_created:this.getDate(),accession_number:o},d={username:p["e"].getUserName(),userID:p["e"].getUserID(),userRoles:p["e"].getUserRoles()},e.abrupt("return",p["e"].postJson("radiology/radiology_orders",{patient_details:l,physician_details:d,radiology_orders:u}));case 8:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAccesionNumber",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["e"].getJson("sequences/next_accession_number");case 2:return e.abrupt("return",e.sent["accession_number"]);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"obsObj",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getAccesionNumber();case 2:n=e.sent,a=[],o=Object(r["a"])(t),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=24;break}return c=i.value,e.t0=a,e.t1=c.concept_id,e.next=13,l["a"].getConceptName(c.child.concept_id);case 13:return e.t2=e.sent,e.t3=c.child.concept_id,e.t4=n,e.next=18,l["a"].getConceptName(c.child.value_coded);case 18:e.t5=e.sent,e.t6={concept_id:e.t3,accession_number:e.t4,value_text:e.t5},e.t7={concept_id:e.t1,value_text:e.t2,child:e.t6},e.t0.push.call(e.t0,e.t7);case 22:e.next=7;break;case 24:e.next=29;break;case 26:e.prev=26,e.t8=e["catch"](5),o.e(e.t8);case 29:return e.prev=29,o.f(),e.finish(29);case 32:return e.abrupt("return",a);case 33:case"end":return e.stop()}}),e,this,[[5,26,29,32]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"printOrders",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,o,i,c,s,u,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=new d["a"],o=n.getNationalID(),i=n.getFullName(),c=[],s=Object(r["a"])(t),e.prev=5,s.s();case 7:if((u=s.n()).done){e.next=31;break}return p=u.value,e.t0=c,e.t1="?accession_number=",e.next=13,this.getAccesionNumber();case 13:return e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),e.t4="/radiology/barcode"+e.t3,e.t5="&patient_national_id=".concat(o),e.t6=e.t4+e.t5,e.t7="&patient_name=".concat(i),e.t8=e.t6+e.t7,e.t9="&radio_order=",e.next=23,l["a"].getConceptName(p.child.value_coded);case 23:e.t10=e.sent,e.t11=e.t9.concat.call(e.t9,e.t10),e.t12=e.t8+e.t11,e.t13="&date_created=".concat(f()(p.obs_datetime)),e.t14=e.t12+e.t13,e.t0.push.call(e.t0,e.t14);case 29:e.next=7;break;case 31:e.next=36;break;case 33:e.prev=33,e.t15=e["catch"](5),s.e(e.t15);case 36:return e.prev=36,s.f(),e.finish(36);case 39:return e.next=41,a.batchPrintLbls(c,!0);case 41:case"end":return e.stop()}}),e,this,[[5,33,36,39]])})));function t(t,n){return e.apply(this,arguments)}return t}()}],[{key:"getRadiologyList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"",e.abrupt("return",l["a"].getConceptSet(t,n));case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(u["a"])},"985a":function(e,t,n){"use strict";n("177d")},9877:function(e,t,n){},"996c":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return b})),n.d(t,"c",(function(){return f}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("96cf"),n("d81d"),n("b0c0"),n("caad"),n("2532"),n("cc6f")),u=n("71c3"),l=n("9b7c"),d=n("76f1"),p=[{label:"ONCE A DAY (OD)",code:"OD",value:1},{label:"TWICE A DAY (BD)",code:"BD",value:2},{label:"THREE TIMES A DAY (TDS)",code:"TDS",value:3},{label:"FOUR TIMES A DAY (QID)",code:"QID",value:4},{label:"FIVE TIMES A DAY (5X/D)",code:"5X/D",value:5},{label:"SIX TIMES A DAY (Q4HRS)",code:"Q4HRS",value:6},{label:"IN THE MORNING (QAM)",code:"QAM",value:1},{label:"ONCE A DAY AT NOON (QNOON)",code:"QNOON",value:1},{label:"IN THE EVENING (QPM)",code:"QPM",value:1},{label:"ONCE A DAY AT NIGHT (QHS)",code:"QHS",value:1},{label:"EVERY OTHER DAY (QOD)",code:"QOD",value:.5},{label:"ONCE A WEEK (QWK)",code:"QWK",value:.14},{label:"ONCE A MONTH",code:"ONCE A MONTH",value:.03},{label:"TWICE A MONTH",code:"TWICE A MONTH",value:.071}],b=[{drug_id:236,duration:3,tabs:6,name:"Lumefantrine + Arthemether 1 x 6",dose_strength:1,units:"tabs",frequency:2},{drug_id:237,duration:3,tabs:12,name:"Lumefantrine + Arthemether 2 x 6",dose_strength:2,units:"tabs",frequency:2},{drug_id:238,duration:3,tabs:18,name:"Lumefantrine + Arthemether 3 x 6",dose_strength:3,units:"tabs",frequency:2},{drug_id:239,duration:3,tabs:24,name:"Lumefantrine + Arthemether 4 x 6",dose_strength:4,units:"tabs",frequency:2}],f=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,25,r)}return Object(o["a"])(n,[{key:"loadDrugs",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]?o[1]:1,r=o.length>2&&void 0!==o[2]?o[2]:10,e.next=5,d["a"].getDrugs({name:t,page:n,page_size:r});case 5:return a=e.sent,e.abrupt("return",a.map((function(e){return{label:e.name,value:e.name,other:e}})));case 7:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasMalaria",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getLatestMalariaTestResult(this.patientID);case 2:if(t=e.sent,"No"!==t){e.next=15;break}return e.next=6,s["a"].getAllValueCoded(this.patientID,"Primary diagnosis");case 6:if(n=e.sent,!n.includes("Malaria")){e.next=9;break}return e.abrupt("return",!0);case 9:return e.next=11,s["a"].getAllValueCoded(this.patientID,"Secondary diagnosis");case 11:if(r=e.sent,!r.includes("Malaria")){e.next=14;break}return e.abrupt("return",!0);case 14:return e.abrupt("return",!1);case 15:return e.abrupt("return","Positive"===t);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createDrugOrder",value:function(e){return u["a"].create({encounter_id:this.encounterID,drug_orders:e})}}]),n}(s["a"])},"9a5e":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5530"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("d81d"),n("07ac"),n("d3b7"),n("159b"),n("5969")),u=n("bef6"),l=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.org="pepfar",e.initializeArvRefillReportTables=!0,e}return Object(o["a"])(n,[{key:"initArvRefillPeriod",value:function(e){this.initializeArvRefillReportTables=e}},{key:"setOrg",value:function(e){this.org=e}},{key:"getTxMMDClientLevelData",value:function(e){var t=u["a"].parameterizeObjToString({start_date:this.startDate,end_date:this.endDate,program_id:this.programID,date:this.date,org:this.org}),n="tx_mmd_client_level_data?".concat(t);return s["a"].postJson(n,{patient_ids:e})}},{key:"remapTxClientLevelData",value:function(e){return e.map((function(e){var t=null,n=[];for(var a in e){var o=Object.values(e[a]);o.forEach((function(e){for(var r in e){var a=e[r];t||(t={id:a.arv_number,dob:a.birthdate,dispenseDate:a.start_date}),n.push({name:a.drug_name,quantity:a.quantity,dose:a.dose_per_day})}}))}return Object(r["a"])(Object(r["a"])({},t),{},{drugs:n})}))}},{key:"getTxCurrMMDReport",value:function(e,t){return this.getReport("arv_refill_periods",{org:this.org,min_age:"".concat(e),max_age:"".concat(t),initialize_tables:"".concat(this.initializeArvRefillReportTables)})}},{key:"getTxMlReport",value:function(){return this.getReport("tx_ml")}},{key:"getTxRttReport",value:function(){return this.getReport("tx_rtt")}}]),n}(s["a"])},"9ad3":function(e,t,n){},"9b7c":function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n("b85c"),a=n("2909"),o=n("1da1"),i=n("5530"),c=n("d4ec"),s=n("bee2"),u=n("45eb"),l=n("7e84"),d=n("262e"),p=n("2caf"),b=(n("96cf"),n("d81d"),n("d3b7"),n("4de4"),n("99af"),n("3ca3"),n("ddb0"),n("ac1f"),n("466d"),n("b0c0"),n("25f0"),n("5319"),n("1c74")),f=n("9283"),m=n("8158"),h=n("7957"),g=n("2ef0"),v=n("5a0c"),O=n.n(v),j=function(e){Object(d["a"])(n,e);var t=Object(p["a"])(n);function n(){return Object(c["a"])(this,n),t.call(this)}return Object(s["a"])(n,null,[{key:"create",value:function(e){return Object(u["a"])(Object(l["a"])(n),"postJson",this).call(this,"/lab/orders",e)}},{key:"getOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(u["a"])(Object(l["a"])(n),"getJson",this).call(this,"/lab/orders",Object(i["a"])({patient_id:e},t))}},{key:"getOrdersIncludingGivenResultStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.getOrders(t,n);case 3:return r=e.sent.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(i["a"])(Object(i["a"])({},t),{},{result_given:!1}),r=t.tests.filter((function(e){return null!=e.result})).map((function(e){return e.result})).reduce((function(e,t){return[].concat(Object(a["a"])(e),Object(a["a"])(t))}),[]).reduce((function(e,t){return t.id}),null),e.prev=2,r){e.next=7;break}e.t0="N/A",e.next=12;break;case 7:return e.next=9,h["a"].get(r);case 9:return e.next=11,e.sent.children.reduce(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].getConceptID("Result Given to Client");case 2:if(e.t1=e.sent,e.t2=n.concept_id,e.t0=e.t1===e.t2,!e.t0){e.next=10;break}return e.next=8,m["a"].getConceptName(n.value_coded);case 8:e.t3=e.sent,e.t0="Yes"===e.t3;case 10:if(!e.t0){e.next=14;break}e.t4="Yes",e.next=15;break;case 14:e.t4=t;case 15:return e.abrupt("return",e.t4);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),"No");case 11:e.t0=e.sent;case 12:n["result_given"]=e.t0,e.next=18;break;case 15:e.prev=15,e.t1=e["catch"](2),console.error(e.t1);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getTestTypes",value:function(){return Object(u["a"])(Object(l["a"])(n),"getJson",this).call(this,"/lab/test_types")}},{key:"getTestTypesBySpecimen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(u["a"])(Object(l["a"])(n),"getJson",this).call(this,"/lab/test_types",{specimen_type:e})}},{key:"getSpecimens",value:function(e){return Object(u["a"])(Object(l["a"])(n),"getJson",this).call(this,"/lab/specimen_types",{test_type:e})}},{key:"getViralLoadOrders",value:function(e){return e.filter((function(e){try{var t=e.tests[0].result;return!!Array.isArray(t)&&(e.tests.length>0&&e.tests[0].result.length>0)}catch(n){console.log(n)}}))}},{key:"getLatestMalariaTestResult",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i,c,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:this.getSessionDate(),e.next=3,this.getOrders(t);case 3:if(a=e.sent,o=O()(n).subtract(7,"day"),i=a.filter((function(e){var t,n=Object(r["a"])(e.tests);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(!Object(g["isEmpty"])(a.result)&&a.name.match(/Malaria/i)&&O()(e.order_date).isAfter(o))return!0}}catch(i){n.e(i)}finally{n.f()}return!1})),!(i.length>0)){e.next=9;break}return c=i[0].tests.some((function(e){return e.result.some((function(e){return e.value.toString().match(/negative|no/i)}))})),e.abrupt("return",c?"Negative":"Positive");case 9:return e.abrupt("return","No");case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isDBSResult",value:function(e){return e.match(/DBS/i)}},{key:"isValidVLResult",value:function(e,t,n){return this.isDBSResult(e)?t.match(/</)&&n.match(/ldl|400|550|839/i)||t.match(/=/)&&parseFloat(n)>=400||">"!==t:t.match(/</)&&n.match(/ldl|20|40|150/i)||t.match(/=/)&&parseFloat(n)>=20}},{key:"isHighViralLoadResult",value:function(e){return"="===e.value_modifier&&parseFloat(e.value)>=1e3||(("<"===e.value_modifier||"&lt"===e.value_modifier)&&parseFloat(e.value)>1e3||(">"===e.value_modifier||"&gt"===e.value_modifier)&&(parseFloat(e.value)>=1e3||"LDL"=="".concat(e.value).toUpperCase().replace(/\s+/g,"")))}},{key:"formatLabs",value:function(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].accession_number,a="Unknown"==e[n].specimen.name?"N/A":e[n].specimen.name,o=e[n].order_date,i=e[n].tests,c=0;c<i.length;c++){for(var s=i[c].result?i[c].result:[],u=[],l=[],d="",p=0;p<s.length;p++){d=null===s[p].date?"":"".concat(s[p].date);var b=s[p].indicator.name,m=s[p].value,h=s[p].value_modifier.replace("&lt;","<").replace("&gt;",">");u.push(b+"   "+h+m),l.push(s[p].id)}t.push({encounter_id:e[n].encounter_id,order_id:e[n].order_id,result_given:e[n]["result_given"]||"N/A",accession_number:r,test_name:i[c].name,specimen:a,ordered:o?f["b"].toStandardHisFormat(o):"",result:u,resultIds:l,released:d?f["b"].toStandardHisFormat(d):""})}return t}},{key:"buildLabOrders",value:function(e,t){var r=this;return t.map((function(t){var a=m["a"].getCachedConceptID(t.reason,!0),o={encounter_id:e.encounter_id,tests:[{concept_id:t.concept_id}],reason_for_test_id:a,target_lab:Object(u["a"])(Object(l["a"])(n),"getLocationName",r).call(r),date:f["b"].toStandardHisFormat(Object(u["a"])(Object(l["a"])(n),"getSessionDate",r).call(r)),requesting_clinician:Object(u["a"])(Object(l["a"])(n),"getUserName",r).call(r)};return t.specimenConcept&&(o["specimen"]={concept_id:t.specimenConcept}),o}))}},{key:"saveOrdersArray",value:function(e,t){return this.create({encounter_id:e,orders:t})}}]),n}(b["e"])},"9b7cc":function(e,t,n){},"9c73":function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("15fd"),a=n("5530"),o=n("1da1"),i=n("d4ec"),c=n("bee2"),s=n("262e"),u=n("2caf"),l=(n("96cf"),n("d81d"),n("d3b7"),n("3ca3"),n("ddb0"),n("b0c0"),n("159b"),n("cc6f")),d=n("9b7c"),p=n("b89f"),b=["name"],f=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e){return Object(i["a"])(this,n),t.call(this,e,57)}return Object(c["a"])(n,[{key:"getOrders",value:function(e){return d["a"].getOrders(this.patientID,{status:e})}},{key:"voidOrder",value:function(e,t){return d["a"].void("lab/orders/".concat(e),{reason:t})}},{key:"updateOrderSpecimen",value:function(e,t){return d["a"].putJson("lab/orders/".concat(e),{specimen:{concept_id:t}})}},{key:"printSpecimenLabel",value:function(e){return(new p["a"]).printLbl("lab/labels/order?order_id=".concat(e))}},{key:"placeOrder",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],e.next=3,this.createEncounter();case 3:if(r=e.sent,r){e.next=6;break}throw"Unable to create encounter";case 6:return o=Object(a["a"])({encounter_id:r.encounter_id,date:this.date},t),o.requesting_clinician||(o["requesting_clinician"]=d["a"].getUserName()),n=t.combine_tests?[o]:o.tests.map((function(e){var t=Object(a["a"])({},o);return t.tests=[e],t})),e.abrupt("return",d["a"].postJson("lab/orders",{orders:n}));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}],[{key:"getSpecimensForTests",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return d["a"].getSpecimens(e.name)})));case 2:return n=e.sent,e.abrupt("return",this.getCommonSpecimens(n));case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCommonSpecimens",value:function(e){var t={},n=[];for(var o in e.forEach((function(e){e.forEach((function(e){var n=e.name,o=Object(r["a"])(e,b),i=Object(a["a"])({name:n},o);t[n]?t[n].push(i):t[n]=[i]}))})),t)t[o].length>=e.length&&n.push(t[o][0]);return n}}]),n}(l["a"])},"9ceb":function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r=n("5530"),a=(n("498a"),n("ac1f"),n("5319"),n("d3b7"),n("159b"),n("9283")),o=n("25da"),i=n("2ef0");function c(e){return"string"!==typeof e?e:e.replace(/,/gi," ").trim()}function s(e,t){var n=[],r=[],a=function(r){var a=[];t[r].forEach((function(t,n){var r=e[e.length-1][n];"exportable"in r&&r.exportable&&a.push(t.value?c(t.value):c(t.td))})),n.push(a)};for(var o in t)a(o);var s=function(t){var n=[];e[t].forEach((function(e){e.exportable&&n.push(e.value?c(e.value):c(e.th))})),Object(i["isEmpty"])(n)||r.push(n)};for(var u in e)s(u);return{columns:r,rows:n}}function u(e){var t={th:function(){return e.th?e.th:""},td:function(){return e.td?e.td:""},value:function(){return e.value?e.value:""},type:function(){return e.type?e.type:"string"},exportable:function(){return!("exportable"in e)||e.exportable},sortable:function(){return!("sortable"in e)||e.sortable},colspan:function(){return e.colspan?e.colspan:0},cssClass:function(){return e.cssClass?e.cssClass:0},style:function(){return e.style?e.style:0},ascSort:function(){return e.ascSort?e.ascSort:function(e,t){return Object(o["a"])(t).asc((function(t){var n,r;return(null===(n=t[e])||void 0===n?void 0:n.sortValue)||(null===(r=t[e])||void 0===r?void 0:r.td)}))}},descSort:function(){return e.descSort?e.descSort:function(e,t){return Object(o["a"])(t).desc((function(t){var n,r;return(null===(n=t[e])||void 0===n?void 0:n.sortValue)||(null===(r=t[e])||void 0===r?void 0:r.td)}))}}},n={};for(var r in t)n[r]=t[r]();return n}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;return n.th=e,n.type="string",u(n)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;return n.th=e,n.type="date",u(n)}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;return n.th=e,n.type="number",u(n)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;return n.td=e?a["b"].toStandardHisDisplayFormat(e):"",u(n)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["a"])({td:e},t)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object(r["a"])({td:e,event:{click:t,obj:"link"}},n)}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o={td:e,event:{click:t,color:a,obj:"button"}};return n.event&&(o.event=Object(r["a"])(Object(r["a"])({},o.event),n.event),delete n.event),Object.assign(o,n)}t["a"]={thTxt:l,thNum:p,thDate:d,td:f,tdBtn:h,tdDate:b,tdLink:m}},"9df8":function(e,t,n){},"9e49":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("96cf"),n("ac1f"),n("466d"),n("99af"),n("cc6f")),u=n("1c74"),l=n("b89f"),d=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(e,r){var o;return Object(a["a"])(this,n),o=t.call(this,e,32,r),o.hivStatus="",o.artStatus="",o.arvNumber="",o.arvStartDate="",o.isPregnancyTestDone=!1,o.isSubsequentVisit=!1,o}return Object(o["a"])(n,[{key:"getHivStatus",value:function(){return this.hivStatus}},{key:"getArtStatus",value:function(){return this.artStatus}},{key:"getArvNumber",value:function(){return this.arvNumber}},{key:"getArvStartDate",value:function(){return this.arvStartDate}},{key:"isHivPositive",value:function(){return!!this.hivStatus.match(/positive/i)}},{key:"isAtRiskOfPreEclampsia",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].getFirstValueNumber(this.patientID,"Systolic blood pressure");case 2:return t=e.sent,e.next=5,s["a"].getFirstValueNumber(this.patientID,"Diastolic blood pressure");case 5:return n=e.sent,e.abrupt("return",t&&n&&t>=140&&n>=90);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadSubsequentVisit",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["e"].getJson("programs/".concat(this.programID,"/patients/").concat(this.patientID,"/subsequent_visit"));case 2:if(t=e.sent,!t){e.next=12;break}if(this.hivStatus=t["hiv_status"],this.hivStatus){e.next=10;break}return e.next=8,this.getFirstValueCoded("HIV status");case 8:n=e.sent,this.hivStatus="".concat(n).match(/positive/i)?"Positive":"";case 10:this.isSubsequentVisit=t["subsequent_visit"],this.isPregnancyTestDone=t["pregnancy_test"];case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"printLabResults",value:function(){return(new l["a"]).printLbl("/programs/".concat(this.programID,"/patients/").concat(this.patientID,"/labels/lab_results?date=").concat(this.date))}},{key:"loadArtStatus",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["e"].getJson("programs/".concat(this.programID,"/patients/").concat(this.patientID,"/art_hiv_status"));case 2:t=e.sent,t&&(this.hivStatus=t["hiv_status"]||this.hivStatus,this.artStatus=t["art_status"]||"",this.arvNumber=t["arv_number"]||"",this.arvStartDate=t["arv_start_date"]||"");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(s["a"])},"9ed9":function(e,t,n){"use strict";n("d4e7")},a039:function(e,t,n){"use strict";n("1c70")},a16a:function(e,t,n){"use strict";n("071f")},a246:function(e,t,n){},a3a5:function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),a={key:0},o={key:0},i={key:1},c={key:1},s={key:2};function u(e,t,n,u,l,d){var p=Object(r["resolveComponent"])("ion-button");return Object(r["openBlock"])(),Object(r["createBlock"])("table",{class:["his-md-text",e.classStyles]},[Object(r["createVNode"])("tr",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.columns,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("th",{key:t},Object(r["toDisplayString"])(e),1)})),128))]),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.rows,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(u,l){return Object(r["openBlock"])(),Object(r["createBlock"])("td",{class:e.getColorCodeClass(n,l),key:l},[e.isLink(u)?(Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[u.isActive?(Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])("a",{href:"#",onClick:Object(r["withModifiers"])((function(e){return u.action(t)}),["prevent"])},Object(r["toDisplayString"])(u.value),9,["onClick"])])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",i,Object(r["toDisplayString"])(u.value),1))])):e.isActionButton(u)?(Object(r["openBlock"])(),Object(r["createBlock"])("div",c,[Object(r["createVNode"])(p,{color:(null===u||void 0===u?void 0:u.color)||"primary",style:u.style,onClick:function(e){return u.action(t)}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(u.name),1)]})),_:2},1032,["color","style","onClick"])])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",s,[Object(r["createVNode"])("span",{innerHTML:u},null,8,["innerHTML"])]))],2)})),128))])})),128))],2)}var l=n("53ca"),d=(n("a15b"),n("4de4"),n("d3b7"),n("caad"),n("2532"),n("2ef0")),p=n("8a30"),b=Object(r["defineComponent"])({components:{IonButton:p["d"]},props:{styles:{type:Array},rowColors:{type:Array,default:function(){return[]}},cellColors:{type:Array,default:function(){return[]}},columns:{type:Object,required:!0},rows:{type:Object}},computed:{classStyles:function(){var e=this.styles?this.styles.join(" "):"";return"his-table ".concat(e)}},methods:{isLink:function(e){try{return"object"===Object(l["a"])(e)&&"link"===e.type}catch(t){return e}},isActionButton:function(e){try{return"object"===Object(l["a"])(e)&&"button"===e.type}catch(t){return e}},getColorCodeClass:function(e,t){var n="";if(!Object(d["isEmpty"])(this.rowColors)){var r=this.rowColors.filter((function(t){return t.indexes.includes(e)}));Object(d["isEmpty"])(r)||(n+=" "+r[0].class)}if(!Object(d["isEmpty"])(this.cellColors)){var a=this.cellColors.filter((function(n){return n.index===t&&n.row===e}));Object(d["isEmpty"])(a)||(n+=" "+a[0].class)}return n}}}),f=n("6b0d"),m=n.n(f);const h=m()(b,[["render",u]]);t["a"]=h},a3fb:function(e,t,n){},a430:function(e,t,n){"use strict";n("95cc")},a4d3f:function(e,t,n){"use strict";n("a6f7")},a542:function(e,t,n){"use strict";n("84ef")},a6f7:function(e,t,n){},a7b1:function(e,t,n){},a83d:function(e,t,n){"use strict";n("8bc7")},a938:function(e,t,n){"use strict";n("c260")},a981:function(e,t,n){"use strict";n("749f")},aa55:function(e,t,n){var r={"./ion-action-sheet.entry.js":["6618","chunk-504c4825"],"./ion-alert.entry.js":["f06c","chunk-008cd3d6"],"./ion-app_8.entry.js":["c215","chunk-34f7327c"],"./ion-avatar_3.entry.js":["cf12","chunk-59d4c87c"],"./ion-back-button.entry.js":["4b35","chunk-69eb8776"],"./ion-backdrop.entry.js":["429d","chunk-2d0c073f"],"./ion-button_2.entry.js":["4453","chunk-25d83ca8"],"./ion-card_5.entry.js":["070b","chunk-541ea42d"],"./ion-checkbox.entry.js":["dfd8","chunk-09162720"],"./ion-chip.entry.js":["430d","chunk-09155df3"],"./ion-col_3.entry.js":["6a8a","chunk-2d0da04a"],"./ion-datetime_3.entry.js":["c15b","chunk-21a76241"],"./ion-fab_3.entry.js":["dd47","chunk-3ed29de3"],"./ion-img.entry.js":["9588","chunk-2d0e5812"],"./ion-infinite-scroll_2.entry.js":["d1e5","chunk-2d21da73"],"./ion-input.entry.js":["d111","chunk-37f2300e"],"./ion-item-option_3.entry.js":["1bb3d","chunk-b14c2520"],"./ion-item_8.entry.js":["69da","chunk-5a8ac886"],"./ion-loading.entry.js":["53a5","chunk-6d375f34"],"./ion-menu_3.entry.js":["cb00","chunk-097e0872"],"./ion-modal.entry.js":["1ad0","chunk-f858ef4e"],"./ion-nav_2.entry.js":["e44f","chunk-c53d26f0"],"./ion-popover.entry.js":["4285","chunk-1f3fa45a"],"./ion-progress-bar.entry.js":["9b72","chunk-1dbc15a2"],"./ion-radio_2.entry.js":["beb3","chunk-0e93a01c"],"./ion-range.entry.js":["719f","chunk-54bbd082"],"./ion-refresher_2.entry.js":["0a47","chunk-d8413eac"],"./ion-reorder_2.entry.js":["6672","chunk-d0e8aa0a"],"./ion-ripple-effect.entry.js":["c8da","chunk-2d218068"],"./ion-route_4.entry.js":["10e8","chunk-858cd918"],"./ion-searchbar.entry.js":["8625","chunk-a9395c36"],"./ion-segment_2.entry.js":["0c02","chunk-462c869e"],"./ion-select_3.entry.js":["d25f","chunk-79f1dac7"],"./ion-slide_2.entry.js":["05dd","chunk-2d0a463b"],"./ion-spinner.entry.js":["e11b","chunk-8bb7f81e"],"./ion-split-pane.entry.js":["aae8","chunk-2d213189"],"./ion-tab-bar_2.entry.js":["a2bb","chunk-02c995b5"],"./ion-tab_2.entry.js":["6725","chunk-c567cc2a"],"./ion-text.entry.js":["ed3b","chunk-30dd9750"],"./ion-textarea.entry.js":["8798","chunk-eaa2b130"],"./ion-toast.entry.js":["c1a5","chunk-41c0f7a4"],"./ion-toggle.entry.js":["bef2","chunk-7548ca2d"],"./ion-virtual-scroll.entry.js":["5fd7","chunk-2d0d43da"]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id="aa55",e.exports=a},aabe:function(e,t,n){"use strict";n("cdb4")},ab49:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("his-standard-form");return Object(r["openBlock"])(),Object(r["createBlock"])(c,{fields:e.fields,activeField:e.activeField,onOnskip:t[1]||(t[1]=function(t){return e.activeField=""}),onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","activeField","onFinishAction","cancelDestinationPath"])}var o=n("1da1"),i=(n("ac1f"),n("1276"),n("d81d"),n("4de4"),n("d3b7"),n("caad"),n("2532"),n("159b"),n("b680"),n("3ca3"),n("ddb0"),n("99af"),n("96cf"),n("d95e")),c=n("7920"),s=n("2706"),u=n("b515"),l=n("b5e4"),d=n("7365"),p=n("aee2"),b=n("ad60"),f=n("d1ca"),m=n("2ef0"),h=n("3e53"),g=n("7f35"),v=n("5a0c"),O=n.n(v),j=Object(r["defineComponent"])({mixins:[d["a"]],components:{HisStandardForm:c["a"]},data:function(){return{app:h["a"].getActiveApp(),activeField:"",age:null,gender:null,hasBPinfo:!1,finalHeightValue:null,recentHeight:null,recentHeightObsID:-1,HTNEnabled:!1,optionWhiteList:[],hasHTNObs:!1,vitals:{},weightForHeight:{},medianWeightandHeight:{},canEditHeight:!1}},watch:{ready:{handler:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.init(t.patient);case 3:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{init:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.$route.query.vital_options,t.vitals=new u["a"](e.getID(),t.providerID),t.age=e.getAge(),t.gender=e.getGender(),r&&(t.optionWhiteList=r.split(",")),!t.canCheckWeightHeight()){n.next=17;break}return n.next=8,e.getRecentHeightObs();case 8:if(a=n.sent,Object(m["isEmpty"])(a)?t.canEditHeight=!0:(o=O()(a["obs_datetime"]).diff(t.patient.getBirthdate(),"year"),t.recentHeight=a["value_numeric"],t.recentHeightObsID=a["obs_id"],t.canEditHeight=o<18||t.age<18),!(t.age<=14)){n.next=17;break}return n.next=13,e.getMedianWeightHeight();case 13:return t.medianWeightandHeight=n.sent,n.next=16,b["a"].getWeightForHeightValues();case 16:t.weightForHeight=n.sent;case 17:return n.next=19,u["a"].getAll(e.getID(),"Treatment status").then((function(e){t.hasHTNObs=e&&e.length>0}));case 19:return n.next=21,f["b"].htnEnabled();case 21:t.HTNEnabled=n.sent,t.fields=t.getFields();case 23:case"end":return n.stop()}}),n)})))()},getOptions:function(){var e=this,t=this.recentHeight&&this.age>18?this.recentHeight:"",n=[{label:"Weight",value:"",other:{modifier:"KG",icon:"weight",required:!0}},{label:"Height",value:"".concat(t),other:{modifier:"CM",icon:"height",recentHeight:this.recentHeight,visible:this.canEditHeight,required:this.canEditHeight}},{label:"BP",value:"",other:{modifier:"mmHG",icon:"bp"}},{label:"Temp",value:"",other:{modifier:"°C",icon:"temp"}},{label:"SP02",value:"",other:{modifier:"%",icon:"spo2"}},{label:"Pulse",value:"",other:{modifier:"BPM",icon:"pulse-rate"}},{label:"Age",value:this.age,other:{modifier:"Years old",icon:"",visible:!1}}];return Object(m["isEmpty"])(this.optionWhiteList)?n:n.filter((function(t){return e.optionWhiteList.includes(t.label)})).map((function(e){return e.other.required=!0,e}))},canCheckWeightHeight:function(){return Object(m["isEmpty"])(this.optionWhiteList)||this.optionWhiteList.includes("Height")&&this.optionWhiteList.includes("Weight")},canCheckBp:function(){return Object(m["isEmpty"])(this.optionWhiteList)||this.optionWhiteList.includes("BP")},onFinish:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.vitals.createEncounter();case 2:if(r=n.sent,r){n.next=5;break}return n.abrupt("return",Object(l["e"])("Unable to create treatment encounter"));case 5:return n.next=7,t.buildObs(e);case 7:return a=n.sent,n.next=10,t.vitals.saveObservationList(a);case 10:if(o=n.sent,o){n.next=13;break}return n.abrupt("return",Object(l["e"])("Unable to save patient observations"));case 13:Object(l["d"])("Observations and encounter created!"),t.nextTask();case 15:case"end":return n.stop()}}),n)})))()},buildObs:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.mapObs(t.sanitizeVitals(e.vitals).filter((function(e){return"BP"!==e.label})).map((function(e){return"Height"===e.label&&e.other.visible&&t.finalHeightValue&&(e.value=t.finalHeightValue),e})));case 2:if(r=n.sent,!t.HTNEnabled||t.hasHTNObs||!e.on_htn_medication){n.next=8;break}return n.next=6,t.vitals.buildValueText("Treatment status",e.on_htn_medication.value);case 6:a=n.sent,r.push(a);case 8:return n.abrupt("return",r);case 9:case"end":return n.stop()}}),n)})))()},splitBP:function(e){var t=[];return e.forEach((function(e){if("BP"===e.label){var n="".concat(e.value).split("/"),r=n[0],a=n[1];t.push({label:"Systolic",value:r}),t.push({label:"Diastolic",value:a})}})),t},getBMI:function(e){var t=this.getVal(e,"Weight"),n=this.getVal(e,"Height"),r=[];if(this.age<=14){var a=(t/parseFloat(this.medianWeightandHeight["weight"])*100).toFixed(0),o=(n/parseFloat(this.medianWeightandHeight["height"])*100).toFixed(0),i=(n%Math.floor(n)<.5?0:.5)+Math.floor(n),c=this.weightForHeight[i.toFixed(1)],s=(t/c*100).toFixed(0);isNaN(parseFloat(s))||r.push({label:"Weight for height percent of median",value:s}),r.push({label:"Weight for age percent of median",value:a}),r.push({label:"Height for age percent of median",value:o})}else{var u=p["a"].calculateBMI(t,n);r.push({label:"BMI",value:u})}return r},getVal:function(e,t){var n=e.filter((function(e){return e.label===t}));return""===n[0].value?0:parseFloat("".concat(n[0].value))},mapObs:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.vitals.buildValueNumber(n.label,n.value);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.abrupt("return",Promise.all(r));case 2:case"end":return n.stop()}}),n)})))()},validateVitals:function(e){var t=this.checkRequiredVitals(e);if(t.length>0)return t.map((function(e){return["".concat(e.label," can not be empty")]}));var n=this.sanitizeVitals(e);return this.vitals.validateAll(n)},sanitizeVitals:function(e){var t=e.filter((function(e){return("Height"!==e.label||0!=e.other.required)&&(""!==e.value&&"Age"!==e.label)}));return this.canCheckBp()&&(t=t.concat(this.splitBP(t))),this.canCheckWeightHeight()&&(t=t.concat(this.getBMI(e))),t},checkRequiredVitals:function(e){return e.filter((function(e){return""===e.value&&!0===e.other.required}))},getFields:function(){var e=this,t=this.HTNEnabled,n=this.hasHTNObs;return[{id:"on_htn_medication",helpText:"Already taking drugs for blood pressure?",type:i["b"].TT_SELECT,validation:function(e){return s["a"].required(e)},condition:function(){var r;return t&&!n&&"ART"===(null===(r=e.app)||void 0===r?void 0:r.applicationName)},options:function(){return[{label:"Yes",value:"BP Drugs started"},{label:"No",value:"Not on BP Drugs"}]}},{id:"vitals",helpText:"Vitals entry",type:i["b"].TT_VITALS_ENTRY,validation:function(t){return e.validateVitals(t)},beforeNext:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=Object(m["find"])(n,{label:"Height"}),!(r&&e.recentHeight&&r.other.visible)){t.next=19;break}if(a=parseInt("".concat(r.value||0)),o=parseInt("".concat(e.recentHeight||0)),!(a<o)){t.next=19;break}return i="Use ".concat(o," CM"),c="Use ".concat(a," CM"),t.next=9,Object(g["a"])('Previous Height "'.concat(o,' CM"'),'Current Height "'.concat(a,' CM"'),'Inconsistent Height Reading (Height can not be lower than previous height of " '.concat(e.recentHeight,' "CM. Please SELECT the correct height.)'),[{name:i,slot:"start",color:"success"},{name:c,slot:"end",color:"danger"}]);case 9:if(s=t.sent,s!==c||!e.recentHeightObsID){t.next=18;break}return t.next=13,Object(l["a"])("Do you want to void height observation for ".concat(o));case 13:if(!t.sent){t.next=16;break}return t.next=16,u["a"].voidObs(e.recentHeightObsID);case 16:t.next=19;break;case 18:e.finalHeightValue=o;case 19:return t.abrupt("return",!0);case 20:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),config:{hiddenFooterBtns:["Clear"],onUpdateAlertStatus:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){var r,a,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=Object(m["find"])(n,{label:"Weight"}),a=Object(m["find"])(n,{label:"Height"}),r&&a){t.next=4;break}return t.abrupt("return");case 4:if(o=parseFloat(r.value),i=parseFloat(a.value),!(o<=0||i<=0)){t.next=8;break}return t.abrupt("return",{label:"BMI",value:"N/A",color:"",status:""});case 8:return t.next=10,p["a"].getBMI(o,i,e.gender,e.age);case 10:return c=t.sent,t.abrupt("return",{label:"BMI",value:c.index,color:c.color,status:c.result});case 12:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),onChangeOption:function(t){if(!t.value&&t.other.required)throw"Value for ".concat(t.label," is required");if(t.value){var n=e.vitals.validator(t);if(n&&n.length)throw n}}},options:function(){return e.getOptions()}}]}}}),_=n("6b0d"),w=n.n(_);const k=w()(j,[["render",a]]);t["default"]=k},abd7:function(e,t,n){"use strict";n("b993")},acb4:function(e,t,n){},ad49:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("3835"),a=n("1da1"),o=n("d4ec"),i=n("bee2"),c=n("45eb"),s=n("7e84"),u=n("262e"),l=n("2caf"),d=(n("ac1f"),n("1276"),n("96cf"),n("1c74")),p=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(){return Object(o["a"])(this,n),t.call(this)}return Object(i["a"])(n,null,[{key:"get",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c["a"])(Object(s["a"])(n),"getJson",this).call(this,"global_properties",{property:t});case 3:if(r=e.sent,!r||!(t in r)){e.next=6;break}return e.abrupt("return",r[t]);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"isProp",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=t.split("="),a=Object(r["a"])(n,2),o=a[0],i=a[1],e.next=4,this.get(o);case 4:if(c=e.sent,!c){e.next=7;break}return e.abrupt("return",i===c);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error(e.t0);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"set",value:function(e,t){return Object(c["a"])(Object(s["a"])(n),"postJson",this).call(this,"global_properties",{property:e,property_value:t})}}]),n}(d["e"])},ad60:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=n("45eb"),c=n("7e84"),s=n("262e"),u=n("2caf"),l=(n("96cf"),n("99af"),n("1c74")),d=n("2b3a"),p=n("8a30"),b=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"getAllPrograms",value:function(){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"programs",{page_size:1e3})}},{key:"getPatientPrograms",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"patients/".concat(e,"/programs"))}},{key:"getPatientVLInfo",value:function(e){var t=Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this);return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"programs/".concat(t,"/patients/").concat(e,"/vl_info"),{date:this.getSessionDate()})}},{key:"getProgramWorkflows",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"programs/".concat(e,"/workflows"))}},{key:"getPatientStates",value:function(e,t){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"programs/".concat(t,"/patients/").concat(e,"/states"))}},{key:"voidProgram",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(i["a"])(Object(c["a"])(n),"void",this).call(this,"patient_programs/".concat(e,"/"),{reason:t})}},{key:"createState",value:function(e,t,r){return Object(i["a"])(Object(c["a"])(n),"postJson",this).call(this,"programs/".concat(t,"/patients/").concat(e,"/states"),r)}},{key:"voidState",value:function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return Object(i["a"])(Object(c["a"])(n),"void",this).call(this,"programs/".concat(t,"/patients/").concat(e,"/states/").concat(r),{reason:a})}},{key:"getProgramInformation",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/programs/".concat(Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this),"/patients/").concat(t));case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",{});case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCurrentProgramInformation",value:function(e,t){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/programs/".concat(Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this),"/patients/").concat(e,"/visit?date=").concat(t))}},{key:"getMastercardDrugInformation",value:function(e,t){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/programs/".concat(Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this),"/patients/").concat(e,"/mastercard_data?date=").concat(t))}},{key:"getNextTask",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/workflows/".concat(Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this),"/").concat(e),{date:Object(i["a"])(Object(c["a"])(n),"getSessionDate",this).call(this)})}},{key:"getNextSuggestedARVNumber",value:function(){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/programs/1/next_available_arv_number")}},{key:"voidARVNumber",value:function(e){return Object(i["a"])(Object(c["a"])(n),"postJson",this).call(this,"/programs/1/void_arv_number/".concat(e),{})}},{key:"getFastTrackStatus",value:function(e){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/on_fast_track",{person_id:e,date:Object(i["a"])(Object(c["a"])(n),"getSessionDate",this).call(this)})}},{key:"createPatient",value:function(e){return Object(i["a"])(Object(c["a"])(n),"postJson",this).call(this,"/patients/",{program_id:Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this),person_id:e})}},{key:"enrollPatient",value:function(e){return Object(i["a"])(Object(c["a"])(n),"postJson",this).call(this,"/patients/".concat(e,"/programs"),{program_id:Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this),date_enrolled:Object(i["a"])(Object(c["a"])(n),"getSessionDate",this).call(this)})}},{key:"enrollProgram",value:function(e,t,r){return Object(i["a"])(Object(c["a"])(n),"postJson",this).call(this,"/patients/".concat(e,"/programs"),{program_id:t,date_enrolled:r})}},{key:"getWeightForHeightValues",value:function(){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/patient_weight_for_height_values")}},{key:"selectApplication",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p["cb"].create({component:d["a"],cssClass:"my-custom-class",backdropDismiss:!1,componentProps:{appVersion:l["e"].getFullVersion()}});case 2:return t=e.sent,t.present(),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(l["e"])},ad8d:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=n("5969"),s=["<1 year","1-4 years","5-9 years","10-14 years","15-19 years","20-24 years","25-29 years","30-34 years","35-39 years","40-44 years","45-49 years","50-54 years","55-59 years","60-64 years","65-69 years","70-74 years","75-79 years","80-84 years","85-89 years","90 plus years"],u=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(r["a"])(this,n),t.call(this)}return Object(a["a"])(n,[{key:"getBookedAppointments",value:function(e){return c["a"].getJson("programs/".concat(this.programID,"/scheduled_appointments"),{date:e})}},{key:"getViralLoadResults",value:function(e){return this.getReport("/programs/".concat(this.programID,"/reports/high_vl_patients"),{range:e})}},{key:"getOtherOutcome",value:function(e){return this.getReport("patient_outcome_list",{outcome:e})}},{key:"getPatientVisitTypes",value:function(){return this.getReport("patient_visit_types")}},{key:"getClientsDueForVl",value:function(){return this.getReport("clients_due_vl")}},{key:"getClientRentention",value:function(){return this.getReport("/programs/".concat(this.programID,"/reports/retention"))}},{key:"getExternalConsultationClients",value:function(){return this.getReport("".concat(this.programID,"/external_consultation_clients"))}},{key:"getMissedAppointments",value:function(){return this.getReport("missed_appointments")}},{key:"getPregnantWomen",value:function(){return this.getReport("/programs/".concat(this.programID,"/reports/pregnant_patients"))}},{key:"getArchivingCandidates",value:function(){return c["a"].getJson("programs/".concat(this.programID,"/reports/archiving_candidates"),{start_date:this.date})}},{key:"getIncompleteVisits",value:function(){return this.getReport("incomplete_visits",{tool_name:"INCOMPLETE VISITS"})}}]),n}(c["a"])},ada7:function(e,t,n){},adc7:function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-a497dcd2");Object(r["pushScopeId"])("data-v-a497dcd2");var o={style:{}};Object(r["popScopeId"])();var i=a((function(e,t,n,i,c,s){var u=Object(r["resolveComponent"])("ion-text"),l=Object(r["resolveComponent"])("ion-label"),d=Object(r["resolveComponent"])("ion-chip"),p=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("ion-item"),m=Object(r["resolveComponent"])("ion-list"),h=Object(r["resolveComponent"])("ion-checkbox"),g=Object(r["resolveComponent"])("ion-grid"),v=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(v,{showFull:!e.showKeyboard,style:{padding:"0"}},{default:a((function(){return[Object(r["createVNode"])(g,null,{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[Object(r["createVNode"])(p,{size:"12"},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.checkedItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:n},[Object(r["createVNode"])(d,{color:"danger",onClick:function(n){return e.uncheck(t)}},{default:a((function(){return[Object(r["createVNode"])(l,null,{default:a((function(){return[Object(r["createVNode"])(u,{class:"his-md-text"},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick"])])})),128))]})),_:1})]})),_:1}),Object(r["createVNode"])(b,null,{default:a((function(){return[Object(r["createVNode"])(p,{size:"4"},{default:a((function(){return[Object(r["createVNode"])(m,{style:{overflowY:"auto",height:"80vh",margin:0}},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:n,onClick:function(n){return e.getSpecificRadiologyOrders(t.value)},detail:!0,color:e.ActiveCategory===t.label?"lightblue":""},{default:a((function(){return[Object(r["createVNode"])(l,null,{default:a((function(){return[Object(r["createVNode"])(u,{class:"his-md-text"},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick","color"])})),128))]})),_:1})]})),_:1}),e.ActiveCategory?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0,style:{overflowY:"auto",height:"78vh"}},{default:a((function(){return[Object(r["createVNode"])("div",o,[Object(r["createVNode"])(m,{class:"view-port-content"},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.activeCategoryItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:n,color:t.isChecked?"lightblue":""},{default:a((function(){return[Object(r["createVNode"])(l,null,{default:a((function(){return[Object(r["createVNode"])(u,{class:"his-md-text"},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1024),Object(r["createVNode"])(h,{slot:"end",modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e},onIonChange:function(n){return e.onselect(t,n)},disabled:null===t||void 0===t?void 0:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]})),_:2},1032,["color"])})),128))]})),_:1})])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1},8,["showFull"])])})),c=n("2909"),s=n("5530"),u=n("1da1"),l=(n("d81d"),n("b0c0"),n("d3b7"),n("159b"),n("4de4"),n("96cf"),n("8a30")),d=n("82a9"),p=n("97ed"),b=n("2ef0"),f=Object(r["defineComponent"])({components:{IonCheckbox:l["k"],IonText:l["R"],IonChip:l["l"]},name:"HisRadiologyPicker",mixins:[d["a"]],data:function(){return{radiologyOrdersList:{},ActiveCategory:""}},methods:{onselect:function(e,t){var n=this;return Object(u["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n.$nextTick(Object(u["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=Object(s["a"])({},e),a.isChecked=t.target.checked,!n.onValue||!a.isChecked){r.next=8;break}return r.next=5,n.onValue(a);case 5:if(o=r.sent,o){r.next=8;break}return r.abrupt("return",t.target.checked=!1);case 8:if(!n.onValueUpdate){r.next=12;break}return r.next=11,n.onValueUpdate(Object(s["a"])({},n.radiologyOrdersList),a);case 11:n.radiologyOrdersList=r.sent;case 12:n.$emit("onValue",n.getChecked(n.radiologyOrdersList));case 13:case"end":return r.stop()}}),r)}))));case 1:case"end":return r.stop()}}),r)})))()},getSpecificRadiologyOrders:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e in t.radiologyOrdersList){n.next=5;break}return n.next=3,p["a"].getRadiologyList(e);case 3:r=n.sent,t.radiologyOrdersList[e]=t.mapListToOptions(r,e);case 5:t.ActiveCategory=e;case 6:case"end":return n.stop()}}),n)})))()},mapListToOptions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(b["isEmpty"])(e)?[]:e.map((function(e){var n={label:e.name,value:e.name,isChecked:!1,other:e};return t&&(n.other.parent=t),n}))},uncheck:function(e){this.radiologyOrdersList[e.other.parent].forEach((function(t){t.label===e.label&&(t.isChecked=!1)}))},getChecked:function(e){var t=[];for(var n in e)t.push.apply(t,Object(c["a"])(e[n].filter((function(e){return e.isChecked}))));return t}},computed:{checkedItems:function(){return this.getChecked(this.radiologyOrdersList)},activeCategoryItems:function(){return this.radiologyOrdersList[this.ActiveCategory]}},watch:{clear:function(){for(var e in this.radiologyOrdersList)this.radiologyOrdersList[e]=this.radiologyOrdersList[e].map((function(e){return e.isChecked=!1,e}))}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,p["a"].getRadiologyList("Radiology Orders");case 3:n=t.sent,e.listData=e.mapListToOptions(n),e.$emit("onValue",e.getChecked(e.radiologyOrdersList));case 6:case"end":return t.stop()}}),t)})))()}}),m=(n("7fe8"),n("6b0d")),h=n.n(m);const g=h()(f,[["render",i],["__scopeId","data-v-a497dcd2"]]);t["a"]=g},aee2:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n("1da1"),a=n("d4ec"),o=n("bee2"),i=(n("96cf"),n("d3b7"),n("b64b"),n("159b"),n("ac1f"),n("1276"),n("5319"),function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,null,[{key:"getBMIData",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("/bmi.json");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getBMIResult",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a={result:"",color:"",index:r},!(r<=0)){e.next=4;break}return a.index=0,e.abrupt("return",a);case 4:if(!(n<5&&n>0)){e.next=9;break}a.result="Use MUAC to calculate nutrition status",a.color="red",e.next=15;break;case 9:return n>18&&(n=19),e.next=12,this.getBMIData();case 12:o=e.sent,i=o[t][n],i&&(a=this.buildBounds(Object.keys(i),i,r,o.colors));case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"buildBounds",value:function(e,t,n,r){var a={result:"",color:"",index:n};return e.forEach((function(e){if(e.indexOf("-")>=0){var o=e.split("-");n>=parseFloat(o[0])&&n<=parseFloat(o[1])&&(a.result=t[e],a.color=r[t[e]])}else if(e.indexOf("<")>=0){var i=e.replace("<","");n<parseFloat(i)&&(a.result=t[e],a.color=r[t[e]])}else if(e.indexOf(">=")>=0){var c=e.replace(">=","");n>=parseFloat(c)&&(a.result=t[e],a.color=r[t[e]])}})),a}},{key:"getBMI",value:function(e,t,n,r){var a=this.calculateBMI(e,t);return this.getBMIResult(n,r,a)}},{key:"calculateBMI",value:function(e,t){if(0==t||0==e)return 0;var n=e/t/t*1e4;return Math.round(10*n)/10}}]),e}())},afa8:function(e,t,n){"use strict";n("c617")},afbc:function(e,t,n){"use strict";var r=n("2909"),a=(n("d3b7"),n("159b"),n("99af"),n("3ca3"),n("ddb0"),n("caad"),n("9f0e")),o=n("7a23");function i(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("TSLoginForm"),s=Object(o["resolveComponent"])("DTLoginForm"),u=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(u,null,{default:Object(o["withCtx"])((function(){return[e.isPocSite?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,version:e.version,onLogin:e.doLogin},null,8,["version","onLogin"])):(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:1,onLogin:e.doLogin,version:e.version,showConfigBtn:e.showConfig},null,8,["onLogin","version","showConfigBtn"]))]})),_:1})}var c=n("1da1"),s=(n("96cf"),Object(o["withScopeId"])("data-v-1fa8ddf4"));Object(o["pushScopeId"])("data-v-1fa8ddf4");var u=Object(o["createVNode"])("b",{style:{color:"#8b4513"}},"National ",-1),l=Object(o["createVNode"])("b",{style:{color:"#cd853f"}},"EMR",-1),d=Object(o["createTextVNode"])(" Version: "),p={class:"main",ref:"main"},b={class:"rows"},f={class:"cells"},m={class:"rows input-rows"},h={class:"cells"},g={class:"rows"};Object(o["popScopeId"])();var v=s((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-label"),v=Object(o["resolveComponent"])("ion-title"),O=Object(o["resolveComponent"])("ion-toolbar"),j=Object(o["resolveComponent"])("ion-header"),_=Object(o["resolveComponent"])("center"),w=Object(o["resolveComponent"])("ion-content"),k=Object(o["resolveComponent"])("login-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(j,null,{default:s((function(){return[Object(o["createVNode"])(O,null,{end:s((function(){return[Object(o["createVNode"])(c,{class:"ion-padding"},{default:s((function(){return[d,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.version),1)]})),_:1})]})),default:s((function(){return[Object(o["createVNode"])(v,null,{default:s((function(){return[Object(o["createVNode"])(c,{style:{fontWeight:"bolder",fontSize:"1.9em"}},{default:s((function(){return[u,l]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(w,{fullscreen:"false"},{default:s((function(){return[Object(o["createVNode"])("div",p,[Object(o["createVNode"])("div",b,[Object(o["createVNode"])("div",f,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{type:"text",name:"usename",autocomplete:"off",placeholder:"Username",id:"username",ref:"username","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.userInput.username=t}),onClick:t[2]||(t[2]=function(t){return e.renderKeyBoard(t)}),class:"input-boxes",readonly:e.useVirtualInput},null,8,["readonly"]),[[o["vModelText"],e.userInput.username]])])]),Object(o["createVNode"])("div",m,[Object(o["createVNode"])("div",h,[Object(o["withDirectives"])(Object(o["createVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.userInput.password=t}),type:"password",name:"password",ref:"password",id:"password",onClick:t[4]||(t[4]=function(t){return e.renderKeyBoard(t)}),class:"input-boxes",placeholder:"Password",readonly:e.useVirtualInput},null,8,["readonly"]),[[o["vModelText"],e.userInput.password]])])])],512),Object(o["createVNode"])(_,null,{default:s((function(){return[Object(o["createVNode"])("div",{id:"keyboard",style:e.btnStyles,class:"keyboard"},[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.LOGIN_KEYBOARD,(function(n){return Object(o["openBlock"])(),Object(o["createBlock"])("span",{key:n},[Object(o["createVNode"])("div",g,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(n,(function(n){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"cells",key:n},["Next"===n||"Login"===n?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:0,id:e.btnCaption,class:"keyboard-btn login-btn",onClick:t[5]||(t[5]=function(t){return e.keyPress(t)})},Object(o["toDisplayString"])(e.btnCaption),9,["id"])):Object(o["createCommentVNode"])("",!0),"Login"!=n&&"Next"!=n?(Object(o["openBlock"])(),Object(o["createBlock"])("button",{key:1,id:e.Caps.on?n.toUpperCase():n.toLowerCase(),class:"keyboard-btn",onClick:t[6]||(t[6]=function(t){return e.keyPress(t)})},Object(o["toDisplayString"])("Del."===n||"Caps"===n?n:e.Caps.on?n.toUpperCase():n.toLowerCase()),9,["id"])):Object(o["createCommentVNode"])("",!0)])})),128))])])})),128))],4)]})),_:1})]})),_:1}),Object(o["createVNode"])(k,{showConfigBtn:e.showConfigBtn},null,8,["showConfigBtn"])],64)})),O=(n("ac1f"),n("466d"),n("b5e4")),j=n("89b4"),_=n("3800"),w=Object(o["withScopeId"])("data-v-21cfab50");Object(o["pushScopeId"])("data-v-21cfab50");var k=Object(o["createTextVNode"])("Select Platform: "),y=Object(o["createTextVNode"])(" Configuration ");Object(o["popScopeId"])();var x=w((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-label"),s=Object(o["resolveComponent"])("ion-select-option"),u=Object(o["resolveComponent"])("ion-select"),l=Object(o["resolveComponent"])("ion-item"),d=Object(o["resolveComponent"])("ion-button"),p=Object(o["resolveComponent"])("ion-toolbar"),b=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(b,{style:{position:"absolute",width:"100%",bottom:"0",left:"0","padding-right":"1rem","padding-left":"1rem"}},{default:w((function(){return[Object(o["createVNode"])(p,null,{default:w((function(){return[Object(o["createVNode"])("span",null,[Object(o["createVNode"])("img",{id:"coat",src:e.coatImg,alt:"Malawi Coat of Arms logo"},null,8,["src"]),Object(o["createVNode"])("img",{id:"pepfar",src:e.pepfarImg,alt:"PEPFAR logo"},null,8,["src"])]),Object(o["createVNode"])(l,{slot:"end",color:"primary",size:"large"},{default:w((function(){return[Object(o["createVNode"])(c,null,{default:w((function(){return[k]})),_:1}),Object(o["createVNode"])(u,{value:e.platform,modelValue:e.platform,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.platform=t})},{default:w((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.platformOptions,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:t,value:e},{default:w((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value","modelValue"])]})),_:1}),e.showConfigBtn?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,slot:"end","router-link":e.settingsUrl},{default:w((function(){return[y]})),_:1},8,["router-link"])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1})})),N=n("2ed9"),C=n("1718"),V=n("8a30"),D=Object(o["defineComponent"])({name:"LoginFooter",components:{IonFooter:V["o"],IonToolbar:V["V"],IonButton:V["d"],IonSelect:V["N"],IonSelectOption:V["O"]},props:{showConfigBtn:{type:Boolean,default:!1}},setup:function(){var e=Object(N["a"])(),t=e.platformType,n=e.setPlatformType,r=Object(o["ref"])(t.value||"Platform"),a=Object(o["computed"])((function(){return"desktop"===t.value?"/settings/network_settings":"/settings/host"})),i=Object(o["ref"])(["mobile","desktop"]);return Object(o["watch"])(r,(function(e){["mobile","desktop"].includes(e)&&n(e)})),{coatImg:Object(C["a"])("login-logos/Malawi-Coat_of_arms_of_arms.png"),pepfarImg:Object(C["a"])("login-logos/PEPFAR.png"),platformOptions:i,platform:r,settingsUrl:a}}}),T=(n("2c00"),n("6b0d")),I=n.n(T);const R=I()(D,[["render",x],["__scopeId","data-v-21cfab50"]]);var S=R,P=Object(o["defineComponent"])({name:"TSLoginForm",props:{showConfigBtn:{type:Boolean,default:!1},version:{type:String,required:!0}},components:{LoginFooter:S,IonContent:V["n"],IonHeader:V["q"],IonToolbar:V["V"],IonTitle:V["U"],IonLabel:V["x"]},data:function(){return{LOGIN_KEYBOARD:_["f"],auth:{},userInput:{type:String,username:"",password:""},focusInput:{type:Object,value:"",id:""},display:"none",keyboardLeft:"",keyboardTop:"",btnCaption:"",Caps:{type:Boolean,on:!1},useVirtualInput:!1}},created:function(){this.auth=new j["a"];var e=Object(N["a"])(),t=e.useVirtualInput;this.useVirtualInput=t.value},methods:{renderKeyBoard:function(e){this.focusInput=e.currentTarget,"password"==this.focusInput.id?this.btnCaption="Login":this.btnCaption="Next";var t=document.getElementsByClassName("main")[0],n=t.getBoundingClientRect().width,r=e.currentTarget.getBoundingClientRect().top;r=parseInt(r),this.keyboardLeft=n/2-447+"px;",this.keyboardTop=r+20+"px;",this.display="table",window.scrollTo(0,9999)},keyPress:function(e){var t,n=e.currentTarget.id;try{n.match(/Del./i)?this.focusInput.value=this.focusInput.value.substring(0,this.focusInput.value.length-1):n.match(/Next/i)?(this.display="none",t=this.$refs.password,t.click()):n.match(/Login/i)?(this.display="none",this.$emit("login",{username:this.userInput.username,password:this.userInput.password})):n.match(/Caps/i)?(this.Caps.on=!this.Caps.on,this.display="none",t="username"===this.focusInput.id?this.$refs.username:this.$refs.password,t.click()):n.match(/Hide/i)?this.display="none":this.focusInput.value+=n,"username"==this.focusInput.id?this.userInput.username=this.focusInput.value:this.userInput.password=this.focusInput.value}catch(r){console.warn("input error")}},doLogin:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.userInput.username||!this.userInput.password){e.next=21;break}if(this.auth.setUsername(this.userInput.username),e.prev=2,!this.auth.versionLockingIsEnabled()){e.next=6;break}return e.next=6,this.auth.validateIfCorrectAPIVersion();case 6:return e.next=8,this.auth.checkTimeIntegrity();case 8:if(e.sent){e.next=10;break}throw"Local date does not match API date. Please Update your device's date";case 10:return e.next=12,this.auth.login(this.userInput.password);case 12:this.auth.startSession(),this.$router.push("/select_hc_location"),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](2),e.t0 instanceof j["c"]?Object(O["e"])("Invalid username or password"):Object(O["c"])(e.t0,5e4);case 19:e.next=22;break;case 21:Object(O["e"])("Complete form to log in");case 22:case"end":return e.stop()}}),e,this,[[2,16]])})));function t(){return e.apply(this,arguments)}return t}()},computed:{btnStyles:function(){return"display: ".concat(this.display,"; top: ").concat(this.keyboardTop)}}});n("eeac");const A=I()(P,[["render",v],["__scopeId","data-v-1fa8ddf4"]]);var E=A,B=n("a1e9"),F=n("5c40"),L=Object(o["createTextVNode"])(" HIS APPS "),M=Object(o["createVNode"])("img",{src:"/assets/images/report.png",style:{display:"block",width:"55%",margin:"5px auto"}},null,-1),H=Object(o["createVNode"])("h2",null,"Welcome",-1),U=Object(o["createVNode"])("h4",null,"Please, log in to your account",-1),q=Object(o["createTextVNode"])(" Login ");function G(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-card-title"),s=Object(o["resolveComponent"])("ion-card-subtitle"),u=Object(o["resolveComponent"])("login-footer"),l=Object(o["resolveComponent"])("ion-col"),d=Object(o["resolveComponent"])("ion-icon"),p=Object(o["resolveComponent"])("ion-input"),b=Object(o["resolveComponent"])("ion-item"),f=Object(o["resolveComponent"])("ion-button"),m=Object(o["resolveComponent"])("ion-row"),h=Object(o["resolveComponent"])("ion-grid"),g=Object(o["resolveComponent"])("ion-content");return Object(o["openBlock"])(),Object(o["createBlock"])(g,{fullscreen:"false"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{style:{margin:"0",padding:"0"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{size:"8"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{style:{"text-align":"center","font-size":"78px","font-weight":"bold",margin:"8vh 1px 0"}},{default:Object(o["withCtx"])((function(){return[L]})),_:1}),Object(o["createVNode"])(s,{style:{"text-align":"center","font-size":"24px","margin-bottom":"20px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.version),1)]})),_:1}),M,Object(o["createVNode"])(u,{showConfigBtn:e.showConfigBtn},null,8,["showConfigBtn"])]})),_:1}),Object(o["createVNode"])(l,{size:"4",style:{background:"#2839ad",color:"#ffff","text-align":"center",height:"100vh",padding:"38px 18px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{icon:e.avatar,style:{"font-size":"8vw",margin:"10vh 1px 0"}},null,8,["icon"]),H,U,Object(o["createVNode"])(b,{style:{margin:"2rem 3.5rem"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{type:"text",placeholder:"Username",modelValue:e.username,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.username=t}),min:5,required:""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(b,{style:{margin:"2rem 3.5rem"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{type:"password",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.password=t}),placeholder:"Password",max:100,min:5,required:""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(f,{expand:"full",size:"large",style:{margin:"2rem 3.5rem","text-transform":"none"},onClick:Object(o["withModifiers"])(e.login,["prevent"])},{default:Object(o["withCtx"])((function(){return[q]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})}var z=n("ff79"),Y=Object(o["defineComponent"])({name:"DTLoginForm",components:{IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],IonButton:V["d"],IonInput:V["v"],IonItem:V["w"],IonCardTitle:V["j"],IonCardSubtitle:V["i"],LoginFooter:S},props:{showConfigBtn:{type:Boolean,default:!1},version:{type:String,required:!0}},emits:["login"],setup:function(e,t){var n=t.emit,r=Object(o["ref"])(""),a=Object(o["ref"])(""),i=function(){return n("login",{username:r.value,password:a.value})};return{avatar:z["L"],username:r,password:a,login:i}}});const W=I()(Y,[["render",G]]);var $=W,K=n("6c02"),J=Object(o["defineComponent"])({name:"login",components:{TSLoginForm:E,IonPage:V["F"],DTLoginForm:$},setup:function(){var e=Object(K["f"])(),t=Object(B["m"])(!0),n=new j["a"],r=Object(B["m"])(""),a=function(){var r=Object(c["a"])(regeneratorRuntime.mark((function r(a){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!a.username||!a.password){r.next=15;break}return n.setUsername(a.username),r.prev=2,r.next=5,n.login(a.password);case 5:n.startSession(),o=t.value?"/select_hc_location":"/home",e.push(o),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](2),r.t0 instanceof j["c"]?Object(O["e"])("Invalid username or password"):Object(O["c"])("".concat(r.t0));case 13:r.next=16;break;case 15:Object(O["e"])("Complete form to log in");case 16:case"end":return r.stop()}}),r,null,[[2,10]])})));return function(e){return r.apply(this,arguments)}}();return Object(F["U"])(Object(c["a"])(regeneratorRuntime.mark((function e(){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new j["a"],e.next=3,n.loadConfig();case 3:return t.value=e.sent.isPocSite,e.next=6,n.getHeadVersion();case 6:return a=e.sent,n.setActiveVersion(a),e.next=10,n.getApiVersion();case 10:o=e.sent,r.value="".concat(a," / ").concat(o);case 12:case"end":return e.stop()}}),e)})))),{isPocSite:t,version:r,showConfig:"true"===localStorage.getItem("useLocalStorage"),doLogin:a}}});const X=I()(J,[["render",i]]);var Q=X,Z=(n("841c"),Object(o["withScopeId"])("data-v-3460165c"));Object(o["pushScopeId"])("data-v-3460165c");var ee=Object(o["createVNode"])("p",null,"Click Here",-1),te=Object(o["createVNode"])("p",null,"To Scan QR code Or Barcode",-1),ne=Object(o["createVNode"])("p",null," using Camera",-1),re={class:"tool-bar-medium-card"},ae={class:"his-sm-text tool-bar-medium-content"},oe=Object(o["createTextVNode"])("Facility name: "),ie=Object(o["createTextVNode"])(),ce=Object(o["createVNode"])("br",null,null,-1),se=Object(o["createTextVNode"])("Location: "),ue=Object(o["createVNode"])("br",null,null,-1),le=Object(o["createTextVNode"])("User: "),de=Object(o["createTextVNode"])(" | Date: "),pe=Object(o["createVNode"])("br",null,null,-1),be=Object(o["createTextVNode"])("Overview"),fe=Object(o["createTextVNode"])("Reports"),me=Object(o["createTextVNode"])("Administration"),he=Object(o["createTextVNode"])(" Alerts "),ge={key:0},ve={key:0,id:"container",class:"his-card overview"},Oe=Object(o["createTextVNode"])(" Logout "),je=Object(o["createTextVNode"])(" Find By "),_e=Object(o["createTextVNode"])(" Find or Register "),we=Object(o["createTextVNode"])(" Applications ");Object(o["popScopeId"])();var ke=Z((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-thumbnail"),u=Object(o["resolveComponent"])("ion-buttons"),l=Object(o["resolveComponent"])("ion-toolbar"),d=Object(o["resolveComponent"])("ion-col"),p=Object(o["resolveComponent"])("ion-row"),b=Object(o["resolveComponent"])("ion-label"),f=Object(o["resolveComponent"])("program-icon"),m=Object(o["resolveComponent"])("ion-header"),h=Object(o["resolveComponent"])("ion-icon"),g=Object(o["resolveComponent"])("ion-segment-button"),v=Object(o["resolveComponent"])("ion-segment"),O=Object(o["resolveComponent"])("home-folder"),j=Object(o["resolveComponent"])("home-notification"),_=Object(o["resolveComponent"])("ion-content"),w=Object(o["resolveComponent"])("ion-button"),k=Object(o["resolveComponent"])("ion-footer"),y=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(y,null,{default:Z((function(){return[Object(o["createVNode"])(m,{translucent:!0},{default:Z((function(){return[Object(o["createVNode"])(l,{class:"mobile-component-view"},{default:Z((function(){return[Object(o["createVNode"])(c,null,{default:Z((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.facilityName),1)]})),_:1}),Object(o["createVNode"])(u,{slot:"end"},{default:Z((function(){return[Object(o["createVNode"])(s,null,{default:Z((function(){return[Object(o["createVNode"])("img",{src:e.appLogo,class:"logo",alt:"App Logo"},null,8,["src"])]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(l,{class:"full-component-view"},{default:Z((function(){return[Object(o["createVNode"])(p,null,{default:Z((function(){return[Object(o["createVNode"])(d,null,{default:Z((function(){return[Object(o["createVNode"])("div",{class:"tool-bar-medium-card",onClick:t[2]||(t[2]=function(){return e.openCamera.apply(e,arguments)})},[Object(o["createVNode"])(p,null,{default:Z((function(){return[Object(o["createVNode"])(d,{"size-lg":"5","size-sm":"4"},{default:Z((function(){return[Object(o["createVNode"])("img",{style:{width:"230px",height:"90px",margin:"0"},src:e.barcodeLogo},null,8,["src"])]})),_:1}),e.useVirtualInput?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,"size-lg":"7","size-sm":"8"},{default:Z((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])("input",{readonly:e.useVirtualInput,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.patientBarcode=t}),class:"barcode-input",ref:"scanBarcode"},null,8,["readonly"]),[[o["vModelText"],e.patientBarcode]])]})),_:1})),e.useVirtualInput?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:1,"size-lg":"6","size-sm":"6",style:{"text-align":"center",margin:"auto","line-height":"1.2"}},{default:Z((function(){return[ee,te,ne]})),_:1})):Object(o["createCommentVNode"])("",!0)]})),_:1})])]})),_:1}),Object(o["createVNode"])(d,{size:"5"},{default:Z((function(){return[Object(o["createVNode"])("div",re,[Object(o["createVNode"])("div",ae,[Object(o["createVNode"])("span",null,[oe,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.facilityName),1)]),ie,ce,Object(o["createVNode"])("span",null,[se,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.userLocation),1)]),ue,Object(o["createVNode"])("span",null,[le,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.userName),1),de,Object(o["createVNode"])(b,{color:e.isBDE?"danger":"success"},{default:Z((function(){return[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.sessionDate),1)]})),_:1},8,["color"])]),pe])])]})),_:1}),Object(o["createVNode"])(d,{size:"3"},{default:Z((function(){return[Object(o["createVNode"])(f,{icon:e.appLogo,version:e.appVersion},null,8,["icon","version"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(l,null,{default:Z((function(){return[Object(o["createVNode"])(v,{scrollable:"",value:e.activeTab,class:"ion-justify-content-center"},{default:Z((function(){return[Object(o["createVNode"])(g,{value:1,onClick:t[3]||(t[3]=function(t){return e.activeTab=1})},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.statsChart},null,8,["icon"]),Object(o["createVNode"])(b,{class:"his-sm-text"},{default:Z((function(){return[be]})),_:1})]})),_:1}),e.canReport?(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:0,value:2,onClick:t[4]||(t[4]=function(t){return e.activeTab=2})},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.pieChart},null,8,["icon"]),Object(o["createVNode"])(b,{class:"his-sm-text"},{default:Z((function(){return[fe]})),_:1})]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(g,{value:3,onClick:t[5]||(t[5]=function(t){return e.activeTab=3})},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.settings},null,8,["icon"]),Object(o["createVNode"])(b,{class:"his-sm-text"},{default:Z((function(){return[me]})),_:1})]})),_:1}),Object(o["createVNode"])(g,{value:4,onClick:t[6]||(t[6]=function(t){return e.activeTab=4})},{default:Z((function(){return[Object(o["createVNode"])(h,{color:e.hasUnreadNotifications?"danger":"",icon:e.notifications},null,8,["color","icon"]),Object(o["createVNode"])(b,{color:e.hasUnreadNotifications?"danger":"",class:"his-sm-text"},{default:Z((function(){return[he,e.hasUnreadNotifications?(Object(o["openBlock"])(),Object(o["createBlock"])("b",ge,"("+Object(o["toDisplayString"])(e.notificationCount)+")",1)):Object(o["createCommentVNode"])("",!0)]})),_:1},8,["color"])]})),_:1})]})),_:1},8,["value"])]})),_:1}),Object(o["createVNode"])(_,{fullscreen:!0},{default:Z((function(){return[e.ready?(Object(o["openBlock"])(),Object(o["createBlock"])("div",ve,[1==e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.appOverview),{key:0})):Object(o["createCommentVNode"])("",!0),2==e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:1,items:e.appReports},null,8,["items"])):Object(o["createCommentVNode"])("",!0),3==e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(O,{key:2,items:e.app.globalPropertySettings},null,8,["items"])):Object(o["createCommentVNode"])("",!0),4==e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:3})):Object(o["createCommentVNode"])("",!0)])):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(k,null,{default:Z((function(){return[Object(o["createVNode"])(l,null,{default:Z((function(){return[Object(o["createVNode"])(p,null,{default:Z((function(){return[Object(o["createVNode"])(d,null,{default:Z((function(){return[Object(o["createVNode"])(w,{class:"xl-button mobile-component-view",color:"danger",onClick:e.signOut},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.logOut},null,8,["icon"])]})),_:1},8,["onClick"]),Object(o["createVNode"])(w,{class:"xl-button full-component-view",color:"danger",size:"large",onClick:e.signOut},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.logOut},null,8,["icon"]),Object(o["createVNode"])(b,null,{default:Z((function(){return[Oe]})),_:1})]})),_:1},8,["onClick"])]})),_:1}),Object(o["createVNode"])(d,null,{default:Z((function(){return[e.canFindByIdentifier?(Object(o["openBlock"])(),Object(o["createBlock"])(w,{key:0,class:"xl-button mobile-component-view",color:"primary","router-link":"/patients/search/id"},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.search},null,8,["icon"])]})),_:1})):Object(o["createCommentVNode"])("",!0),e.canFindByIdentifier?(Object(o["openBlock"])(),Object(o["createBlock"])(w,{key:1,class:"xl-button full-component-view",color:"primary",size:"large","router-link":"/patients/search/id"},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.search},null,8,["icon"]),Object(o["createVNode"])(b,null,{default:Z((function(){return[je]})),_:1})]})),_:1})):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(d,null,{default:Z((function(){return[Object(o["createVNode"])(w,{class:"xl-button mobile-component-view",color:"primary","router-link":"/patient/registration"},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.person},null,8,["icon"])]})),_:1}),Object(o["createVNode"])(w,{class:"xl-button full-component-view",color:"primary",size:"large","router-link":"/patient/registration"},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.person},null,8,["icon"]),Object(o["createVNode"])(b,null,{default:Z((function(){return[_e]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(d,null,{default:Z((function(){return[Object(o["createVNode"])(w,{class:"xl-button mobile-component-view",color:"primary",onClick:e.openModal},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.apps},null,8,["icon"])]})),_:1},8,["onClick"]),Object(o["createVNode"])(w,{class:"xl-button full-component-view",color:"primary",size:"large",onClick:e.openModal},{default:Z((function(){return[Object(o["createVNode"])(h,{icon:e.apps},null,8,["icon"]),Object(o["createVNode"])(b,null,{default:Z((function(){return[we]})),_:1})]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})})),ye=(n("b0c0"),n("5319"),n("5b81"),n("3e53")),xe=n("156d"),Ne=n("9283"),Ce=n("1c74"),Ve=Object(o["withScopeId"])("data-v-360fd8c4");Object(o["pushScopeId"])("data-v-360fd8c4");var De={style:{"font-size":"0.7em","font-weight":"bold"},class:"ion-text-center"};Object(o["popScopeId"])();var Te=Ve((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-img"),s=Object(o["resolveComponent"])("tool-bar-medium-card");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Ve((function(){return[e.icon?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,src:e.icon,id:"logo"},null,8,["src"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("div",De,Object(o["toDisplayString"])(e.version),1)]})),_:1})})),Ie=n("2b47"),Re=Object(o["defineComponent"])({name:"AppIcon",components:{IonImg:V["s"],ToolBarMediumCard:Ie["a"]},props:{icon:{type:String,required:!0},version:{type:String,default:"-/-"}}});n("5357");const Se=I()(Re,[["render",Te],["__scopeId","data-v-360fd8c4"]]);var Pe=Se,Ae=Object(o["createTextVNode"])(" Back ");function Ee(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-icon"),s=Object(o["resolveComponent"])("ion-button"),u=Object(o["resolveComponent"])("task-card"),l=Object(o["resolveComponent"])("ion-col"),d=Object(o["resolveComponent"])("ion-row"),p=Object(o["resolveComponent"])("ion-grid");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[e.showingChildNodes?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,color:"light",onClick:e.onBack},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{icon:e.arrowBack},null,8,["icon"]),Ae]})),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.viewableItems,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:n,"size-lg":"4","size-sm":"12"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{onClick:function(n){return e.onClick(t)},title:t.name,icon:e.itemIcon(t)},null,8,["onClick","title","icon"])]})),_:2},1024)})),128))]})),_:1})]})),_:1})],64)}var Be=n("5530"),Fe=(n("d81d"),n("4de4"),Object(o["withScopeId"])("data-v-c719b9ce"));Object(o["pushScopeId"])("data-v-c719b9ce");var Le={key:0},Me={key:1};Object(o["popScopeId"])();var He=Fe((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-thumbnail"),s=Object(o["resolveComponent"])("ion-label"),u=Object(o["resolveComponent"])("ion-item"),l=Object(o["resolveComponent"])("ion-card");return Object(o["openBlock"])(),Object(o["createBlock"])(l,{class:["his-card task-card",{clickable:!e.isDisabled,disabled:e.isDisabled}]},{default:Fe((function(){return[Object(o["createVNode"])(u,{lines:"none"},{default:Fe((function(){return[Object(o["createVNode"])(c,{slot:"start"},{default:Fe((function(){return[Object(o["createVNode"])("img",{src:e.activeIcon},null,8,["src"])]})),_:1}),Object(o["createVNode"])(s,{class:"his-sm-text ion-text-wrap",style:{"font-weight":"600",color:"#333!important"}},{default:Fe((function(){return[e.isCompleted?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("span",Le,Object(o["toDisplayString"])(e.title),1)),e.isCompleted?(Object(o["openBlock"])(),Object(o["createBlock"])("s",Me,Object(o["toDisplayString"])(e.title),1)):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1},8,["class"])})),Ue=Object(o["defineComponent"])({components:{IonCard:V["f"],IonThumbnail:V["T"],IonItem:V["w"],IonLabel:V["x"]},props:{title:{type:String,required:!0},icon:{type:String,required:!0},description:{type:String,required:!1},taskDisabled:{type:Boolean,required:!1},taskCompleted:{type:Boolean,required:!1}},setup:function(e){var t="boolean"===typeof e.taskCompleted&&e.taskCompleted,n="boolean"===typeof e.taskDisabled&&e.taskDisabled,r=Object(o["computed"])((function(){return n?Object(C["a"])("Disabled.svg"):t?Object(C["a"])("Checkmark.svg"):e.icon}));return{activeIcon:r,isDisabled:n,isCompleted:t}}});n("cbbc");const qe=I()(Ue,[["render",He],["__scopeId","data-v-c719b9ce"]]);var Ge=qe,ze=Object(o["defineComponent"])({setup:function(){return{arrowBack:z["g"]}},components:{IonIcon:V["r"],TaskCard:Ge,IonButton:V["d"],IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"]},props:{items:{type:Object,required:!0}},data:function(){return{defaultIcon:"sys-setting.png",viewableItems:[],showingChildNodes:!1}},watch:{items:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&t.setItems(e);case 1:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{setItems:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.filterViewable(e);case 2:t.viewableItems=n.sent;case 3:case"end":return n.stop()}}),n)})))()},filterViewable:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Object(Be["a"])({},t),!n.condition){e.next=7;break}return e.next=4,n.condition();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=!0;case 8:return n.canShow=e.t0,e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=3,Promise.all(n);case 3:return t.abrupt("return",t.sent.filter((function(e){return e.canShow})));case 4:case"end":return t.stop()}}),t)})))()},onClick:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.files?(t.showingChildNodes=!0,t.defaultIcon="sys-setting.png",e.defaultFilesIcon&&(t.defaultIcon=e.defaultFilesIcon),t.setItems(e.files)):"function"===typeof e.action?e.action():e.pathName?t.$router.push({name:e.pathName}):e.pathUrl&&t.$router.push(e.pathUrl);case 1:case"end":return n.stop()}}),n)})))()},onBack:function(){this.showingChildNodes=!1,this.setItems(this.items)},itemIcon:function(e){return Object(C["a"])(e.icon?e.icon:this.defaultIcon)}}});const Ye=I()(ze,[["render",Ee]]);var We=Ye,$e=n("cc74"),Ke=(n("4e82"),n("d4ec")),Je=n("bee2"),Xe=n("262e"),Qe=n("2caf"),Ze=function(e){Object(Xe["a"])(n,e);var t=Object(Qe["a"])(n);function n(){return Object(Ke["a"])(this,n),t.apply(this,arguments)}return Object(Je["a"])(n,null,[{key:"read",value:function(e){return this.putJson("notifications/update",{alerts:e})}},{key:"unread",value:function(){return this.getJson("notifications")}}]),n}(Ce["e"]),et=n("2ef0"),tt=n.n(et),nt=Object(o["ref"])([]);function rt(){var e=Object(o["computed"])((function(){return nt.value.filter((function(e){return!e.read}))})),t=Object(o["computed"])((function(){return nt.value.length>0})),n=Object(o["computed"])((function(){return e.value.length>0})),r=Object(o["computed"])((function(){return e.value.length})),a=Object(o["computed"])((function(){return nt.value.sort((function(e,t){return new Date(e.date)>new Date(t.date)?-1:1}))}));function i(){return s.apply(this,arguments)}function s(){return s=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ze.unread();case 2:t=e.sent,Object(et["isEmpty"])(t)||(nt.value=t.map((function(e){var t="General",n=e.text,r=null;try{var a=JSON.parse(e.text);a["Type"].match(/lims/i)&&(t="".concat(a["Test type"]," results for ").concat(a["ARV-Number"]||a["Accession number"]),n="Ordered by <b>".concat(a["Ordered By"]||"N/A","</b>"),r=function(){return Gc.push("/art/encounters/lab/".concat(a["PatientID"]))})}catch(o){console.warn(o)}return{handler:r,message:n,title:t,id:e.alert_id,date:Ne["b"].toStandardHisDisplayFormat(e.date_created)}})),Object(O["e"])("You have ".concat(t.length," unread notification(s)")));case 4:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(){return l.apply(this,arguments)}function l(){return l=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=nt.value.filter((function(e){return!e.read})),Object(et["isEmpty"])(t)){e.next=6;break}return e.next=4,Ze.read(t.map((function(e){return e.id})));case 4:if(!e.sent){e.next=6;break}nt.value=nt.value.map((function(e){return Object(Be["a"])(Object(Be["a"])({},e),{},{read:!0})}));case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function d(e){"function"===typeof e.handler&&e.handler()}return{markAllAsRead:u,openNotification:d,loadNotifications:i,sortedNotifications:a,hasUnreadNotifications:n,notificationCount:r,hasNotifications:t,notificationData:nt}}var at=Object(o["withScopeId"])("data-v-6e1be16e");Object(o["pushScopeId"])("data-v-6e1be16e");var ot={key:0,class:"his-card ion-text-center his-lg-text"};Object(o["popScopeId"])();var it=at((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-label"),s=Object(o["resolveComponent"])("ion-chip"),u=Object(o["resolveComponent"])("ion-item"),l=Object(o["resolveComponent"])("ion-list");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[e.hasNotifications?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",ot," No notifications ")),e.hasNotifications?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:1},{default:at((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.sortedNotifications,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{class:"his-md-text",button:"",detail:"",onClick:function(n){return e.openNotification(t)},key:n},{default:at((function(){return[Object(o["createVNode"])(c,{class:"his-lg-text"},{default:at((function(){return[Object(o["createVNode"])("h1",null,Object(o["toDisplayString"])(t.title),1),Object(o["createVNode"])("p",{class:"his-lg-text",innerHTML:t.message},null,8,["innerHTML"])]})),_:2},1024),Object(o["createVNode"])(s,{color:"success",class:"his-md-text"},{default:at((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.date),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1})):Object(o["createCommentVNode"])("",!0)],64)})),ct=Object(o["defineComponent"])({components:{IonLabel:V["x"],IonItem:V["w"],IonList:V["y"],IonChip:V["l"]},setup:function(){var e=rt(),t=e.openNotification,n=e.markAllAsRead,r=e.sortedNotifications,a=e.notificationData,i=e.hasNotifications;return Object(o["watch"])(a,(function(e){e&&n()}),{deep:!0,immediate:!0}),{openNotification:t,sortedNotifications:r,hasNotifications:i}}});n("afa8");const st=I()(ct,[["render",it],["__scopeId","data-v-6e1be16e"]]);var ut=st,lt=Object(o["defineComponent"])({name:"Home",components:{IonTitle:V["U"],IonThumbnail:V["T"],IonIcon:V["r"],ProgramIcon:Pe,HomeFolder:We,IonContent:V["n"],IonHeader:V["q"],IonPage:V["F"],IonButtons:V["e"],IonToolbar:V["V"],IonRow:V["J"],IonCol:V["m"],IonButton:V["d"],IonFooter:V["o"],IonSegment:V["L"],IonSegmentButton:V["M"],IonLabel:V["x"],HomeNotification:ut},setup:function(){var e=Object(N["a"])(),t=e.useVirtualInput,n=rt(),r=n.notificationData,a=n.notificationCount,o=n.hasUnreadNotifications;return{hasUnreadNotifications:o,notificationData:r,notificationCount:a,notifications:z["I"],barcode:z["l"],apps:z["d"],person:z["L"],search:z["S"],logOut:z["C"],statsChart:z["X"],pieChart:z["O"],settings:z["V"],useVirtualInput:t}},data:function(){return{app:{},facilityName:"",userLocation:"",sessionDate:"",userName:"",appVersion:"",activeTab:1,ready:!1,patientBarcode:"",overviewComponent:{},isBDE:!1}},computed:{barcodeLogo:function(){return Object(C["a"])("barcode.svg")},appOverview:function(){return this.app.homeOverviewComponent},appLogo:function(){return Object(C["a"])(this.app.applicationIcon)},appReports:function(){return this.app.programReports?this.app.programReports:[]},appAdministration:function(){return this.app.globalPropertySettings?this.app.globalPropertySettings:[]},canFindByIdentifier:function(){return!!this.app.programPatientIdentifiers},canReport:function(){return!!this.app.programReports}},methods:{fetchLocationID:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,$e["b"].healthCenterID();case 2:t=e.sent,t&&this.fetchLocationName(t);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchLocationName:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,xe["b"].get("locations/"+e);case 2:if(r=n.sent,r&&200===r.status){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,r.json();case 7:a=n.sent,t.facilityName=a.name,t.createSessionLocationName(a);case 10:case"end":return n.stop()}}),n)})))()},createSessionLocationName:function(e){sessionStorage.location=e.name,sessionStorage.locationName=e.name,sessionStorage.siteUUID=e.uuid},loadApplicationData:function(){this.ready=!0,this.isBDE=!0===Ce["e"].isBDE(),this.userLocation=sessionStorage.userLocation,this.userName=sessionStorage.username,this.fetchLocationID(),this.sessionDate=Ne["b"].toStandardHisDisplayFormat(Ce["e"].getSessionDate()),this.appVersion=Ce["e"].getFullVersion()},openModal:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye["a"].selectApplication("HomePage");case 2:if(n=t.sent,!n){t.next=9;break}if(n.isPocApp||!n.appLandingPage){t.next=6;break}return t.abrupt("return",e.$router.push(n.appLandingPage));case 6:e.app=n,e.activeTab=1,e.loadApplicationData();case 9:case"end":return t.stop()}}),t)})))()},checkForbarcode:function(){if(null!=this.patientBarcode.match(/.+\$$/i)){var e=this.patientBarcode.replaceAll(/\$/gi,"");this.patientBarcode="",this.$router.push("/patients/confirm?patient_barcode="+e)}},signOut:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["a"])("Are you sure you want to logout ?");case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:return r=new j["a"],t.prev=6,t.next=9,$e["b"].portalEnabled();case 9:if(!t.sent){t.next=16;break}return t.next=12,$e["b"].portalProperties();case 12:a=t.sent,window.location=a,t.next=17;break;case 16:e.$router.push("/login");case 17:t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](6),console.warn("".concat(t.t0));case 22:r.clearSession();case 23:case"end":return t.stop()}}),t,null,[[6,19]])})))()},openCamera:function(){this.useVirtualInput&&this.$router.push("/camera_scanner")}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=rt(),r=n.loadNotifications,t.next=3,r();case 3:setInterval((function(){var t=e.$refs.scanBarcode;t&&t.focus()}),1500);case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye["a"].doAppManagementTasks();case 2:n=ye["a"].getActiveApp(),n?(e.app=n,e.loadApplicationData()):e.openModal(),"EMC"===e.app.applicationName&&e.$router.push("/emc/home");case 5:case"end":return t.stop()}}),t)})))()},watch:{patientBarcode:function(){this.checkForbarcode()}}});n("2680");const dt=I()(lt,[["render",ke],["__scopeId","data-v-3460165c"]]);var pt=dt,bt=Object(o["withScopeId"])("data-v-5bbd2d98");Object(o["pushScopeId"])("data-v-5bbd2d98");var ft={class:"tool-bar-medium-card"},mt={class:"his-sm-text"},ht=Object(o["createTextVNode"])("Patient Name: "),gt=Object(o["createTextVNode"])(),vt=Object(o["createVNode"])("p",null,null,-1),Ot={class:"his-sm-text"},jt=Object(o["createTextVNode"])("Birthdate: "),_t=Object(o["createTextVNode"])(),wt=Object(o["createVNode"])("p",null,null,-1),kt={class:"his-sm-text"},yt=Object(o["createTextVNode"])("Gender: "),xt={class:"tool-bar-medium-card"},Nt={class:"his-sm-text"},Ct=Object(o["createTextVNode"])("Ancestry district: "),Vt=Object(o["createVNode"])("p",null,null,-1),Dt={class:"his-sm-text"},Tt=Object(o["createTextVNode"])("Ancestry TA: "),It=Object(o["createVNode"])("p",null,null,-1),Rt={class:"his-sm-text"},St=Object(o["createTextVNode"])("Ancestry village: "),Pt=Object(o["createVNode"])("p",null,null,-1),At={class:"tool-bar-medium-card"},Et={class:"his-sm-text"},Bt=Object(o["createTextVNode"])("Current District:"),Ft=Object(o["createVNode"])("p",null,null,-1),Lt={class:"his-sm-text"},Mt=Object(o["createTextVNode"])("Current TA: "),Ht=Object(o["createVNode"])("p",null,null,-1),Ut={class:"his-sm-text"},qt=Object(o["createTextVNode"])("Current Village: "),Gt=Object(o["createVNode"])("p",null,null,-1),zt={class:"card-content"},Yt={key:0},Wt=Object(o["createTextVNode"])("Cancel"),$t=Object(o["createTextVNode"])("Void Client"),Kt=Object(o["createTextVNode"])(" New Pregnancy "),Jt=Object(o["createTextVNode"])(" Continue ");Object(o["popScopeId"])();var Xt,Qt,Zt=bt((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-col"),s=Object(o["resolveComponent"])("ion-row"),u=Object(o["resolveComponent"])("ion-toolbar"),l=Object(o["resolveComponent"])("ion-header"),d=Object(o["resolveComponent"])("ion-card-title"),p=Object(o["resolveComponent"])("ion-card-header"),b=Object(o["resolveComponent"])("ion-card-content"),f=Object(o["resolveComponent"])("ion-card"),m=Object(o["resolveComponent"])("ion-content"),h=Object(o["resolveComponent"])("ion-button"),g=Object(o["resolveComponent"])("ion-footer"),v=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(v,null,{default:bt((function(){return[Object(o["createVNode"])(l,{translucent:!0},{default:bt((function(){return[Object(o["createVNode"])(u,null,{default:bt((function(){return[Object(o["createVNode"])(s,null,{default:bt((function(){return[Object(o["createVNode"])(c,null,{default:bt((function(){return[Object(o["createVNode"])("div",ft,[Object(o["createVNode"])("span",mt,[ht,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.patientName),1)]),gt,vt,Object(o["createVNode"])("span",Ot,[jt,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.birthdate),1)]),_t,wt,Object(o["createVNode"])("span",kt,[yt,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.gender),1)])])]})),_:1}),Object(o["createVNode"])(c,null,{default:bt((function(){return[Object(o["createVNode"])("div",xt,[Object(o["createVNode"])("span",Nt,[Ct,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.ancestryDistrict),1)]),Vt,Object(o["createVNode"])("span",Dt,[Tt,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.ancestryTA),1)]),It,Object(o["createVNode"])("span",Rt,[St,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.ancestryVillage),1)]),Pt])]})),_:1}),Object(o["createVNode"])(c,null,{default:bt((function(){return[Object(o["createVNode"])("div",At,[Object(o["createVNode"])("span",Et,[Bt,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.currentDistrict),1),Ft]),Object(o["createVNode"])("span",Lt,[Mt,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.currentTA),1),Ht]),Object(o["createVNode"])("span",Ut,[qt,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.demographics.currentVillage),1),Gt])])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(m,null,{default:bt((function(){return[Object(o["createVNode"])(s,null,{default:bt((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.cards,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{"size-md":"4","size-sm":"12",key:t},{default:bt((function(){return[Object(o["createVNode"])(f,{class:"his-card"},{default:bt((function(){return[Object(o["createVNode"])(p,{style:{background:"#708090 !important"}},{default:bt((function(){return[Object(o["createVNode"])(d,null,{default:bt((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title.toUpperCase()),1)]})),_:2},1024)]})),_:2},1024),Object(o["createVNode"])(b,null,{default:bt((function(){return[Object(o["createVNode"])("ul",zt,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.data,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:"li-item his-sm-text",key:t,style:{display:"flex","justify-content":"space-between"}},[e.label?(Object(o["openBlock"])(),Object(o["createBlock"])("span",Yt,Object(o["toDisplayString"])(e.label)+"  ",1)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("strong",{innerHTML:e.value},null,8,["innerHTML"])])})),128))])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(o["createVNode"])(g,null,{default:bt((function(){return[Object(o["createVNode"])(u,{color:"dark"},{default:bt((function(){return[Object(o["createVNode"])(h,{color:"danger",size:"large","router-link":"/"},{default:bt((function(){return[Wt]})),_:1}),e.facts.patientFound&&e.isAdmin?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:0,color:"danger left",size:"large",onClick:e.onVoid},{default:bt((function(){return[$t]})),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.facts.anc.canInitiateNewPregnancy?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:1,slot:"end",size:"large",onClick:e.onInitiateNewAncPregnancy},{default:bt((function(){return[Kt]})),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.facts.patientFound?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:2,slot:"end",color:"success",size:"large",onClick:e.nextTask},{default:bt((function(){return[Jt]})),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})})),en=n("4f96"),tn=(n("fb6a"),n("4fad"),n("a15b"),n("0fa1")),nn=n("c1e4"),rn=n("c21d"),an=n("23e6"),on=n("74f4"),cn=(n("2532"),n("4d63"),n("2c3e"),n("25f0"),n("7f35")),sn=n("0011");(function(e){e["ON_CONTINUE"]="oncontinue",e["ONLOAD"]="onload"})(Xt||(Xt={})),function(e){e["FORCE_EXIT"]="forceExit",e["GO_HOME"]="gotoHome",e["GO_BACK"]="goBack",e["CONTINUE"]="continue",e["ENROLL"]="enroll",e["EXIT"]="exit",e["ACTIVATE_FN"]="activateFn",e["ASSIGN_NPID"]="assignNpid",e["UPDATE_DMG"]="updateDemographics",e["PRINT_NPID"]="printNPID",e["CREATE_NPID_WITH_REMOTE_DIFF"]="createNpiDWithRemote",e["REFRESH_DDE_DEMOGRAPHICS"]="refreshDemographicsDDE",e["UPDATE_LOCAL_DDE_DIFFS"]="updateLocalDiffs",e["RESOLVE_DUPLICATE_NPIDS"]="resolveDuplicateNpids",e["ADD_AS_DRUG_REFILL"]="addAsDrugRefill",e["ADD_AS_NEW_PATIENT"]="addAsNewPatient",e["ADD_AS_EXTERNAL_CONSULTATION"]="addAsExternalConsultation",e["INITIATE_ANC_PREGNANCY"]="initiateNewAncPregnancy",e["VIEW_MERGE_AUDIT_FOR_NPID"]="viewMergeAuditForNpid",e["SEARCH_BY_NAME"]="searchByName"}(Qt||(Qt={}));var un={"Do not proceed if patient is not found in the system":{priority:1,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])(" 0 Search results","Patient has not been found","Choose how to proceed",[{name:"Close",slot:"start",color:"primary"},{name:"Search by name",slot:"end",color:"success"}],"his-danger-color");case 2:return t=e.sent,e.abrupt("return","Search by name"===t?Qt.SEARCH_BY_NAME:Qt.GO_HOME);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!1===t},patientFound:function(e){return!1===e}}},"[DDE] Show invalid attributes for a patient whose remote":{priority:2,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["d"])("DDE Entity Error","Remote patient has invalid attributes",["Attribute","Errors"],t.demographics.invalidDemographics,[{name:"Close",slot:"start",color:"danger"}],"his-danger-color");case 2:return e.abrupt("return",Qt.GO_BACK);case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{demographics:function(e){var t=e.hasInvalidDemographics;return!0===t}}},"[DDE] Do not proceed if NPID is not found and Provide history of voided NPIDS":{priority:2,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["d"])("Voided patients with ID ".concat(t.scannedNpid),"NPID was not found. Please review available patient with similar ID",t.dde.voidedNpids.cols,t.dde.voidedNpids.rows,[{name:"Close",slot:"start",color:"primary"},{name:"Merge history",slot:"end",color:"primary"},{name:"Search by name",slot:"end",color:"success"}],"his-danger-color");case 2:return n=e.sent,e.abrupt("return","Merge history"===n?Qt.VIEW_MERGE_AUDIT_FOR_NPID:"Search by name"===n?Qt.SEARCH_BY_NAME:Qt.GO_HOME);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!0===t},patientFound:function(e){return!1===e}}},"[DDE] Notify the user to proceed with Remote NPID if local NPID does not match remote":{priority:1,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dde,e.next=3,Object(cn["a"])("Missing Local NPID",'Local NPID of "'.concat(n.localNpidDiff,'" does not match remote "').concat(n.remoteNpidDiff,'"'),"Proceed to Fix issue",[{name:"Resolve issue",slot:"start",color:"danger"}],"his-danger-color");case 3:return e.abrupt("return",Qt.CREATE_NPID_WITH_REMOTE_DIFF);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{dde:function(e){var t=e.localNpidDiff,n=e.remoteNpidDiff;return t!=n},globalProperties:function(e){var t=e.ddeEnabled;return!0===t}}},"Warn if patient is missing National ID and assign them one":{priority:2,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("Missing National ID","Patient was found BUT has no National ID","The system is going to assign the patient with a new ID",[{name:"OK",slot:"start",color:"primary"}],"his-danger-color");case 2:return e.abrupt("return",Qt.ASSIGN_NPID);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{currentNpid:function(e){return Object(sn["c"])(e)}}},"Detect NPID over 5 duplicates and prompt the user to resolve them":{priority:1,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.scannedNpid,e.next=3,Object(cn["a"])("More than 5 duplicates found","There are more than 5 duplicates for this NPID (".concat(n,"). Please search by name and gender"),"Choose how to proceed",[{name:"Close",slot:"start",color:"danger"},{name:"Search by name",slot:"start",color:"primary"}],"his-danger-color");case 3:return r=e.sent,e.abrupt("return","Search by name"===r?Qt.SEARCH_BY_NAME:Qt.GO_HOME);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{npidHasOverFiveDuplicates:function(e){return e}}},"Detect NPID duplicates and prompt the user to resolve them":{priority:1,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.scannedNpid,e.next=3,Object(cn["a"])("DUPLICATE NPID","NPID ".concat(n," is currently assigned to multiple patients"),"Proceed to resolve the issue",[{name:"Resolve Duplicate NPIDs",slot:"start",color:"danger"}],"his-danger-color");case 3:return e.abrupt("return",Qt.RESOLVE_DUPLICATE_NPIDS);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{npidHasDuplicates:function(e){return e}}},"Warn before proceeding if patient is deceased based on current Patient state":{priority:3,targetEvent:Xt.ON_CONTINUE,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("Deceased Patient","Patient outcome is Died!","Do you want to continue?",[{name:"Yes",slot:"start",color:"danger"},{name:"No",slot:"end",color:"success"}],"his-warning-color");case 2:return t=e.sent,e.abrupt("return","Yes"===t?Qt.CONTINUE:Qt.FORCE_EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{currentOutcome:function(e){return"Patient died"===e}}},"Warn before proceeding if patient stopped treatment based on current Patient state":{priority:3,targetEvent:Xt.ON_CONTINUE,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("Stopped Treatment","Patient outcome is Stopped Treatment ","Do you want to continue?",[{name:"Yes",slot:"start",color:"danger"},{name:"No",slot:"end",color:"success"}],"his-warning-color");case 2:return t=e.sent,e.abrupt("return","Yes"===t?Qt.CONTINUE:Qt.FORCE_EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{currentOutcome:function(e){return"Treatment stopped"===e}}},"[ART patient visit purpose] Select purpose of visit if patient is Transferred out or Drug refill":{priority:3,targetEvent:Xt.ON_CONTINUE,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.patientType,a=t.currentOutcome,o=[],"External consultation"!==n&&"Patient transferred out"!==a||(o=[{name:"Drug refill",slot:"start",color:"primary"},{name:"New Patient",slot:"end",color:"primary"}]),"Drug Refill"===n&&(o=[{name:"External Consultation",slot:"start",color:"primary"},{name:"New Patient",slot:"end",color:"primary"}]),"New patient"===n&&(o=[{name:"External Consultation",slot:"start",color:"primary"},{name:"Drug refill",slot:"start",color:"primary"}]),e.next=7,Object(cn["a"])("Purpose of visit","Patient type: ".concat(n," | State: ").concat(a),"Please select purspose of the visit",[].concat(Object(r["a"])(o),[{name:"Continue",slot:"end",color:"success"}]));case 7:i=e.sent,e.t0=i,e.next="Drug refill"===e.t0?11:"External Consultation"===e.t0?12:"New Patient"===e.t0?13:14;break;case 11:return e.abrupt("return",Qt.ADD_AS_DRUG_REFILL);case 12:return e.abrupt("return",Qt.ADD_AS_EXTERNAL_CONSULTATION);case 13:return e.abrupt("return",Qt.ADD_AS_NEW_PATIENT);case 14:return e.abrupt("return",Qt.CONTINUE);case 15:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{programName:function(e){return"ART"===e},patientType:function(e,t){var n=t.currentOutcome;return["Drug Refill","External consultation"].includes(e)||"Patient transferred out"===n}}},"Prompt patient enrollment in current programme if not enrolled":{priority:4,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("Programme Enrollment","Patient is not enrolled in current programme, do you want to enroll?","",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}]);case 2:return t=e.sent,e.abrupt("return","Yes"===t?Qt.ENROLL:Qt.EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{enrolledInProgram:function(e){return!1===e}}},"(ART Filing numbers) Prompt dormant filing number reactivation if patient has a dormant filing number":{priority:3,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("Filing Numbers","Activate dormant #?","",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}]);case 2:return t=e.sent,e.abrupt("return","Yes"===t?Qt.ACTIVATE_FN:Qt.EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{programName:function(e){return"ART"===e},identifiers:function(e){return e.includes("Archived filing number")},currentOutcome:function(e){return!["Treatment stopped","Patient transferred out","Patient died"].includes(e)},globalProperties:function(e){var t=e.useFilingNumbers;return t}}},"[DDE OFF] Prompt the user to update patient demographics when data is incomplete":{priority:2,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("Demographics","Patient data is incomplete","Do you want to review and update now?",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}],"his-danger-color");case 2:return t=e.sent,e.abrupt("return","Yes"===t?Qt.UPDATE_DMG:Qt.EXIT);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!1===t},demographics:function(e){var t=e.patientIsComplete;return!1===t},patientFound:function(e){return!0===e}}},"[DDE] Alert When remote Patient demographics dont match Local Demographics ":{priority:3,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.dde,e.next=3,Object(cn["d"])("Demographics Mismatch","Local Demographics do not match Remote Demographics",["Attributes","Local","Remote"],n.diffRows,[{name:"Use Local",slot:"start",color:"primary"},{name:"Use Remote",slot:"start",color:"primary"}],"his-danger-color",n.diffRowColors);case 3:return r=e.sent,e.abrupt("return","Use Local"===r?Qt.UPDATE_LOCAL_DDE_DIFFS:Qt.REFRESH_DDE_DEMOGRAPHICS);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{dde:function(e){var t=e.hasDemographicConflict;return t}}},"[DDE] Alert to print newer NPID when the scanned NPID doesnt match active NPID":{priority:2,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.currentNpid,e.next=3,Object(cn["a"])("[DDE] NATIONAL ID","Patient has a newer National Identifier ".concat(n),"Print and proceed",[{name:"Print",slot:"start",color:"primary"}]);case 3:return e.abrupt("return",Qt.PRINT_NPID);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!0===t},scannedNpid:function(e,t){var n=t.currentNpid;return!e.match(new RegExp(n,"i"))}}},"assign newer NPID when the current one is invalid":{priority:3,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.currentNpid,e.next=3,Object(cn["a"])("NATIONAL ID","Current NPID ".concat(n," is invalid"),"Reasign and Print",[{name:"Reassign",slot:"start",color:"primary"}]);case 3:return e.abrupt("return",Qt.ASSIGN_NPID);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{demographics:function(e){var t=e.patientIsComplete;return!0===t},patientFound:function(e){return!0===e},hasInvalidNpid:function(e){return e}}},"[DDE ON] Warn program managers when Patient has incomplete demographics. Dont force them to update though":{priority:2,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("Demographics","Patient data is incomplete data","Do you want to review and update now?",[{name:"Yes",slot:"start",color:"success"},{name:"No",slot:"end",color:"danger"}],"his-danger-color");case 2:return t=e.sent,e.abrupt("return","Yes"===t?Qt.UPDATE_DMG:Qt.CONTINUE);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!0===t},demographics:function(e){var t=e.patientIsComplete;return!1===t},patientFound:function(e){return!0===e},userRoles:function(e){return!0===e.includes("Program Manager")}}},"[DDE ON] Force Users to update Incomplete Patient demographics":{priority:2,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("Patient Demographics","Demographic data is incomplete","Continue to update",[{name:"Update",slot:"start",color:"success"},{name:"Cancel",slot:"start",color:"danger"}],"his-warning-color");case 2:return t=e.sent,e.abrupt("return","Cancel"===t?Qt.GO_HOME:Qt.UPDATE_DMG);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{globalProperties:function(e){var t=e.ddeEnabled;return!0===t},demographics:function(e){var t=e.patientIsComplete;return!1===t},userRoles:function(e){return!1===e.includes("Program Manager")}}},"Warn the user when patient has high viral load":{priority:6,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("High Viral Load","Patient has a high viral load, please take immediate action!","",[{name:"OK",slot:"end",color:"danger"}],"his-danger-color");case 2:return e.abrupt("return",Qt.CONTINUE);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{hasHighViralLoad:function(e){return!0===e}}},"[ANC] Warn last LMP is more than 8 months ago and ask to initiate new pregnancy":{priority:10,targetEvent:Xt.ON_CONTINUE,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.anc,e.next=3,Object(cn["a"])("Pregancy overdue","Last menstrual period was ".concat(n.lmpMonths," months ago!"),"Would you like to initiate new pregnancy?",[{name:"Yes",slot:"end",color:"success"},{name:"No",slot:"end",color:"danger"}],"his-danger-color");case 3:return r=e.sent,e.abrupt("return","Yes"===r?Qt.INITIATE_ANC_PREGNANCY:Qt.CONTINUE);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},conditions:{programName:function(e){return"ANC"===e},anc:function(e){return!0===e.currentPregnancyIsOverdue}}},"[ANC] Exit if client is NOT ELIGIBLE for ANC":{priority:1,targetEvent:Xt.ONLOAD,actions:{alert:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(cn["a"])("Client not eligible for ANC","This program is for women eligible for ANC only","If this is a mistake, please update client Demographics or Exit",[{name:"EXIT",slot:"end",color:"success"},{name:"EDIT DEMOGRAPHICS",slot:"end",color:"danger"}],"his-danger-color");case 2:return t=e.sent,e.abrupt("return","EXIT"===t?Qt.GO_HOME:Qt.UPDATE_DMG);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},conditions:{demographics:function(e){var t=e.gender,n=t.toLowerCase();return"m"===n||"male"===n},programName:function(e){return"ANC"===e}}}},ln=n("4db7"),dn=n("ad49"),pn=n("fa73"),bn=n("d1ca"),fn=n("9b7c"),mn=n("8df6"),hn=n("7957"),gn=n("8734"),vn=n("cc6f"),On=n("ad60"),jn=n("5a0c"),_n=n.n(jn),wn=function(e){Object(Xe["a"])(n,e);var t=Object(Qe["a"])(n);function n(e,r){return Object(Ke["a"])(this,n),t.call(this,e,111,r)}return Object(Je["a"])(n,[{key:"getLmpInMonths",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,On["a"].getProgramInformation(this.patientID);case 2:if(t=e.sent,!t.date_of_lnmp){e.next=7;break}return n=_n()(t.date_of_lnmp),r=_n()(this.date),e.abrupt("return",r.diff(n,"months"));case 7:return e.abrupt("return",-1);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"pregnancyIsOverdue",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLmpInMonths();case 2:return e.t0=e.sent,e.abrupt("return",e.t0>9);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"canInitiateNewPregnancy",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getLmpInMonths();case 2:return e.t0=e.sent,e.abrupt("return",e.t0>=7);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createNewPregnancyStatus",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.createEncounter();case 2:return e.abrupt("return",this.saveValueCodedObs("Pregnancy status","New"));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(vn["a"]),kn=n("76df"),yn=Object(o["defineComponent"])({name:"Patient Confirmation",components:{IonContent:V["n"],IonHeader:V["q"],IonFooter:V["o"],IonPage:V["F"],IonToolbar:V["V"],IonRow:V["J"],IonCol:V["m"],IonButton:V["d"],IonCard:V["f"],IonCardContent:V["g"],IonCardTitle:V["j"],IonCardHeader:V["h"]},data:function(){return{app:{},program:{},patient:{},localPatient:{},cards:[],ddeInstance:{},useDDE:!1,programInfo:{},facts:{hasHighViralLoad:!1,patientFound:!1,npidHasDuplicates:!1,npidHasOverFiveDuplicates:!1,userRoles:[],scannedNpid:"",currentNpid:"",hasInvalidNpid:!1,enrolledInProgram:!1,programName:"N/A",currentOutcome:"",programs:[],identifiers:[],patientType:"N/A",anc:{lmpMonths:-1,canInitiateNewPregnancy:!1,currentPregnancyIsOverdue:!1},dde:{localNpidDiff:"",remoteNpidDiff:"",voidedNpids:{cols:[],rows:[]},hasDemographicConflict:!1,localDiffs:{},diffRows:[],diffRowColors:[]},demographics:{patientIsComplete:!1,hasInvalidDemographics:!1,invalidDemographics:[],givenName:"",familyName:"",patientName:"",landmark:"",phoneNumber:"",currentDistrict:"",currentTA:"",currentVillage:"",ancestryDistrict:"",ancestryTA:"",ancestryVillage:"",gender:"",birthdate:""},globalProperties:{useFilingNumbers:"".concat(bn["a"].FILING_NUMBERS,"=true"),ddeEnabled:"".concat($e["a"].DDE_ENABLED,"=true")}}}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=ye["a"].getActiveApp(),n&&(e.app=n),e.ddeInstance=new pn["a"],t.next=5,e.ddeInstance.loadDDEStatus();case 5:e.useDDE=e.ddeInstance.isEnabled();case 6:case"end":return t.stop()}}),t)})))()},computed:{demographics:function(){return this.facts.demographics},birthdate:function(){return Ne["b"].toStandardHisDisplayFormat(this.facts.demographics.birthdate)},isAdmin:function(){return nn["a"].isAdmin()}},watch:{$route:{handler:function(e){var t=e.query;Object(et["isEmpty"])(t)||!t.person_id&&!t.patient_barcode||this.findAndSetPatient(t.person_id,t.patient_barcode)},immediate:!0}},methods:{setViralLoadStatus:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fn["a"].getOrders(e.patient.getID());case 2:n=t.sent,Object(et["isEmpty"])(n)||(r=fn["a"].getViralLoadOrders(n),Object(et["isEmpty"])(r)||(e.facts.hasHighViralLoad=fn["a"].isHighViralLoadResult(r[0].tests[0].result[0])));case 4:case"end":return t.stop()}}),t)})))()},findAndSetPatient:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.localPatient={},r.next=3,n.presentLoading();case 3:return n.facts.scannedNpid||(n.facts.scannedNpid=t||""),r.next=6,n.resolveGlobalPropertyFacts();case 6:if(!n.useDDE||!t){r.next=11;break}return r.next=9,n.handleSearchResults(n.ddeInstance.searchNpid(t));case 9:r.next=18;break;case 11:if(!e){r.next=16;break}return r.next=14,n.handleSearchResults(an["a"].findByID(e));case 14:r.next=18;break;case 16:return r.next=18,n.handleSearchResults(an["a"].findByNpid(t));case 18:return r.next=20,V["ab"].dismiss();case 20:return r.next=22,n.onEvent(Xt.ONLOAD);case 22:case"end":return r.stop()}}),r)})))()},handleSearchResults:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],n.prev=1,n.next=4,e;case 4:r=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),n.t0 instanceof Ce["b"]&&!Object(et["isEmpty"])(n.t0.entity)?r=n.t0.entity:n.t0 instanceof Ce["a"]&&Array.isArray(n.t0.errors)?(a=Object(en["a"])(n.t0.errors),o=a[0],i=a.slice(1),"string"===typeof o&&"Invalid parameter(s)"===o&&t.setInvalidParametersFacts(i)):Object(O["c"])("".concat(n.t0),3e5);case 10:if(Object(et["isEmpty"])(r)&&!Object(et["isEmpty"])(t.localPatient)&&(r=t.localPatient),Array.isArray(r)&&r.length>1?(t.facts.npidHasDuplicates=r.length<=5,t.facts.npidHasOverFiveDuplicates=r.length>5):t.facts.patientFound=!Object(et["isEmpty"])(r),!t.facts.patientFound){n.next=33;break}return t.patient=new an["a"](Array.isArray(r)?r[0]:r),t.setPatientFacts(),n.next=17,t.setProgramFacts();case 17:if(!t.useDDE){n.next=20;break}return n.next=20,t.setDDEFacts();case 20:if("ANC"!==t.facts.programName){n.next=23;break}return n.next=23,t.setAncFacts();case 23:if("ART"!==t.facts.programName){n.next=26;break}return n.next=26,t.setViralLoadStatus();case 26:return t.facts.currentNpid=t.patient.getNationalID(),n.next=29,t.validateNpid();case 29:return n.next=31,t.drawPatientCards();case 31:n.next=36;break;case 33:if(!t.facts.scannedNpid){n.next=36;break}return n.next=36,t.setVoidedNpidFacts(t.facts.scannedNpid);case 36:case"end":return n.stop()}}),n,null,[[1,7]])})))()},validateNpid:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.useDDE){t.next=4;break}e.facts.hasInvalidNpid=!e.patient.getDocID()||e.patient.getDocID()&&Object(sn["c"])(e.patient.getNationalID()),t.next=8;break;case 4:return t.next=6,an["a"].findByNpid(e.facts.currentNpid,{page_size:2});case 6:n=t.sent,e.facts.hasInvalidNpid=Array.isArray(n)&&n.length>1;case 8:case"end":return t.stop()}}),t)})))()},setInvalidParametersFacts:function(e){this.facts.demographics.hasInvalidDemographics=!0,this.facts.demographics.invalidDemographics=e.map((function(e){var t=Object.entries(e),n=t[0][0],r=t[0][1];return[n,r.join(", ")]}))},reloadPatient:function(){return this.findAndSetPatient(this.patient.getID(),void 0)},setPatientFacts:function(){this.facts.demographics.patientIsComplete=this.patient.patientIsComplete(),this.facts.demographics.patientName=this.patient.getFullName(),this.facts.demographics.givenName=this.patient.getGivenName(),this.facts.demographics.familyName=this.patient.getFamilyName(),this.facts.demographics.landmark=this.patient.getAttribute(19),this.facts.demographics.phoneNumber=this.patient.getAttribute(12),this.facts.demographics.gender=this.patient.getGender(),this.facts.demographics.birthdate=this.patient.getBirthdate(),this.facts.demographics.ancestryDistrict=this.patient.getHomeDistrict(),this.facts.demographics.ancestryTA=this.patient.getHomeTA(),this.facts.demographics.ancestryVillage=this.patient.getHomeVillage(),this.facts.demographics.currentDistrict=this.patient.getCurrentDistrict(),this.facts.demographics.currentTA=this.patient.getCurrentTA(),this.facts.demographics.currentVillage=this.patient.getCurrentVillage(),this.facts.identifiers=this.patient.getIdentifiers().map((function(e){return e.type.name}))},setAncFacts:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new wn(e.patient.getID(),-1),t.next=3,n.canInitiateNewPregnancy();case 3:return e.facts.anc.canInitiateNewPregnancy=t.sent,t.next=6,n.pregnancyIsOverdue();case 6:return e.facts.anc.currentPregnancyIsOverdue=t.sent,t.next=9,n.getLmpInMonths();case 9:e.facts.anc.lmpMonths=t.sent;case 10:case"end":return t.stop()}}),t)})))()},buildDDEDiffs:function(e){var t=[],n={givenName:{label:"First Name",ref:"given_name"},familyName:{label:"Last Name",ref:"family_name"},birthdate:{label:"Birthdate",ref:"birthdate"},gender:{label:"Gender",ref:"gender"},phoneNumber:{label:"Phone number",ref:"phone_number"},ancestryDistrict:{label:"Home District",ref:"home_district"},ancestryTA:{label:"Home TA",ref:"home_traditional_authority"},ancestryVillage:{label:"Home Village",ref:"home_village"},currentDistrict:{label:"Current District",ref:"current_district"},currentTA:{label:"Current TA",ref:"current_traditional_authority"},currentVillage:{label:"Current Village",ref:"current_village"}},r=0,a={indexes:[],class:"his-empty-set-color"};for(var o in n){var i=this.facts.demographics[o],c=i;n[o].ref in e&&(a.indexes.push(r),i=e[n[o].ref].local,c=e[n[o].ref].remote),t.push([n[o].label,i,c]),++r}return{comparisons:t,rowColors:[a]}},resolveGlobalPropertyFacts:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=regeneratorRuntime.keys(e.facts.globalProperties);case 1:if((t.t1=t.t0()).done){t.next=9;break}if(n=t.t1.value,"string"!==typeof e.facts.globalProperties[n]){t.next=7;break}return t.next=6,dn["a"].isProp(e.facts.globalProperties[n]);case 6:e.facts.globalProperties[n]=t.sent;case 7:t.next=1;break;case 9:case"end":return t.stop()}}),t)})))()},setProgramFacts:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.facts.programName=e.app.applicationName,t.prev=1,e.program=new on["a"](e.patient.getID()),t.next=5,e.program.getProgram();case 5:return e.programInfo=t.sent,n=e.programInfo,r=n.program,a=n.outcome,e.facts.enrolledInProgram=!(Object(sn["d"])(r)||r.match(/n\/a/i)),e.facts.currentOutcome=a,e.facts.userRoles=nn["a"].getUserRoles().map((function(e){return e.role})),t.next=12,hn["a"].getFirstValueCoded(e.patient.getID(),"Type of patient");case 12:if(t.t0=t.sent,t.t0){t.next=15;break}t.t0="N/A";case 15:e.facts.patientType=t.t0,t.next=21;break;case 18:t.prev=18,t.t1=t["catch"](1),console.error("".concat(t.t1));case 21:case"end":return t.stop()}}),t,null,[[1,18]])})))()},setDDEFacts:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ddeInstance.getLocalAndRemoteDiffs();case 3:if(t.t1=n=t.sent,t.t0=null===t.t1,t.t0){t.next=7;break}t.t0=void 0===n;case 7:if(!t.t0){t.next=11;break}t.t2=void 0,t.next=12;break;case 11:t.t2=n.diff;case 12:r=t.t2,e.facts.dde.localDiffs=e.ddeInstance.formatDiffValuesByType(r,"local"),a=e.buildDDEDiffs(r),o=a.comparisons,i=a.rowColors,e.facts.dde.diffRows=o,e.facts.dde.diffRowColors=i,r.npid&&(c=r.npid,s=c.local,u=c.remote,e.facts.dde.localNpidDiff=s,e.facts.dde.remoteNpidDiff=u,delete r.npid),e.facts.dde.hasDemographicConflict=!Object(et["isEmpty"])(r),t.next=24;break;case 21:t.prev=21,t.t3=t["catch"](0),console.warn(t.t3);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},drawPatientCards:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.app.confirmationSummary){t.next=2;break}return t.abrupt("return");case 2:return e.cards=[],t.next=5,e.app.confirmationSummary(e.patient,e.programInfo);case 5:n=t.sent,t.t0=regeneratorRuntime.keys(n);case 7:if((t.t1=t.t0()).done){t.next=15;break}return r=t.t1.value,t.next=11,n[r]();case 11:a=t.sent,e.cards.push({title:r,data:a}),t.next=7;break;case 15:case"end":return t.stop()}}),t)})))()},setVoidedNpidFacts:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=["Name","Birthdate","Gender","Ancestry Home","CurrentID","Action"],a=[],n.next=4,t.ddeInstance.findVoidedIdentifier(e);case 4:o=n.sent,o&&(a=o.map((function(e){var n=new an["a"](e);return[n.getFullName(),n.getBirthdate(),n.getGender(),n.getHomeTA(),n.getNationalID(),{type:"button",name:"Select",action:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.patientIsComplete()){e.next=4;break}return e.abrupt("return",t.$router.push("/patient/registration?edit_person=".concat(n.getID())));case 4:if(!n.getNationalID().match(/unknown/i)&&n.getDocID()){e.next=17;break}return e.prev=5,e.next=8,n.assignNpid();case 8:return e.next=10,t.findAndSetPatient(n.getID(),void 0);case 10:return e.abrupt("return",V["cb"].dismiss());case 13:return e.prev=13,e.t0=e["catch"](5),Object(O["e"])("Failed to assign npid to patient with unknown npid."),e.abrupt("return",console.error(e.t0));case 17:return e.next=19,V["cb"].dismiss();case 19:return e.next=21,t.findAndSetPatient(void 0,n.getNationalID());case 21:case"end":return e.stop()}}),e,null,[[5,13]])})));function r(){return e.apply(this,arguments)}return r}()}]})),t.facts.dde.voidedNpids.cols=r,t.facts.dde.voidedNpids.rows=a);case 6:case"end":return n.stop()}}),n)})))()},presentLoading:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V["ab"].create({message:"Please wait...",backdropDismiss:!1});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e)})))()},onEvent:function(e){var t=arguments,n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,o,i,c,s,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=t.length>1&&void 0!==t[1]?t[1]:{},o=Object(rn["a"])(n.facts,un,"",e),r.t0=regeneratorRuntime.keys(o);case 3:if((r.t1=r.t0()).done){r.next=18;break}if(i=r.t1.value,s=o[i],null===s||void 0===s||null===(c=s.actions)||void 0===c||!c.alert){r.next=16;break}return r.next=9,null===s||void 0===s||null===(u=s.actions)||void 0===u?void 0:u.alert(n.facts);case 9:return l=r.sent,r.next=12,n.runFlowState(l);case 12:if(r.t2=r.sent,r.t3=Qt.FORCE_EXIT,r.t2!==r.t3){r.next=16;break}return r.abrupt("return",!1);case 16:r.next=3;break;case 18:"function"===typeof a&&a();case 19:case"end":return r.stop()}}),r)})))()},onInitiateNewAncPregnancy:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["a"])("Are you sure you want to initiate new pregnancy?");case 2:if(!t.sent){t.next=13;break}return t.next=5,e.initiateNewAncPregnancy();case 5:if(!t.sent){t.next=12;break}return e.facts.anc.canInitiateNewPregnancy=!1,e.facts.anc.currentPregnancyIsOverdue=!1,t.next=10,e.nextTask();case 10:t.next=13;break;case 12:Object(O["e"])("Unable to initiate new pregnancy");case 13:case"end":return t.stop()}}),t)})))()},initiateNewAncPregnancy:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new wn(e.patient.getID(),-1).createNewPregnancyStatus());case 1:case"end":return t.stop()}}),t)})))()},runFlowState:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r={},r[Qt.GO_HOME]=function(){return t.$router.push("/"),Qt.FORCE_EXIT},r[Qt.GO_BACK]=function(){return t.$router.back(),Qt.FORCE_EXIT},r[Qt.ENROLL]=function(){return t.program.enrollProgram()},r[Qt.ACTIVATE_FN]=function(){return t.$router.push("/art/filing_numbers/".concat(t.patient.getID(),"?assign=true")),Qt.FORCE_EXIT},r[Qt.UPDATE_DMG]=function(){return t.$router.push("/patient/registration?edit_person=".concat(t.patient.getID())),Qt.FORCE_EXIT},r[Qt.PRINT_NPID]=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ddeInstance.printNpid(t.patient.getID());case 2:return e.next=4,Object(gn["a"])(1800);case 4:return e.abrupt("return",Qt.CONTINUE);case 5:case"end":return e.stop()}}),e)}))),r[Qt.CREATE_NPID_WITH_REMOTE_DIFF]=Object(c["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.facts.dde.remoteNpidDiff,e.prev=1,e.t0=n,!e.t0){e.next=7;break}return e.next=6,t.ddeInstance.createNPID(n);case 6:e.t0=e.sent;case 7:if(!e.t0){e.next=19;break}return t.facts.scannedNpid=n,t.facts.currentNpid=n,t.facts.dde.localNpidDiff=n,Object(O["d"])("Remote NPID successfully updated"),e.next=14,Object(gn["a"])(300);case 14:return e.next=16,t.ddeInstance.printNpid();case 16:return e.next=18,t.findAndSetPatient(void 0,n);case 18:return e.abrupt("return",Qt.FORCE_EXIT);case 19:e.next=39;break;case 21:if(e.prev=21,e.t1=e["catch"](1),r=/Identifier already assigned to another patient/i,!(e.t1 instanceof Ce["a"]&&e.t1.errors.join(",").match(r))){e.next=38;break}return e.next=27,t.ddeInstance.reassignNpid(t.patient.getDocID());case 27:if(a=e.sent,!a){e.next=38;break}return t.patient=new an["a"](a),Object(O["d"])("Patient has been reassigned NPID"),e.next=33,Object(gn["a"])(300);case 33:return e.next=35,t.ddeInstance.printNpid();case 35:return e.next=37,t.findAndSetPatient(void 0,t.patient.getNationalID());case 37:return e.abrupt("return",Qt.FORCE_EXIT);case 38:Object(O["c"])("Unable to assign NPID: ".concat(e.t1));case 39:case"end":return e.stop()}}),e,null,[[1,21]])}))),r[Qt.ASSIGN_NPID]=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.patient.assignNpid();case 2:return e.next=4,new ln["a"](t.patient.getID()).printNidLbl();case 4:return e.next=6,Object(gn["a"])(300);case 6:return e.next=8,t.reloadPatient();case 8:return e.abrupt("return",Qt.FORCE_EXIT);case 9:case"end":return e.stop()}}),e)}))),r[Qt.INITIATE_ANC_PREGNANCY]=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initiateNewAncPregnancy();case 2:return e.abrupt("return",Qt.CONTINUE);case 3:case"end":return e.stop()}}),e)}))),r[Qt.VIEW_MERGE_AUDIT_FOR_NPID]=function(){return t.$router.push("/merge/rollback/".concat(t.facts.scannedNpid)),Qt.FORCE_EXIT},r[Qt.RESOLVE_DUPLICATE_NPIDS]=function(){return t.$router.push("/npid/duplicates/".concat(t.facts.scannedNpid)),Qt.FORCE_EXIT},r[Qt.REFRESH_DDE_DEMOGRAPHICS]=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ddeInstance.refreshDemographics();case 2:return e.next=4,t.reloadPatient();case 4:return e.abrupt("return",Qt.FORCE_EXIT);case 5:case"end":return e.stop()}}),e)}))),r[Qt.ADD_AS_DRUG_REFILL]=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createPatientType("Drug Refill");case 2:return e.abrupt("return",Qt.CONTINUE);case 3:case"end":return e.stop()}}),e)}))),r[Qt.ADD_AS_NEW_PATIENT]=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createPatientType("New patient");case 2:return e.abrupt("return",Qt.CONTINUE);case 3:case"end":return e.stop()}}),e)}))),r[Qt.ADD_AS_EXTERNAL_CONSULTATION]=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.createPatientType("External consultation");case 2:return e.abrupt("return",Qt.CONTINUE);case 3:case"end":return e.stop()}}),e)}))),r[Qt.SEARCH_BY_NAME]=function(){return t.$router.push("/patient/registration"),Qt.FORCE_EXIT},r[Qt.UPDATE_LOCAL_DDE_DIFFS]=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.ddeInstance.updateLocalDifferences(t.facts.dde.localDiffs);case 2:return e.next=4,t.reloadPatient();case 4:return e.abrupt("return",Qt.FORCE_EXIT);case 5:case"end":return e.stop()}}),e)}))),!(e in r)){n.next=27;break}return n.prev=18,n.next=21,r[e]();case 21:return n.abrupt("return",n.sent);case 24:n.prev=24,n.t0=n["catch"](18),Object(O["c"])("".concat(n.t0));case 27:return n.abrupt("return",e);case 28:case"end":return n.stop()}}),n,null,[[18,24]])})))()},createPatientType:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=new mn["a"](t.patient.getID(),-1),n.next=3,r.createEncounter();case 3:return n.next=5,r.savePatientType(e);case 5:case"end":return n.stop()}}),n)})))()},onVoid:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(kn["a"])(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,an["a"].voidPatient(e.patient.getID(),n);case 3:e.$router.push("/"),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),Object(O["c"])("".concat(t.t0));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),"void-modal");case 1:case"end":return t.stop()}}),t)})))()},nextTask:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onEvent(Xt.ON_CONTINUE,(function(){Object(tn["b"])(e.patient.getID(),e.$router)}));case 2:case"end":return t.stop()}}),t)})))()}}});n("dd35");const xn=I()(yn,[["render",Zt],["__scopeId","data-v-5bbd2d98"]]);var Nn=xn,Cn=Object(o["withScopeId"])("data-v-34bfc446");Object(o["pushScopeId"])("data-v-34bfc446");var Vn=Object(o["createTextVNode"])("Scan work-station location"),Dn=Object(o["createTextVNode"])(" Cancel "),Tn=Object(o["createTextVNode"])(" Next ");Object(o["popScopeId"])();var In=Cn((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-toolbar"),u=Object(o["resolveComponent"])("ion-header"),l=Object(o["resolveComponent"])("barcode-input"),d=Object(o["resolveComponent"])("ion-content"),p=Object(o["resolveComponent"])("his-keyboard"),b=Object(o["resolveComponent"])("ion-button"),f=Object(o["resolveComponent"])("ion-footer"),m=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(m,null,{default:Cn((function(){return[Object(o["createVNode"])(u,{translucent:!0},{default:Cn((function(){return[Object(o["createVNode"])(s,null,{default:Cn((function(){return[Object(o["createVNode"])(c,null,{default:Cn((function(){return[Vn]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(d,null,{default:Cn((function(){return[Object(o["createVNode"])(l,{class:"his-card",clearValue:e.clearValue,virtualText:e.kbText,onOnValue:e.onbarcodeText,onOnScan:e.onScan},null,8,["clearValue","virtualText","onOnValue","onOnScan"])]})),_:1}),e.useVirtualInput?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,kbConfig:e.NUMBERS,onKeyPress:e.onKbClick},null,8,["kbConfig","onKeyPress"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(f,null,{default:Cn((function(){return[Object(o["createVNode"])(s,{color:"dark"},{default:Cn((function(){return[Object(o["createVNode"])(b,{color:"danger",size:"large","router-link":"/login"},{default:Cn((function(){return[Dn]})),_:1}),e.barcodeText?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:0,slot:"end",color:"success",size:"large",onClick:e.searchLocation},{default:Cn((function(){return[Tn]})),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})})),Rn=n("efaf"),Sn=n("db10"),Pn=n("6be2"),An=Object(o["defineComponent"])({name:"HC location",components:{BarcodeInput:Rn["a"],IonContent:V["n"],IonHeader:V["q"],IonPage:V["F"],IonTitle:V["U"],IonToolbar:V["V"],IonButton:V["d"],IonFooter:V["o"],HisKeyboard:Sn["a"]},setup:function(){var e=Object(N["a"])(),t=e.useVirtualInput,n=Object(o["ref"])(""),r=Object(o["ref"])(""),a=Object(o["ref"])("");function i(){return s.apply(this,arguments)}function s(){return s=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.value.includes("$")||(n.value+="$"),e.next=3,Ce["e"].getJson("locations/".concat(n.value));case 3:t=e.sent,Object(et["isEmpty"])(t)?Object(O["e"])("Invalid location"):(o=t,sessionStorage.siteUUID=o.uuid,sessionStorage.userLocation=o.name,Gc.push("/")),r.value=n.value,n.value="",a.value=n.value;case 8:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function u(e){n.value=e}function l(e){a.value=e}function d(e){return p.apply(this,arguments)}function p(){return p=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.value=t,e.next=3,i();case 3:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}return{onbarcodeText:u,onScan:d,onKbClick:l,searchLocation:i,useVirtualInput:t,kbText:a,clearValue:r,barcodeText:n,NUMBERS:Pn["c"]}}});n("133b");const En=I()(An,[["render",In],["__scopeId","data-v-34bfc446"]]);var Bn=En;function Fn(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{fields:e.fields,skipSummary:!0,onOnFinish:e.onFinish},null,8,["fields","onOnFinish"])}var Ln=n("d95e"),Mn=n("d10e"),Hn=n("7920"),Un=n("2706"),qn=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},data:function(){return{fields:[],form:{}}},created:function(){this.fields=this.getFields()},methods:{onFinish:function(e){var t=this.resolveData(e);this.$router.push({path:"/patient/search_results",query:t})},resolveData:function(e){var t={};for(var n in e){var r=e[n];r&&null!=r.value&&(t[n]=r.value)}return t},mapToOption:function(e){return e.map((function(e){return{label:e,value:e}}))},getFields:function(){var e=this;return[{id:"given_name",helpText:"First name",type:Ln["b"].TT_TEXT,validation:function(e){return Un["a"].isName(e)},options:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.given_name&&null!==n.given_name.value){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,Mn["a"].searchGivenName(n.given_name.value);case 4:return r=t.sent,t.abrupt("return",e.mapToOption(r));case 6:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"family_name",helpText:"Last name",type:Ln["b"].TT_TEXT,validation:function(e){return Un["a"].isName(e)},options:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.family_name&&null!==n.family_name.value){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,Mn["a"].searchFamilyName(n.family_name.value);case 4:return r=t.sent,t.abrupt("return",e.mapToOption(r));case 6:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"gender",helpText:"Gender",type:Ln["b"].TT_SELECT,validation:function(e){return Un["a"].required(e)},options:function(){return[{label:"Male",value:"M"},{label:"Female",value:"F"}]}}]}}});const Gn=I()(qn,[["render",Fn]]);var zn=Gn,Yn=Object(o["withScopeId"])("data-v-416d2c6b");Object(o["pushScopeId"])("data-v-416d2c6b");var Wn=Object(o["createTextVNode"])("HIS Core"),$n={id:"container"},Kn={id:"page0",class:"content-containers"},Jn={id:"page1",class:"content-containers"},Xn=Object(o["createTextVNode"])("Cancel"),Qn=Object(o["createTextVNode"])("Next"),Zn=Object(o["createTextVNode"])("Back");Object(o["popScopeId"])();var er=Yn((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-toolbar"),u=Object(o["resolveComponent"])("ion-header"),l=Object(o["resolveComponent"])("input-text"),d=Object(o["resolveComponent"])("input-text-keyboard"),p=Object(o["resolveComponent"])("ion-content"),b=Object(o["resolveComponent"])("ion-button"),f=Object(o["resolveComponent"])("ion-footer"),m=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(m,null,{default:Yn((function(){return[Object(o["createVNode"])(u,{translucent:!0},{default:Yn((function(){return[Object(o["createVNode"])(s,null,{default:Yn((function(){return[Object(o["createVNode"])(c,null,{default:Yn((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.helpText),1)]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(p,{fullscreen:!0},{default:Yn((function(){return[Object(o["createVNode"])(u,{collapse:"condense"},{default:Yn((function(){return[Object(o["createVNode"])(s,null,{default:Yn((function(){return[Object(o["createVNode"])(c,{size:"large"},{default:Yn((function(){return[Wn]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])("div",$n,[Object(o["createVNode"])("div",Kn,[Object(o["createVNode"])(l,{passedKey:e.passedKey},null,8,["passedKey"]),Object(o["createVNode"])(d,{onKeyPress:e.keyPressed},null,8,["onKeyPress"])]),Object(o["createVNode"])("div",Jn,[Object(o["createVNode"])(l,{passedKey:e.passedKey},null,8,["passedKey"]),Object(o["createVNode"])(d,{onKeyPress:e.keyPressed},null,8,["onKeyPress"])])])]})),_:1}),Object(o["createVNode"])(f,{translucent:!0,class:"loc-footer"},{default:Yn((function(){return[Object(o["createVNode"])(b,{class:"footer-btns",color:"danger"},{default:Yn((function(){return[Xn]})),_:1}),Object(o["createVNode"])(b,{class:"footer-btns",onClick:e.goNextPage,id:"nextButton",color:"success"},{default:Yn((function(){return[Qn]})),_:1},8,["onClick"]),Object(o["createVNode"])(b,{class:"footer-btns",onClick:e.goBack,id:"backButton",color:"primary"},{default:Yn((function(){return[Zn]})),_:1},8,["onClick"])]})),_:1})]})),_:1})})),tr=Object(o["withScopeId"])("data-v-34f065e0");Object(o["pushScopeId"])("data-v-34f065e0");var nr={id:"inputs-container"};Object(o["popScopeId"])();var rr=tr((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-col"),s=Object(o["resolveComponent"])("ion-row"),u=Object(o["resolveComponent"])("ion-grid");return Object(o["openBlock"])(),Object(o["createBlock"])("div",nr,[Object(o["createVNode"])(u,{class:"main-table"},{default:tr((function(){return[Object(o["createVNode"])(s,null,{default:tr((function(){return[Object(o["createVNode"])(c,{"size-md":"12"},{default:tr((function(){return[Object(o["createVNode"])("input",{type:"text",id:"touchscreenInput",value:e.passedKey,autofocus:"",ref:"barcodeInputbox"},null,8,["value"])]})),_:1})]})),_:1})]})),_:1})])})),ar=Object(o["defineComponent"])({props:["passedKey"],name:"InputSearchResult",components:{},data:function(){return{barcodeText:this.passedKey}},methods:{},mounted:function(){},watch:{barcodeText:function(){}}});n("ddb2");const or=I()(ar,[["render",rr],["__scopeId","data-v-34f065e0"]]);var ir=or,cr=Object(o["withScopeId"])("data-v-5572eb86");Object(o["pushScopeId"])("data-v-5572eb86");var sr={id:"inputs-container"},ur=Object(o["createTextVNode"])("1"),lr=Object(o["createTextVNode"])("2"),dr=Object(o["createTextVNode"])("3"),pr=Object(o["createTextVNode"])("4"),br=Object(o["createTextVNode"])("5"),fr=Object(o["createTextVNode"])("6"),mr=Object(o["createTextVNode"])("7"),hr=Object(o["createTextVNode"])("8"),gr=Object(o["createTextVNode"])("9"),vr=Object(o["createTextVNode"])("0"),Or=Object(o["createTextVNode"])("Q"),jr=Object(o["createTextVNode"])("W"),_r=Object(o["createTextVNode"])("E"),wr=Object(o["createTextVNode"])("R"),kr=Object(o["createTextVNode"])("T"),yr=Object(o["createTextVNode"])("Y"),xr=Object(o["createTextVNode"])("U"),Nr=Object(o["createTextVNode"])("I"),Cr=Object(o["createTextVNode"])("O"),Vr=Object(o["createTextVNode"])("P"),Dr=Object(o["createTextVNode"])("Caps"),Tr=Object(o["createTextVNode"])("A"),Ir=Object(o["createTextVNode"])("S"),Rr=Object(o["createTextVNode"])("D"),Sr=Object(o["createTextVNode"])("F"),Pr=Object(o["createTextVNode"])("G"),Ar=Object(o["createTextVNode"])("H"),Er=Object(o["createTextVNode"])("J"),Br=Object(o["createTextVNode"])("K"),Fr=Object(o["createTextVNode"])("L"),Lr=Object(o["createTextVNode"])("Del"),Mr=Object(o["createTextVNode"])("Z"),Hr=Object(o["createTextVNode"])("X"),Ur=Object(o["createTextVNode"])("C"),qr=Object(o["createTextVNode"])("V"),Gr=Object(o["createTextVNode"])("B"),zr=Object(o["createTextVNode"])("N"),Yr=Object(o["createTextVNode"])("M"),Wr=Object(o["createTextVNode"])(">"),$r=Object(o["createTextVNode"])("."),Kr=Object(o["createTextVNode"])("<"),Jr=Object(o["createTextVNode"])("Space");Object(o["popScopeId"])();var Xr=cr((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-button"),s=Object(o["resolveComponent"])("ion-col"),u=Object(o["resolveComponent"])("ion-row"),l=Object(o["resolveComponent"])("ion-grid");return Object(o["openBlock"])(),Object(o["createBlock"])("div",sr,[Object(o["createVNode"])(l,{class:"main-table"},{default:cr((function(){return[Object(o["createVNode"])(u,null,{default:cr((function(){return[Object(o["createVNode"])(s,{"size-md":"12",id:"keyboard-elements"},{default:cr((function(){return[Object(o["createVNode"])(l,{class:"keyboard-table",ref:"keyboardElements"},{default:cr((function(){return[Object(o["createVNode"])(u,null,{default:cr((function(){return[Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[1]||(t[1]=function(t){return e.keyPress("1")}),class:"keyboard-btn",id:"btn-1",color:"primary"},{default:cr((function(){return[ur]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[2]||(t[2]=function(t){return e.keyPress("2")}),class:"keyboard-btn",id:"btn-2",color:"primary"},{default:cr((function(){return[lr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[3]||(t[3]=function(t){return e.keyPress("3")}),class:"keyboard-btn",id:"btn-3",color:"primary"},{default:cr((function(){return[dr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[4]||(t[4]=function(t){return e.keyPress("4")}),class:"keyboard-btn",id:"btn-4",color:"primary"},{default:cr((function(){return[pr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[5]||(t[5]=function(t){return e.keyPress("5")}),class:"keyboard-btn",id:"btn-5",color:"primary"},{default:cr((function(){return[br]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[6]||(t[6]=function(t){return e.keyPress("6")}),class:"keyboard-btn",id:"btn-6",color:"primary"},{default:cr((function(){return[fr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[7]||(t[7]=function(t){return e.keyPress("7")}),class:"keyboard-btn",id:"btn-7",color:"primary"},{default:cr((function(){return[mr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[8]||(t[8]=function(t){return e.keyPress("8")}),class:"keyboard-btn",id:"btn-8",color:"primary"},{default:cr((function(){return[hr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[9]||(t[9]=function(t){return e.keyPress("9")}),class:"keyboard-btn",id:"btn-9",color:"primary"},{default:cr((function(){return[gr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[10]||(t[10]=function(t){return e.keyPress("0")}),class:"keyboard-btn",id:"btn-0",color:"primary"},{default:cr((function(){return[vr]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(u,null,{default:cr((function(){return[Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[11]||(t[11]=function(t){return e.keyPress("Q")}),class:"keyboard-btn",id:"btn-Q",color:"primary"},{default:cr((function(){return[Or]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[12]||(t[12]=function(t){return e.keyPress("W")}),class:"keyboard-btn",id:"btn-W",color:"primary"},{default:cr((function(){return[jr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[13]||(t[13]=function(t){return e.keyPress("E")}),class:"keyboard-btn",id:"btn-E",color:"primary"},{default:cr((function(){return[_r]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[14]||(t[14]=function(t){return e.keyPress("R")}),class:"keyboard-btn",id:"btn-R",color:"primary"},{default:cr((function(){return[wr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[15]||(t[15]=function(t){return e.keyPress("T")}),class:"keyboard-btn",id:"btn-T",color:"primary"},{default:cr((function(){return[kr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[16]||(t[16]=function(t){return e.keyPress("Y")}),class:"keyboard-btn",id:"btn-Y",color:"primary"},{default:cr((function(){return[yr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[17]||(t[17]=function(t){return e.keyPress("U")}),class:"keyboard-btn",id:"btn-U",color:"primary"},{default:cr((function(){return[xr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[18]||(t[18]=function(t){return e.keyPress("I")}),class:"keyboard-btn",id:"btn-I",color:"primary"},{default:cr((function(){return[Nr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[19]||(t[19]=function(t){return e.keyPress("O")}),class:"keyboard-btn",id:"btn-O",color:"primary"},{default:cr((function(){return[Cr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[20]||(t[20]=function(t){return e.keyPress("P")}),class:"keyboard-btn",id:"btn-P",color:"primary"},{default:cr((function(){return[Vr]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(u,null,{default:cr((function(){return[Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[21]||(t[21]=function(t){return e.keyPress("Caps")}),class:"keyboard-btn",id:"btn-A",color:"primary"},{default:cr((function(){return[Dr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[22]||(t[22]=function(t){return e.keyPress("A")}),class:"keyboard-btn",id:"btn-A",color:"primary"},{default:cr((function(){return[Tr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[23]||(t[23]=function(t){return e.keyPress("S")}),class:"keyboard-btn",id:"btn-S",color:"primary"},{default:cr((function(){return[Ir]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[24]||(t[24]=function(t){return e.keyPress("D")}),class:"keyboard-btn",id:"btn-D",color:"primary"},{default:cr((function(){return[Rr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[25]||(t[25]=function(t){return e.keyPress("F")}),class:"keyboard-btn",id:"btn-F",color:"primary"},{default:cr((function(){return[Sr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[26]||(t[26]=function(t){return e.keyPress("G")}),class:"keyboard-btn",id:"btn-G",color:"primary"},{default:cr((function(){return[Pr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[27]||(t[27]=function(t){return e.keyPress("H")}),class:"keyboard-btn",id:"btn-H",color:"primary"},{default:cr((function(){return[Ar]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[28]||(t[28]=function(t){return e.keyPress("J")}),class:"keyboard-btn",id:"btn-J",color:"primary"},{default:cr((function(){return[Er]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[29]||(t[29]=function(t){return e.keyPress("K")}),class:"keyboard-btn",id:"btn-K",color:"primary"},{default:cr((function(){return[Br]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[30]||(t[30]=function(t){return e.keyPress("L")}),class:"keyboard-btn",id:"btn-L",color:"primary"},{default:cr((function(){return[Fr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[31]||(t[31]=function(t){return e.keyPress("Del")}),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:cr((function(){return[Lr]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(u,null,{default:cr((function(){return[Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[32]||(t[32]=function(t){return e.keyPress("Z")}),class:"keyboard-btn",id:"btn-A",color:"primary"},{default:cr((function(){return[Mr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[33]||(t[33]=function(t){return e.keyPress("X")}),class:"keyboard-btn",id:"btn-S",color:"primary"},{default:cr((function(){return[Hr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[34]||(t[34]=function(t){return e.keyPress("C")}),class:"keyboard-btn",id:"btn-D",color:"primary"},{default:cr((function(){return[Ur]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[35]||(t[35]=function(t){return e.keyPress("V")}),class:"keyboard-btn",id:"btn-F",color:"primary"},{default:cr((function(){return[qr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[36]||(t[36]=function(t){return e.keyPress("B")}),class:"keyboard-btn",id:"btn-G",color:"primary"},{default:cr((function(){return[Gr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[37]||(t[37]=function(t){return e.keyPress("N")}),class:"keyboard-btn",id:"btn-H",color:"primary"},{default:cr((function(){return[zr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[38]||(t[38]=function(t){return e.keyPress("M")}),class:"keyboard-btn",id:"btn-J",color:"primary"},{default:cr((function(){return[Yr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[39]||(t[39]=function(t){return e.keyPress("<")}),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:cr((function(){return[Wr]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[40]||(t[40]=function(t){return e.keyPress(".")}),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:cr((function(){return[$r]})),_:1})]})),_:1}),Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[41]||(t[41]=function(t){return e.keyPress(">")}),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:cr((function(){return[Kr]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(u,null,{default:cr((function(){return[Object(o["createVNode"])(s,null,{default:cr((function(){return[Object(o["createVNode"])(c,{onClick:t[42]||(t[42]=function(t){return e.keyPress("Space")}),class:"keyboard-btn",id:"btn-backspace",color:"primary"},{default:cr((function(){return[Jr]})),_:1})]})),_:1})]})),_:1})]})),_:1},512)]})),_:1})]})),_:1})]})),_:1})])})),Qr=Object(o["defineComponent"])({props:["onKeyPress"],name:"InputSearchResult",components:{},data:function(){return{keyboardPressedKeys:""}},methods:{keyPress:function(e){var t=this.keyboardPressedKeys;try{e.match(/Del/i)?this.keyboardPressedKeys=t.substring(0,t.length-1):e.match(/Space/i)?this.keyboardPressedKeys+=" ":e.match(/Caps/i)?console.log(e):this.keyboardPressedKeys+=e}catch(n){this.keyboardPressedKeys=t}this.onKeyPress(this.keyboardPressedKeys)}},mounted:function(){this.keyPress(this.keyboardPressedKeys)}});n("a039");const Zr=I()(Qr,[["render",Xr],["__scopeId","data-v-5572eb86"]]);var ea=Zr,ta=Object(o["defineComponent"])({name:"Client search",components:{IonContent:V["n"],IonHeader:V["q"],IonPage:V["F"],IonTitle:V["U"],IonToolbar:V["V"],IonFooter:V["o"],"input-text":ir,"input-text-keyboard":ea},data:function(){return{helpText:"First Name",passedKey:"",containers:[],pageCount:0,helpTexts:["First Name","Last Name"]}},methods:{keyPressed:function(e){this.passedKey=e},goNextPage:function(){for(var e=this.containers,t=0;t<e.length;t++)e[t].setAttribute("style","visibility: hidden;");this.pageCount+=1;var n=document.getElementById("page"+this.pageCount),r=document.getElementById("backButton"),a=document.getElementById("nextButton");void 0==n?(this.pageCount-=1,n=document.getElementById("page"+this.pageCount)):r.setAttribute("style","display: inline;"),this.pageCount+1==this.helpTexts.length?a.innerHTML="Finish":a.innerHTML="Next",n.setAttribute("style","visibility: visible;"),this.helpText=this.helpTexts[this.pageCount]},goBack:function(){for(var e=this.containers,t=0;t<e.length;t++)e[t].setAttribute("style","visibility: hidden;");this.pageCount-=1;var n=document.getElementById("page"+this.pageCount),r=document.getElementById("backButton"),a=document.getElementById("nextButton");void 0==n?(this.pageCount+=1,n=document.getElementById("page"+this.pageCount)):(r.setAttribute("style","display: none;"),a.innerHTML="Next"),0==this.pageCount&&(r.setAttribute("style","display: none;"),a.innerHTML="Next"),n.setAttribute("style","visibility: visible;"),this.helpText=this.helpTexts[this.pageCount]}},mounted:function(){for(var e=document.getElementsByClassName("content-containers"),t=0;t<e.length;t++)this.containers.push(e[t])}});n("9ed9");const na=I()(ta,[["render",er],["__scopeId","data-v-416d2c6b"]]);var ra=na;function aa(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form"),s=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{onOnIndex:t[1]||(t[1]=function(t){return e.fieldComponent=""}),skipSummary:!0,activeField:e.fieldComponent,fields:e.fields,onFinishAction:e.onFinish},null,8,["activeField","fields","onFinishAction"])]})),_:1})}n("07ac"),n("b64b");var oa=n("b446"),ia=n("50e7"),ca=n("80b5"),sa=n("1f9a"),ua=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"],IonPage:V["F"]},data:function(){return{app:ye["a"].getActiveApp(),ddeInstance:{},ddeDocID:"",ddeIsReassign:!1,skipSummary:!1,currentAddressAttributes:["current_region","current_district","current_village","current_traditional_authority"],homeAddressAttributes:["home_region","home_district","home_traditional_authority","home_village"],hasIncompleteData:!1,patient:{},editPersonData:{},editPerson:-1,personAttribute:"",activeField:"",fieldComponent:"",fields:[],isMilitarySite:!1,presets:{},registrationSummary:{},form:{}}},watch:{$route:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.query,t.ddeInstance=new pn["a"],n.next=4,t.ddeInstance.loadDDEStatus();case 4:if(!r.edit_person){n.next=13;break}return t.ddeIsReassign=r.dde_reassign,t.ddeDocID=r.doc_id,t.ddeInstance.setPatientID(r.edit_person),r.person_attribute&&(t.personAttribute=r.person_attribute),n.next=11,t.initEditMode(r.edit_person);case 11:n.next=14;break;case 13:t.presets=r;case 14:return t.fields=t.getFields(),n.next=17,$e["b"].militarySiteEnabled();case 17:t.isMilitarySite=n.sent;case 18:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{getFields:function(){var e=[];return e.push(this.personIndexField()),e.push(this.givenNameField()),e.push(this.familyNameField()),e.push(this.genderField()),e.push(this.searchResultField()),e=e.concat(this.dobFields()),e.push(this.homeRegionField()),e.push(this.homeDistrictField()),e.push(this.homeTAField()),e.push(this.homeVillageField()),e.push(this.currentRegionField()),e.push(this.currentDistrictField()),e.push(this.currentTAField()),e.push(this.currentVillage()),e=e.concat(this.landmarkFields()),e.push(this.cellPhoneField()),e.push(this.patientTypeField()),e.push(this.facilityLocationField()),e.push(this.occupationField()),e.push(this.regimentField()),e=e.concat(this.dateJoinedMilitaryFields()),e.push(this.rankField()),e.push(this.relationshipField()),e.push(this.possibleDuplicatesField()),e.push(this.patientRegistrationSummary()),e},isEditMode:function(){return this.editPerson>=1},initEditMode:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.editPerson=e,n.next=3,an["a"].findByID(t.editPerson);case 3:if(r=n.sent,r){n.next=6;break}return n.abrupt("return");case 6:t.patient=new an["a"](r),a=t.patient.getAddresses(),o=a.ancestryDistrict,i=a.ancestryTA,c=a.ancestryVillage,s=a.currentDistrict,u=a.currentTA,t.editPersonData={given_name:t.patient.getGivenName(),family_name:t.patient.getFamilyName(),gender:t.patient.getGender(),birthdate:t.patient.getBirthdate(),home_district:o,home_traditional_authority:i,home_village:c,current_district:s,current_traditional_authority:u,cell_phone_number:t.patient.getPhoneNumber(),landmark:t.patient.getClosestLandmark()},t.presets=t.editPersonData,t.skipSummary=!0,t.personAttribute&&(t.activeField=t.personAttribute,t.fieldComponent=t.activeField);case 12:case"end":return n.stop()}}),n)})))()},onFinish:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n.isEditMode()){r.next=4;break}return r.abrupt("return",n.create(e,t));case 4:return r.abrupt("return",n.update(t));case 5:case"end":return r.stop()}}),r)})))()},create:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=ca["a"].resolvePerson(t),r="true"==n.presets.nationalIDStatus?n.appendNationalIDData(r):r,a=n.resolvePersonAttributes(t),o=new sa["a"],e.next=6,o.registerPatient(r,a);case 6:if(i=o.getPersonID(),"true"!=n.presets.nationalIDStatus){e.next=14;break}return e.next=10,an["a"].findByID(i);case 10:return c=e.sent,n.patient=new an["a"](c),e.next=14,n.patient.updateMWNationalId(n.presets.malawiNationalID);case 14:if(!n.app.onRegisterPatient){e.next=20;break}return e.next=17,n.app.onRegisterPatient(i,r,a,n.$router,n.$route);case 17:if(s=e.sent,!s){e.next=20;break}return e.abrupt("return");case 20:if("Yes"!==r.relationship){e.next=22;break}return e.abrupt("return",n.$router.push("/guardian/registration/".concat(i)));case 22:return e.next=24,Object(tn["b"])(i,n.$router);case 24:case"end":return e.stop()}}),e)})))()},appendNationalIDData:function(e){return Object.assign(e,{given_name:this.presets.given_name,family_name:this.presets.family_name,gender:this.presets.gender,birthdate:this.presets.birthdate,birthdate_estimated:!1})},update:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=ca["a"].resolvePerson(e),a=new sa["a"],a.setPersonID(t.editPerson),n.next=5,a.updatePerson(r);case 5:for(o in r)o in t.editPersonData&&(t.editPersonData[o]=r[o]);if(t.personAttribute){n.next=8;break}return n.abrupt("return",t.fieldComponent="edit_user");case 8:t.$router.back();case 9:case"end":return n.stop()}}),n)})))()},editConditionCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(this.isEditMode()&&!e.includes(this.activeField))},confirmPatient:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.ddeInstance.isEnabled()||!(!e.patient.getDocID()||e.patient.getDocID()&&e.patient.getNationalID().match(/unknown/i))){t.next=13;break}return t.prev=1,t.next=4,e.patient.assignNpid();case 4:return t.next=6,e.patient.printNationalID();case 6:return t.next=8,Object(gn["a"])(300);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](1),Object(O["c"])("Failed to assign new NPID: ".concat(t.t0));case 13:e.$router.push("/patients/confirm?person_id=".concat(e.patient.getID()));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))()},resolvePersonAttributes:function(e){return Object.values(e).filter((function(e){return Object(et["isPlainObject"])(e)&&"personAttributes"in e})).map((function(e){var t=e.personAttributes;return t}))},mapToOption:function(e){return e.map((function(e){return{label:e,value:e}}))},givenNameField:function(){var e=this,t=ca["a"].getGivenNameField();return t.condition=function(){return e.editConditionCheck(["given_name"])&&"true"!=e.presets.nationalIDStatus},t.defaultValue=function(){return e.presets.given_name},t},familyNameField:function(){var e=this,t=ca["a"].getFamilyNameField();return t.condition=function(){return e.editConditionCheck(["family_name"])&&"true"!=e.presets.nationalIDStatus},t.defaultValue=function(){return e.presets.family_name},t},genderField:function(){var e=this,t="ANC"===this.app.applicationName,n="CxCa"===this.app.applicationName,r=ca["a"].getGenderField();return r.requireNext=this.isEditMode(),r.defaultValue=function(){return e.presets.gender},r.condition=function(){return!(!e.isEditMode()&&(t||n))&&(e.editConditionCheck(["gender"])&&"true"!=e.presets.nationalIDStatus)},!t&&!n||this.isEditMode()||(r.defaultOutput=function(){return{label:"Female",value:"F"}},r.defaultComputedOutput=function(){return{person:"F"}}),r.beforeNext=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=n.value,a=e.presets.gender,!e.isEditMode()||r==a){t.next=7;break}return t.next=5,Object(cn["a"])("Warning","Changing gender from ".concat(a," to ").concat(r),"This change will cause data inconsistency and will affect alot of Reports.",[{name:"Cancel",slot:"start"},{name:"Change gender",slot:"end",color:"danger"}]);case 5:return o=t.sent,t.abrupt("return","Change gender"===o);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r},dobFields:function(){var e=this,t=ca["a"].getDobConfig();if(t.defaultValue=function(){return e.presets.birthdate},t.condition=function(){return e.editConditionCheck(["year_birth_date","month_birth_date","day_birth_date"])},"ANC"===this.app.applicationName){var n=an["a"].getSessionDate(),r=12;t.maxDate=function(){return _n()(n).subtract(r,"years").format(Ne["a"])}}return Object(oa["b"])(t)},homeRegionField:function(){var e=this,t=ca["a"].getHomeRegionField();return t.condition=function(){return e.editConditionCheck(e.homeAddressAttributes)},t},homeDistrictField:function(){var e=this,t=ca["a"].getHomeDistrictField();return t.condition=function(){return e.editConditionCheck(e.homeAddressAttributes)},t},homeTAField:function(){var e=this,t=ca["a"].getHomeTaField();return t.condition=function(t){return e.editConditionCheck(e.homeAddressAttributes)&&!t.home_region.label.match(/foreign/i)},t},homeVillageField:function(){var e=this,t=ca["a"].getHomeVillageField();return t.condition=function(t){return e.editConditionCheck(e.homeAddressAttributes)&&!t.home_region.label.match(/foreign/i)},t},currentRegionField:function(){var e=this,t=ca["a"].getCurrentRegionField();return t.condition=function(){return e.editConditionCheck(e.currentAddressAttributes)},t},currentDistrictField:function(){var e=this,t=ca["a"].getCurrentDistrictField();return t.condition=function(){return e.editConditionCheck(e.currentAddressAttributes)},t},currentTAField:function(){var e=this,t=ca["a"].getCurrentTAfield();return t.condition=function(t){return e.editConditionCheck(e.currentAddressAttributes)&&!t.current_region.label.match(/foreign/i)},t},currentVillage:function(){var e=this,t=ca["a"].getCurrentVillageField();return t.condition=function(t){return e.editConditionCheck(e.currentAddressAttributes)&&!t.current_region.label.match(/foreign/i)},t},cellPhoneField:function(){var e=this,t=ca["a"].getCellNumberField();return t.condition=function(){return e.editConditionCheck(["cell_phone_number"])},t.defaultValue=function(){return e.presets.cell_phone_number},t},facilityLocationField:function(){var e=ca["a"].getFacilityLocationField();return e.condition=function(e){return["Drug Refill","External consultation"].includes(e.patient_type.value)},e},landmarkFields:function(){var e=this,t=ca["a"].getLandmarkFields();return t[0].condition=function(){return e.editConditionCheck(["default_landmarks"])},t},patientTypeField:function(){var e=this;return{id:"patient_type",helpText:"Type of patient",type:Ln["b"].TT_SELECT,computedValue:function(e){return{person:e.value}},condition:function(){return e.editConditionCheck(["patient_type"])&&"ART"===e.app.applicationName},validation:function(e){return Un["a"].required(e)},options:function(){return mn["a"].getPatientTypes()}}},occupationField:function(){var e=this;return{id:"occupation",helpText:"Occupation",type:Ln["b"].TT_SELECT,computedValue:function(e){return{person:e.value}},condition:function(){return e.editConditionCheck(["occupation"])&&e.isMilitarySite},validation:function(e){return Un["a"].required(e)},options:function(){return e.mapToOption(["Military","Civilian"])}}},regimentField:function(){var e=this;return{id:"person_regiment_id",helpText:"Regiment ID",type:Ln["b"].TT_TEXT,computedValue:function(e){var t=e.value;return{personAttributes:{person_attribute_type_id:35,value:t}}},condition:function(t){return e.editConditionCheck(["person_regiment_id"])&&t.occupation&&t.occupation.value.match(/Military/i)},validation:function(e){return Un["a"].required(e)}}},rankField:function(){var e=this;return{id:"rank",helpText:"Rank",type:Ln["b"].TT_SELECT,validation:function(e){return Un["a"].required(e)},computedValue:function(e){var t=e.value;return{personAttributes:{person_attribute_type_id:36,value:t}}},condition:function(t){return e.editConditionCheck(["rank"])&&t.occupation&&t.occupation.value.match(/Military/i)},options:function(){return e.mapToOption(["First Lieutenant","Captain","Major","Lieutenant Colonel","Colonel","Brigadier General","Lieutenant General","General","Private","Corporal","Lance Corporal","Seargent","Staff Seargent","Warrant Officer class 1","Warrant Officer class 2"])}}},dateJoinedMilitaryFields:function(){var e=this;return Object(oa["b"])({id:"person_date_joined_military",helpText:"Joined Military",required:!0,condition:function(t){return e.editConditionCheck(["year_person_date_joined_military","month_person_date_joined_military","day_person_date_joined_military"])&&t.occupation&&t.occupation.value.match(/Military/i)},minDate:function(){return Ne["b"].estimateDateFromAge(100)},maxDate:function(){return ia["a"].getSessionDate()},estimation:{allowUnknown:!1},computeValue:function(e){return{date:e,personAttributes:{person_attribute_type_id:37,value:e}}}})},relationshipField:function(){var e=this,t="CxCa"===this.app.applicationName,n="OPD"===this.app.applicationName,r="Registration"===this.app.applicationName;return{id:"relationship",helpText:"Register guardian?",type:Ln["b"].TT_SELECT,computedValue:function(e){return{person:e.value}},condition:function(){return e.editConditionCheck(["relationship"])&&!t&&!n&&!r},validation:function(e){return Un["a"].required(e)},options:function(){return e.mapToOption(["Yes","No"])}}},searchResultField:function(){var e=this;return{id:"results",helpText:"Search results",type:Ln["b"].TT_PERSON_RESULT_VIEW,dynamicHelpText:function(t){return"true"==e.presets.nationalIDStatus?'Search results for "'.concat(e.presets.given_name," ").concat(e.presets.family_name," | ").concat(e.presets.gender,'"'):'Search results for "'.concat(t.given_name.value," ").concat(t.family_name.value," | ").concat(t.gender.label,'"')},appearInSummary:function(){return!1},condition:function(){return!e.isEditMode()},validation:function(e){return Un["a"].required(e)},options:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("true"==e.presets.nationalIDStatus?(e.presets.gender="Male"==e.presets.gender?"M":"F",r={given_name:e.presets.given_name,family_name:e.presets.family_name,gender:e.presets.gender}):r={given_name:n.given_name.value,family_name:n.family_name.value,gender:n.gender.value},!e.ddeInstance.isEnabled()){t.next=6;break}return t.next=4,e.ddeInstance.searchDemographics(r);case 4:return a=t.sent,t.abrupt("return",a.map((function(e){var t=ca["a"].getPersonAttributeOptions(e);return t.other.options.push({label:"Patient Type",value:e.patient_type}),t.other.options.push({label:"Doc ID",value:e.doc_id}),t})));case 6:return t.next=8,an["a"].search(r);case 8:return o=t.sent,t.abrupt("return",o.map((function(e){return ca["a"].getPersonAttributeOptions(e)})));case 10:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),config:{hiddenFooterBtns:["Clear","Next","Back"],footerBtns:[{name:"Edit Search",slot:"end",onClick:function(){e.fieldComponent="given_name"}},{name:"New Patient",slot:"end",onClick:function(){"true"!=e.presets.nationalIDStatus?e.fieldComponent="year_birth_date":e.fieldComponent="home_region"}},{name:"Continue",color:"success",slot:"end",state:{disabled:{default:function(){return!0},onValue:function(e,t){return Object(et["isEmpty"])(t.results)}}},onClick:function(t){return e.$router.push("/patients/confirm?person_id=".concat(t.results.value))}}]}}},possibleDuplicatesField:function(){var e=this,t={},n={};return{id:"possible_duplicates",helpText:"Possible Duplicate(s)",type:Ln["b"].TT_PERSON_MATCH_VIEW,condition:function(){var r=Object(c["a"])(regeneratorRuntime.mark((function r(a,o){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!e.ddeInstance.isEnabled()||e.editPerson){r.next=6;break}return t=ca["a"].resolvePerson(o),r.next=4,e.ddeInstance.checkPotentialDuplicates(t);case 4:return n=r.sent,r.abrupt("return",n.length>=1);case 6:return r.abrupt("return",!1);case 7:case"end":return r.stop()}}),r)})));function a(e,t){return r.apply(this,arguments)}return a}(),options:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(e){return Ne["b"].toStandardHisDisplayFormat(e)},e.abrupt("return",n.map((function(e){var n=e.score,a=e.person,o="".concat(a.given_name," ").concat(a.family_name);return{label:o,value:a.patient_id,other:{score:"".concat(100*n,"%"),newPerson:t,foundPerson:a,comparisons:[["Name","".concat(t.given_name," ").concat(t.family_name),"".concat(a.given_name," ").concat(a.family_name)],["Gender",t.gender,a.gender],["Birthdate",r(t.birthdate),r(a.birthdate)],["Home District",t.home_district,a.home_district],["Home TA",t.home_traditional_authority,a.home_traditional_authority]]}}})));case 2:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}(),config:{hiddenFooterBtns:["Clear","Next"],footerBtns:[{name:"Not Duplicate",slot:"start",state:{visible:{default:function(){return!1},onValue:function(e,t){return!Object(et["isEmpty"])(t.possible_duplicates)}}},onClick:function(){e.fieldComponent="_NEXT_FIELD_"}},{name:"Confirm",slot:"end",color:"warning",state:{visible:{default:function(){return!1},onValue:function(e,t){return!Object(et["isEmpty"])(t.possible_duplicates)}}},onClick:function(t){e.$router.push("/patients/confirm?person_id=".concat(t.possible_duplicates.value))}}]}}},personIndexField:function(){var e=this;return{id:"edit_user",helpText:"Edit Demographics",type:Ln["b"].TT_TABLE_VIEWER,condition:function(){return e.isEditMode()},options:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=function(t){return{name:"Edit",type:"button",action:function(){e.activeField=t,e.fieldComponent=e.activeField}}},r=["Attributes","Values","Edit"],a=[["Given Name",e.editPersonData.given_name,n("given_name")],["Family Name",e.editPersonData.family_name,n("family_name")],["Gender",e.editPersonData.gender,n("gender")],["Birthdate",Ne["b"].toStandardHisDisplayFormat(e.editPersonData.birthdate),n("year_birth_date")],["Cell Phone Number",e.editPersonData.cell_phone_number,n("cell_phone_number")],["Home District",e.editPersonData.home_district,n("home_region")],["Home TA",e.editPersonData.home_traditional_authority,n("home_region")],["Home Village",e.editPersonData.home_village,n("home_region")],["Current district",e.editPersonData.current_district,n("current_region")],["Current T/A",e.editPersonData.current_traditional_authority,n("current_region")],["Landmark",e.editPersonData.landmark,n("default_landmarks")]],o={indexes:[],class:"his-empty-set-color"},a.forEach((function(e,t){Object(sn["d"])(e[1])&&o.indexes.push(t)})),e.hasIncompleteData=o.indexes.length>=1,t.abrupt("return",[{label:"",value:"",other:{rows:a,columns:r,rowColors:[o]}}]);case 7:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),config:{footerBtns:[{name:"Reassign",slot:"end",color:"success",state:{visible:{default:function(){return!1},onload:function(){return e.ddeInstance.isEnabled()&&e.ddeIsReassign&&!e.hasIncompleteData}}},onClick:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ddeInstance.reassignNpid(e.ddeDocID,e.editPerson);case 3:return t.next=5,e.ddeInstance.printNpid();case 5:e.$router.push("/patients/confirm?person_id=".concat(e.editPerson)),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Object(O["e"])("".concat(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));function n(){return t.apply(this,arguments)}return n}()},{name:"Confirm",slot:"end",color:"warning",state:{visible:{onload:function(){return!e.ddeIsReassign&&!e.hasIncompleteData}}},onClick:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.confirmPatient());case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}],hiddenFooterBtns:["Clear","Next"]}}},patientRegistrationSummary:function(){var e=this;return{id:"registration_summary",helpText:"Summary",type:Ln["b"].TT_SUMMARY,condition:function(){return!e.skipSummary},options:function(t,n){return e.buildRegistrationSummary(n)},config:{hiddenFooterBtns:["Clear"]}}},buildRegistrationSummary:function(e){e=Object.keys(e).map((function(t,n){if(null!=e[t])return{label:t.replace(/_/g," ").replace(/(^\w|\s\w)/g,(function(e){return e.toUpperCase()})),value:"birth_date"==t?e[t]["date"]:e[t]["person"]}})),e=e.filter((function(e){return void 0!=e}));var t=[{label:"Given Name",value:this.presets.given_name},{label:"Family Name",value:this.presets.family_name},{label:"Gender",value:this.presets.gender},{label:"Birthdate",value:this.presets.birthdate},{label:"Malawi National ID",value:this.presets.malawiNationalID}];return"true"==this.presets.nationalIDStatus&&(e=t.concat(e)),e}}});const la=I()(ua,[["render",aa]]);var da=la;function pa(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{onOnIndex:t[1]||(t[1]=function(t){return e.fieldComponent=""}),skipSummary:!0,activeField:e.fieldComponent,fields:e.fields,onFinishAction:e.onFinish,cancelDestinationPath:"/patient/dashboard/".concat(e.patientData.id)},null,8,["activeField","fields","onFinishAction","cancelDestinationPath"])}n("a4d3"),n("e01a");var ba=n("2cef"),fa=n("7def"),ma=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},data:function(){return{patientData:{},guardianData:{},fieldAction:"",fieldComponent:"",fields:[],form:{},redirectURL:"",activeField:"",currentAddressAttributes:["current_region","current_district","current_village","current_traditional_authority"],homeAddressAttributes:["home_region","home_district","home_traditional_authority","home_village"]}},watch:{$route:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.params,a=e.query,!r.patient_id){n.next=6;break}return n.next=4,an["a"].findByID(r.patient_id);case 4:o=n.sent,o&&(t.patientData=ca["a"].mapPersonData(o.person),a.edit_guardian&&(t.fieldAction="edit"),t.fields=t.getFields());case 6:a.source&&(t.redirectURL=a.source);case 7:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{getFields:function(){var e=[];return e.push(this.guardianSelection()),e.push(this.guardianIndex()),e.push(this.scanGuardian()),e.push(this.givenNameField()),e.push(this.familyNameField()),e.push(this.genderField()),e.push(this.searchResultField()),e=e.concat(this.dobFields()),e.push(this.homeRegionField()),e.push(this.homeDistrictField()),e.push(this.homeTAField()),e.push(this.homeVillageField()),e.push(this.currentRegionField()),e.push(this.currentDistrictField()),e.push(this.currentTAField()),e.push(this.currentVillage()),e=e.concat(this.landmarkFields()),e.push(this.cellPhoneField()),e.push(this.relationsField()),e},onFinish:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,o,i,c,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!n.isEditMode()){r.next=17;break}if("relations"==n.activeField){r.next=9;break}return a=new sa["a"],a.setPersonID(n.guardianData.id),r.next=6,a.updatePerson(ca["a"].resolvePerson(t));case 6:Object.keys(t).forEach((function(e){var r;e in n.guardianData&&(n.guardianData[e]=(null===(r=t[e])||void 0===r?void 0:r.date)||t[e].person)})),r.next=14;break;case 9:if(null===(o=n.guardianData)||void 0===o||!o.relation){r.next=14;break}return r.next=12,ba["a"].amendRelation(n.patientData.id,n.guardianData.id,n.guardianData.relation.relationship_id,e.relations.other.relationship_type_id);case 12:i=r.sent,i&&(n.guardianData.relation=i);case 14:n.fieldComponent="guardian_index",r.next=42;break;case 17:if(!n.isSameAsPatient(t)){r.next=21;break}Object(O["e"])("Guardian cannot be the same patient"),r.next=42;break;case 21:if(c=-1,!n.isRegistrationMode()){r.next=29;break}return s=new sa["a"],r.next=26,s.registerGuardian(ca["a"].resolvePerson(t));case 26:c=s.getPersonID(),r.next=30;break;case 29:c=n.guardianData.id;case 30:return r.next=32,ba["a"].createRelation(n.patientData.id,c,e.relations.other.relationship_type_id);case 32:if(!n.redirectURL){r.next=36;break}n.$router.push({name:n.redirectURL}),r.next=42;break;case 36:if(!n.$route.query.edit_guardian){r.next=40;break}n.fieldComponent="select_guardian",r.next=42;break;case 40:return r.next=42,Object(tn["b"])(n.patientData.id,n.$router,n.$route);case 42:case"end":return r.stop()}}),r)})))()},isEditMode:function(){return"edit"===this.fieldAction},isSearchMode:function(){return["Search","Registration"].includes(this.fieldAction)},isRegistrationMode:function(){return"Registration"===this.fieldAction},canEdit:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.isEditMode()?e.includes(this.activeField)&&n:t},isSameAsPatient:function(e){var t="",n="",r="";return this.isRegistrationMode()?(t=Ne["b"].toStandardHisDisplayFormat(e.birth_date.date),n=e.given_name.person&&e.family_name.person,r=e.gender.person):(t=this.guardianData.birth_date,n=this.guardianData.name,r=this.guardianData.gender),n.toLowerCase()===this.patientData.name.toLowerCase()&&t===this.patientData.birth_date&&r===this.patientData.gender},guardianSelection:function(){var e=this;return{id:"select_guardian",helpText:"Select guardian to edit/view",type:Ln["b"].TT_SELECT,condition:function(){return e.isEditMode()},validation:function(e){return Un["a"].required(e)},options:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fa["a"].getRelationships(e.patientData.id);case 2:if(n=t.sent,Object(et["isEmpty"])(n)){t.next=7;break}return t.abrupt("return",n.map((function(e){var t=ca["a"].mapPersonData(e.relation);return{label:"".concat(t.name," (").concat(e.type.b_is_to_a,")"),value:e.relation.person_id,other:{relations:e,details:t}}})));case 7:return t.next=9,Object(gn["a"])(450);case 9:return t.next=11,Object(cn["a"])("Patient has no guardians","","Select option to proceed",[{name:"Cancel",slot:"start",color:"danger"},{name:"Register new",slot:"start",color:"success"}]);case 11:r=t.sent,"Register new"===r?(e.guardianData={},e.fieldAction="Registration",e.fieldComponent="scan"):e.$router.back();case 13:return t.abrupt("return",[]);case 14:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),config:{footerBtns:[{name:"New Guardian",slot:"end",color:"primary",onClick:function(){e.guardianData={},e.fieldAction="Registration",e.fieldComponent="scan"}}]}}},getDefaultVal:function(e){try{return this.guardianData[e]}catch(t){return""}},guardianIndex:function(){var e=this;return{id:"guardian_index",helpText:"Guardian details",type:Ln["b"].TT_TABLE_VIEWER,condition:function(e){return e.select_guardian.value},options:function(t){e.guardianData&&e.guardianData.id!=t.select_guardian.value&&(e.guardianData=Object(Be["a"])(Object(Be["a"])({},t.select_guardian.other.details),{},{relation:t.select_guardian.other.relations}));var n=function(t){return{name:"Edit",type:"button",action:function(){e.activeField=t,e.fieldComponent=e.activeField}}},r=[["Given Name",e.guardianData.given_name,n("given_name")],["Family Name",e.guardianData.family_name,n("family_name")],["Gender",e.guardianData.gender,n("gender")],["Birthdate",Ne["b"].toStandardHisDisplayFormat(e.guardianData.birth_date),n("year_birth_date")],["Cell Phone Number",e.guardianData.cell_phone_number,n("cell_phone_number")],["Home District",e.guardianData.home_district,n("home_region")],["Home TA",e.guardianData.home_traditional_authority,n("home_region")],["Home Village",e.guardianData.home_village,n("home_region")],["Current district",e.guardianData.current_district,n("current_region")],["Current T/A",e.guardianData.current_traditional_authority,n("current_region")],["Landmark",e.guardianData.landmark,n("default_landmarks")],["Relation",e.guardianData.relation.type.b_is_to_a,n("relations")]];return[{label:"",value:"",other:{rows:r}}]},config:{overrideDefaultFooterBtns:{nextBtn:{name:"Finish",slot:"end",color:"success",onClick:function(){return e.fieldComponent="select_guardian"}}},footerBtns:[{name:"Void Relation",slot:"start",color:"danger",onClick:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Object(kn["a"])(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ba["a"].voidRelation(e.patientData.id,e.guardianData.relation.relationship_id,n);case 2:e.fieldComponent="select_guardian";case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}],hiddenFooterBtns:["Clear","Back"]}}},givenNameField:function(){var e=this,t=ca["a"].getGivenNameField();return t.helpText="Guardian First name",t.defaultValue=function(){return e.getDefaultVal(t.id)},t.condition=function(){return e.canEdit([t.id],e.isSearchMode())},t},familyNameField:function(){var e=this,t=ca["a"].getFamilyNameField();return t.helpText="Guardian Last name",t.defaultValue=function(){return e.getDefaultVal(t.id)},t.condition=function(){return e.canEdit([t.id],e.isSearchMode())},t},genderField:function(){var e=this,t=ca["a"].getGenderField();return t.defaultValue=function(){return e.getDefaultVal(t.id)},t.condition=function(){return e.canEdit([t.id],e.isSearchMode())},t},dobFields:function(){var e=this,t=ca["a"].getDobConfig();return t.defaultValue=function(){return e.getDefaultVal("birth_date")},t.condition=function(){return e.canEdit(["year_birth_date","month_birth_date","day_birth_date"],e.isRegistrationMode())},Object(oa["b"])(t)},homeRegionField:function(){var e=this,t=ca["a"].getHomeRegionField();return t.condition=function(){return e.canEdit(e.homeAddressAttributes,e.isRegistrationMode())},t},homeDistrictField:function(){var e=this,t=ca["a"].getHomeDistrictField();return t.condition=function(){return e.canEdit(e.homeAddressAttributes,e.isRegistrationMode())},t},homeTAField:function(){var e=this,t=ca["a"].getHomeTaField();return t.condition=function(t){return e.canEdit(e.homeAddressAttributes,e.isRegistrationMode()&&!t.home_region.label.match(/foreign/i),!t.home_region.label.match(/foreign/i))},t},homeVillageField:function(){var e=this,t=ca["a"].getHomeVillageField();return t.condition=function(t){return e.canEdit(e.homeAddressAttributes,e.isRegistrationMode()&&!t.home_region.label.match(/foreign/i),!t.home_region.label.match(/foreign/i))},t},currentRegionField:function(){var e=this,t=ca["a"].getCurrentRegionField();return t.condition=function(){return e.canEdit(e.currentAddressAttributes,e.isRegistrationMode())},t},currentDistrictField:function(){var e=this,t=ca["a"].getCurrentDistrictField();return t.condition=function(){return e.canEdit(e.currentAddressAttributes,e.isRegistrationMode())},t},currentTAField:function(){var e=this,t=ca["a"].getCurrentTAfield();return t.condition=function(t){return e.canEdit(e.currentAddressAttributes,e.isRegistrationMode()&&!t.current_region.label.match(/foreign/i),!t.current_region.label.match(/foreign/i))},t},currentVillage:function(){var e=this,t=ca["a"].getCurrentVillageField();return t.condition=function(t){return e.canEdit(e.currentAddressAttributes,e.isRegistrationMode()&&!t.current_region.label.match(/foreign/i),!t.current_region.label.match(/foreign/i))},t},cellPhoneField:function(){var e=this,t=ca["a"].getCellNumberField();return t.condition=function(){return e.canEdit([t.id],e.isRegistrationMode())},t},landmarkFields:function(){var e=this,t=ca["a"].getLandmarkFields(),n=t[0].proxyID||t[0].id;return t[0].defaultValue=function(){return e.getDefaultVal(n)},t[0].condition=function(){return e.canEdit([n],e.isRegistrationMode())},t},relationsField:function(){var e=this;return{id:"relations",helpText:"Select relationship type",type:Ln["b"].TT_RELATION_SELECTION,defaultValue:function(){return e.getDefaultVal("relations")},validation:function(e){return Un["a"].required(e)},condition:function(){return e.canEdit(["relations"])},onload:function(t){if(t.patient=e.patientData,e.isRegistrationMode()){var n=ca["a"].resolvePerson(t.cdata);t.guardian={name:"".concat(n.given_name," ").concat(n.family_name),birth_date:Ne["b"].toStandardHisDisplayFormat(n.birthdate),home_address:"".concat(n.home_district," ").concat(n.home_traditional_authority)}}else t.guardian=e.guardianData},options:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ba["a"].getRelations();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{label:e.b_is_to_a,value:e.description,other:e}})));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),config:{hiddenFooterBtns:["Clear"]}}},scanGuardian:function(){var e=this;return{id:"scan",helpText:"Scan or Register Guardian",type:Ln["b"].TT_BARCODE,requireNext:!1,condition:function(){return!e.isEditMode()},onValue:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,an["a"].findByNpid(n);case 2:return r=t.sent,Object(et["isEmpty"])(r)||(e.guardianData=ca["a"].mapPersonData(r[0].person),e.fieldComponent="relations",e.fieldAction="Scan"),t.abrupt("return",!1);case 5:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),config:{hiddenFooterBtns:["Clear","Next","Back"],footerBtns:[{name:"Find or Register Guardian",color:"success",slot:"end",onClick:function(){e.fieldAction="Search",e.fieldComponent="given_name"}}]}}},searchResultField:function(){var e=this;return{id:"results",helpText:"Search results",type:Ln["b"].TT_PERSON_RESULT_VIEW,dynamicHelpText:function(e){return'Search results for \n                "'.concat(e.given_name.value," ").concat(e.family_name.value," | ").concat(e.gender.label,'"\n                ')},appearInSummary:function(){return!1},condition:function(){return e.isSearchMode()},validation:function(e){return Un["a"].required(e)},options:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,an["a"].search({given_name:t.given_name.value,family_name:t.family_name.value,gender:t.gender.value});case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return ca["a"].getPersonAttributeOptions(e)})));case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),config:{hiddenFooterBtns:["Clear","Next","Back"],footerBtns:[{name:"Edit Search",slot:"end",onClick:function(){e.fieldAction="Search",e.fieldComponent="given_name"}},{name:"New Guardian",slot:"end",onClick:function(){e.fieldAction="Registration",e.fieldComponent="year_birth_date"}},{name:"Continue Guardian",color:"success",slot:"end",state:{disabled:{default:function(){return!0},onValue:function(e,t){return Object(et["isEmpty"])(t.results)}}},onClick:function(t){e.guardianData=ca["a"].mapPersonData(t.results.other.person.person),e.fieldComponent="relations",e.fieldAction="Search"}}]}}}}});const ha=I()(ma,[["render",pa]]);var ga=ha,va=Object(o["withScopeId"])("data-v-199121a4");Object(o["pushScopeId"])("data-v-199121a4");var Oa={class:"large-card"},ja=Object(o["createVNode"])("h3",null," Patients: ",-1),_a={class:"large-card"},wa=Object(o["createVNode"])("h3",null," Details: ",-1),ka=Object(o["createTextVNode"])(" Cancel "),ya=Object(o["createTextVNode"])(" New Search "),xa=Object(o["createTextVNode"])(" New Patient "),Na=Object(o["createTextVNode"])(" Continue ");Object(o["popScopeId"])();var Ca=va((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("result-card"),s=Object(o["resolveComponent"])("ion-col"),u=Object(o["resolveComponent"])("ion-row"),l=Object(o["resolveComponent"])("ion-img"),d=Object(o["resolveComponent"])("ion-avatar"),p=Object(o["resolveComponent"])("ion-label"),b=Object(o["resolveComponent"])("ion-item"),f=Object(o["resolveComponent"])("ion-list"),m=Object(o["resolveComponent"])("ion-content"),h=Object(o["resolveComponent"])("ion-button"),g=Object(o["resolveComponent"])("ion-toolbar"),v=Object(o["resolveComponent"])("ion-footer"),O=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(O,null,{default:va((function(){return[Object(o["createVNode"])(m,null,{default:va((function(){return[Object(o["createVNode"])(u,null,{default:va((function(){return[Object(o["createVNode"])(s,null,{default:va((function(){return[Object(o["createVNode"])(c,{title:e.resultTitle,subtitle:e.resultSubtitle,icon:e.genderIcon},null,8,["title","subtitle","icon"])]})),_:1})]})),_:1}),Object(o["createVNode"])(u,null,{default:va((function(){return[Object(o["createVNode"])(s,{size:"5"},{default:va((function(){return[Object(o["createVNode"])("div",Oa,[ja,Object(o["createVNode"])(f,null,{default:va((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.results,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(b,{button:"",key:n,detail:!0,color:e.isActive(t.other)?"light":"",onClick:function(n){return e.onselect(t.other)}},{default:va((function(){return[Object(o["createVNode"])(d,null,{default:va((function(){return[Object(o["createVNode"])(l,{src:"/assets/images/avatar.svg"})]})),_:1}),Object(o["createVNode"])(p,null,{default:va((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["color","onClick"])})),128))]})),_:1})])]})),_:1}),Object(o["createVNode"])(s,{size:"7"},{default:va((function(){return[Object(o["createVNode"])("div",_a,[wa,Object(o["createVNode"])(f,null,{default:va((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.demographics,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:t,inset:"none"},{default:va((function(){return[Object(o["createVNode"])(p,null,{default:va((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]})),_:2},1024),Object(o["createVNode"])(p,{slot:"end"},{default:va((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.value),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})])]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(v,null,{default:va((function(){return[Object(o["createVNode"])(g,{color:"dark"},{default:va((function(){return[Object(o["createVNode"])(h,{color:"danger",size:"large","router-link":"/"},{default:va((function(){return[ka]})),_:1}),Object(o["createVNode"])(h,{color:"primary",size:"large","router-link":"/search_patient",slot:"end"},{default:va((function(){return[ya]})),_:1}),Object(o["createVNode"])(h,{onClick:e.onRegisterAsNew,color:"primary",size:"large",slot:"end"},{default:va((function(){return[xa]})),_:1},8,["onClick"]),e.isPersonSelected?(Object(o["openBlock"])(),Object(o["createBlock"])(h,{key:0,color:"success",size:"large","router-link":e.confirmationPageUrl,slot:"end"},{default:va((function(){return[Na]})),_:1},8,["router-link"])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})}));function Va(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-icon"),s=Object(o["resolveComponent"])("ion-card-title"),u=Object(o["resolveComponent"])("ion-card-header"),l=Object(o["resolveComponent"])("ion-card");return Object(o["openBlock"])(),Object(o["createBlock"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("h2",null,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])(c,{icon:e.icon,size:"medium"},null,8,["icon"]),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(e.subtitle),1)]})),_:1})]})),_:1})]})),_:1})}var Da=Object(o["defineComponent"])({name:"HisResultCard",components:{IonCard:V["f"],IonIcon:V["r"],IonCardTitle:V["j"],IonCardHeader:V["h"]},props:{title:{required:!0,type:String},subtitle:{required:!0,type:String},icon:{required:!1}}});const Ta=I()(Da,[["render",Va]]);var Ia=Ta,Ra=Object(o["defineComponent"])({components:{ResultCard:Ia,IonLabel:V["x"],IonRow:V["J"],IonPage:V["F"],IonFooter:V["o"],IonContent:V["n"],IonButton:V["d"],IonCol:V["m"],IonToolbar:V["V"],IonList:V["y"],IonItem:V["w"]},data:function(){return{person:z["L"],gname:"",fname:"",gender:"",results:[],selectedPerson:{},isPersonSelected:!1,demographics:[]}},computed:{resultTitle:function(){return"".concat(this.results.length," Result(s) found")},resultSubtitle:function(){return'Search term "'.concat(this.gname," ").concat(this.fname,'"')},genderIcon:function(){return"M"===this.gender?z["E"]:z["eb"]},confirmationPageUrl:function(){return"/patients/confirm?person_id=".concat(this.selectedPerson.getID())}},watch:{$route:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.query,t.selectedPerson={},t.isPersonSelected=!1,t.gname=r.given_name,t.fname=r.family_name,t.gender=r.gender,n.next=8,t.fetchResults(t.gname,t.fname,t.gender);case 8:t.results=n.sent,t.showDetails({});case 10:case"end":return n.stop()}}),n)})))()},deep:!0,immediate:!0}},methods:{fetchResults:function(e,t,n){return Object(c["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,an["a"].search({given_name:e,family_name:t,gender:n});case 2:return a=r.sent,r.abrupt("return",a.map((function(e){var t=new an["a"](e);return{label:t.getPatientInfoString(),value:t.getID(),other:t}})));case 4:case"end":return r.stop()}}),r)})))()},onRegisterAsNew:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["a"])("Do you want to register person as new patient?",{header:"Register ".concat(e.gname," ").concat(e.fname)});case 2:n=t.sent,n&&(r="M"===e.gender?"Male":"Female",e.$router.push("/patient/registration?given_name=".concat(e.gname,"&family_name=").concat(e.fname,"&gender=").concat(r)));case 4:case"end":return t.stop()}}),t)})))()},isActive:function(e){try{return e.getID()===this.selectedPerson.getID()}catch(t){return!1}},onselect:function(e){this.isPersonSelected=!0,this.selectedPerson=e,this.showDetails(e)},getPatientProp:function(e,t){return t in e?e[t]():"-"},showDetails:function(e){this.demographics=[{label:"Patient ID",value:this.getPatientProp(e,"getNationalID")},{label:"Name",value:this.getPatientProp(e,"getFullName")},{label:"Gender",value:this.getPatientProp(e,"getGender")},{label:"Birthdate",value:this.getPatientProp(e,"getBirthdate")},{label:"Home District",value:this.getPatientProp(e,"getHomeDistrict")},{label:"Home Village",value:this.getPatientProp(e,"getHomeVillage")},{label:"Current District",value:this.getPatientProp(e,"getCurrentDistrict")},{label:"Current T/A",value:this.getPatientProp(e,"getCurrentTA")}]}}});n("ddd4");const Sa=I()(Ra,[["render",Ca],["__scopeId","data-v-199121a4"]]);var Pa=Sa;function Aa(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{fields:e.fields,activeField:e.activeField,onOnFinish:e.onFinish},null,8,["fields","activeField","onOnFinish"])}var Ea=n("9441"),Ba=[{label:"Jan",value:1},{label:"Feb",value:2},{label:"Mar",value:3},{label:"Apr",value:4},{label:"May",value:5},{label:"Jun",value:6},{label:"Jul",value:7},{label:"Aug",value:8},{label:"Sep",value:9},{label:"Oct",value:10},{label:"Nov",value:11},{label:"Dec",value:12}],Fa=Object(o["defineComponent"])({components:{HisStandardForm:Ea["a"]},data:function(){return{activeField:"",fields:[]}},created:function(){this.fields=this.getFields()},methods:{onFinish:function(e){console.log(e)},getFields:function(){var e=this;return[{id:"dispense",helpText:"Dispensation",type:Ln["b"].TT_DISPENSATION_INPUT,config:{toolbarInfo:[{label:"Name",value:"Test patient"},{label:"Gender",value:"Female"},{label:"Date Of Birth",value:"12/May/1994"}]},options:function(){return[{label:"TDF300/3TC300/DTG50",value:0,other:{amounted_needed:30}},{label:"Cotrimoxazole (960mg)",value:0,other:{amounted_needed:30}},{label:"Rifapentine (150mg)",value:0,other:{amounted_needed:30}},{label:"INH or H (Isoniazid 100mg tablet)",value:0,other:{amounted_needed:30}}]}},{id:"hello_world",helpText:"BeforeNext",type:Ln["b"].TT_TEXT,beforeNext:function(){var e=confirm("Do you want to continue");return e}},{id:"onvalue_hooks_multiple_select",helpText:"Dynamically toggling values",type:Ln["b"].TT_MULTIPLE_SELECT,config:{showKeyboard:!1},onValueUpdate:function(e,t){if(t.isChecked&&"None"===t.label)return e.map((function(e){return"None"!=e.label&&(e.isChecked=!1),e}));if("None"!=t.label&&t.isChecked){var n=Object(et["findIndex"])(e,{label:"None"});e[n].isChecked=!1}if(t.isChecked&&"Disable"===t.label){var r=Object(et["findIndex"])(e,{label:"Disable"});e[r].disabled=!0}if(t.isChecked&&"Enable"===t.label){var a=Object(et["findIndex"])(e,{label:"Disable"});e[a].disabled=!1}return e},validation:function(e){return e?null:["Value is required"]},options:function(){return[{label:"Foo",value:"Foo",description:{color:"danger",text:"Optional description"}},{label:"This is prechecked by default",value:"pre_checked"},{label:"Bar",value:"Bar",description:{color:"warning",text:"This has discription of different color"}},{label:"Enable",value:"enabled",description:{color:"secondary",text:"I only appear when checked",show:"onChecked"}},{label:"Disable",value:"disable"},{label:"None",value:"None"}]}},{id:"name_field",helpText:"What is your name",type:Ln["b"].TT_TEXT,validation:function(e){return e?null:["Value is required"]}},{id:"custom_btn",helpText:"Show custom button",type:Ln["b"].TT_TEXT,config:{footerBtns:[{name:"Void",color:"danger",size:"large",visible:!1,slot:"",visibleOnStateChange:function(e){return 1===e.index},onClick:function(){alert("Record has been voided!")}},{name:"Custom Something",color:"primary",size:"large",visible:!1,slot:"end",visibleOnStateChange:function(e){return 1===e.index},onClick:function(){alert("YaY! Custom Button Clicked")}}]}},{id:"patient_chart",helpText:"Patient Chart",type:Ln["b"].TT_WEIGHT_CHART,options:function(){return[{label:"Patient weight",value:54,other:{labels:["10 Jan","11 June","8 Aug"],values:[65,38,89,57]}}]}},{id:"hide_default_btns",helpText:"Default buttons have been hidden",type:Ln["b"].TT_TEXT,config:{hiddenFooterBtns:["Clear","Cancel"]}},{id:"skip_next_field",helpText:"Skip Next Field with custom button",type:Ln["b"].TT_TEXT,config:{footerBtns:[{name:"Skip Dates",color:"light",size:"large",visible:!1,slot:"end",visibleOnStateChange:function(e){return 3===e.index},onClick:function(){e.activeField="multiple_select"}}]}},{id:"year",helpText:"Year of birth",type:Ln["b"].TT_NUMBER},{id:"month",helpText:"Month of birth",type:Ln["b"].TT_SELECT,requireNext:!1,options:function(){return Ba},config:{showKeyboard:!1}},{id:"day",helpText:"Day of birth",type:Ln["b"].TT_MONTHLY_DAYS},{id:"multiple_select",helpText:"Select Multiple values",type:Ln["b"].TT_MULTIPLE_SELECT,config:{showKeyboard:!1},validation:function(e){return e?null:["Value is required"]},options:function(){return[{label:"Foo",value:"Foo",description:{color:"danger",text:"Optional description"}},{label:"This is prechecked by default",value:"pre_checked",isChecked:!0},{label:"Bar",value:"Bar",description:{color:"warning",text:"This has discription of different color"}},{label:"Baz",value:"Baz",description:{color:"secondary",text:"I only appear when checked",show:"onChecked"}},{label:"Bar",value:"Bar"}]}},{id:"conditional_data",helpText:"Conditionally display next question",type:Ln["b"].TT_SELECT,requireNext:!1,validation:function(e){return e?null:["Value is required"]},options:function(){return[{label:"Show Games",value:"Show Games"},{label:"Show Music",value:"Show Music"}]}},{id:"music_presentation",helpText:"Showing Music",type:Ln["b"].TT_SELECT,validation:function(e){return e?null:["Value is required"]},condition:function(e){return"Show Music"===e.conditional_data.value},options:function(){return[{label:"No Music",value:"No Music"}]}},{id:"games_presentation",helpText:"Showing Games",type:Ln["b"].TT_SELECT,validation:function(e){return e?null:["Value is required"]},condition:function(e){return"Show Games"===e.conditional_data.value},options:function(){return[{label:"No Games",value:"No Games"}]}},{id:"does_not_require_next",helpText:"Click on value to proceed",type:Ln["b"].TT_SELECT,requireNext:!1,validation:function(e){return e?null:["Value is required"]},options:function(){return[{label:"Duke",value:"Duke"},{label:"Dork",value:"Dork"}]}},{id:"option_params",helpText:"Console.log Prop sent via options",type:Ln["b"].TT_SELECT,options:function(e){return console.log(e),[]}},{id:"validated",helpText:"Value is Required before next",type:Ln["b"].TT_SELECT,validation:function(e){return e?null:["Value is required"]},options:function(){return[{label:"Fur",value:"Fur"},{label:"Fume",value:"Fame"}]}}]}}});const La=I()(Fa,[["render",Aa]]);var Ma=La;function Ha(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,activeField:e.fieldComponent},null,8,["fields","onFinishAction","activeField"])}var Ua=n("9ceb"),qa=n("fe70"),Ga=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},data:function(){return{app:{},fields:[],fieldComponent:"",people:[],patient:{},assignNewARVNumber:!1,suggestedARVNumber:""}},created:function(){this.setApp(),this.fields=[this.getIdSelectionField(),this.getIdSearchField(),this.getARVDuplicatesField(),this.getReassignARVNumberField()]},methods:{getIdSelectionField:function(){var e=this;return{id:"identifier_type",helpText:"Select identifier type",type:Ln["b"].TT_SELECT,requireNext:!1,validation:function(e){return Un["a"].required(e)},options:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.app.programPatientIdentifiers?Object.values(e.app.programPatientIdentifiers):[],t.next=3,Promise.all(n.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.globalPropertySetting){e.next=4;break}return e.next=3,dn["a"].isProp(t.globalPropertySetting);case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return r=t.sent,t.abrupt("return",n.filter((function(e,t){return e.useForSearch&&r[t]})).map((function(e){return{label:e.name,value:e.id,other:e}})));case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}},getIdSearchField:function(){var e;return{id:"identifier",helpText:"Identifier",dynamicHelpText:function(e){return"Search by ".concat(e.identifier_type.label)},type:Ln["b"].TT_TEXT,validation:function(t){return Un["a"].validateSeries([function(){return Un["a"].required(t)},function(){return"function"===typeof e.validation?e.validation(t):null}])},config:{casing:"uppercase",customKeyboard:[_["c"],[["Delete"]]],prependValue:function(t){return e=t.identifier_type.other,e.prefix()}}}},getARVDuplicatesField:function(){var e=this;return{id:"arv_duplicates",helpText:"Duplicates",dynamicHelpText:function(e){return"Duplicate patients with identifer ".concat(e.identifier.value)},type:Ln["b"].TT_DATA_TABLE,requireNext:!1,condition:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.hasDuplicates(n);case 2:if(t.t0=t.sent,!t.t0){t.next=5;break}t.t0="ARV Number"===n.identifier_type.label;case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),config:{hiddenFooterBtns:["Clear","Finish"],columns:function(){return[[Ua["a"].thTxt("First Name"),Ua["a"].thTxt("Family Name"),Ua["a"].thTxt("Gender"),Ua["a"].thDate("Birthdate"),Ua["a"].thTxt("Current Village"),Ua["a"].thTxt("Actions",{colspan:2})]]},rows:function(){return e.people.map((function(t){var n=new an["a"](t);return[Ua["a"].td(n.getGivenName()),Ua["a"].td(n.getFamilyName()),Ua["a"].td(n.getGender()),Ua["a"].tdDate(n.getBirthdate().toString()),Ua["a"].td(n.getCurrentVillage()),Ua["a"].tdBtn("Select patient",(function(){return e.selectPatient(n.getID())}),{style:{fontSize:"12px",textTransform:"none"}},"warning"),Ua["a"].tdBtn("Re-assign identifier",(function(){return e.reassignARVNumber(n)}),{style:{fontSize:"12px",textTransform:"none"}},"danger")]}))}}}},getReassignARVNumberField:function(){var e=this;return{id:"arv_number",helpText:"ART number",type:Ln["b"].TT_TEXT,computedValue:function(e){var t=e.value;return t},validation:function(e){return Un["a"].required(e)},condition:function(t){return"arv_number"===e.fieldComponent&&e.assignNewARVNumber},defaultValue:function(){return e.suggestedARVNumber},config:{initialKb:"0-9",prependValue:function(e){return e.identifier_type.other.prefix()}}}},setApp:function(){var e=ye["a"].getActiveApp();e&&(this.app=e)},hasDuplicates:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,an["a"].findByOtherID(e.identifier_type.value,e.identifier.value);case 2:return t.people=n.sent,n.abrupt("return",t.people.length>1);case 4:case"end":return n.stop()}}),n)})))()},selectPatient:function(e){this.$router.push("/patients/confirm?person_id=".concat(e))},reassignARVNumber:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,qa["e"].create({});case 2:return r=n.sent,r.present(),n.next=6,On["a"].getNextSuggestedARVNumber();case 6:a=n.sent,t.suggestedARVNumber=a.arv_number.replace(/^\D+|\s/g,""),t.patient=e,t.assignNewARVNumber=!0,t.fieldComponent="arv_number",r.dismiss();case 11:case"end":return n.stop()}}),n)})))()},onFinish:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!Object(et["isEmpty"])(t.people)){n.next=4;break}Object(O["e"])("Client not found"),n.next=18;break;case 4:if(!t.assignNewARVNumber||Object(et["isEmpty"])(t.patient)){n.next=16;break}return n.prev=5,n.next=8,t.patient.updateARVNumber(e.arv_number.value);case 8:t.selectPatient(t.patient.getID()),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](5),Object(O["e"])("".concat(n.t0));case 14:n.next=18;break;case 16:r=new an["a"](t.people[0]),t.selectPatient(r.getID());case 18:case"end":return n.stop()}}),n,null,[[5,11]])})))()}}});const za=I()(Ga,[["render",Ha]]);var Ya=za,Wa=Object(o["withScopeId"])("data-v-7eecfa92");Object(o["pushScopeId"])("data-v-7eecfa92");var $a=Object(o["createTextVNode"])("Visits"),Ka=Object(o["createTextVNode"])("Patient"),Ja=Object(o["createTextVNode"])("Program"),Xa=Object(o["createTextVNode"])("Dates"),Qa={class:"mobile-component-view"},Za=Object(o["createVNode"])("p",null,null,-1),eo={class:"his-card info-card-item"},to=Object(o["createTextVNode"])(" Today "),no={class:"his-card info-card-item"},ro=Object(o["createTextVNode"])(" Session "),ao={class:"his-card info-card-item"},oo=Object(o["createTextVNode"])(" Current visit date "),io={class:"his-sm-text his-card"},co=Object(o["createTextVNode"])(" Today's Date: "),so={key:0},uo={key:1},lo=Object(o["createTextVNode"])(" Next Task: "),po=Object(o["createVNode"])("b",null,"NONE",-1),bo={key:0},fo={key:1},mo=Object(o["createTextVNode"])(" Set Date: "),ho={key:1},go=Object(o["createTextVNode"])(" Tasks "),vo=Object(o["createTextVNode"])(" Printouts/Other "),Oo=Object(o["createTextVNode"])(" Applications "),jo=Object(o["createTextVNode"])(" Finish ");Object(o["popScopeId"])();var _o=Wa((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("full-toolbar"),s=Object(o["resolveComponent"])("minimal-toolbar"),u=Object(o["resolveComponent"])("ion-icon"),l=Object(o["resolveComponent"])("ion-label"),d=Object(o["resolveComponent"])("ion-segment-button"),p=Object(o["resolveComponent"])("ion-segment"),b=Object(o["resolveComponent"])("ion-toolbar"),f=Object(o["resolveComponent"])("ion-button"),m=Object(o["resolveComponent"])("primary-card"),h=Object(o["resolveComponent"])("ion-col"),g=Object(o["resolveComponent"])("ion-row"),v=Object(o["resolveComponent"])("ion-grid"),O=Object(o["resolveComponent"])("ion-item"),j=Object(o["resolveComponent"])("ion-list"),_=Object(o["resolveComponent"])("visit-dates-card"),w=Object(o["resolveComponent"])("ion-chip"),k=Object(o["resolveComponent"])("ion-content"),y=Object(o["resolveComponent"])("ion-footer"),x=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(x,null,{default:Wa((function(){return[Object(o["createVNode"])(c,{class:"full-component-view",appVersion:e.appVersion,appIcon:e.app.applicationIcon,patientCardInfo:e.patientCardInfo,programCardInfo:e.programCardInfo},null,8,["appVersion","appIcon","patientCardInfo","programCardInfo"]),Object(o["createVNode"])(s,{class:"mobile-component-view",title:e.patientName,menuTitle:e.visitDatesTitle,menuItems:e.visitDates,appIcon:e.app.applicationIcon,onOnClickMenuItem:e.onActiveVisitDate},null,8,["title","menuTitle","menuItems","appIcon","onOnClickMenuItem"]),Object(o["createVNode"])(b,{class:"mobile-component-view"},{default:Wa((function(){return[Object(o["createVNode"])(p,{value:e.activeTab,class:"ion-justify-content-center"},{default:Wa((function(){return[Object(o["createVNode"])(d,{value:"1",onClick:t[1]||(t[1]=function(t){return e.activeTab=1})},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.calendar},null,8,["icon"]),Object(o["createVNode"])(l,null,{default:Wa((function(){return[$a]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{value:"2",onClick:t[2]||(t[2]=function(t){return e.activeTab=2})},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.person},null,8,["icon"]),Object(o["createVNode"])(l,null,{default:Wa((function(){return[Ka]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{value:"3",onClick:t[3]||(t[3]=function(t){return e.activeTab=3})},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.medical},null,8,["icon"]),Object(o["createVNode"])(l,null,{default:Wa((function(){return[Ja]})),_:1})]})),_:1}),Object(o["createVNode"])(d,{value:"4",onClick:t[4]||(t[4]=function(t){return e.activeTab=4})},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.time},null,8,["icon"]),Object(o["createVNode"])(l,null,{default:Wa((function(){return[Xa]})),_:1})]})),_:1})]})),_:1},8,["value"])]})),_:1}),e.nextTask.name?(Object(o["openBlock"])(),Object(o["createBlock"])(b,{key:0,class:"mobile-component-view"},{default:Wa((function(){return[Object(o["createVNode"])(f,{style:{width:"100%"},color:"success",onClick:e.goToNextTask},{default:Wa((function(){return[Object(o["createVNode"])(l,null,{default:Wa((function(){return[Object(o["createVNode"])("b",null,"Next Task: "+Object(o["toDisplayString"])(e.nextTask.name.toUpperCase()),1)]})),_:1}),Object(o["createVNode"])(u,{icon:e.alertCircle},null,8,["icon"])]})),_:1},8,["onClick"])]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(k,{id:"main-content"},{default:Wa((function(){return[Object(o["createVNode"])("div",Qa,[e.appHasCustomContent&&1===e.activeTab&&e.patientIsset?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.customDashboardContent),{key:0,patient:e.patient,visitDate:e.activeVisitDate,onOnProgramVisitDates:e.onProgramVisitDates},null,8,["patient","visitDate","onOnProgramVisitDates"])):Object(o["createCommentVNode"])("",!0),e.appHasCustomContent||1!==e.activeTab?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:1},{default:Wa((function(){return[Object(o["createVNode"])(g,null,{default:Wa((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.patientCards,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(h,{size:"12",key:t},{default:Wa((function(){return[Object(o["createVNode"])(m,{isEnabled:e.isEnabled,counter:e.items.length,icon:e.icon,title:e.label,titleColor:e.color,items:e.items,onClick:e.onClick},null,8,["isEnabled","counter","icon","title","titleColor","items","onClick"])]})),_:2},1024)})),128))]})),_:1})]})),_:1})),2===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:2},{default:Wa((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.patientCardInfo,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"his-card info-card-item",key:t},[Object(o["createVNode"])(O,{lines:"none"},{default:Wa((function(){return[Object(o["createVNode"])(l,null,{default:Wa((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]})),_:2},1024),Object(o["createVNode"])(l,{slot:"end"},{default:Wa((function(){return[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.value),1)]})),_:2},1024)]})),_:2},1024)])})),128))]})),_:1})):Object(o["createCommentVNode"])("",!0),3===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:3},{default:Wa((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.programCardInfo,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:"his-card info-card-item",key:t},[Object(o["createVNode"])(O,{lines:"none"},{default:Wa((function(){return[Object(o["createVNode"])(l,null,{default:Wa((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.label),1)]})),_:2},1024),Object(o["createVNode"])(l,{slot:"end"},{default:Wa((function(){return[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.value),1)]})),_:2},1024)]})),_:2},1024),Za])})),128))]})),_:1})):Object(o["createCommentVNode"])("",!0),4===e.activeTab?(Object(o["openBlock"])(),Object(o["createBlock"])(j,{key:4},{default:Wa((function(){return[Object(o["createVNode"])("div",eo,[Object(o["createVNode"])(O,{lines:"none"},{default:Wa((function(){return[Object(o["createVNode"])(l,null,{default:Wa((function(){return[to]})),_:1}),Object(o["createVNode"])(l,{slot:"end"},{default:Wa((function(){return[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.currentDate),1)]})),_:1})]})),_:1})]),Object(o["createVNode"])("div",no,[Object(o["createVNode"])(O,{lines:"none"},{default:Wa((function(){return[Object(o["createVNode"])(l,null,{default:Wa((function(){return[ro]})),_:1}),Object(o["createVNode"])(l,{slot:"end"},{default:Wa((function(){return[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.sessionDate),1)]})),_:1})]})),_:1})]),Object(o["createVNode"])("div",ao,[Object(o["createVNode"])(O,{lines:"none"},{default:Wa((function(){return[Object(o["createVNode"])(l,null,{default:Wa((function(){return[oo]})),_:1}),Object(o["createVNode"])(l,{slot:"end"},{default:Wa((function(){return[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.activeVisitDate),1)]})),_:1})]})),_:1})])]})),_:1})):Object(o["createCommentVNode"])("",!0)]),e.appHasCustomDashboard?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(v,{key:0,class:"full-component-view grid-custom vertically-align"},{default:Wa((function(){return[Object(o["createVNode"])(g,null,{default:Wa((function(){return[Object(o["createVNode"])(h,{size:"2.4"},{default:Wa((function(){return[Object(o["createVNode"])(_,{title:e.visitDatesTitle,items:e.visitDates,onOnselect:e.onActiveVisitDate},null,8,["title","items","onOnselect"])]})),_:1}),Object(o["createVNode"])(h,{size:"9.6"},{default:Wa((function(){return[Object(o["createVNode"])("div",io,[Object(o["createVNode"])(g,null,{default:Wa((function(){return[Object(o["createVNode"])(h,{"size-md":"4","size-sm":"6"},{default:Wa((function(){return[co,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.currentDate),1)]})),_:1}),Object(o["createVNode"])(h,{"size-md":"4","size-sm":"6"},{default:Wa((function(){return[e.nextTask.name?(Object(o["openBlock"])(),Object(o["createBlock"])("span",so,[Object(o["createVNode"])(w,{class:"next-task",color:"success",onClick:e.goToNextTask},{default:Wa((function(){return[Object(o["createTextVNode"])("Next Task: "+Object(o["toDisplayString"])(e.nextTask.name.toUpperCase()),1)]})),_:1},8,["onClick"])])):(Object(o["openBlock"])(),Object(o["createBlock"])("span",uo,[lo,po]))]})),_:1}),Object(o["createVNode"])(h,{"size-md":"4","size-sm":"12"},{default:Wa((function(){return[e.isBDE?(Object(o["openBlock"])(),Object(o["createBlock"])("span",bo,[Object(o["createVNode"])(w,{style:{marginTop:"-8px"},color:"danger",onClick:t[5]||(t[5]=function(t){return e.$router.push({name:"Session Date"})})},{default:Wa((function(){return[Object(o["createVNode"])("b",null," BDE: "+Object(o["toDisplayString"])(e.sessionDate.toUpperCase()),1)]})),_:1})])):(Object(o["openBlock"])(),Object(o["createBlock"])("span",fo,[mo,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.sessionDate),1)]))]})),_:1})]})),_:1}),e.appHasCustomContent&&e.patientIsset?(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e.customDashboardContent),{key:0,patient:e.patient,visitDate:e.activeVisitDate,onOnProgramVisitDates:e.onProgramVisitDates},null,8,["patient","visitDate","onOnProgramVisitDates"])):Object(o["createCommentVNode"])("",!0),e.appHasCustomContent?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])("div",ho,[Object(o["createVNode"])(g,null,{default:Wa((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.patientCards,(function(e,t){return Object(o["openBlock"])(),Object(o["createBlock"])(h,{size:"6",key:t},{default:Wa((function(){return[Object(o["createVNode"])(m,{isEnabled:e.isEnabled,counter:e.items.length,icon:e.icon,title:e.label,titleColor:e.color,items:e.items,onClick:e.onClick},null,8,["isEnabled","counter","icon","title","titleColor","items","onClick"])]})),_:2},1024)})),128))]})),_:1})]))])]})),_:1})]})),_:1})]})),_:1}))]})),_:1}),Object(o["createVNode"])(y,null,{default:Wa((function(){return[Object(o["createVNode"])(b,{color:"dark"},{default:Wa((function(){return[Object(o["createVNode"])(f,{disabled:e.tasksDisabled,class:"full-component-view",color:"primary",size:"large",slot:"end",onClick:e.showTasks},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.clipboardOutline},null,8,["icon"]),go]})),_:1},8,["disabled","onClick"]),Object(o["createVNode"])(f,{class:"mobile-component-view",color:"primary",size:"medium",slot:"end",onClick:e.showTasks},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.clipboard},null,8,["icon"])]})),_:1},8,["onClick"]),Object(o["createVNode"])(f,{class:"full-component-view",color:"primary",size:"large",slot:"end",onClick:e.showOptions},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.folderOutline},null,8,["icon"]),vo]})),_:1},8,["onClick"]),Object(o["createVNode"])(f,{class:"mobile-component-view",color:"primary",size:"medium",slot:"end",onClick:e.showOptions},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.folder},null,8,["icon"])]})),_:1},8,["onClick"]),Object(o["createVNode"])(f,{class:"full-component-view",color:"primary",size:"large",slot:"end",onClick:e.changeApp},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.appsOutline},null,8,["icon"]),Oo]})),_:1},8,["onClick"]),Object(o["createVNode"])(f,{class:"mobile-component-view",color:"primary",size:"medium",slot:"end",onClick:e.changeApp},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.apps},null,8,["icon"])]})),_:1},8,["onClick"]),Object(o["createVNode"])(f,{class:"full-component-view",color:"success",size:"large",slot:"end","router-link":"/"},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.logOutOutline},null,8,["icon"]),jo]})),_:1}),Object(o["createVNode"])(f,{class:"mobile-component-view",color:"success",size:"medium",slot:"end",onClick:e.onCancel},{default:Wa((function(){return[Object(o["createVNode"])(u,{icon:e.logOut},null,8,["icon"])]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})})),wo=n("53ca"),ko=Object(o["withScopeId"])("data-v-a346d65e"),yo=ko((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-badge"),s=Object(o["resolveComponent"])("ion-label"),u=Object(o["resolveComponent"])("ion-item"),l=Object(o["resolveComponent"])("ion-icon"),d=Object(o["resolveComponent"])("ion-chip"),p=Object(o["resolveComponent"])("ion-list");return Object(o["openBlock"])(),Object(o["createBlock"])("div",{class:["card",{inactive:!e.isEnabled,clickable:e.isEnabled}]},[Object(o["createVNode"])(u,{color:e.titleColor,lines:"none",class:"his-md-text title-card"},{default:ko((function(){return[Object(o["createVNode"])(c,{slot:"start",class:"his-sm-text",color:"light"},{default:ko((function(){return[Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(e.counter),1)]})),_:1}),Object(o["createVNode"])(s,null,{default:ko((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]})),_:1})]})),_:1},8,["color"]),Object(o["createVNode"])(p,null,{default:ko((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.items,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(u,{key:n},{default:ko((function(){var n;return[Object(o["createVNode"])(s,{class:null!==t&&void 0!==t&&null!==(n=t.other)&&void 0!==n&&n.wrapTxt?"ion-text-wrap":"",innerHTML:t.label},null,8,["class","innerHTML"]),t.value?(Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:0,class:"his-sm-text",slot:"end"},{default:ko((function(){return[Object(o["createVNode"])(l,{icon:e.icon},null,8,["icon"]),Object(o["createVNode"])(s,null,{default:ko((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.value),1)]})),_:2},1024)]})),_:2},1024)):Object(o["createCommentVNode"])("",!0)]})),_:2},1024)})),128))]})),_:1})],2)})),xo=(n("a9e3"),Object(o["defineComponent"])({components:{IonLabel:V["x"],IonList:V["y"],IonItem:V["w"],IonChip:V["l"],IonIcon:V["r"],IonBadge:V["c"]},data:function(){return{time:z["Z"]}},props:{isEnabled:{type:Boolean,default:function(){return!0}},counter:{type:Number,required:!1},icon:{type:Object},title:{type:String,required:!0},items:{type:Object},titleColor:{type:String,required:!1,default:function(){return"#337ab7"}}}}));n("236c");const No=I()(xo,[["render",yo],["__scopeId","data-v-a346d65e"]]);var Co=No,Vo=Object(o["withScopeId"])("data-v-fb9fb750");Object(o["pushScopeId"])("data-v-fb9fb750");var Do={class:"card his-card"},To={class:"his-md-text header-section"},Io={class:"bottom-section"};Object(o["popScopeId"])();var Ro=Vo((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-item"),s=Object(o["resolveComponent"])("ion-list");return Object(o["openBlock"])(),Object(o["createBlock"])("div",Do,[Object(o["createVNode"])("div",To,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])("button",{class:"nav-btn nav-btn-top clickable",disabled:!e.showPrevButton,onClick:t[1]||(t[1]=function(){return e.goPrev.apply(e,arguments)})},[Object(o["createVNode"])("img",{src:e.upbuttonImg,width:e.btnSize},null,8,["src","width"])],8,["disabled"]),Object(o["createVNode"])("div",{class:e.listAlignmentClass},[Object(o["createVNode"])(s,null,{default:Vo((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.activeListItems,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(c,{class:"his-md-text",key:n,onClick:function(n){return e.onselect(t)},detail:!0,color:e.isActive(t)?"primary":""},{default:Vo((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.label),1)]})),_:2},1032,["onClick","color"])})),128))]})),_:1})],2),Object(o["createVNode"])("div",Io,[Object(o["createVNode"])("button",{class:"nav-btn nav-btn-bottom clickable",disabled:!e.showNextButton,onClick:t[2]||(t[2]=function(){return e.goNext.apply(e,arguments)})},[Object(o["createVNode"])("img",{src:e.downbuttonImg,width:e.btnSize},null,8,["src","width"])],8,["disabled"])])])})),So=Object(o["defineComponent"])({components:{IonList:V["y"],IonItem:V["w"]},props:{title:{type:String,default:function(){return"Visits"}},items:{type:Object,required:!0}},data:function(){return{active:{},activeListItems:[],paginatedListItems:[],index:-1,perPage:6,btnSize:45}},computed:{listAlignmentClass:function(){return this.activeListItems&&this.activeListItems.length===this.perPage?"vertically-align":""},upbuttonImg:function(){return"/assets/images/drop-up-arrow.svg"},downbuttonImg:function(){return"/assets/images/drop-down-arrow.svg"},showNextButton:function(){return this.index+1<this.paginatedListItems.length},showPrevButton:function(){return this.index>=1}},watch:{items:{handler:function(e){if(!Object(et["isEmpty"])(e))for(var t in this.index=0,this.paginatedListItems=Object(et["chunk"])(e,this.perPage),this.activeListItems=this.paginatedListItems[0],this.active=this.activeListItems[0],this.paginatedListItems){var n=Object(et["findIndex"])(this.paginatedListItems[t],(function(e){return!0===e.other.isActive}),0);if(-1!=n){this.index=parseInt(t),this.activeListItems=this.paginatedListItems[t],this.active=this.activeListItems[n];break}}},deep:!0,immediate:!0},index:{handler:function(e){this.activeListItems=this.paginatedListItems[e]},immediate:!0},active:function(e){this.$emit("onselect",e)}},methods:{onselect:function(e){this.active=e},isActive:function(e){return e.label===this.active.label},goNext:function(){var e=this.index+1;e<=this.paginatedListItems.length&&(this.index=e)},goPrev:function(){this.paginatedListItems.length>=1&&(this.index-=1)}}});n("2b07");const Po=I()(So,[["render",Ro],["__scopeId","data-v-fb9fb750"]]);var Ao=Po,Eo=n("71c3"),Bo=Object(o["withScopeId"])("data-v-0f1e8a5b");Object(o["pushScopeId"])("data-v-0f1e8a5b");var Fo=Object(o["createTextVNode"])(" Close ");Object(o["popScopeId"])();var Lo=Bo((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-toolbar"),u=Object(o["resolveComponent"])("ion-header"),l=Object(o["resolveComponent"])("task-card"),d=Object(o["resolveComponent"])("ion-col"),p=Object(o["resolveComponent"])("ion-row"),b=Object(o["resolveComponent"])("ion-grid"),f=Object(o["resolveComponent"])("ion-button"),m=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(u,null,{default:Bo((function(){return[Object(o["createVNode"])(s,null,{default:Bo((function(){return[Object(o["createVNode"])(c,null,{default:Bo((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(b,{class:"selector"},{default:Bo((function(){return[Object(o["createVNode"])(p,null,{default:Bo((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.filteredItems,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{"size-lg":"4","size-sm":"6",key:n},{default:Bo((function(){return[Object(o["createVNode"])(l,{onClick:function(n){return e.doTask(t)},title:t.name.toUpperCase(),description:t.description,taskCompleted:t.taskCompleted,taskDisabled:e.isDisabled(t.disabled),icon:e.img(t.icon)},null,8,["onClick","title","description","taskCompleted","taskDisabled","icon"])]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(o["createVNode"])(m,null,{default:Bo((function(){return[Object(o["createVNode"])(s,null,{default:Bo((function(){return[Object(o["createVNode"])(f,{class:"close-btn",color:"danger",size:"large",onClick:e.closeModal,slot:"end"},{default:Bo((function(){return[Fo]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)})),Mo=Object(o["defineComponent"])({components:{IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],TaskCard:Ge,IonFooter:V["o"],IonToolbar:V["V"],IonButton:V["d"],IonHeader:V["q"],IonTitle:V["U"]},props:{title:{type:String,default:"Select Activity"},items:{type:Object,required:!0},taskParams:{type:Object,required:!1}},data:function(){return{filteredItems:[]}},watch:{items:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&!Object(et["isEmpty"])(e)){n.next=2;break}return n.abrupt("return");case 2:n.t0=regeneratorRuntime.keys(e);case 3:if((n.t1=n.t0()).done){n.next=19;break}if(r=n.t1.value,a=e[r],!a.globalProperty){n.next=11;break}return n.next=9,dn["a"].isProp(a.globalProperty);case 9:if(n.sent){n.next=11;break}return n.abrupt("continue",3);case 11:if(!a.condition){n.next=16;break}return n.next=14,a.condition(t.taskParams);case 14:if(n.sent){n.next=16;break}return n.abrupt("continue",3);case 16:t.filteredItems.push(a),n.next=3;break;case 19:case"end":return n.stop()}}),n)})))()},deep:!0,immediate:!0}},methods:{img:function(e){return Object(C["a"])(e)},isDisabled:function(e){return"function"===typeof e&&e(this.taskParams)},closeModal:function(){V["cb"].dismiss({})},doTask:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.isDisabled(e.disabled)){n.next=2;break}return n.abrupt("return",Object(O["e"])("This task is disabled"));case 2:if("boolean"!==typeof e.taskCompleted||null===e||void 0===e||!e.taskCompleted){n.next=7;break}return n.next=5,Object(O["a"])("This task was already completed. Do you want to continue?");case 5:if(n.sent){n.next=7;break}return n.abrupt("return");case 7:e.action?e.action(t.taskParams,t.$router):e.url?t.$router.push({path:e.url}):t.$router.push({name:e.id,params:{patient_id:null===(r=t.taskParams)||void 0===r?void 0:r.patient.patient_id}}),t.closeModal();case 9:case"end":return n.stop()}}),n)})))()}}});n("6ba7");const Ho=I()(Mo,[["render",Lo],["__scopeId","data-v-0f1e8a5b"]]);var Uo=Ho,qo=Object(o["withScopeId"])("data-v-34154cb8");Object(o["pushScopeId"])("data-v-34154cb8");var Go={style:{float:"right"}},zo={class:"tb"},Yo=Object(o["createTextVNode"])(" Void encounter"),Wo=Object(o["createTextVNode"])(" Close ");Object(o["popScopeId"])();var $o=qo((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-toolbar"),u=Object(o["resolveComponent"])("ion-header"),l=Object(o["resolveComponent"])("ion-item"),d=Object(o["resolveComponent"])("ion-list"),p=Object(o["resolveComponent"])("ion-col"),b=Object(o["resolveComponent"])("his-basic-table"),f=Object(o["resolveComponent"])("ion-row"),m=Object(o["resolveComponent"])("ion-content"),h=Object(o["resolveComponent"])("ion-button"),g=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(u,null,{default:qo((function(){return[Object(o["createVNode"])(s,null,{default:qo((function(){return[Object(o["createVNode"])(c,{class:"his-md-text"},{default:qo((function(){return[Object(o["createVNode"])("span",null,Object(o["toDisplayString"])(e.title),1),Object(o["createVNode"])("span",Go,"Provider: "+Object(o["toDisplayString"])(e.active.provider),1)]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(m,null,{default:qo((function(){return[Object(o["createVNode"])(f,null,{default:qo((function(){return[Object(o["createVNode"])(p,{size:"4"},{default:qo((function(){return[Object(o["createVNode"])(d,null,{default:qo((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.encounters,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{class:"his-sm-text",key:n,color:t.other.id===e.active.id?"primary":"",detail:!0,onClick:function(){return e.showDetails(t)}},{default:qo((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.label),1)]})),_:2},1032,["color","onClick"])})),128))]})),_:1})]})),_:1}),Object(o["createVNode"])(p,{size:"8"},{default:qo((function(){return[Object(o["createVNode"])("div",zo,[Object(o["createVNode"])(b,{columns:e.active.columns,rows:e.active.rows},null,8,["columns","rows"])])]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(g,null,{default:qo((function(){return[Object(o["createVNode"])(s,null,{default:qo((function(){return[Object(o["createVNode"])(h,{color:"danger",onClick:e.voidActiveItem,disabled:!e.canVoid,size:"large"},{default:qo((function(){return[Yo]})),_:1},8,["onClick","disabled"]),Object(o["createVNode"])(h,{onClick:e.closeModal,size:"large",slot:"end"},{default:qo((function(){return[Wo]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)})),Ko=n("a3a5"),Jo=Object(o["defineComponent"])({components:{HisBasicTable:Ko["a"],IonButton:V["d"],IonToolbar:V["V"],IonList:V["y"],IonFooter:V["o"],IonContent:V["n"],IonRow:V["J"],IonCol:V["m"],IonTitle:V["U"],IonHeader:V["q"],IonItem:V["w"]},data:function(){return{active:{id:-1,name:"",provider:"",rows:[],columns:[]},encounters:[]}},computed:{canVoid:function(){return!Object(et["isEmpty"])(this.active)&&!Object(et["isEmpty"])(this.active.rows)}},watch:{items:{handler:function(e){Object(et["isEmpty"])(e)||(this.encounters=e,this.showDetails(this.encounters[0]))},immediate:!0,deep:!0}},props:{title:{type:String,required:!0},items:{type:Object,required:!0}},methods:{closeModal:function(){V["cb"].dismiss({})},removeEncounter:function(e){this.encounters=this.encounters.filter((function(t){return t.other.id!=e}))},voidActiveItem:function(){var e=this;Object(kn["a"])(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.active.onVoid(n);case 3:e.removeEncounter(e.active.id),e.active={},Object(et["isEmpty"])(e.encounters)||e.showDetails(e.encounters[0]),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),Object(O["c"])(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),"void-modal custom-modal-backdrop")},showDetails:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.active.id=e.other.id,t.active.name=e.label,t.active.columns=e.other.columns,t.active.onVoid=e.other.onVoid,n.next=6,e.other.getRows();case 6:t.active.rows=n.sent,t.active.provider=e.other.provider;case 8:case"end":return n.stop()}}),n)})))()}}});n("d6f3");const Xo=I()(Jo,[["render",$o],["__scopeId","data-v-34154cb8"]]);var Qo=Xo,Zo=Object(o["createTextVNode"])(" Close ");function ei(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-toolbar"),u=Object(o["resolveComponent"])("ion-header"),l=Object(o["resolveComponent"])("his-basic-table"),d=Object(o["resolveComponent"])("ion-content"),p=Object(o["resolveComponent"])("ion-button"),b=Object(o["resolveComponent"])("ion-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{class:"his-md-text"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])]})),_:1}),Object(o["createVNode"])(b,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{size:"large",onClick:e.closeModal,slot:"end"},{default:Object(o["withCtx"])((function(){return[Zo]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var ti=Object(o["defineComponent"])({components:{HisBasicTable:Ko["a"],IonHeader:V["q"],IonToolbar:V["V"],IonContent:V["n"],IonFooter:V["o"],IonButton:V["d"]},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},rows:{type:Object,default:!0}},methods:{closeModal:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V["cb"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()}}});const ni=I()(ti,[["render",ei]]);var ri=ni;function ai(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-toolbar"),u=Object(o["resolveComponent"])("ion-header"),l=Object(o["resolveComponent"])("ion-label"),d=Object(o["resolveComponent"])("ion-item"),p=Object(o["resolveComponent"])("ion-list"),b=Object(o["resolveComponent"])("ion-content"),f=Object(o["resolveComponent"])("ion-menu"),m=Object(o["resolveComponent"])("ion-menu-button"),h=Object(o["resolveComponent"])("ion-buttons"),g=Object(o["resolveComponent"])("ion-thumbnail");return Object(o["openBlock"])(),Object(o["createBlock"])("div",null,[Object(o["createVNode"])(f,{"menu-id":"app-menu","content-id":"main-content",type:"overlay"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.menuTitle),1)]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(b,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,null,{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.menuItems,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(d,{key:n,detail:"true",class:"hydrated",onClick:function(n){return e.onClickItem(t)}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(h,{slot:"start"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m),Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]})),_:1})]})),_:1}),Object(o["createVNode"])(h,{slot:"end"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("img",{src:e.appIconPath,class:"logo",alt:"Master card logo"},null,8,["src"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})])}var oi=Object(o["defineComponent"])({name:"App",emits:["onClickMenuItem"],props:{title:String,menuTitle:String,menuItems:{type:Array,default:function(){return[]}},appIcon:{type:String,required:!0}},components:{IonContent:V["n"],IonItem:V["w"],IonList:V["y"],IonTitle:V["U"],IonMenu:V["A"],IonButtons:V["e"],IonMenuButton:V["B"],IonThumbnail:V["T"],IonToolbar:V["V"],IonHeader:V["q"],IonLabel:V["x"]},setup:function(e,t){function n(e){V["bb"].close("app-menu"),t.emit("onClickMenuItem",e)}return{onClickItem:n,appIconPath:Object(C["a"])(e.appIcon)}}});const ii=I()(oi,[["render",ai]]);var ci=ii;function si(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("info-card"),s=Object(o["resolveComponent"])("ion-col"),u=Object(o["resolveComponent"])("icon-card"),l=Object(o["resolveComponent"])("ion-row"),d=Object(o["resolveComponent"])("ion-toolbar"),p=Object(o["resolveComponent"])("ion-header");return Object(o["openBlock"])(),Object(o["createBlock"])(p,{translucent:!0},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(l,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{size:e.hasProgramInfo?5:10},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{items:e.patientCardInfo},null,8,["items"])]})),_:1},8,["size"]),e.hasProgramInfo?(Object(o["openBlock"])(),Object(o["createBlock"])(s,{key:0,size:"5"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{items:e.programCardInfo},null,8,["items"])]})),_:1})):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(s,{size:"2"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{version:e.appVersion,icon:e.logo},null,8,["version","icon"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})}var ui=Object(o["withScopeId"])("data-v-031d3d8c");Object(o["pushScopeId"])("data-v-031d3d8c");var li={class:"tool-bar-medium-card"};Object(o["popScopeId"])();var di=ui((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-icon");return Object(o["openBlock"])(),Object(o["createBlock"])("div",li,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.items,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])("div",{key:n},[e.hasIcon(t)?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,icon:t.other.icon},null,8,["icon"])):Object(o["createCommentVNode"])("",!0),Object(o["createTextVNode"])(" "+Object(o["toDisplayString"])(t.label)+": ",1),Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(t.value),1)])})),128))])})),pi=Object(o["defineComponent"])({name:"HisResultCard",components:{IonIcon:V["r"]},props:{icon:{required:!1},items:{type:Object,required:!0}},methods:{hasIcon:function(e){return"other"in e&&"icon"in e.other}}});n("eed0");const bi=I()(pi,[["render",di],["__scopeId","data-v-031d3d8c"]]);var fi=bi,mi=Object(o["defineComponent"])({name:"PatientToolbar",components:{IonHeader:V["q"],IonToolbar:V["V"],IonCol:V["m"],IonRow:V["J"],InfoCard:fi,IconCard:Pe},props:{appVersion:{type:String},patientCardInfo:{type:Array,required:!0},programCardInfo:{type:Array,required:!0},appIcon:{type:String,required:!0}},computed:{hasProgramInfo:function(){return this.programCardInfo.length>=1},logo:function(){return Object(C["a"])(this.appIcon)}}});const hi=I()(mi,[["render",si]]);var gi=hi,vi=n("ec2a"),Oi=n("8158"),ji=Object(o["defineComponent"])({components:{IonSegment:V["L"],IonSegmentButton:V["M"],FullToolbar:gi,MinimalToolbar:ci,VisitDatesCard:Ao,PrimaryCard:Co,IonChip:V["l"],IonPage:V["F"],IonIcon:V["r"],IonFooter:V["o"],IonContent:V["n"],IonButton:V["d"],IonToolbar:V["V"],IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"]},setup:function(){return{time:z["Z"],person:z["L"],calendar:z["m"],medical:z["F"],clipboard:z["v"],apps:z["d"],folder:z["A"],logOut:z["C"],clipboardOutline:z["w"],appsOutline:z["e"],folderOutline:z["B"],logOutOutline:z["D"],alertCircle:z["c"]}},data:function(){return{activeTab:1,app:{},tasksDisabled:!0,dashboardComponent:{},isBDE:!1,currentDate:"",sessionDate:"",nextTask:{},patientId:0,programID:0,patient:{},patientProgram:{},patientCardInfo:[],programCardInfo:[],encounters:[],medications:[],visitDates:[],activeVisitDate:"",encountersCardItems:[],medicationCardItems:[],labOrderCardItems:[],alertCardItems:[],patientCards:[],appVersion:On["a"].getFullVersion(),sessionEncounters:[],savedEncounters:[],cardConfig:{labEnabled:!0,medicationsEnabled:!0,alertsEnabled:!0,activitiesEnabled:!0}}},computed:{patientIsset:function(){return!Object(et["isEmpty"])(this.patient)},patientName:function(){return Object(et["isEmpty"])(this.patient)?"N/A":this.patient.getFullName()},appHasCustomContent:function(){return!tt.a.isEmpty(this.app.customPatientDashboardContentComponent)},customDashboardContent:function(){return this.app.customPatientDashboardContentComponent},visitDatesTitle:function(){return"".concat(this.visitDates.length," Visits")}},watch:{$route:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.params,r){n.next=3;break}return n.abrupt("return");case 3:if(t.patientId=parseInt(r.id),!t.patientId){n.next=7;break}return n.next=7,t.init();case 7:case"end":return n.stop()}}),n)})))()},deep:!0,immediate:!0},activeVisitDate:function(e){this.appHasCustomContent||this.loadCardData(e)}},mounted:function(){this.updateCards()},methods:{init:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye["a"].doAppManagementTasks();case 2:return e.app=ye["a"].getActiveApp(),e.setProgramCardConfig(),t.next=6,e.fetchPatient(e.patientId);case 6:return e.patient=t.sent,t.prev=7,t.next=10,On["a"].getProgramInformation(e.patientId);case 10:e.patientProgram=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](7),console.warn(t.t0);case 16:return t.next=18,e.getProgramCardInfo(e.patientProgram);case 18:if(t.t1=t.sent,t.t1){t.next=21;break}t.t1=[];case 21:return e.programCardInfo=t.t1,e.patientCardInfo=e.getPatientCardInfo(e.patient),e.currentDate=Ne["b"].currentDisplayDate(),e.sessionDate=e.toDate(On["a"].getSessionDate()),e.isBDE=On["a"].isBDE()||!1,t.next=28,e.getNextTask(e.patientId);case 28:return e.nextTask=t.sent,t.t2=e,t.next=32,e.getPatientVisitDates(e.patientId);case 32:if(t.t3=t.sent,t.t2.onProgramVisitDates.call(t.t2,t.t3),e.tasksDisabled=!1,!e.cardConfig.alertsEnabled){t.next=42;break}return t.next=38,e.getPatientAlertCardInfo();case 38:if(t.t4=t.sent,t.t4){t.next=41;break}t.t4=[];case 41:e.alertCardItems=t.t4;case 42:return e.programID=On["a"].getProgramID(),t.next=45,e.loadSavedEncounters();case 45:e.updateCards();case 46:case"end":return t.stop()}}),t,null,[[7,13]])})))()},setProgramCardConfig:function(){if(this.app.configDefaultPatientDashboardCards){var e=function(e){return"boolean"!==typeof e||e},t=this.app.configDefaultPatientDashboardCards;this.cardConfig.labEnabled=e(t.labEnabled),this.cardConfig.medicationsEnabled=e(t.medicationsEnabled),this.cardConfig.activitiesEnabled=e(t.activitiesEnabled),this.cardConfig.alertsEnabled=e(t.alertsEnabled)}},showLoader:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V["ab"].create({message:"Please wait....",backdropDismiss:!1});case 2:return t=e.sent,e.next=5,t.present();case 5:case"end":return e.stop()}}),e)})))()},toDate:function(e){return Ne["b"].toStandardHisDisplayFormat(e)},toTime:function(e){return Ne["b"].toStandardHisTimeFormat(e)},loadSavedEncounters:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,vi["a"].getSavedEncounters(e.patientId);case 3:e.savedEncounters=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.warn("Program might not support saved encounters",t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},loadCardData:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.showLoader();case 3:if(!t.cardConfig.activitiesEnabled){n.next=10;break}return n.next=6,vi["a"].getEncounters(t.patientId,{date:e});case 6:return t.encounters=n.sent,n.next=9,t.getActivitiesCardInfo(t.encounters);case 9:t.encountersCardItems=n.sent;case 10:if(t.tasksDisabled=!1,V["ab"].dismiss(),!t.cardConfig.medicationsEnabled){n.next=17;break}return n.next=15,Eo["a"].getOrderByPatient(t.patientId,{start_date:e});case 15:t.medications=n.sent,t.medicationCardItems=t.getMedicationCardInfo(t.medications);case 17:if(!t.cardConfig.labEnabled){n.next=21;break}return n.next=20,t.getLabOrderCardInfo(e);case 20:t.labOrderCardItems=n.sent;case 21:e===On["a"].getSessionDate()&&(t.sessionEncounters=t.encounters),t.updateCards(),n.next=30;break;case 25:n.prev=25,n.t0=n["catch"](0),Object(O["c"])("".concat(n.t0)),t.tasksDisabled=!1,V["ab"].getTop().then((function(e){return e?V["ab"].dismiss():null}));case 30:case"end":return n.stop()}}),n,null,[[0,25]])})))()},updateCards:function(){this.patientCards=[this.activitiesCard(),this.labOrderCard(),this.alertsCard(),this.medicationCard()]},activitiesCard:function(){var e=this;return{label:"Activities",items:this.encountersCardItems,icon:z["ab"],color:"primary",isEnabled:this.cardConfig.activitiesEnabled,onClick:function(){return e.cardConfig.activitiesEnabled&&e.openModal(e.encountersCardItems,"Select Activities",Qo)}}},labOrderCard:function(){var e=this,t="Lab Orders";return{label:t,color:"success",icon:z["ab"],items:this.labOrderCardItems,isEnabled:this.cardConfig.labEnabled,onClick:function(){return e.cardConfig.labEnabled&&e.$router.push("/art/encounters/lab/".concat(e.patient.getID()))}}},alertsCard:function(){return{label:"Alerts",color:"danger",icon:z["db"],items:this.alertCardItems,isEnabled:this.cardConfig.alertsEnabled,onClick:function(){}}},medicationCard:function(){var e=this;return{label:"Medications",color:"warning",icon:z["ab"],items:this.medicationCardItems,isEnabled:this.cardConfig.medicationsEnabled,onClick:function(){if(e.cardConfig.medicationsEnabled){var t=["Medication","Start date","End date","Amount given"],n=e.medications.map((function(t){return[t.drug.name,e.toDate(t.order.start_date),e.toDate(t.order.auto_expire_date),t.quantity]}));e.openTableModal(t,n,"Medication History")}}}},fetchPatient:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,an["a"].findByID(e);case 2:return n=t.sent,t.abrupt("return",n?new an["a"](n):{});case 4:case"end":return t.stop()}}),t)})))()},getPatientVisitDates:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,an["a"].getPatientVisits(e,!1);case 2:return r=n.sent,n.abrupt("return",r.map((function(e){return{label:t.toDate(e),value:e}})));case 4:case"end":return n.stop()}}),n)})))()},onProgramVisitDates:function(e){var t=this,n=this.visitDates.concat(e).map((function(e){return e.value})).sort((function(e,t){return new Date(e)>new Date(t)?0:1}));this.visitDates=Object(et["uniq"])(n).map((function(e){return{label:t.toDate(e),value:e,other:{isActive:e===On["a"].getSessionDate()}}}))},getNextTask:function(e){return ia["a"].getNextTaskParams(e)},goToNextTask:function(){Object(tn["b"])(this.patientId,this.$router)},onActiveVisitDate:function(e){this.activeVisitDate=e.value},getPatientCardInfo:function(e){var t=e.getBirthdate(),n="M"===e.getGender()?z["E"]:z["eb"];return[{label:"Name",value:e.getFullName(),other:{icon:n}},{label:"Birthdate",value:"\n                    ".concat(this.toDate(t),"\n                    (").concat(e.getAge(),") \n                    (").concat(e.getNationalID(),")")},{label:"Current Village",value:e.getCurrentVillage()},{label:"Phone#",value:e.getPhoneNumber()}]},getProgramCardInfo:function(e){if("formatPatientProgramSummary"in this.app)return this.app.formatPatientProgramSummary(e,this.patientId)},getActivitiesCardInfo:function(e){var t=this,n=e.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=n.type.name,e.t1=t.toTime(n.encounter_datetime),e.next=4,Mn["a"].getPersonFullName(n.provider_id);case 4:return e.t2=e.sent,e.t3=n.encounter_id,e.t4=["Observation","Value","Time"],e.t5=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.showLoader();case 3:return e.next=5,vi["a"].voidEncounter(n.encounter_id,r);case 5:return e.next=7,t.loadSavedEncounters();case 7:return V["ab"].dismiss(),e.next=10,t.loadCardData(t.activeVisitDate);case 10:return e.next=12,t.getNextTask(t.patientId);case 12:t.nextTask=e.sent,Object(O["d"])("Encounter has been voided!",2e3),e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),Object(O["c"])(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));function r(t){return e.apply(this,arguments)}return r}(),e.t6=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=[],r=n.observations,e.t0=regeneratorRuntime.keys(r);case 3:if((e.t1=e.t0()).done){e.next=27;break}if(a=e.t1.value,o="<UNKNOWN CONCEPT>",i=r[a],e.prev=7,null===i||void 0===i||null===(c=i.concept)||void 0===c||!c.concept_names){e.next=12;break}o=i.concept.concept_names[0].name,e.next=15;break;case 12:return e.next=14,Oi["a"].getConceptName(i.concept_id);case 14:o=e.sent;case 15:e.next=20;break;case 17:e.prev=17,e.t2=e["catch"](7),console.error(i,e.t2);case 20:return e.next=22,hn["a"].resolvePrimaryValue(i);case 22:s=e.sent,u=Ne["b"].toStandardHisTimeFormat(i.date_created),t.push([o,s,u]),e.next=3;break;case 27:return e.abrupt("return",t);case 28:case"end":return e.stop()}}),e,null,[[7,17]])})));function t(){return e.apply(this,arguments)}return t}(),e.t7={provider:e.t2,id:e.t3,columns:e.t4,onVoid:e.t5,getRows:e.t6},e.abrupt("return",{label:e.t0,value:e.t1,other:e.t7});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Promise.all(n)},getMedicationCardInfo:function(e){var t=this;return e.map((function(e){return{label:e.drug.name,value:t.toTime(e.order.start_date)}}))},getLabOrderCardInfo:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("function"!==typeof t.app.getPatientDashboardLabOrderCardItems){n.next=2;break}return n.abrupt("return",t.app.getPatientDashboardLabOrderCardItems(t.patientId,e));case 2:return n.next=4,fn["a"].getOrders(t.patientId,{date:e});case 4:return r=n.sent,n.abrupt("return",r.map((function(e){return{label:e.specimen.name,value:t.toTime(e.order_date)}})));case 6:case"end":return n.stop()}}),n)})))()},getPatientAlertCardInfo:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!("getPatientDashboardAlerts"in e.app)){t.next=2;break}return t.abrupt("return",e.app.getPatientDashboardAlerts(e.patient));case 2:case"end":return t.stop()}}),t)})))()},changeApp:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ye["a"].selectApplication("PatientDashboard",!0);case 2:if(n=t.sent,n){t.next=5;break}return t.abrupt("return");case 5:if(n.programID==e.programID){t.next=9;break}return t.abrupt("return",e.$router.push("/patients/confirm?patient_barcode=".concat(e.patient.getNationalID())));case 9:return t.next=11,e.init();case 11:case"end":return t.stop()}}),t)})))()},showTasks:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"primaryPatientActivites"in e.app&&(n=e.sessionEncounters.reduce((function(e,t){return e[t.type.name.toLowerCase()]=t.observations.reduce((function(e,t){return e.concat(t.concept.concept_names)}),[]).map((function(e){return e.name.toLowerCase()})),e}),{}),a=Object(r["a"])(e.app.primaryPatientActivites).map((function(e){var t=(e.encounterTypeName||e.name).toLowerCase();return"object"===Object(wo["a"])(e.taskCompletionChecklist)?e.taskCompleted=e.taskCompletionChecklist.every((function(e){return Object(et["isArray"])(n[t])&&n[t].includes(e.toLowerCase())})):e.taskCompleted=!Object(et["isEmpty"])(n[t]),e})),e.openModal(a,"Tasks for",Uo,e.sessionDate));case 1:case"end":return t.stop()}}),t)})))()},showOptions:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:"secondaryPatientActivites"in e.app&&(n=e.app.secondaryPatientActivites,e.openModal(n,"Select Activity",Uo));case 1:case"end":return t.stop()}}),t)})))()},openModal:function(e,t,n){var r=arguments,a=this;return Object(c["a"])(regeneratorRuntime.mark((function o(){var i,c,s;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i=r.length>3&&void 0!==r[3]?r[3]:"",c=i||a.toDate(a.activeVisitDate.toString()),o.next=4,V["cb"].create({component:n,backdropDismiss:!1,cssClass:"large-modal",componentProps:{items:e,title:"".concat(t,": ").concat(c),taskParams:{patient:a.patient.getObj(),program:a.patientProgram,visitDate:a.activeVisitDate,patientID:a.patientId,savedEncounters:a.savedEncounters}}});case 4:s=o.sent,s.present();case 6:case"end":return o.stop()}}),o)})))()},openTableModal:function(e,t,n){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=r.toDate(r.activeVisitDate.toString()),a.next=3,V["cb"].create({component:ri,backdropDismiss:!1,cssClass:"large-modal",componentProps:{columns:e,rows:t,title:"".concat(n,": ").concat(o)}});case 3:i=a.sent,i.present();case 5:case"end":return a.stop()}}),a)})))()},onCancel:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["a"])("Are you sure you want to Finish?");case 2:if(n=t.sent,!n){t.next=5;break}return t.abrupt("return",e.$router.push({path:"/"}));case 5:case"end":return t.stop()}}),t)})))()}}});n("b77b");const _i=I()(ji,[["render",_o],["__scopeId","data-v-7eecfa92"]]);var wi=_i;function ki(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return e.fields.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:0,fields:e.fields,onOnSubmit:e.onSubmit,onOnFinish:e.onFinish,skipSummary:!0},null,8,["fields","onOnSubmit","onOnFinish"])):Object(o["createCommentVNode"])("",!0)}var yi=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},methods:{onFinish:function(e){var t=this;dn["a"].set(this.property,e.preference).then((function(){return Object(O["d"])("Property set")})).then((function(){return t.$router.push("/")}))},getFields:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fields=[{id:"preference",helpText:e.label,type:Ln["b"].TT_YES_NO,defaultValue:function(){return e.val},validation:function(e){return Un["a"].required(e)},options:function(){return[{label:e.label,values:[{label:"yes",value:"true"},{label:"no",value:"false"}]}]}}];case 1:case"end":return t.stop()}}),t)})))()}},data:function(){return{property:null,fields:[],label:null,val:""}},watch:{$route:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.query,!r.label||!r.property){n.next=14;break}return n.prev=2,n.next=5,dn["a"].get(r.property);case 5:t.val=n.sent,n.next=11;break;case 8:n.prev=8,n.t0=n["catch"](2),console.log("fixed global property not found error");case 11:t.property=r.property,t.label=r.label,t.getFields();case 14:case"end":return n.stop()}}),n,null,[[2,8]])})))()},deep:!0,immediate:!0}}});const xi=I()(yi,[["render",ki]]);var Ni=xi,Ci=n("f768");function Vi(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{skipSummary:!0,fields:e.fields,onOnFinish:e.onSubmit},null,8,["fields","onOnFinish"])}var Di=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},data:function(){return{apiDate:"",fields:[]}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Ce["e"].getApiDate();case 2:e.apiDate=t.sent,e.fields=Object(oa["b"])({id:"session_date",helpText:"Session Date",required:!0,minDate:function(){return"2000-01-01"},maxDate:function(){return e.apiDate},estimation:{allowUnknown:!1},computeValue:function(e){return e},config:{footerBtns:[{name:"Reset",slot:"end",color:"success",state:{visible:{default:function(){return Ce["e"].isBDE()}}},onClick:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.resetSessionDate();case 2:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}]}},"");case 4:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(gn["a"])(200);case 2:return t.next=4,e.showBdeNotice();case 4:case"end":return t.stop()}}),t)})))()},methods:{showBdeNotice:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Ce["e"].isBDE()){t.next=2;break}return t.abrupt("return");case 2:return n=Ne["b"].toStandardHisDisplayFormat(Ce["e"].getCachedApiDate()||""),r=Ne["b"].toStandardHisDisplayFormat(Ce["e"].getSessionDate()),t.next=6,Object(gn["a"])(200);case 6:return t.next=8,Object(cn["a"])("BDE Notice","The system is currently in Back Data Entry Mode(BDE).                 Do you wish to reset the date to ".concat(n,"?"),"BDE Date: ".concat(r),[{name:"Reset Date",slot:"start",color:"success"},{name:"Keep BDE Date",slot:"end",color:"danger"},{name:"New date",slot:"end"}]);case 8:if(a=t.sent,"Reset Date"!==a){t.next=13;break}return t.next=12,e.resetSessionDate();case 12:return t.abrupt("return",t.sent);case 13:"Keep BDE Date"===a&&e.redirect();case 14:case"end":return t.stop()}}),t)})))()},resetSessionDate:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ce["e"].resetSessionDate();case 3:Object(O["d"])("Session date has been reset to ".concat(e.formatDate(e.apiDate))),e.redirect(),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),Object(O["e"])(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},redirect:function(){var e=this.$route.query.patient_dashboard_redirection_id;e?this.$router.push("/patient/dashboard/".concat(e)):this.$router.back()},onSubmit:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.session_date,e.prev=1,e.next=4,Ce["e"].setSessionDate(r);case 4:Object(O["d"])("Successfully Back dated to ".concat(n.formatDate(r))),i=null===(a=n.$route)||void 0===a||null===(o=a.query)||void 0===o?void 0:o.patient_id,i?Object(tn["b"])(i,n.$router):n.redirect(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),Object(O["e"])(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},formatDate:function(e){return Ne["b"].toStandardHisDisplayFormat(e)}}});const Ti=I()(Di,[["render",Vi]]);var Ii=Ti;function Ri(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("report-template"),s=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,customFileName:e.customFileName,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","customFileName","onReportConfiguration"])]})),_:1})}var Si=n("44e3"),Pi=n("4ba2"),Ai=Object(o["defineComponent"])({mixins:[Si["a"]],components:{ReportTemplate:Pi["a"],IonPage:V["F"]},data:function(){return{title:"User system usage",rows:[],columns:[[Ua["a"].thTxt("First name"),Ua["a"].thTxt("Last name"),Ua["a"].thTxt("Role"),Ua["a"].thDate("Registered on"),Ua["a"].thDate("Encounters created")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],e.next=3,nn["a"].getSystemUsageByUsers(t.start_date,t.end_date);case 3:r=e.sent,n.period="".concat(Ne["b"].toStandardHisDisplayFormat(t.start_date),"-").concat(Ne["b"].toStandardHisDisplayFormat(t.end_date)),n.title="User system usage <b>".concat(n.period,"</b>"),n.customFileName="".concat(nn["a"].getLocationName()," User system usage ").concat(n.period),n.setRows(r);case 8:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.forEach((function(e){t.rows.push([Ua["a"].td(e.given_name),Ua["a"].td(e.family_name),Ua["a"].td(e.role),Ua["a"].tdDate(e.registered_on),Ua["a"].td(e.encounters)])}));case 1:case"end":return n.stop()}}),n)})))()}}});const Ei=I()(Ai,[["render",Ri]]);var Bi=Ei;function Fi(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{skipSummary:!0,fields:e.fields,onOnFinish:e.onSubmit},null,8,["fields","onOnFinish"])}var Li=n("5713"),Mi=n("b89f"),Hi=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},data:function(){return{fields:[]}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fields=[{id:"location",helpText:"Please select facility name",type:Ln["b"].TT_SELECT,defaultValue:function(){return Li["a"].getUserLocation()},validation:function(e){return Un["a"].required(e)},options:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"",e.next=3,Li["a"].getFacilities({name:n});case 3:return r=e.sent,e.abrupt("return",r.map((function(e){return{label:e.name,value:e.location_id}})));case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),config:{showKeyboard:!0,isFilterDataViaApi:!0}}];case 1:case"end":return t.stop()}}),t)})))()},methods:{onSubmit:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=new Mi["a"],n.prev=1,n.next=4,r.printLocation(e.location.value);case 4:t.$router.push({path:"/"}),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}});const Ui=I()(Hi,[["render",Fi]]);var qi=Ui;function Gi(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{fields:e.fields,onOnFinish:e.onFinish,skipSummary:!0},null,8,["fields","onOnFinish"])}var zi=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},methods:{onFinish:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.use_portal.value,n.next=3,$e["b"].setPortalEnabled(r);case 3:if(!t.enablePortal){n.next=9;break}return a=e.ip_address.value,o=e.port.value,i="http://".concat(a,":").concat(o),n.next=9,$e["b"].setPortalIP(i);case 9:t.$router.back();case 10:case"end":return n.stop()}}),n)})))()},getFields:function(){var e=this;this.fields=[{id:"use_portal",helpText:"Enable Portal?",type:Ln["b"].TT_SELECT,requireNext:!0,validation:function(e){return Un["a"].required(e)},options:function(){return[{label:"Yes",value:"true"},{label:"No",value:"false"}]},computedValue:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.enablePortal="true"===n.value;case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"ip_address",helpText:"Enter IP Address",type:Ln["b"].TT_TEXT,condition:function(){return e.enablePortal},validation:function(e){return Un["a"].required(e)||Un["a"].isIPAddress(e)},config:{customKeyboard:[_["c"],[["Delete"]]]}},{id:"port",helpText:"Enter Port",condition:function(){return e.enablePortal},validation:function(e){return Un["a"].required(e)},type:Ln["b"].TT_TEXT,config:{customKeyboard:[_["i"],[["Delete"]]]}}]}},data:function(){return{fields:[],enablePortal:!1}},mounted:function(){this.getFields()}});const Yi=I()(zi,[["render",Gi]]);var Wi=Yi;function $i(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0},null,8,["fields","onFinishAction"])}var Ki=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},methods:{onFinish:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.protocol.value,a=e.ip_address.value,o=e.port.value,xe["b"].setLocalStorage(r,a,o),n.next=6,V["ab"].create({message:"Please wait...",backdropDismiss:!1});case 6:return i=n.sent,n.next=9,i.present();case 9:return n.next=11,xe["b"].healthCheck();case 11:c=n.sent,V["ab"].dismiss(),c&&200===c.status&&c?t.$router.back():(Object(O["e"])("\n          Unable to connect to: ".concat(r,"://").concat(a,": ").concat(o,"\n        ")),t.clearLocalStorage());case 14:case"end":return n.stop()}}),n)})))()},getFields:function(){this.fields=[{id:"protocol",helpText:"Select Protocol",type:Ln["b"].TT_SELECT,requireNext:!1,validation:function(e){return Un["a"].required(e)},options:function(){return[{label:"HTTP",value:"http"},{label:"HTTPS",value:"https"}]}},{id:"ip_address",helpText:"Enter IP Address",type:Ln["b"].TT_IP_ADDRESS,validation:function(e){return Un["a"].required(e)||Un["a"].isIPAddress(e)}},{id:"port",helpText:"Enter Port",validation:function(e){return Un["a"].required(e)},type:Ln["b"].TT_TEXT,config:{customKeyboard:[_["i"],[["Delete"]]]}}]},showConfigNotice:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.isUsingLocalStorage()){t.next=5;break}return t.next=3,Object(cn["a"])("Config notice","The system is currently using user specified configurations.                 Do you wish to reset back to server configurations?","",[{name:"Reset configurations",slot:"start",color:"success"},{name:"New configurations",slot:"end"}]);case 3:n=t.sent,"Reset configurations"===n&&(e.clearLocalStorage(),e.$router.back());case 5:case"end":return t.stop()}}),t)})))()},isUsingLocalStorage:function(){return"true"===localStorage.getItem("useLocalStorage")},clearLocalStorage:function(){var e=["useLocalStorage","apiURL","apiPort","apiProtocol"];xe["b"].removeOnly(e)}},data:function(){return{fields:[]}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.showConfigNotice();case 2:e.getFields();case 3:case"end":return t.stop()}}),t)})))()}});const Ji=I()(Ki,[["render",$i]]);var Xi=Ji;function Qi(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.hisFormKey,activeField:e.fieldComponent,skipSummary:!0,fields:e.fields,onOnIndex:t[1]||(t[1]=function(t){return e.fieldComponent=""}),onOnFinish:e.onFinish},null,8,["activeField","fields","onOnFinish"])}n("a434");var Zi=n("e86e"),ec=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},data:function(){return{hisFormKey:0,patient:{},patientProgram:{},fields:[],fieldComponent:"",activeField:"",activeProgram:{},programSelectionFieldContext:{}}},watch:{fieldComponent:function(e){e&&(this.activeField=e)},activeField:function(e){"program_selection"===e&&(this.hisFormKey+=1)},$route:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:a=e.params,a&&a.patient_id&&(t.patient=a.patient_id,t.patientProgram=new on["a"](t.patient),t.fields=[t.getProgramSelectionField(),t.getProgramEnrollmentField()].concat(Object(r["a"])(t.getProgramOutcomeDateFields()),[t.getProgramStateField(),t.getTransferOutFacilityFields()],Object(r["a"])(t.getStateOutcomeDateFields())));case 2:case"end":return n.stop()}}),n)})))()},deep:!0,immediate:!0}},methods:{onFinish:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:n.t0=t.activeField,n.next="program_enrollment"===n.t0?3:"program_state"===n.t0?6:9;break;case 3:return n.next=5,t.onEnrollProgram();case 5:return n.abrupt("break",9);case 6:return n.next=8,t.onProgramState(e);case 8:return n.abrupt("break",9);case 9:case"end":return n.stop()}}),n)})))()},patientPrograms:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.patientProgram.getPrograms();case 2:return n=t.sent,t.abrupt("return",n.map((function(t){return{label:t.program.name,value:t.program.program_id,other:Object(Be["a"])(Object(Be["a"])({},t),{},{programStates:t.patient_states.map((function(t){return{name:t.name,startDate:Ne["b"].toStandardHisDisplayFormat(t.start_date),endDate:t.end_date?Ne["b"].toStandardHisDisplayFormat(t.end_date):"N/A",actions:e.getStateActions(t)}}))})}})));case 4:case"end":return t.stop()}}),t)})))()},allPrograms:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.programSelectionFieldContext.listData,t.next=3,On["a"].getAllPrograms();case 3:return r=t.sent,t.abrupt("return",r.map((function(e){return{label:e.name,value:e.program_id,disabled:Object(et["find"])(n,{value:e.program_id}),other:Object(Be["a"])({},e)}})));case 5:case"end":return t.stop()}}),t)})))()},programWorkflows:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,On["a"].getProgramWorkflows(e.patientProgram.getProgramId());case 2:if(n=t.sent,Object(et["isEmpty"])(n)){t.next=5;break}return t.abrupt("return",n[0].states.map((function(e){return{label:e.name,value:e.program_workflow_state_id,other:Object(Be["a"])({},e)}})));case 5:case"end":return t.stop()}}),t)})))()},getStateActions:function(e){var t=this,n=[{name:"Void",color:"danger",action:function(){var n=Object(c["a"])(regeneratorRuntime.mark((function n(r,a){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.onVoidState(e.patient_state_id,r,a);case 2:case"end":return n.stop()}}),n)})));function r(e,t){return n.apply(this,arguments)}return r}()}];return"Patient transferred out"===e.name&&n.push({name:"Print",color:"primary",action:function(){var n=Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.patientProgram.printTransferout(e.start_date);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));function r(){return n.apply(this,arguments)}return r}()}),n},onUpdateState:function(){if(-1===this.patientProgram.getProgramId())return Object(O["e"])("Please select a program");this.fieldComponent="program_state"},onProgramState:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.patientProgram.updateState();case 3:if(t.fieldComponent="program_selection",!e.transfer_out_state){n.next=7;break}return n.next=7,t.patientProgram.transferOutEncounter(e.transfer_out_state.other);case 7:Object(O["d"])("State has been updated"),n.next=13;break;case 10:n.prev=10,n.t0=n["catch"](0),Object(O["c"])(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})))()},onEnrollProgram:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.patientProgram.getProgramId(),-1!==n){t.next=3;break}return t.abrupt("return",Object(O["e"])("Please select a program"));case 3:return t.prev=3,t.next=6,e.patientProgram.enrollProgram();case 6:e.activeProgram=t.sent,e.fieldComponent="program_state",Object(O["d"])("Patient has been enrolled!"),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](3),e.activeProgram={},Object(O["c"])(t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,11]])})))()},onVoidState:function(e,t,n){var r=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(kn["a"])(function(){var a=Object(c["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,r.patientProgram.setStateId(e),a.next=4,r.patientProgram.voidState(o);case 4:r.patientProgram.setStateId(-1),t.other.programStates.splice(n,1),Object(O["d"])("State has been voided"),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),Object(O["c"])(a.t0);case 12:case"end":return a.stop()}}),a,null,[[0,9]])})));return function(e){return a.apply(this,arguments)}}());case 2:case"end":return a.stop()}}),a)})))()},onVoidProgram:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.patientProgram.getPatientProgramId(),-1!==n){t.next=3;break}return t.abrupt("return",Object(O["e"])("Please select a program"));case 3:return t.next=5,Object(kn["a"])(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.patientProgram.voidProgram(n);case 3:r=e.programSelectionFieldContext,a=Object(et["findIndex"])(r.listData,{value:e.patientProgram.getProgramId()}),r.listData.splice(a,1),r.activeProgram={},e.patientProgram.setPatientProgramId(-1),e.patientProgram.setProgramId(-1),Object(O["d"])("Program removed"),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](0),console.error(t.t0),Object(O["c"])(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})))()},getStateOutcomeDateFields:function(){var e=this;return Object(oa["b"])({id:"state_outcome_date",helpText:"State",condition:function(e){return e.program_state},required:!0,minDate:function(){return e.patientProgram.getProgramDate()},maxDate:function(){return On["a"].getSessionDate()},estimation:{allowUnknown:!0,estimationFieldType:oa["a"].MONTH_ESTIMATE_FIELD},computeValue:function(t){return e.patientProgram.setStateDate(t)}},this.patientProgram.getProgramDate()||On["a"].getSessionDate())},getTransferOutFacilityFields:function(){return{id:"transfer_out_state",helpText:"Please Select facility name",type:Ln["b"].TT_SELECT,validation:function(e){return Un["a"].required(e)},condition:function(e){return"Patient transferred out"===e.program_state.label},options:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(Zi["b"])(t)},config:{showKeyboard:!0,isFilterDataViaApi:!0}}},getProgramStateField:function(){var e=this;return{id:"program_state",helpText:"State",type:Ln["b"].TT_SELECT,validation:function(e){return Un["a"].required(e)},options:function(){return e.programWorkflows()},condition:function(){return"program_state"===e.activeField},unload:function(t){return e.patientProgram.setStateId(t.value)}}},getProgramEnrollmentField:function(){var e=this;return{id:"program_enrollment",helpText:"Please select a programme",type:Ln["b"].TT_SELECT,condition:function(){return"program_enrollment"===e.activeField},unload:function(t){return e.patientProgram.setProgramId(t.value)},options:function(){return e.allPrograms()},validation:function(e){return Un["a"].required(e)},config:{showKeyboard:!0}}},getProgramOutcomeDateFields:function(){var e=this;return Object(oa["b"])({id:"program_outcome_date",helpText:"Outcome",required:!0,minDate:function(){return Ne["b"].estimateDateFromAge(100)},maxDate:function(){return On["a"].getSessionDate()},condition:function(){return"program_enrollment"===e.activeField},estimation:{allowUnknown:!0,estimationFieldType:oa["a"].MONTH_ESTIMATE_FIELD},computeValue:function(t){return e.patientProgram.setProgramDate(t)}},On["a"].getSessionDate())},getProgramSelectionField:function(){var e=this,t=function(e){return!Object(et["isEmpty"])(e.program_selection)};return{id:"program_selection",helpText:"Programs",type:Ln["b"].TT_PROGRAM_SELECTION,onload:function(t){e.activeField="program_selection",e.programSelectionFieldContext=t},onValue:function(t){return t&&(e.activeProgram=t.other,e.patientProgram.setProgramId(t.value),e.patientProgram.setPatientProgramId(t.other.patient_program_id),e.patientProgram.setProgramDate(Ne["b"].toStandardHisFormat(t.other.date_enrolled))),!0},validation:function(e){return Un["a"].required(e)},options:function(){return e.patientPrograms()},config:{onVoidState:this.onVoidState,hiddenFooterBtns:["Back","Next","Clear"],footerBtns:[{name:"Void Program",slot:"end",color:"danger",state:{visible:{default:function(e,n){return t(n)},onValue:function(e,n){return t(n)}}},onClick:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onVoidProgram();case 2:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{name:"Update state",slot:"end",state:{visible:{default:function(e,n){return t(n)},onValue:function(e,n){return t(n)}}},onClick:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onUpdateState();case 2:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{name:"Enroll",color:"success",slot:"end",onClick:function(){e.fieldComponent="program_enrollment"}}]}}}}});const tc=I()(ec,[["render",Qi]]);var nc=tc;function rc(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.hisFormKey,fields:e.fields,activeField:e.fieldComponent,skipSummary:!0,onOnIndex:t[1]||(t[1]=function(t){return e.fieldComponent=""}),onOnFinish:e.onFinish},null,8,["fields","activeField","onOnFinish"])}n("00b4");var ac=n("5b71"),oc=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},data:function(){return{fieldComponent:"",labResult:{},hisFormKey:0,patient:{},fields:[],selectedTest:{},testOptions:[],testIndicators:[]}},watch:{$route:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.params,!r||!r.patient_id){n.next=7;break}return t.patient=r.patient_id,t.labResult=new ac["a"](t.patient),n.next=6,t.initData();case 6:t.fields=t.getFields();case 7:case"end":return n.stop()}}),n)})))()},deep:!0,immediate:!0}},methods:{onFinish:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=Object.values(t).filter((function(e){return"result_indicator"===e.tag&&e.measures})).map((function(e){return e.measures})),n.labResult.setTestID(n.selectedTest.value),n.labResult.setResultDate(t.result_date),e.next=6,n.labResult.createEncounter();case 6:return e.next=8,n.labResult.createLabResult(r);case 8:return n.testOptions=[],n.selectedTest={},n.testIndicators=[],e.next=13,n.initData();case 13:n.hisFormKey=Math.floor(5e3*Math.random()),Object(O["d"])("Lab result saved!"),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](0),Object(O["c"])(e.t0),console.error(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})))()},generateTestIndicatorsFields:function(){var e=this,t=[];return this.testIndicators.forEach((function(n){t=[].concat(Object(r["a"])(t),Object(r["a"])(e.buildTestIndicatorFields(n.indicatorId,n.indicatorName,n.specimen,n.testId)))})),t},validateVLresults:function(e,t,n){return Object(c["a"])(regeneratorRuntime.mark((function r(){var a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("HIV viral load"===e){r.next=2;break}return r.abrupt("return",!0);case 2:if(a=n.substring(0,1),o=n.substring(1,n.length),!fn["a"].isValidVLResult(t,a,o)){r.next=6;break}return r.abrupt("return",!0);case 6:return r.next=8,Object(O["a"])("Invalid results for ".concat(t," HIV viral load"),{cancelBtnLabel:"Process result",confirmBtnLabel:"Re-enter result"});case 8:return i=r.sent,r.abrupt("return",!i);case 10:case"end":return r.stop()}}),r)})))()},alphaValueIsValid:function(e){try{return!!e.match(/^(>|<|=)(.*)/)}catch(t){return!1}},numericValueIsValid:function(e){try{return!!e.match(/^(=|<|>)([0-9]*)$/m)}catch(t){return!1}},isMalariaResult:function(e){return!!e.match(/mrdt|malaria/i)},buildTestIndicatorFields:function(e,t,n,r){var a=this,o=function(e){return[a.selectedTest.value===r,!!Object(et["find"])(e.result_indicators,{label:t})].every(Boolean)},i=function(e){return a.validateVLresults(t,n,e.value.toString())},c=function(n,r){if("Other"===n.value&&t.match(/HIV viral load/i))return{};var o=a.isMalariaResult(t)?"text":r["type_".concat(e)].value,i=a.isMalariaResult(t)?"="+n.value:n.value.toString(),c=i.charAt(0),s="numeric"===o?parseInt(i.substring(1)):i.substring(1),u=r["result_indicators"].filter((function(t){return t.value===e}))[0];return{tag:"result_indicator",measures:{indicator:{concept_id:u.value},value:s,value_modifier:c,value_type:o},result:s,modifier:c,test:u.label}};return[{id:"type_".concat(e),helpText:"Result type (".concat(t,")"),type:Ln["b"].TT_SELECT,group:"test_indicator",condition:function(e){return o(e)&&!a.isMalariaResult(t)},appearInSummary:function(){return!1},validation:function(e){return Un["a"].required(e)},options:function(){return[{label:"Numeric (numbers only)",value:"numeric"},{label:"Alphanumeric(text and numbers)",value:"text"}]}},{id:"num_".concat(e),helpText:"Test Result (".concat(t,")"),type:Ln["b"].TT_TEXT,group:"test_indicator",computedValue:c,beforeNext:i,onValue:function(e){return!(e&&e.value&&!a.numericValueIsValid(e.value.toString()))||(Object(O["e"])("You must enter a modifer and numbers only. i.e =90 / >19 / < 750"),!1)},validation:function(e){return Un["a"].required(e)},condition:function(t){return o(t)&&"numeric"===t["type_".concat(e)].value},config:{customKeyboard:[[["1","2","3"],["4","5","6","=","<",">"],["7","8","9","."],["","0",""]],[["Delete"]]]}},{id:"alpha_".concat(e),helpText:"Test Result (".concat(t,")"),type:Ln["b"].TT_TEXT,group:"test_indicator",onValue:function(e){return!(e&&e.value&&!a.alphaValueIsValid(e.value.toString()))||(Object(O["e"])("You must enter a modifier plus result (for example =LDL)"),!1)},computedValue:c,validation:function(e){return Un["a"].required(e)},condition:function(n){return o(n)&&"text"===n["type_".concat(e)].value&&!t.match(/HIV viral load/i)}},{id:"VL_alpha_".concat(e),helpText:"Select Test Result (".concat(t,")"),type:Ln["b"].TT_SELECT,group:"test_indicator",computedValue:c,validation:function(e){return Un["a"].required(e)},condition:function(n){return o(n)&&"text"===n["type_".concat(e)].value&&t.match(/HIV viral load/i)},options:function(){return[{label:"Collect Another Sample",value:"=Collect Another Sample"},{label:"<LDL",value:"<LDL"},{label:"=LDL",value:"=LDL"},{value:"Other",label:"Other"}]}},{id:"other_VL_alpha_".concat(e),helpText:"Test Result (".concat(t,")"),type:Ln["b"].TT_TEXT,group:"test_indicator",onValue:function(e){return!(e&&e.value&&!a.alphaValueIsValid(e.value.toString()))||(Object(O["e"])("You must enter a modifier plus result (for example =LDL)"),!1)},computedValue:c,validation:function(e){return Un["a"].required(e)},condition:function(n){return o(n)&&"text"===n["type_".concat(e)].value&&t.match(/HIV viral load/i)&&"Other"===n["VL_alpha_".concat(e)].value}},{id:"malaria_result_".concat(e),helpText:"Select Test Result (".concat(t,")"),type:Ln["b"].TT_SELECT,group:"test_indicator",computedValue:c,validation:function(e){return Un["a"].required(e)},condition:function(e){return o(e)&&a.isMalariaResult(t)},options:function(){return t.match(/mrdt/i)?[{label:"Positive",value:"positive"},{label:"Negative",value:"negative"}]:[{label:"Parasites seen",value:"parasites seen"},{label:"No parasites seen",value:"no parasites seen"}]}}]},initData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.labResult.getTestsWithoutResults();case 2:n=t.sent,a=regeneratorRuntime.mark((function t(a){var o,i,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:o=n[a],i=regeneratorRuntime.mark((function t(n){var a,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=o.tests[n],Object(et["isEmpty"])(a.result)){t.next=3;break}return t.abrupt("return","continue");case 3:return e.labResult.setTestTypeID(a.concept_id),t.next=6,e.labResult.getTestIndicators();case 6:i=t.sent,c=i.map((function(e){return{testId:a.id,indicatorName:e.name,indicatorId:e.concept_id,specimen:o.specimen.name}})),e.testIndicators=[].concat(Object(r["a"])(e.testIndicators),Object(r["a"])(c)),e.testOptions.push({label:a.name,value:a.id,other:{accession:o.accession_number,specimen:o.specimen.name,test:a.name,orderDate:o.order_date,testIndicators:c}});case 10:case"end":return t.stop()}}),t)})),t.t0=regeneratorRuntime.keys(o.tests);case 3:if((t.t1=t.t0()).done){t.next=11;break}return c=t.t1.value,t.delegateYield(i(c),"t2",6);case 6:if(s=t.t2,"continue"!==s){t.next=9;break}return t.abrupt("continue",3);case 9:t.next=3;break;case 11:case"end":return t.stop()}}),t)})),t.t0=regeneratorRuntime.keys(n);case 5:if((t.t1=t.t0()).done){t.next=10;break}return o=t.t1.value,t.delegateYield(a(o),"t2",8);case 8:t.next=5;break;case 10:case"end":return t.stop()}}),t)})))()},getFields:function(){var e=this;return[{id:"test_type",helpText:"Tests without results",type:Ln["b"].TT_TABLE_VIEWER,options:function(){var t=e.testOptions.map((function(t){return[t.other.accession,t.other.specimen,t.other.test,Ne["b"].toStandardHisDisplayFormat(t.other.orderDate),{type:"button",name:"Select",action:function(){e.selectedTest=t,e.$nextTick((function(){return e.fieldComponent="year_result_date"}))}}]}));return[{label:"",value:"",other:{rows:t,columns:["Acession#","Specimen","Test","Order date"]}}]},validation:function(e){return Un["a"].required(e)},config:{overrideDefaultFooterBtns:{nextBtn:{name:"Finish",onClick:function(){return e.$router.back()}}},hiddenFooterBtns:["Clear","Cancel"]}}].concat(Object(r["a"])(Object(oa["b"])({id:"result_date",helpText:"Result",required:!0,estimation:{allowUnknown:!1},minDate:function(){return Ne["b"].toStandardHisFormat(e.selectedTest.other.orderDate)},maxDate:function(){return Ce["e"].getSessionDate()},computeValue:function(e){return e}})),[{id:"result_indicators",helpText:"Select test result indicators",type:Ln["b"].TT_MULTIPLE_SELECT,validation:function(e){return Un["a"].required(e)},options:function(){return e.selectedTest.other.testIndicators.map((function(e){return{label:e.indicatorName,value:e.indicatorId}}))}}],Object(r["a"])(this.generateTestIndicatorsFields()),[{id:"entry_confirmation",helpText:"Confirm entry",type:Ln["b"].TT_TABLE_VIEWER,options:function(e,t){var n=Object.values(t).filter((function(e){return"object"===Object(wo["a"])(e)&&null!=e&&"result_indicator"===e.tag})).map((function(e){return[e.test,e.modifier,e.result]}));return[{label:"",value:"",other:{rows:n,columns:["Test","Modifier","Result"]}}]}}])}}});const ic=I()(oc,[["render",rc]]);var cc=ic;function sc(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("his-standard-form");return Object(o["openBlock"])(),Object(o["createBlock"])(c,{key:e.formKey,fields:e.fields,skipSummary:!0,activeField:e.fieldComponent,onOnIndex:t[1]||(t[1]=function(t){return e.fieldComponent=""}),onFinishAction:e.onFinish},null,8,["fields","activeField","onFinishAction"])}n("1276");var uc=Object(o["defineComponent"])({components:{HisStandardForm:Hn["a"]},data:function(){return{formKey:0,fields:[],activity:"",presets:{},programs:{},userData:{},fieldComponent:"",isSessionPasswordChange:!1,activeField:"",form:{}}},watch:{$route:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(r=e.query,["edit","add"].includes(r.activity)?t.activity=r.activity:t.activity="add",!r.update_password){n.next=13;break}return n.t0=t,n.next=8,nn["a"].getCurrentUser();case 8:n.t1=n.sent,t.userData=n.t0.toUserData.call(n.t0,n.t1),t.isSessionPasswordChange=!0,t.activeField="new_password",t.fieldComponent=t.activeField;case 13:t.programs=nn["a"].getAvailableApps(),t.fields=t.getFields();case 15:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{onFinish:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:e.prev=0,e.t0=n.activity,e.next="add"===e.t0?4:"edit"===e.t0?8:12;break;case 4:return e.next=6,n.create(t);case 6:return n.activity="edit",e.abrupt("break",12);case 8:return e.next=10,n.update(t);case 10:return n.isSessionPasswordChange&&n.$router.push("/"),e.abrupt("break",12);case 12:n.formKey+=1,n.activeField="user_info",n.$nextTick((function(){return n.fieldComponent=n.activeField})),e.next=20;break;case 17:e.prev=17,e.t1=e["catch"](0),e.t1 instanceof Ce["d"]&&!Object(et["isEmpty"])(e.t1.errors)?Object(O["e"])(e.t1.errors):Object(O["c"])("".concat(e.t1));case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))()},create:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,nn["a"].createUser(e);case 2:if(r=n.sent,a=r.user,!a){n.next=6;break}return n.abrupt("return",t.userData=t.toUserData(a));case 6:throw"Unable to create new user, Possibly the user already exists or incorrect info was entered";case 7:case"end":return n.stop()}}),n)})))()},update:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,nn["a"].updateUser(t.userData.id,e);case 2:if(r=n.sent,!r){n.next=5;break}return n.abrupt("return",t.userData=t.toUserData(r));case 5:throw"Unable to update user, possibly server error or incorrect information entered";case 6:case"end":return n.stop()}}),n)})))()},getProgramName:function(e){var t=Object(et["find"])(this.programs,{programID:e});return t?t.applicationName:""},mapToOption:function(e){return e.map((function(e){return{label:e,value:e}}))},getRoles:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,nn["a"].getAllRoles();case 2:return t.abrupt("return",t.sent.filter((function(t){try{return!e.userData.role.split(",").includes(t.role)}catch(n){return!0}})).map((function(e){return{label:e.role,value:e.role,other:e}})));case 3:case"end":return t.stop()}}),t)})))()},toUserData:function(e){var t=e.person.names[0];return{id:e.user_id,given_name:t.given_name,family_name:t.family_name,username:e.username,role:e.roles.map((function(e){return e.role})),created:Ne["b"].toStandardHisDisplayFormat(e.date_created),status:e.deactivated_on?"Inactive":"Active",programs:e.programs.map((function(e){return e["program_id"]}))}},editConditionCheck:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return"edit"!==this.activity||e.includes(this.activeField)},toLcase:function(e){return e.value.toString().toLowerCase()},getFields:function(){var e=this;return[{id:"select_user",helpText:"Select Username",type:Ln["b"].TT_SELECT,condition:function(){return"edit"===e.activity&&nn["a"].isAdmin()},validation:function(e){return Un["a"].required(e)},unload:function(t){var n=t.other;return e.userData=e.toUserData(n)},options:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,nn["a"].getAllUsers();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{label:e.username,value:e.user_id,other:e}})));case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),config:{showKeyboard:!0}},{id:"user_info",helpText:"User information",type:Ln["b"].TT_TABLE_VIEWER,dynamicHelpText:function(){return"User: ".concat(e.userData.username," | Added On: ").concat(e.userData.created)},condition:function(){return"edit"===e.activity&&nn["a"].isAdmin()},options:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n,r,a){var o,i,s,u,l,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=3,i=["Attributes","Values","Actions"],s=function t(n){return{name:"Active"===n?"Deactivate":"Activate",type:"button",style:{width:"65%",fontWeight:"bold"},color:"Active"===n?"danger":"success",action:function(){var r=Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,"Active"!==n){r.next=6;break}return r.next=4,nn["a"].deactivateUser(e.userData.id);case 4:e.userData.status="Inactive",a.rows[o]=["Status","Inactive",t("Inactive")],Object(O["d"])("User has been deactivated",400);case 6:if("Inactive"!==n){r.next=11;break}return r.next=9,nn["a"].activateUser(e.userData.id);case 9:e.userData.status="Active",a.rows[o]=["Status","Active",t("Active")],Object(O["d"])("User has been activated",400);case 11:r.next=16;break;case 13:r.prev=13,r.t0=r["catch"](0),Object(O["e"])(r.t0);case 16:case"end":return r.stop()}}),r,null,[[0,13]])})));function i(){return r.apply(this,arguments)}return i}()}},u=function(t,n){return{name:t,type:"button",color:"light",style:{fontWeight:"bold",width:"65%"},action:function(){e.activeField=n,e.fieldComponent=e.activeField}}},l=[u("Add/Append Role","roles")],e.userData.role.length>1&&l.push(u("Remove Role","remove_roles")),d=[["<b>Name</b>","".concat(e.userData.given_name," ").concat(e.userData.family_name),u("Edit Name","given_name"),""],["<b>Password</b>","*******",u("Change password","new_password"),""],["<b>Role</b>",e.userData.role.join("<br/>")].concat(l),["<b>Status</b>",e.userData.status,s(e.userData.status),""],["<b>Programs</b>",e.userData.programs.map((function(t){return e.getProgramName(t)})).join("<br/>"),u("Edit Program","programs"),""]],t.abrupt("return",[{label:"",value:"",other:{columns:i,rows:d}}]);case 8:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}(),config:{hiddenFooterBtns:["Clear"],overrideDefaultFooterBtns:{nextBtn:{name:"Finish",onClick:function(){return e.$router.back()}}}}},{id:"given_name",helpText:"First name",type:Ln["b"].TT_TEXT,computedValue:function(e){return e.value},defaultValue:function(){return e.userData.given_name},condition:function(){return e.editConditionCheck(["given_name"])&&nn["a"].isAdmin()},validation:function(e){return Un["a"].isName(e)},options:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.given_name&&null!==n.given_name.value){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,Mn["a"].searchGivenName(n.given_name.value);case 4:return r=t.sent,t.abrupt("return",e.mapToOption(r));case 6:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"family_name",helpText:"Last name",type:Ln["b"].TT_TEXT,computedValue:function(e){return e.value},defaultValue:function(){return e.userData.family_name},validation:function(e){return Un["a"].isName(e)},condition:function(){return e.editConditionCheck(["given_name"])&&nn["a"].isAdmin()},options:function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.family_name&&null!==n.family_name.value){t.next=2;break}return t.abrupt("return",[]);case 2:return t.next=4,Mn["a"].searchFamilyName(n.family_name.value);case 4:return r=t.sent,t.abrupt("return",e.mapToOption(r));case 6:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"roles",helpText:"Role",type:Ln["b"].TT_SELECT,computedValue:function(e){return[e.value]},condition:function(){return e.editConditionCheck(["roles"])&&nn["a"].isAdmin()},validation:function(e){return Un["a"].required(e)},options:function(){return e.getRoles()},config:{showKeyboard:!0}},{id:"remove_roles",helpText:"Remove Roles",proxyID:"roles",type:Ln["b"].TT_SELECT,validation:function(e){return Un["a"].required(e)},condition:function(){return e.editConditionCheck(["remove_roles"])&&nn["a"].isAdmin()&&"edit"===e.activity},computedValue:function(t){return e.userData.role.filter((function(e){return e!=t.label}))},options:function(){return e.mapToOption(e.userData.role)},config:{showKeyboard:!0}},{id:"must_append_roles",helpText:"Would you like to append role?",type:Ln["b"].TT_SELECT,computedValue:function(e){return"Yes"===e.label},condition:function(){return"edit"===e.activity&&e.editConditionCheck(["roles"])&&nn["a"].isAdmin()},defaultComputedOutput:function(){return!1},validation:function(e){return Un["a"].required(e)},options:function(){return[{label:"Yes",value:"true"},{label:"No",value:"false"}]}},{id:"programs",helpText:"Select Apps",type:Ln["b"].TT_MULTIPLE_SELECT,condition:function(){return nn["a"].isAdmin()&&e.editConditionCheck(["programs"])},validation:function(e){return Un["a"].required(e)},computedValue:function(e){return e.map((function(e){return e.value}))},options:function(){return e.programs.map((function(t){var n=!1;return"edit"===e.activity&&(n=e.userData.programs.includes(t.programID)),{label:t.applicationName,value:t.programID,isChecked:n}}))}},{id:"username",helpText:"Username",type:Ln["b"].TT_TEXT,condition:function(){return e.editConditionCheck(["nothing to see here"])&&nn["a"].isAdmin()},computedValue:function(t){return e.toLcase(t)},validation:function(e){return Un["a"].validateSeries([function(){return Un["a"].required(e)},function(){return Un["a"].hasLengthRangeOf(e,4,15)}])},config:{casing:"lowercase"}},{id:"new_password",proxyID:"password",helpText:"New Password",type:Ln["b"].TT_TEXT,computedValue:function(t){return e.toLcase(t)},condition:function(){return e.editConditionCheck(["new_password"])},validation:function(e){return Un["a"].validateSeries([function(){return Un["a"].required(e)},function(){return Un["a"].hasLengthRangeOf(e,4,15)}])},config:{inputType:"password"}},{id:"verify_password",proxyID:"password",helpText:"Confirm Password",type:Ln["b"].TT_TEXT,computedValue:function(t){return e.toLcase(t)},condition:function(){return e.editConditionCheck(["new_password"])},validation:function(t,n){return Un["a"].validateSeries([function(){return Un["a"].required(t)},function(){if(e.toLcase(n.verify_password)!=e.toLcase(n.new_password))return["New password does not match current password"]}])},config:{inputType:"password"}}]}}});const lc=I()(uc,[["render",sc]]);var dc=lc,pc=Object(o["withScopeId"])("data-v-ef36ea1c");Object(o["pushScopeId"])("data-v-ef36ea1c");var bc=Object(o["createTextVNode"])("Merge Clients"),fc={class:"result-section"},mc={class:"result-section"},hc=Object(o["createTextVNode"])(" Cancel "),gc=Object(o["createTextVNode"])(" Merge ");Object(o["popScopeId"])();var vc=pc((function(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-toolbar"),u=Object(o["resolveComponent"])("ion-header"),l=Object(o["resolveComponent"])("ion-input"),d=Object(o["resolveComponent"])("ion-col"),p=Object(o["resolveComponent"])("ion-row"),b=Object(o["resolveComponent"])("patient-card"),f=Object(o["resolveComponent"])("view-port"),m=Object(o["resolveComponent"])("his-keyboard"),h=Object(o["resolveComponent"])("ion-content"),g=Object(o["resolveComponent"])("ion-button"),v=Object(o["resolveComponent"])("ion-footer"),O=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(O,null,{default:pc((function(){return[Object(o["createVNode"])(u,null,{default:pc((function(){return[Object(o["createVNode"])(s,null,{default:pc((function(){return[Object(o["createVNode"])(c,{class:"his-lg-text"},{default:pc((function(){return[bc]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(h,null,{default:pc((function(){return[Object(o["createVNode"])(f,null,{default:pc((function(){return[Object(o["createVNode"])(p,null,{default:pc((function(){return[Object(o["createVNode"])(d,null,{default:pc((function(){return[Object(o["createVNode"])(l,{onClick:t[1]||(t[1]=function(t){return e.inputFocus="inputA"}),placeholder:"Primary patient",class:["input_display",{"input-focused":"inputA"===e.inputFocus}],modelValue:e.inputA,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.inputA=t})},null,8,["modelValue","class"])]})),_:1}),Object(o["createVNode"])(d,null,{default:pc((function(){return[Object(o["createVNode"])(l,{onClick:t[3]||(t[3]=function(t){return e.inputFocus="inputB"}),class:["input_display",{"input-focused":"inputB"===e.inputFocus}],placeholder:"Secondary patient",modelValue:e.inputB,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.inputB=t})},null,8,["modelValue","class"])]})),_:1})]})),_:1}),Object(o["createVNode"])(p,null,{default:pc((function(){return[Object(o["createVNode"])(d,null,{default:pc((function(){return[Object(o["createVNode"])("div",fc,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.inputASearchResults,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(b,{onClick:function(n){return e.onPrimaryPatient(t)},key:n,patient:t,isActive:e.activeInputACard.index===n},null,8,["onClick","patient","isActive"])})),128))])]})),_:1}),Object(o["createVNode"])(d,null,{default:pc((function(){return[Object(o["createVNode"])("div",mc,[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.inputBSearchResults,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(b,{onClick:function(n){return e.onSecondaryPatient(t)},key:n,patient:t,isActive:t.isChecked},null,8,["onClick","patient","isActive"])})),128))])]})),_:1})]})),_:1})]})),_:1}),e.inputFocus?(Object(o["openBlock"])(),Object(o["createBlock"])(m,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):Object(o["createCommentVNode"])("",!0)]})),_:1}),Object(o["createVNode"])(v,null,{default:pc((function(){return[Object(o["createVNode"])(s,{color:"dark"},{default:pc((function(){return[Object(o["createVNode"])(g,{color:"danger",size:"large","router-link":"/"},{default:pc((function(){return[hc]})),_:1}),e.canMerge?(Object(o["openBlock"])(),Object(o["createBlock"])(g,{key:0,disabled:e.isSubmitting,color:"success",size:"large",slot:"end",onClick:e.onMerge},{default:pc((function(){return[gc]})),_:1},8,["disabled","onClick"])):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})})),Oc=n("3835"),jc=n("0a79"),_c=n("2345"),wc=n("b111"),kc=Object(o["defineComponent"])({components:{PatientCard:wc["a"],IonPage:V["F"],IonInput:V["v"],IonButton:V["d"],IonContent:V["n"],IonRow:V["J"],IonCol:V["m"],IonFooter:V["o"],IonHeader:V["q"],ViewPort:jc["a"],HisKeyboard:Sn["a"],IonTitle:V["U"]},data:function(){return{inputA:"",inputB:"",isSubmitting:!1,inputFocus:"inputA",inputASearchResults:[],inputBSearchResults:[],activeInputACard:{},keyboard:[_["c"],[["","Hide"],["Space","Delete"],["inputA","inputB"],["Search","Clear"]]]}},computed:{canMerge:function(){return!Object(et["isEmpty"])(this.activeInputACard)&&!Object(et["isEmpty"])(this.inputBSearchResults.filter((function(e){return e.isChecked})))}},methods:{onMerge:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(O["a"])("Are you sure you want to merge selected Persons?");case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:return t.prev=4,e.isSubmitting=!0,t.next=8,an["a"].mergePatients({primary:{patient_id:e.activeInputACard.id,doc_id:e.activeInputACard.docID},secondary:e.inputBSearchResults.filter((function(e){return e.isChecked})).map((function(e){return{patient_id:e.id,doc_id:e.docID}}))});case 8:return n=t.sent,t.next=11,new ln["a"](n["patient_id"]).printNidLbl();case 11:return e.inputBSearchResults=e.inputBSearchResults.filter((function(e){return!e.isChecked})),t.next=14,ia["a"].getNextTaskParams(n["patient_id"]);case 14:r=t.sent,e.$router.push(r.name?r:"/patient/dashboard/".concat(n["patient_id"])),t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](4),Object(O["c"])("".concat(t.t0));case 21:e.isSubmitting=!1;case 22:case"end":return t.stop()}}),t,null,[[4,18]])})))()},onPrimaryPatient:function(e){var t=this;this.inputBSearchResults.forEach((function(n){n.id===e.id&&(t.inputBSearchResults[n.index].isChecked=!1)})),this.activeInputACard=e},onSecondaryPatient:function(e){if(e.isChecked)return this.inputBSearchResults[e.index].isChecked=!1;Object(et["isEmpty"])(this.activeInputACard)||e.id==this.activeInputACard.id||(this.inputBSearchResults[e.index].isChecked=!0)},searchPatient:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.split(" "),r=Object(Oc["a"])(n,2),a=r[0],o=r[1],t.next=3,an["a"].search({given_name:a,family_name:o});case 3:return i=t.sent,t.abrupt("return",i.map((function(e,t){var n=new an["a"](e);return{index:t,id:n.getID(),name:n.getFullName(),docID:n.getDocID(),birthdate:n.getBirthdate(),arvNum:n.getArvNumber(),npid:n.getNationalID(),gender:n.getGender(),homeDistrict:n.getHomeDistrict(),homeVillage:n.getHomeVillage(),currentDistrict:n.getCurrentDistrict(),currentVillage:n.getCurrentVillage(),isChecked:!1}})));case 5:case"end":return t.stop()}}),t)})))()},keypress:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.inputFocus){n.next=2;break}return n.abrupt("return");case 2:if(r=Object(_c["a"])(e,t[t.inputFocus]),!r.match(/hide/i)){n.next=7;break}t.inputFocus="",n.next=23;break;case 7:if(!r.match(/search/i)){n.next=22;break}if(r=r.replace("Search",""),"inputA"!==t.inputFocus){n.next=16;break}return n.next=12,t.searchPatient(r);case 12:t.inputASearchResults=n.sent,t.activeInputACard={},n.next=19;break;case 16:return n.next=18,t.searchPatient(r);case 18:t.inputBSearchResults=n.sent;case 19:t.inputFocus="",n.next=23;break;case 22:r.match(/inputA/i)?t.inputFocus="inputA":r.match(/inputB/i)?t.inputFocus="inputB":r.match(/clear/i)?(t[t.inputFocus]="","inputA"===t.inputFocus?t.inputASearchResults=[]:t.inputBSearchResults=[]):t[t.inputFocus]=r;case 23:case"end":return n.stop()}}),n)})))()}}});n("aabe");const yc=I()(kc,[["render",vc],["__scopeId","data-v-ef36ea1c"]]);var xc=yc,Nc=Object(o["createVNode"])("br",null,null,-1),Cc=Object(o["createTextVNode"])(" Current District: "),Vc=Object(o["createTextVNode"])(" Home Village: "),Dc=Object(o["createTextVNode"])(" Re-Assign "),Tc=Object(o["createTextVNode"])(" Update Missing Data "),Ic=Object(o["createTextVNode"])(" Cancel "),Rc=Object(o["createTextVNode"])(" Clear ");function Sc(e,t,n,r,a,i){var c=Object(o["resolveComponent"])("ion-title"),s=Object(o["resolveComponent"])("ion-toolbar"),u=Object(o["resolveComponent"])("ion-header"),l=Object(o["resolveComponent"])("ion-checkbox"),d=Object(o["resolveComponent"])("ion-label"),p=Object(o["resolveComponent"])("ion-button"),b=Object(o["resolveComponent"])("ion-item"),f=Object(o["resolveComponent"])("ion-list"),m=Object(o["resolveComponent"])("ion-content"),h=Object(o["resolveComponent"])("ion-footer"),g=Object(o["resolveComponent"])("ion-page");return Object(o["openBlock"])(),Object(o["createBlock"])(g,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(c,{class:"his-lg-text"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,null,{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.items,(function(t,n){return Object(o["openBlock"])(),Object(o["createBlock"])(b,{class:"his-md-text",key:n},{default:Object(o["withCtx"])((function(){return[e.ddeEnabled?(Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:0,slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e}},null,8,["modelValue","onUpdate:modelValue"])):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])(d,{color:t.isComplete?"":"danger"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t.name)+" ("+Object(o["toDisplayString"])(t.gender)+") "+Object(o["toDisplayString"])(t.birthdate)+" ",1),Nc,Cc,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(t.curDistrict||"Unknown"),1),Vc,Object(o["createVNode"])("b",null,Object(o["toDisplayString"])(t.homeVillage||"Unknown"),1)]})),_:2},1032,["color"]),Object(o["createVNode"])(p,{size:"medium",onClick:function(){return e.reassignIdentifier(t)}},{default:Object(o["withCtx"])((function(){return[Dc]})),_:1},8,["onClick"]),t.isComplete?Object(o["createCommentVNode"])("",!0):(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:1,size:"medium",color:"warning","router-link":"/patient/registration?edit_person=".concat(t.patientID)},{default:Object(o["withCtx"])((function(){return[Tc]})),_:2},1032,["router-link"]))]})),_:2},1024)})),128))]})),_:1})]})),_:1}),Object(o["createVNode"])(h,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{color:"dark"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{"router-link":"/",color:"danger",slot:"start",size:"large"},{default:Object(o["withCtx"])((function(){return[Ic]})),_:1}),e.itemsChecked.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:0,onClick:e.clear,color:"warning",slot:"end",size:"large"},{default:Object(o["withCtx"])((function(){return[Rc]})),_:1},8,["onClick"])):Object(o["createCommentVNode"])("",!0),e.itemsChecked.length>1?(Object(o["openBlock"])(),Object(o["createBlock"])(p,{key:1,onClick:t[1]||(t[1]=function(t){return e.onAction(e.mergeSelected,"merge")}),color:"primary",size:"large",slot:"end"},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(" Merge ("+Object(o["toDisplayString"])(e.itemsChecked.length)+") ",1)]})),_:1})):Object(o["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})}var Pc=Object(o["defineComponent"])({components:{IonPage:V["F"],IonCheckbox:V["k"],IonButton:V["d"],IonList:V["y"],IonItem:V["w"],IonToolbar:V["V"],IonHeader:V["q"],IonTitle:V["U"],IonContent:V["n"],IonFooter:V["o"]},data:function(){return{dde:{},ddeEnabled:!1,items:[],title:"",npid:""}},watch:{$route:{handler:function(e){var t=e.params;t&&(this.npid=t.npid,this.title="Duplicates for NPID (".concat(this.npid,")"),this.init(this.npid))},deep:!0,immediate:!0}},computed:{itemsChecked:function(){return this.items.filter((function(e){return e.isChecked}))}},methods:{onAction:function(e){var t=arguments;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>1&&void 0!==t[1]?t[1]:"proceed",n.next=3,Object(O["a"])("\n                Are you sure you want to ".concat(r,"?\n            "));case 3:if(a=n.sent,!a){n.next=14;break}return n.prev=5,n.next=8,e();case 8:n.next=14;break;case 10:n.prev=10,n.t0=n["catch"](5),Object(O["e"])("".concat(n.t0)),console.error(n.t0);case 14:case"end":return n.stop()}}),n,null,[[5,10]])})))()},mergeSelected:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.itemsChecked.every((function(e){return e.isComplete}))){t.next=2;break}return t.abrupt("return",Object(O["e"])("One or more patients have missing data. Please update them before merging.",5e3));case 2:return t.next=4,e.dde.postMerge(e.itemsChecked);case 4:if(!t.sent){t.next=8;break}return t.next=7,e.dde.printNpid(e.dde.patientID);case 7:Object(tn["b"])(e.dde.patientID,e.$router);case 8:case"end":return t.stop()}}),t)})))()},reassignIdentifier:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.isComplete||!t.ddeEnabled){n.next=7;break}return n.next=3,Object(O["a"])("Do you want to update missing information?",{header:"Incomplete Demographics"});case 3:r=n.sent,r&&(a="edit_person=".concat(e.patientID),a+="&dde_reassign=true",a+="&doc_id=".concat(e.docID),t.$router.push("/patient/registration?".concat(a))),n.next=8;break;case 7:t.onAction(Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.ddeEnabled){n.next=8;break}return n.next=3,t.dde.reassignNpid(e.docID,e.patientID);case 3:if(!n.sent){n.next=6;break}return n.next=6,t.dde.printNpid(e.patientID);case 6:n.next=11;break;case 8:if("function"!==typeof e.assignLocalNpidAndPrint){n.next=11;break}return n.next=11,e.assignLocalNpidAndPrint();case 11:Object(tn["b"])(e.patientID,t.$router);case 12:case"end":return n.stop()}}),n)}))),"Reassign");case 8:case"end":return n.stop()}}),n)})))()},buildItems:function(e){return e.map((function(e){try{var t=new an["a"](e);return{isChecked:!1,patientID:t.getID(),name:t.getFullName(),gender:t.getGender(),birthdate:Ne["b"].toStandardHisDisplayFormat(t.getBirthdate()),curDistrict:t.getCurrentDistrict(),homeVillage:t.getHomeVillage(),docID:t.getPatientIdentifier(27),isComplete:t.patientIsComplete(),assignLocalNpidAndPrint:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.assignNpid();case 2:return e.next=4,t.printNationalID();case 4:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()}}catch(n){Object(O["c"])("An error has occured while building data"),console.error(n)}return{isChecked:!1,patientID:"N/A",name:"N/A",gender:"N/A",birthdate:"N/A",curDistrict:"N/A",homeVillage:"N/A",docID:"N/A",isComplete:!1}}))},clear:function(){this.items=this.items.map((function(e){return e.isChecked=!1,e}))},init:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var a,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.dde=new pn["a"],n.next=4,t.dde.loadDDEStatus();case 4:if(t.ddeEnabled=t.dde.isEnabled(),!t.ddeEnabled){n.next=14;break}return n.next=8,t.dde.findNpid(e);case 8:a=n.sent,o=a.locals,i=a.remotes,t.items=[].concat(Object(r["a"])(t.buildItems(o)),Object(r["a"])(t.buildItems(i))),n.next=18;break;case 14:return n.next=16,an["a"].findByNpid(e);case 16:c=n.sent,c&&(t.items=t.buildItems(c));case 18:n.next=23;break;case 20:n.prev=20,n.t0=n["catch"](0),Object(O["c"])("".concat(n.t0),5e3);case 23:case"end":return n.stop()}}),n,null,[[0,20]])})))()}}});const Ac=I()(Pc,[["render",Sc]]);var Ec=Ac,Bc=n("8642"),Fc=Object(o["defineComponent"])({name:"Scanner",data:function(){return{app:{},patientID:"",firstname:"",surname:"",gender:"",birthday:"",district:"",clientID:"",nationalID:"",patient:{},malawiNationalID:[],displayModal:!1}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.scanBarcodeQRcode();case 1:case"end":return t.stop()}}),t)})))()},methods:{scanBarcodeQRcode:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Bc["a"].scan().then(function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(n){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(n.text.length>30)){t.next=15;break}return t.next=3,$e["b"].malawiNationalIDScannerEnabled();case 3:if(t.sent){t.next=8;break}Object(O["e"])("Scanning of Malawi National ID is disabled"),e.goHome(),t.next=13;break;case 8:return e.filterNationalID(n),t.next=11,an["a"].findByOtherID(28,e.clientID);case 11:r=t.sent,0==r.length?e.searchPatientByNameGender():(Object(O["d"])("Patient found"),a="person_id=".concat(r[0].patient_id),e.$router.push("/patients/confirm?".concat(a)));case 13:t.next=19;break;case 15:return t.next=17,an["a"].findByNpid(n.text);case 17:o=t.sent,0==o.length?(Object(O["e"])("Patient not found"),e.goHome()):e.filterPatientData(o);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){Object(O["e"])("Fails to scan"),e.goHome()}));case 2:case"end":return t.stop()}}),t)})))()},filterPatientData:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,an["a"].findByID(e[0].patient_id);case 2:if(r=n.sent,r){n.next=5;break}return n.abrupt("return");case 5:t.patient=new an["a"](r),t.firstname=t.patient.getGivenName(),t.surname=t.patient.getFamilyName(),t.gender=t.patient.getGender(),t.birthday=t.patient.getBirthdate(),t.clientID=t.patient.getMalawiNationalID();case 11:case"end":return n.stop()}}),n)})))()},goHome:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$router.push("/home");case 1:case"end":return t.stop()}}),t)})))()},filterNationalID:function(e){this.malawiNationalID=e.text.split("<"),this.malawiNationalID=this.malawiNationalID.at(-1).split("~"),this.clientID=this.malawiNationalID[2],this.surname=this.capitaliseFirstLetter(this.malawiNationalID[1].toLowerCase()),this.firstname=this.capitaliseFirstLetter(this.malawiNationalID[3].split(",")[0].toLowerCase()),this.gender=this.malawiNationalID[5],this.birthday=this.malawiNationalID[6]},searchPatientByNameGender:function(){this.$router.push({path:"/patient/registration",query:{given_name:this.firstname,family_name:this.surname,gender:this.gender,birthdate:this.birthday,malawiNationalID:this.clientID,nationalIDStatus:"true"}})},capitaliseFirstLetter:function(e){return e.replace(/(^\w|\s\w)/g,(function(e){return e.toUpperCase()}))}}});const Lc=Fc;var Mc=Lc,Hc=function(){var e=[];return Ci["a"].forEach((function(t){t.appRoutes&&(e=[].concat(Object(r["a"])(e),Object(r["a"])(t.appRoutes)))})),e}(),Uc=[].concat(Object(r["a"])(Hc),[{path:"/",redirect:"/home"},{path:"/npid/duplicates/:npid",name:"NPID Duplicates",component:Ec},{path:"/home",name:"Home",component:pt},{name:"Merge rollback",path:"/merge/rollback/:id",component:function(){return n.e("chunk-a279802a").then(n.bind(null,"8eed"))}},{name:"View Duplicates",path:"/view_duplicates",component:function(){return n.e("chunk-d0b1508a").then(n.bind(null,"7bdc"))}},{path:"/example/desktop",name:"Desktop Example",component:function(){return n.e("chunk-77c891d8").then(n.bind(null,"a01a"))}},{name:"Update site location",path:"/location/update/site",component:function(){return n.e("chunk-2d0a4d35").then(n.bind(null,"07a9"))}},{name:"Update site code",path:"/location/update/code",component:function(){return n.e("chunk-2d0b347d").then(n.bind(null,"2867"))}},{path:"/login",name:"Login",component:Q},{path:"/search_patient",name:"Search Patient",component:zn},{path:"/session/date",name:"Session Date",component:Ii},{path:"/users/usage",name:"User system usage",component:Bi},{path:"/print/location",name:"Print Location",component:qi},{path:"/select_hc_location",name:"HC Location",component:Bn},{path:"/search_client",name:"Search client",component:ra},{path:"/patient/dashboard/:id",name:"Patient Dashboard",component:wi},{path:"/patient/registration",name:"Patient Registration",component:da},{path:"/guardian/registration/:patient_id",name:"Guardian Registration",component:ga},{path:"/example",name:"Example",component:Ma},{path:"/patient/search_results",name:"Patient Search results",component:Pa},{path:"/patients/search/id",name:"ID Search",component:Ya},{path:"/patients/confirm",name:"Patient confirmation",component:Nn},{path:"/patients/merge",name:"Patient Merging",component:xc},{path:"/patient/programs/:patient_id",name:"Program(s)",component:nc},{path:"/preferences",name:"Preferences",component:Ni},{path:"/user",name:"User",component:dc},{path:"/settings/host",name:"API host settings",component:Xi},{name:"DT API host settings",path:"/settings/network_settings",component:function(){return n.e("chunk-20b92bb4").then(n.bind(null,"269e"))}},{path:"/lab/results/:patient_id",name:"Lab Results",component:cc},{path:"/portal/config",name:"Portal settings",component:Wi},{path:"/camera_scanner",name:"Camera scanner",component:Mc}]),qc=Object(a["a"])({history:Object(a["b"])("/"),routes:Uc});qc.beforeEach((function(e,t,n){V["ab"].getTop().then((function(e){return e?V["ab"].dismiss():null})),V["cb"].getTop().then((function(e){return e?V["cb"].dismiss():null})),V["Y"].getTop().then((function(e){return e?V["Y"].dismiss():null})),V["eb"].getTop().then((function(e){return e?V["eb"].dismiss():null})),V["db"].getTop().then((function(e){return e?V["db"].dismiss():null}));var r=["/login","/settings/host","/settings/network_settings"];sessionStorage.getItem("apiKey")||r.includes(e.path)||n("/login"),n()}));var Gc=t["a"]=qc},b111:function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-154d9c56");Object(r["pushScopeId"])("data-v-154d9c56");var o=Object(r["createTextVNode"])(" NPID : "),i=Object(r["createTextVNode"])(" Arv# : "),c=Object(r["createTextVNode"])(" Name : "),s=Object(r["createTextVNode"])(" Birth date : "),u=Object(r["createTextVNode"])(" Gender : "),l=Object(r["createTextVNode"])(" Home District : "),d=Object(r["createTextVNode"])(" Home Village : "),p=Object(r["createTextVNode"])(" Current District : "),b=Object(r["createTextVNode"])(" Current Village : ");Object(r["popScopeId"])();var f=a((function(e,t,n,a,f,m){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:["his-card clickable",e.stateClass]},[Object(r["createVNode"])("li",null,[Object(r["createVNode"])("ul",null,[o,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.npid),1)]),Object(r["createVNode"])("ul",null,[i,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.arvNum),1)]),Object(r["createVNode"])("ul",null,[c,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.name),1)]),Object(r["createVNode"])("ul",null,[s,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.birthdate),1)]),Object(r["createVNode"])("ul",null,[u,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.gender),1)]),Object(r["createVNode"])("ul",null,[l,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.homeDistrict),1)]),Object(r["createVNode"])("ul",null,[d,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.homeVillage),1)]),Object(r["createVNode"])("ul",null,[p,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.currentDistrict),1)]),Object(r["createVNode"])("ul",null,[b,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.currentVillage),1)])])],2)})),m=Object(r["defineComponent"])({props:{patient:{type:Object,required:!0},isActive:{type:Boolean}},computed:{stateClass:function(){return{"active-card-color":this.isActive,"inactive-card-color":!this.isActive}}}}),h=(n("6967"),n("6b0d")),g=n.n(h);const v=g()(m,[["render",f],["__scopeId","data-v-154d9c56"]]);t["a"]=v},b2c0:function(e,t,n){},b308:function(e,t,n){"use strict";n("b2c0")},b31c:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r,a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=(n("99af"),n("e9c4"),n("d3b7"),n("b64b"),n("2ef0")),u=n("5969");(function(e){e["MOH_CACHE"]="mohCache"})(r||(r={}));var l=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.regenerate=!1,e}return Object(o["a"])(n,[{key:"cohortUrl",value:function(){return"programs/".concat(this.programID,"/reports/cohort")}},{key:"setRegenerate",value:function(e){this.regenerate=e}},{key:"getCohortDrillDown",value:function(e){return u["a"].getJson("cohort_report_drill_down",{id:e,date:this.date,program_id:this.programID})}},{key:"requestCohort",value:function(e){return u["a"].ajxGet(this.cohortUrl(),e)}},{key:"qaurterRequestParams",value:function(){return{name:this.quarter,regenerate:this.regenerate}}},{key:"datePeriodRequestParams",value:function(){return{name:"Cohort-".concat(this.startDate,"-").concat(this.endDate),start_date:this.startDate,end_date:this.endDate,regenerate:this.regenerate}}},{key:"getCachedCohortValues",value:function(){var e=sessionStorage.getItem(r.MOH_CACHE);if(e){var t=JSON.parse(e);if(t.start_date===this.startDate&&t.end_date===this.endDate||t.quarter===this.quarter)return t.data}}},{key:"cacheCohort",value:function(e){sessionStorage.setItem(r.MOH_CACHE,JSON.stringify({start_date:this.startDate,end_date:this.endDate,quarter:this.quarter,data:e}))}},{key:"validateIndicators",value:function(e,t){var n=this.getCachedCohortValues();if(n){var r=Object.keys(e).reduce((function(t,r){var a=Object(s["find"])(n,{name:r}),o=e[r],i=a?a.contents:null,c=o.param,u=o.check(parseInt(i),c);return u&&t.push(o.error(i,c)),t}),[]);return t(r)}return-1}}]),n}(u["a"])},b446:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return C}));var r,a=n("2909"),o=n("3835"),i=n("5530"),c=n("1da1"),s=(n("96cf"),n("99af"),n("caad"),n("a15b"),n("d3b7"),n("25f0"),n("ac1f"),n("466d"),n("1276"),n("d95e")),u=[{label:"Jan",value:1},{label:"Feb",value:2},{label:"Mar",value:3},{label:"Apr",value:4},{label:"May",value:5},{label:"Jun",value:6},{label:"Jul",value:7},{label:"Aug",value:8},{label:"Sep",value:9},{label:"Oct",value:10},{label:"Nov",value:11},{label:"Dec",value:12}],l=n("9283"),d=n("2706"),p=n("3800"),b=n("6be2"),f=n("5a0c"),m=n.n(f),h=n("1c74");function g(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=[];return n&&r.push("UNKNOWN"),{id:e,helpText:"".concat(t," Year"),appearInSummary:function(){return!1},type:s["b"].TT_TEXT,config:{customKeyboard:[p["i"],[r,["DELETE"]]]}}}function v(e,t){return{id:e,helpText:"".concat(t," Month"),appearInSummary:function(){return!1},type:s["b"].TT_SELECT,options:function(){return u}}}function O(e,t){return{id:e,helpText:"".concat(t," Day"),type:s["b"].TT_MONTHLY_DAYS,appearInSummary:function(){return!1}}}function j(e,t){return{id:e,helpText:"".concat(t," Estimated period"),type:s["b"].TT_SELECT,appearInSummary:function(){return!1},options:function(){return[{label:"6 months ago",value:180},{label:"12 months ago",value:365},{label:"18 months ago",value:540},{label:"24 months ago",value:730},{label:"Over 2 years ago",value:730}]}}}function _(e,t){return{id:e,helpText:"".concat(t," Age Estimate"),type:s["b"].TT_NUMBER,appearInSummary:function(){return!1},config:{keypad:b["e"]}}}function w(e){return parseInt(e)<10?"0".concat(e):e}function k(e,t,n){return y.apply(this,arguments)}function y(){return y=Object(c["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,i,c,s,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.defaultValue){e.next=12;break}return e.next=3,n.defaultValue(t);case 3:if(a=e.sent,!a){e.next=12;break}i=a.split("-"),c=Object(o["a"])(i,3),s=c[0],u=c[1],l=c[2],e.t0=r,e.next="Year"===e.t0?9:"Month"===e.t0?10:"Day"===e.t0?11:12;break;case 9:return e.abrupt("return",s||"");case 10:return e.abrupt("return",parseInt(u)||"");case 11:return e.abrupt("return",parseInt(l)||"");case 12:return e.abrupt("return","");case 13:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function x(e){return l["b"].toStandardHisDisplayFormat(e)}function N(e,t,n,r){if(t.minDate){var a=t.minDate(n,r);if(new Date(e)<new Date(a))return["".concat(x(e)," is less than minimum date of ").concat(x(a))]}if(t.maxDate){var o=t.maxDate(n,r);if(o&&new Date(e)>new Date(o))return["".concat(x(e)," is greater than max date of  ").concat(x(o))]}}function C(e){var t="",n="",c="",s="",p="year_".concat(e.id),b="month_".concat(e.id),f="day_".concat(e.id),y="age_estimate_".concat(e.id),C="duration_estimate_".concat(e.id),V=g(p,e.helpText,e.estimation.allowUnknown),D=v(b,e.helpText),T=O(f,e.helpText),I=_(y,e.helpText),R=j(C,e.helpText),S="boolean"===typeof e.estimation.allowUnknownMonthDay&&e.estimation.allowUnknownMonthDay,P=function(t){return!(t[p]&&t[p].value&&["Unknown"].includes(t[p].value))&&(!e.condition||e.condition(t))},A=function(e,t){var r=[{type:"year",value:n,default:"YYYY"},{type:"month",value:c,default:"MM"},{type:"day",value:s,default:"DD"}];return r.reduce((function(n,r){var a=[null,void 0,"Unknown",""];return t===r.type?a.includes(e)?n.push(r.default):n.push(e):a.includes(r.value)?n.push(r.default):n.push(r.value),n}),[]).join("-")};V.updateHelpTextOnValue=function(e){return"".concat(V.helpText," (").concat(A(null===e||void 0===e?void 0:e.label,"year"),")")},V.proxyID=e.id,V.unload=function(e){return n=e.value.toString()},V.config=Object(i["a"])(Object(i["a"])({},V.config),e.config),V.defaultValue=function(t){return k(t,e,"Year")},V.condition=function(t){return!e.condition||e.condition(t)},V.validation=function(t,n,r){if(e.required&&d["a"].required(t))return["Year cannot be empty"];var a=t?t.value:"";if(!e.estimation.allowUnknown&&a.toString().match(/unknown/i))return["Value unknown is not permitted"];if(a&&!["Unknown"].includes(a)&&isNaN(a)||a<1900)return["Invalid Year"];if(a&&"function"===typeof e.minDate){var o=l["b"].getYear(e.minDate(n,r));if(parseInt(a)<o)return["Year of ".concat(a," is less than Minimum year of ").concat(o)]}if(a&&"function"===typeof e.maxDate){var i=e.maxDate(n,r);if(i&&a>l["b"].getYear(i))return["Year of ".concat(a," exceeds Maximum year of ").concat(l["b"].getYear(i))]}return null},V.summaryMapValue=function(){return{label:e.summaryLabel||e.helpText,value:t?x(t):"Unknown"}},V.appearInSummary=function(t,n){return n===e.id},V.computedValue=function(n){if(t){var r=t.split("-"),a=Object(o["a"])(r,3),i=(a[0],a[1]),c=a[2];return t="".concat(n.value,"-").concat(i,"-").concat(c),e.computeValue(t,!1)}if(n&&"Unknown"===n.value)return t="",e.computeValue("Unknown",!1)},D.updateHelpTextOnValue=function(e){return"".concat(D.helpText," (").concat(A(null===e||void 0===e?void 0:e.label,"month"),")")},D.proxyID=e.id,D.unload=function(e){return c=w(e.value.toString())},D.condition=function(e){return P(e)},D.validation=function(e){return d["a"].required(e)},D.defaultValue=function(t){return k(t,e,"Month")},S&&(D.options=function(){return[].concat(Object(a["a"])(u),[{label:"Unknown",value:"Unknown"}])}),D.computedValue=function(n,r){if("".concat(n.value).match(/unknown/i))return t="".concat(r[p].value,"-07-15"),e.computeValue(t,!0);if(t){var a=t.split("-"),i=Object(o["a"])(a,3),c=i[0],s=(i[1],i[2]),u=w("".concat(n.value));return t="".concat(c,"-").concat(u,"-").concat(s),e.computeValue(t,!1)}},T.proxyID=e.id,T.updateHelpTextOnValue=function(e){return"".concat(T.helpText," (").concat(A(null===e||void 0===e?void 0:e.label,"day"),")")},T.condition=function(e){return!"".concat(e[b].value).match(/unknown/i)&&P(e)},T.validation=function(n,r,a){return d["a"].required(n)?["Day is required for date"]:N(t,e,r,a)},T.defaultValue=function(t){return k(t,e,"Day")},T.computedValue=function(r){var a=!!"".concat(r.value).match(/unknown/i);return s=a?"15":w("".concat(r.value)),t="".concat(n,"-").concat(c,"-").concat(s),e.computeValue(t,a)},T.unload=function(t,n,r,a){e.unload&&e.unload(t,n,r,a)},T.beforeNext=function(n,r){return!e.beforeNext||e.beforeNext(t,r)},T.config={year:function(e){return e[p].value},month:function(e){return e[b].value}},S||(T.config.keyboardActions=[]);var E=function(t,n){var r=["Unknown"===t[p].value,!e.condition||e.condition(t),e.estimation.estimationFieldType===n];return r.every(Boolean)};return I.proxyID=e.id,I.validation=function(n,r,a){if(n&&n.value>300)return["Age estimate is too high and exceeding hard limit of 300"];if(isNaN(parseInt(n.value.toString())))return["Please enter a valid number"];var o=/^(12[0-7]|1[01][0-9]|[1-9]?[0-9])$/;return n.value.toString().match(o)?N(t,e,r,a):["Not a valid age estimate"]},I.condition=function(e){return E(e,r.AGE_ESTIMATE_FIELD)},I.computedValue=function(n){var r=m()(h["e"].getSessionDate()).subtract(n.value,"years").year();return t="".concat(r,"-07-15"),e.computeValue(t,!0)},I.beforeNext=function(n,r){return!e.beforeNext||e.beforeNext(t,r)},R.proxyID=e.id,R.validation=function(n,r,a){return d["a"].required(n)?["Please select an estimate"]:N(t,e,r,a)},R.condition=function(e){return E(e,r.MONTH_ESTIMATE_FIELD)},R.computedValue=function(n){return t=m()(h["e"].getSessionDate()).subtract(n.value,"day").format(l["a"]),e.computeValue(t,!0)},R.beforeNext=function(n,r){return!e.beforeNext||e.beforeNext(t,r)},[V,D,T,I,R]}(function(e){e["AGE_ESTIMATE_FIELD"]="age-estimate-field",e["MONTH_ESTIMATE_FIELD"]="month-period-estimate-field"})(r||(r={}))},b46d:function(e,t,n){},b515:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=(n("ac1f"),n("466d"),n("99af"),n("d81d"),n("d3b7"),n("159b"),n("1276"),n("4de4"),n("b0c0"),n("cc6f")),s=n("2ef0"),u=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(e,a){return Object(r["a"])(this,n),t.call(this,e,6,a)}return Object(a["a"])(n,[{key:"isNotEmptyandNumber",value:function(e){return"".concat(e.value).match(/^-?\d+\.?\d*$/)?null:["Invalid entry for ".concat(e.label)]}},{key:"isNotEmptyandFloat",value:function(e){var t;return"".concat(e.value).match(/^\d{1,3}\.\d{1,5}$/)?null:["Invalid entry for ".concat(e.label,". Don't forget to add a decimal. e.g. 56.2 ").concat((null===(t=e.other)||void 0===t?void 0:t.modifier)||"")]}},{key:"checkMinMax",value:function(e,t,n){var r,a,o=[];parseFloat("".concat(e.value))<t&&o.push(["".concat(e.label," entered is less than minimum ").concat(t," ").concat((null===e||void 0===e||null===(r=e.other)||void 0===r?void 0:r.modifier)||"")]);parseFloat("".concat(e.value))>n&&o.push(["".concat(e.label," entered is greater than maximum ").concat(n," ").concat((null===e||void 0===e||null===(a=e.other)||void 0===a?void 0:a.modifier)||"")]);return o.length>0?o:null}},{key:"validateAll",value:function(e){var t=this,n=[];return e.map((function(e){var r=t.validator(e);return Object(s["isArray"])(r)?n.push(r):null})),n.length>0?n:null}},{key:"mergeErrors",value:function(e){var t=[];return e.forEach((function(e){Object(s["isArray"])(e)&&t.push(e)})),t.length>0?t:null}},{key:"isValidBPReading",value:function(e){var t=[],n="".concat(e.value).match(/^\d{1,3}\/\d{1,3}$/g)?null:["Invalid BP reading"];if(t.push(n),null==n){var r="".concat(e.value).split("/"),a={label:"Systolic",value:r[0]},o={label:"Diastolic",value:r[1]};t.push(this.checkMinMax(o,30,200)),t.push(this.checkMinMax(a,40,250))}return this.mergeErrors(t)}},{key:"validator",value:function(e){var t=this,n=[{name:"Weight",validator:function(e){var n=t.isNotEmptyandFloat(e),r=t.checkMinMax(e,2,250);return t.mergeErrors([n,r])}},{name:"Height",validator:function(e){var n=[];return n.push(t.isNotEmptyandNumber(e)),n.push(t.checkMinMax(e,40,220)),t.mergeErrors(n)}},{name:"BP",validator:function(e){return t.isValidBPReading(e)}},{name:"Temp",validator:function(e){var n=t.isNotEmptyandNumber(e),r=t.checkMinMax(e,30,42);return t.mergeErrors([n,r])}},{name:"SP02",validator:function(e){var n=t.checkMinMax(e,40,100);return t.mergeErrors([n])}},{name:"Pulse",validator:function(e){var n=t.checkMinMax(e,50,120);return t.mergeErrors([n])}}],r=n.filter((function(t){return t.name===e.label}));return r.length>0?r[0].validator(e):null}}]),n}(c["a"])},b53b:function(e,t,n){"use strict";n("3c35")},b5e4:function(e,t,n){"use strict";n.d(t,"e",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return w}));var r=n("1da1"),a=(n("96cf"),n("8a30")),o=n("7a23"),i={class:"vertically-align ion-padding-horizontal"};function c(e,t,n,r,a,c){var s=Object(o["resolveComponent"])("action-header"),u=Object(o["resolveComponent"])("ion-content"),l=Object(o["resolveComponent"])("action-footer");return Object(o["openBlock"])(),Object(o["createBlock"])(o["Fragment"],null,[Object(o["withDirectives"])(Object(o["createVNode"])(s,{title:e.title,subtitle:e.subtitle,color:e.color},null,8,["title","subtitle","color"]),[[o["vShow"],e.title||e.subtitle]]),Object(o["createVNode"])(u,{style:{"text-align":"center"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("h2",i,Object(o["toDisplayString"])(e.body),1)]})),_:1}),Object(o["createVNode"])(l,{buttons:e.actionButtons},null,8,["buttons"])],64)}var s=n("8efc"),u=Object(o["defineComponent"])({mixins:[s["a"]],props:{body:{type:String,require:!0}}}),l=n("6b0d"),d=n.n(l);const p=d()(u,[["render",c]]);var b=p;function f(e){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"primary",r=i.length>2&&void 0!==i[2]?i[2]:2e3,e.next=4,a["eb"].create({message:t,position:"top",animated:!0,duration:r,color:n,cssClass:"his-md-text",keyboardClose:!0,buttons:[{side:"end",icon:"close",role:"cancel"}]});case 4:return o=e.sent,e.abrupt("return",o.present());case 6:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return f(e,"warning",t)}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return f(e,"success",t)}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;return f(e,"danger",t)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return a["cb"].create({component:b,backdropDismiss:!1,cssClass:"small-modal custom-modal-backdrop",componentProps:{subtitle:t,body:e,actionButtons:n}})}function j(e){return _.apply(this,arguments)}function _(){return _=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,i,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,O(t,n.header||"Confirmation",[{name:n.cancelBtnLabel||"No",size:"large",slot:"start",color:"danger",visible:!0,role:"Cancel",onClick:function(e){var t=e.role;return a["cb"].dismiss(t)}},{name:n.confirmBtnLabel||"Yes",size:"large",slot:"end",color:"success",visible:!0,role:"Confirm",onClick:function(e){var t=e.role;return a["cb"].dismiss(t)}}]);case 3:return r=e.sent,r.present(),e.next=7,r.onDidDismiss();case 7:return o=e.sent,i=o.data,e.abrupt("return","Confirm"===i);case 10:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function w(e){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"Information",e.next=3,O(t,n,[{name:"OK",size:"large",slot:"end",color:"success",visible:!0,role:"Confirm",onClick:function(){return a["cb"].dismiss()}}]);case 3:r=e.sent,r.present();case 5:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}},b625:function(e,t,n){},b681:function(e,t,n){},b6f2:function(e,t,n){},b744:function(e,t,n){"use strict";n("bfda")},b77b:function(e,t,n){"use strict";n("7cf4")},b85a:function(e,t,n){},b89f:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n("b85c"),a=n("1da1"),o=n("d4ec"),i=n("bee2"),c=n("262e"),s=n("2caf"),u=(n("a15b"),n("4de4"),n("d3b7"),n("99af"),n("96cf"),n("1c74")),l=n("156d"),d=n("2ed9"),p=n("b5e4"),b=n("0ba8"),f=function(e){Object(c["a"])(n,e);var t=Object(s["a"])(n);function n(){return Object(o["a"])(this,n),t.call(this)}return Object(i["a"])(n,[{key:"execPrint",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["e"].getText(t);case 2:if(n=e.sent,n){e.next=5;break}throw"Unable to print Label. Try again later";case 5:return e.next=7,l["b"].expandPath(t);case 7:document.location=e.sent;case 8:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"batchPrintLbls",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var a,o,i,c,s,u,l,f=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=!(f.length>1&&void 0!==f[1])||f[1],o=Object(d["a"])(),i=o.platformType,"desktop"!==i.value){e.next=36;break}c=[],a&&b["b"].emit(b["a"].SHOW_MODAL,"zebra-modal"),s=Object(r["a"])(t),e.prev=6,s.s();case 8:if((u=s.n()).done){e.next=20;break}return l=u.value,e.prev=10,e.next=13,this.execPrint(l);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](10),c.push(e.t0);case 18:e.next=8;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e["catch"](6),s.e(e.t1);case 25:return e.prev=25,s.f(),e.finish(25);case 28:if(!a){e.next=31;break}return e.next=31,n.delay(2e3);case 31:if(!(c.length>0)){e.next=34;break}return e.next=34,Object(p["e"])(c.filter((function(e,t,n){return n.indexOf(e)===t})).join(),3e3);case 34:e.next=37;break;case 36:Object(p["e"])("Sorry, your Platform does not support Label printing. Bye!");case 37:case"end":return e.stop()}}),e,this,[[6,22,25,28],[10,15]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"printLbl",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=!(o.length>1&&void 0!==o[1])||o[1],r=Object(d["a"])(),a=r.platformType,"desktop"!==a.value){e.next=14;break}return e.prev=3,n&&b["b"].emit(b["a"].SHOW_MODAL,"zebra-modal"),e.next=7,this.execPrint(t);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),Object(p["e"])(e.t0,3e3);case 12:e.next=15;break;case 14:Object(p["e"])("Sorry, your Platform does not support Label printing. Bye!");case 15:case"end":return e.stop()}}),e,this,[[3,9]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"printLocation",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.printLbl("labels/location?location_id=".concat(t));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"printDrug",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.printLbl("drugs/".concat(t,"/barcode?quantity=").concat(n));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()}]),n}(u["e"])},b913:function(e,t,n){"use strict";n("a246")},b993:function(e,t,n){},ba82:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s}));n("d3b7"),n("a15b"),n("d81d"),n("99af"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861");var r=n("8baf"),a=n("0da4"),o=n.n(a);function i(e){return e.reduce((function(e,t){return e+t.map((function(e){return'"'.concat(e,'"')})).join(",")+"\n"}),"")}function c(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"document",r=i(e.concat(t)),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.setAttribute("id","csv"),o.href=window.URL.createObjectURL(a),o.setAttribute("download","".concat(n,".csv")),document.body.appendChild(o),o.click(),o.remove()}function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"document",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new r["default"],c=i.splitTextToSize(n,180),s=c.length<=1?20:10*c.length;i.text(c,14,10);var u={startY:s,head:[e[e.length-1]],body:t};a&&(u.tableWidth="wrap",u.horizontalPageBreak=!0,u.horizontalPageBreakRepeat=0),o()(i,u),i.save("".concat(n,".pdf"))}},bdc2:function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-64e6712a");Object(r["pushScopeId"])("data-v-64e6712a");var o=Object(r["createVNode"])("tr",{id:"version-row"},[Object(r["createVNode"])("td",{class:"numbers"}," "),Object(r["createVNode"])("td",{colspan:"4",id:"version"},"Version 28")],-1),i=Object(r["createVNode"])("td",{class:"numbers"},"1.",-1),c=Object(r["createVNode"])("td",{class:"row-title",style:{"border-right-style":"solid","border-bottom":"0px !important","font-weight":"bold"}},"Clinic name",-1),s={class:"row-title",colspan:"3",style:{"border-bottom-style":"solid"}},u=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",{class:"numbers"},"2."),Object(r["createVNode"])("td",{class:"row-title",style:{border:"0px !important"}},"Supervisors"),Object(r["createVNode"])("td",{class:"row-name",style:{"font-weight":"bold"}},"Name"),Object(r["createVNode"])("td",{colspan:"2",class:"signatures",style:{"font-weight":"bold"}},"Signature")],-1),l={class:"numbers"},d=Object(r["createVNode"])("td",{class:"row-title no-borders"}," ",-1),p=Object(r["createVNode"])("td",{class:"row-name name-left"}," ",-1),b=Object(r["createVNode"])("td",{colspan:"2",class:"signatures"}," ",-1),f=Object(r["createVNode"])("td",{class:"numbers"},"10.",-1),m=Object(r["createVNode"])("td",{class:"row-title",style:{"border-bottom-style":"solid","border-top-style":"none"}},"Quarter evaluated",-1),h={class:"row-name name-left",style:{"border-bottom-style":"solid"}},g=Object(r["createTextVNode"])("Year: "),v={colspan:"2",class:"signatures",style:{"border-bottom-style":"solid"}},O=Object(r["createTextVNode"])("Quarter: ");Object(r["popScopeId"])();var j=a((function(e,t,n,a,j,_){return Object(r["openBlock"])(),Object(r["createBlock"])("table",null,[o,Object(r["createVNode"])("tr",null,[i,c,Object(r["createVNode"])("td",s,Object(r["toDisplayString"])(n.clinicName),1)]),u,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.items,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:e},[Object(r["createVNode"])("td",l,Object(r["toDisplayString"])(e),1),d,p,b])})),128)),Object(r["createVNode"])("tr",null,[f,m,Object(r["createVNode"])("td",h,[g,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.quarterYr),1)]),Object(r["createVNode"])("td",v,[O,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.quarterStr),1)])])])})),_=n("3835"),w=(n("ac1f"),n("1276"),n("466d"),n("99af"),{props:{clinicName:{type:String,default:""},reportparams:{type:Object,required:!0}},data:function(){return{items:["3.","4.","5.","6.","7.","8.","9."],quarterStr:null,quarterYr:null}},methods:{renderQuarter:function(){if(this.reportparams){var e=this.reportparams.split(" "),t=Object(_["a"])(e,4),n=t[0],r=t[1],a=(t[2],t[3]);this.quarterStr=n,this.quarterYr=n.match(/custom/i)?"".concat(r," - ").concat(a):r}}},watch:{reportparams:{immediate:!0,handler:function(){this.renderQuarter()}}}}),k=(n("2414"),n("6b0d")),y=n.n(k);const x=y()(w,[["render",j],["__scopeId","data-v-64e6712a"]]);t["a"]=x},bdcb:function(e,t,n){"use strict";n("69c8")},beb6:function(e,t,n){},bef6:function(e,t,n){"use strict";var r=n("3835");n("4fad"),n("99af");function a(e){for(var t="",n=0,a=Object.entries(e);n<a.length;n++){var o=Object(r["a"])(a[n],2),i=o[0],c=o[1];t+="".concat(i,"=").concat(c,"&")}return t}t["a"]={parameterizeObjToString:a}},bfda:function(e,t,n){},c05f:function(e,t,n){"use strict";var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("base-input"),s=Object(r["resolveComponent"])("ion-radio"),u=Object(r["resolveComponent"])("ion-label"),l=Object(r["resolveComponent"])("ion-item"),d=Object(r["resolveComponent"])("ion-radio-group"),p=Object(r["resolveComponent"])("ion-list"),b=Object(r["resolveComponent"])("view-port"),f=Object(r["resolveComponent"])("his-keyboard");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{value:e.value,onOnValue:e.onKbValue},null,8,["value","onOnValue"]),Object(r["createVNode"])(p,{class:"view-port-content"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{modelValue:e.selectedTimeUnit,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedTimeUnit=t})},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.timeUnits,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(l,{class:"his-md-text",key:t},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{slot:"start",value:e},null,8,["value"]),Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(r["createVNode"])(f,{kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])],64)}n("99af");var o=n("36ad"),i=n("db10"),c=n("2345"),s=n("6be2"),u=n("0a79"),l=n("51c8"),d=n("8a30"),p=Object(r["defineComponent"])({components:{BaseInput:o["a"],HisKeyboard:i["a"],ViewPort:u["a"],IonItem:d["w"],IonList:d["y"],IonLabel:d["x"],IonRadio:d["G"],IonRadioGroup:d["H"]},mixins:[l["a"]],data:function(){return{value:"",selectedTimeUnit:"",timeUnits:["Hours","Days","Weeks","Months","Years"],keyboard:s["d"]}},activated:function(){this.$emit("onFieldActivated",this)},methods:{onKbValue:function(e){this.value=e},keypress:function(e){this.value=Object(c["a"])(e,this.value)},emitValue:function(e,t){if(e&&t){var n="".concat(e," ").concat(t);this.$emit("onValue",e?{label:n,value:n,other:{value:e,timeUnit:t}}:null)}else this.$emit("onValue",null)}},watch:{value:function(e){this.emitValue(e,this.selectedTimeUnit)},selectedTimeUnit:function(e){this.emitValue(this.value,e)},clear:function(){this.value="",this.selectedTimeUnit=""}}}),b=n("6b0d"),f=n.n(b);const m=f()(p,[["render",a]]);t["a"]=m},c144:function(e,t,n){},c187:function(e,t,n){},c18c:function(e,t,n){},c1e4:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("5530"),a=n("d4ec"),o=n("bee2"),i=n("45eb"),c=n("7e84"),s=n("262e"),u=n("2caf"),l=(n("4de4"),n("d3b7"),n("ac1f"),n("466d"),n("1c74")),d=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"getCurrentUser",value:function(){var e=l["e"].getUserID();if(e)return this.getUserByID(e)}},{key:"getUserByID",value:function(e){return this.getJson("users/".concat(e))}},{key:"createUser",value:function(e){return this.postJson("users",e)}},{key:"updateUser",value:function(e,t){return this.putJson("users/".concat(e),t)}},{key:"activateUser",value:function(e){return this.postJson("users/".concat(e,"/activate"),{})}},{key:"deactivateUser",value:function(e){return this.postJson("users/".concat(e,"/deactivate"),{})}},{key:"isAdmin",value:function(){var e=Object(i["a"])(Object(c["a"])(n),"getUserRoles",this).call(this).filter((function(e){return e.role.match(/Program Manager|Superuser|System Developer/i)}));return e.length>0}},{key:"isNurse",value:function(){var e=Object(i["a"])(Object(c["a"])(n),"getUserRoles",this).call(this).filter((function(e){return e.role.match(/Nurse/i)}));return e.length>0}},{key:"isDoctor",value:function(){var e=Object(i["a"])(Object(c["a"])(n),"getUserRoles",this).call(this).filter((function(e){return e.role.match(/Doctor/i)}));return e.length>0}},{key:"isClinician",value:function(){var e=Object(i["a"])(Object(c["a"])(n),"getUserRoles",this).call(this).filter((function(e){return e.role.match(/Clinician/i)}));return e.length>0}},{key:"getAllUsers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getJson("users",Object(r["a"])({page_size:100},e))}},{key:"getAllRoles",value:function(){return this.getJson("roles",{page_size:100})}},{key:"getUsers",value:function(){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"users",{role:"Provider"})}},{key:"getSystemUsageByUsers",value:function(e,t){return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"user_system_usage",{start_date:e,end_date:t,program_id:Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this),date:Object(i["a"])(Object(c["a"])(n),"getSessionDate",this).call(this)})}}]),n}(l["e"])},c21d:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n("caad"),n("d3b7"),n("4e82"),n("a4d3"),n("e01a");function r(e,t){var n=[],r=[-1,"",null,void 0];for(var a in t)if(a in e){var o=e[a];r.includes(o)?n.push(!1):n.push(t[a](o,e))}return n.every(Boolean)}function a(e){return e.sort((function(e,t){return e.priority<t.priority?-1:1}))}function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[];for(var c in t){var s=t[c],u=[s.target&&n&&s.target!=n,s.targetEvent&&o&&s.targetEvent!=o];u.some(Boolean)||r(e,s.conditions)&&(s.title=c,s.description&&(s.description.text=s.description.info(e)),i.push(s))}return a(i)}},c260:function(e,t,n){},c2f2:function(e,t,n){"use strict";n("4582")},c336:function(e,t,n){},c419:function(e,t,n){},c481:function(e,t,n){},c4e4:function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-16757c08");Object(r["pushScopeId"])("data-v-16757c08");var o=Object(r["createTextVNode"])("Lab orders"),i={class:"ion-margin-bottom"},c=Object(r["createVNode"])("div",{class:"his-md-text side-title"}," Select specimen ",-1),s=Object(r["createVNode"])("div",{class:"his-md-text side-title"}," Main test(s) reason ",-1),u={style:{background:"lightyellow",height:"34vh"}},l={class:"his-sm-text"},d=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"Test"),Object(r["createVNode"])("th",null,"Specimen"),Object(r["createVNode"])("th",null,"Reason"),Object(r["createVNode"])("th",null,"Action")])],-1),p=Object(r["createTextVNode"])("X"),b=Object(r["createTextVNode"])(" Place orders "),f=Object(r["createTextVNode"])(" Close ");Object(r["popScopeId"])();var m=a((function(e,t,n,m,h,g){var v=Object(r["resolveComponent"])("ion-title"),O=Object(r["resolveComponent"])("ion-toolbar"),j=Object(r["resolveComponent"])("ion-header"),_=Object(r["resolveComponent"])("ion-label"),w=Object(r["resolveComponent"])("ion-checkbox"),k=Object(r["resolveComponent"])("ion-item"),y=Object(r["resolveComponent"])("ion-list"),x=Object(r["resolveComponent"])("ion-col"),N=Object(r["resolveComponent"])("ion-radio"),C=Object(r["resolveComponent"])("ion-radio-group"),V=Object(r["resolveComponent"])("ion-button"),D=Object(r["resolveComponent"])("ion-row"),T=Object(r["resolveComponent"])("ion-grid"),I=Object(r["resolveComponent"])("ion-content"),R=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(j,null,{default:a((function(){return[Object(r["createVNode"])(O,null,{default:a((function(){return[Object(r["createVNode"])(v,{class:"his-lg-text"},{default:a((function(){return[o]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(I,{style:{overflow:"hidden",background:"grey",height:"70vh"}},{default:a((function(){return[Object(r["createVNode"])(T,null,{default:a((function(){return[Object(r["createVNode"])(D,null,{default:a((function(){return[Object(r["createVNode"])(x,{size:"6"},{default:a((function(){return[Object(r["createVNode"])(y,{style:{overflowY:"auto",height:"75vh"}},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.testTypes,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(k,{class:"his-sm-text",key:t,disabled:null!==e.activeIndex&&e.activeIndex!==n&&!e.isOrderComplete,detail:""},{default:a((function(){return[Object(r["createVNode"])(_,{"text-wrap":""},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.name),1)]})),_:2},1024),Object(r["createVNode"])(w,{modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e},slot:"start",onIonChange:function(r){return e.onSelectTest(t.name,n,r)}},null,8,["modelValue","onUpdate:modelValue","onIonChange"])]})),_:2},1032,["disabled"])})),128))]})),_:1})]})),_:1}),null!=e.activeIndex&&e.selectedOrders.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(x,{key:0,style:{overflowY:"auto",height:"79vh"}},{default:a((function(){return[Object(r["createVNode"])("div",i,[e.extendedLabsEnabled?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(y,{key:0},{default:a((function(){return[Object(r["createVNode"])(C,{modelValue:e.testTypes[e.activeIndex]["specimen"],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.testTypes[e.activeIndex]["specimen"]=t})},{default:a((function(){return[c,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.specimens,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])(k,{key:t},{default:a((function(){return[Object(r["createVNode"])(_,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.name),1)]})),_:2},1024),Object(r["createVNode"])(N,{slot:"start",value:t.name,onClick:function(n){return e.addSpecimen(t)}},null,8,["value","onClick"])]})),_:2},1024)})),128))]})),_:1},8,["modelValue"])]})),_:1})),Object(r["createVNode"])(C,{modelValue:e.testTypes[e.activeIndex]["reason"],"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.testTypes[e.activeIndex]["reason"]=t})},{default:a((function(){return[s,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.reasons,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(k,{class:"his-sm-text",key:e},{default:a((function(){return[Object(r["createVNode"])(_,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e),1)]})),_:2},1024),Object(r["createVNode"])(N,{slot:"start",value:e},null,8,["value"])]})),_:2},1024)})),128))]})),_:1},8,["modelValue"])]),Object(r["createVNode"])("div",u,[Object(r["createVNode"])("table",l,[d,Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.finalOrders,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.name),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.specimen||"N/A"),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.reason),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(V,{onClick:function(n){return e.removeOrder(t.currentIndex)},slot:"end",color:"danger"},{default:a((function(){return[p]})),_:1},8,["onClick"])])])})),128))])])])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(R,null,{default:a((function(){return[Object(r["createVNode"])(O,null,{default:a((function(){return[Object(r["createVNode"])(V,{onClick:e.postActivities,size:"large",slot:"end",disabled:0===e.finalOrders.length},{default:a((function(){return[b]})),_:1},8,["onClick","disabled"]),Object(r["createVNode"])(V,{onClick:t[3]||(t[3]=function(t){return e.closeModal([])}),size:"large",slot:"start",color:"danger"},{default:a((function(){return[f]})),_:1})]})),_:1})]})),_:1})],64)})),h=n("1da1"),g=n("2909"),v=(n("4de4"),n("d3b7"),n("4e82"),n("d81d"),n("caad"),n("2532"),n("159b"),n("96cf"),n("8a30")),O=n("b5e4"),j=n("9b7c"),_=n("0cb1"),w=n("b89f"),k=n("d1ca"),y=Object(r["defineComponent"])({name:"Modal",props:{activities:{type:Object,required:!0},testFilters:{type:Array},title:{type:String,default:""}},watch:{activities:{handler:function(e){e&&(this.appActivities=Object(g["a"])(e),this.getActivities())},immediate:!0}},created:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["b"].extendedLabEnabled();case 2:e.extendedLabsEnabled=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{onSelectTest:function(e,t,n){var r=this;return Object(h["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r.$nextTick(Object(h["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r.testTypes[t]["isChecked"]=n.target.checked,!r.testTypes[t]["isChecked"]){a.next=9;break}return a.next=4,j["a"].getSpecimens(e);case 4:r.specimens=a.sent,r.testTypes[t]["currentIndex"]=t,r.activeIndex=t,a.next=10;break;case 9:r.removeOrder(t);case 10:case"end":return a.stop()}}),a)}))));case 1:case"end":return a.stop()}}),a)})))()},getActivities:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j["a"].getTestTypes();case 2:n=t.sent,e.testTypes=n.map((function(e,t){return e.index="HIV viral load"===e.name?e.index=0:e.index=t+1,e})).sort((function(e,t){return e.index<t.index?0:1})).filter((function(t){return!Array.isArray(e.testFilters)||e.testFilters.includes(t.name)}));case 4:case"end":return t.stop()}}),t)})))()},removeOrder:function(e){this.testTypes[e]["isChecked"]=!1,this.testTypes[e]["reason"]=null,this.testTypes[e]["specimen"]=null,this.testTypes[e]["specimenConcept"]=null,this.activeIndex=null,this.specimens=[]},addSpecimen:function(e){this.testTypes[this.activeIndex]["specimenConcept"]=e.concept_id},postActivities:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="".concat(e.$route.params.patient_id),r=new _["a"](parseInt(n),-1),t.next=4,r.createEncounter();case 4:if(a=t.sent,!a){t.next=24;break}return t.next=8,j["a"].buildLabOrders(a,e.finalOrders);case 8:return o=t.sent,t.next=11,j["a"].saveOrdersArray(a.encounter_id,o);case 11:if(i=t.sent,i){t.next=14;break}return t.abrupt("return",Object(O["e"])("Unable to save lab orders"));case 14:return t.next=16,Object(O["a"])("Lab orders and encounter created!, print out your last orders?",{confirmBtnLabel:"Yes",cancelBtnLabel:"No"});case 16:if(c=t.sent,!c){t.next=22;break}return t.next=20,e.printOrders(i);case 20:t.next=24;break;case 22:return t.next=24,e.closeModal(i);case 24:case"end":return t.stop()}}),t)})))()},closeModal:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v["cb"].dismiss(e);case 2:case"end":return t.stop()}}),t)})))()},printOrders:function(e){return Object(h["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new w["a"],t.next=3,e.forEach(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r="lab/labels/order?order_id=".concat(t.order_id),e.next=3,n.printLbl(r);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:return t.next=5,v["cb"].dismiss(e);case 5:case"end":return t.stop()}}),t)})))()}},computed:{isOrderComplete:function(){return this.extendedLabsEnabled?!!this.testTypes[this.activeIndex]["reason"]:(this.testTypes[this.activeIndex]["specimenConcept"]||this.testTypes[this.activeIndex]["specimen"])&&this.testTypes[this.activeIndex]["reason"]},selectedOrders:function(){return this.testTypes.filter((function(e){return!0===e.isChecked}))},finalOrders:function(){var e=this;return this.selectedOrders.filter((function(t){return t.reason&&(t.specimen&&!e.extendedLabsEnabled||e.extendedLabsEnabled)}))}},mounted:function(){this.getActivities()},data:function(){return{content:"Content",extendedLabsEnabled:!1,appActivities:[],testTypes:[],specimens:[],reasons:["Routine","Targeted","Confirmatory","Stat","Repeat / Missing"],activeIndex:null}},components:{IonButton:v["d"],IonContent:v["n"],IonHeader:v["q"],IonTitle:v["U"],IonToolbar:v["V"],IonLabel:v["x"],IonList:v["y"],IonItem:v["w"],IonCheckbox:v["k"],IonRadioGroup:v["H"],IonRow:v["J"]}}),x=(n("cac9"),n("6b0d")),N=n.n(x);const C=N()(y,[["render",m],["__scopeId","data-v-16757c08"]]);t["a"]=C},c54c:function(e,t,n){},c617:function(e,t,n){},c8b2:function(e,t,n){},c924:function(e,t,n){"use strict";var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-button");return Object(r["openBlock"])(),Object(r["createBlock"])("table",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.layout,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("td",{class:"his-keyboard-margin",key:"btn-".concat(n)},[t?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,style:{width:e.btnSize},class:"his-keyboard-btn",onClick:function(){return e.keyPress(t)}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t),1)]})),_:2},1032,["style","onClick"])):Object(r["createCommentVNode"])("",!0)])})),128))])})),128))])}var o=n("8a30"),i=Object(r["defineComponent"])({components:{IonButton:o["d"]},props:{btnSize:{type:String,default:"90%"},layout:{type:Array,required:!0,default:function(){return[]}},onKeyPress:{type:Function,required:!0}},methods:{keyPress:function(e){this.onKeyPress(e)}}}),c=n("6b0d"),s=n.n(c);const u=s()(i,[["render",a]]);t["a"]=u},ca25:function(e,t,n){},ca96:function(e,t,n){"use strict";n("ca25")},cac9:function(e,t,n){"use strict";n("9df8")},cbbc:function(e,t,n){"use strict";n("d128")},cc6f:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("5530"),a=n("1da1"),o=n("d4ec"),i=n("bee2"),c=n("262e"),s=n("2caf"),u=(n("96cf"),n("7957")),l=n("ec2a"),d=n("8158"),p=function(e){Object(c["a"])(n,e);var t=Object(s["a"])(n);function n(e,r){var a,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return Object(o["a"])(this,n),a=t.call(this),a.encounterTypeID=r,a.patientID=e,a.encounterID=0,a.date=u["a"].getSessionDate(),a.providerID=i,a.programID=u["a"].getProgramID(),a}return Object(i["a"])(n,[{key:"getDate",value:function(){return this.date}},{key:"setDate",value:function(e){this.date=e}},{key:"setEncounterID",value:function(e){this.encounterID=e}},{key:"getEncounterID",value:function(){return this.encounterID}},{key:"getFirstValueCoded",value:function(e){return n.getFirstValueCoded(this.patientID,e,this.date)}},{key:"getFirstValueNumber",value:function(e){return n.getFirstValueNumber(this.patientID,e,this.date)}},{key:"buildObs",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=Object(r["a"])(Object(r["a"])({},n),{},{person_id:this.patientID,obs_datetime:this.date}),e.next=3,d["a"].getConceptID(t);case 3:if(a["concept_id"]=e.sent,!n.value_coded){e.next=8;break}return e.next=7,d["a"].getConceptID(n.value_coded);case 7:a["value_coded"]=e.sent;case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"buildValueText",value:function(e,t){return n.buildValueText(e,t,this.date)}},{key:"buildValueCoded",value:function(e,t){return n.buildValueCoded(e,t,this.date)}},{key:"buildGroupValueCoded",value:function(e,t,r){return n.buildGroupValueCoded(e,t,r)}},{key:"buildValueCodedFromConceptId",value:function(e,t){return n.buildValueCodedFromConceptId(e,t,this.date)}},{key:"buildValueNumber",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return n.buildValueNumber(e,t,r,a,this.date)}},{key:"buildValueDate",value:function(e,t){return n.buildValueDate(e,t,this.date)}},{key:"buildValueDateEstimated",value:function(e,t){return this.buildObs(e,{value_datetime:t,value_text:"Estimated"})}},{key:"saveObservationList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",u["a"].saveObsArray(this.encounterID,t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"saveValueTextObs",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].buildValueText(t,n);case 2:return r=e.sent,e.abrupt("return",this.saveObs(r));case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"saveValueCodedObs",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].buildValueCoded(t,n);case 2:return r=e.sent,e.abrupt("return",this.saveObs(r));case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"saveValueNumericObs",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:null,e.next=3,u["a"].buildValueNumber(t,n,r);case 3:return a=e.sent,e.abrupt("return",this.saveObs(a));case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"saveValueDatetimeObs",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].buildValueDate(t,n,u["a"].getSessionDate());case 2:return r=e.sent,e.abrupt("return",this.saveObs(r));case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"createEncounter",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={encounter_type_id:this.encounterTypeID,patient_id:this.patientID,encounter_datetime:this.date},-1!=this.providerID&&(t["provider_id"]=this.providerID),e.next=4,l["a"].create(t);case 4:if(n=e.sent,!n){e.next=8;break}return this.encounterID=n.encounter_id,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"saveObs",value:function(e){return n.saveObs(this.encounterID,e)}}]),n}(u["a"])},cc74:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,a=n("ad49");function o(){return a["a"].isProp("".concat(r.DDE_ENABLED,"=true"))}function i(){return a["a"].isProp("".concat(r.MALAWI_NATIONAL_ID_SCANNER_ENABLED,"=true"))}function c(){return a["a"].isProp("".concat(r.MILITARY_SITE,"=true"))}function s(){return a["a"].isProp("".concat(r.PORTAL_ENABLED,"=true"))}function u(){return a["a"].get(r.SITE_UUID)}function l(){return a["a"].get(r.SITE_PREFIX)}function d(){return a["a"].get(r.PORTAL_PROPERTIES)}function p(){return a["a"].get(r.HEALTH_CENTER_ID)}function b(e){return a["a"].set(r.HEALTH_CENTER_ID,e)}function f(){return a["a"].get(r.SITE_PREFIX)}function m(e){return a["a"].set(r.SITE_UUID,e)}function h(e){return a["a"].set(r.SITE_PREFIX,e)}function g(e){return a["a"].set(r.PORTAL_PROPERTIES,e)}function v(e){return a["a"].set(r.PORTAL_ENABLED,"".concat(e))}(function(e){e["MILITARY_SITE"]="military_site",e["HEALTH_CENTER_ID"]="current_health_center_id",e["SITE_PREFIX"]="site_prefix",e["SITE_UUID"]="site_uuid",e["PORTAL_ENABLED"]="portal.enabled",e["PORTAL_PROPERTIES"]="portal.properties",e["DDE_ENABLED"]="dde_enabled",e["MALAWI_NATIONAL_ID_SCANNER_ENABLED"]="malawi.nationalID.scanner.enabled"})(r||(r={})),t["b"]={setHealthCenterID:b,sitePrefix:l,siteUUID:u,portalProperties:d,ddeEnabled:o,militarySiteEnabled:c,healthCenterID:p,siteCode:f,portalEnabled:s,setSitePrefix:h,setPortalIP:g,setPortalEnabled:v,setSiteUUID:m,malawiNationalIDScannerEnabled:i}},cc8c:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=n("5969"),s=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(){var e;return Object(r["a"])(this,n),e=t.call(this),e.pepfar=!0,e}return Object(a["a"])(n,[{key:"setIsPepfar",value:function(e){this.pepfar=e}},{key:"getDefaulters",value:function(){return this.getReport("defaulter_list",{pepfar:this.pepfar})}}]),n}(c["a"])},cc99:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23");function a(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("modal-container"),s=Object(r["resolveComponent"])("full-screen-notice"),u=Object(r["resolveComponent"])("update-notification"),l=Object(r["resolveComponent"])("ion-router-outlet"),d=Object(r["resolveComponent"])("connection-error"),p=Object(r["resolveComponent"])("ion-app");return Object(r["openBlock"])(),Object(r["createBlock"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{onModalDismissed:t[1]||(t[1]=function(t){return e.activeModal=""}),modalName:e.activeModal},null,8,["modalName"]),e.checkFullScreen?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0})):Object(r["createCommentVNode"])("",!0),e.checkForUpdates?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(l,{key:e.$route.fullPath}),!e.apiOk&&e.notConfigPage?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:2})):Object(r["createCommentVNode"])("",!0)]})),_:1})}var o=n("1da1"),i=(n("96cf"),n("b0c0"),n("8a30")),c=n("156d"),s=n("0ba8"),u=n("b5e4"),l=n("6c02"),d=Object(r["withScopeId"])("data-v-18d79036");Object(r["pushScopeId"])("data-v-18d79036");var p={id:"api-error",class:"his-card"},b=Object(r["createVNode"])("p",null,[Object(r["createTextVNode"])(" Unable to connect to BHT-API. Please check: "),Object(r["createVNode"])("ul",{style:{listStyle:"none"}},[Object(r["createVNode"])("li",null," Check the HIS-Core configuration file "),Object(r["createVNode"])("li",null," Your configuration "),Object(r["createVNode"])("li",null," The service is running "),Object(r["createVNode"])("li",null," Your network cable is ok ")])],-1),f=Object(r["createTextVNode"])(" New Config "),m=Object(r["createTextVNode"])(" Refresh ");Object(r["popScopeId"])();var h=d((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-button");return Object(r["openBlock"])(),Object(r["createBlock"])("div",p,[b,Object(r["createVNode"])(c,{onClick:e.goToSettings,color:"warning"},{default:d((function(){return[f]})),_:1},8,["onClick"]),Object(r["createVNode"])(c,{onClick:e.refresh,color:"warning"},{default:d((function(){return[m]})),_:1},8,["onClick"])])})),g=Object(r["defineComponent"])({components:{IonButton:i["d"]},setup:function(){var e=Object(l["f"])(),t=function(){var t="false"!==sessionStorage.isPocSite?"/settings/host":"/settings/network_settings";e.push(t)},n=function(){return location.reload()};return{refresh:n,goToSettings:t}}}),v=(n("2777"),n("6b0d")),O=n.n(v);const j=O()(g,[["render",h],["__scopeId","data-v-18d79036"]]);var _=j,w=Object(r["withScopeId"])("data-v-502ec2d8");Object(r["pushScopeId"])("data-v-502ec2d8");var k={key:0,id:"update-notification"},y=Object(r["createVNode"])("br",null,null,-1),x=Object(r["createTextVNode"])(" New Updates and fixes are available "),N=Object(r["createVNode"])("br",null,null,-1),C=Object(r["createTextVNode"])(" Update Now!! ");Object(r["popScopeId"])();var V=w((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-button");return e.hasUpdate?(Object(r["openBlock"])(),Object(r["createBlock"])("div",k,[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.newVersion)+" ",1),y,x,N,Object(r["createVNode"])(c,{onClick:e.onVersionUpdate,color:"success",size:"large"},{default:w((function(){return[C]})),_:1},8,["onClick"])])):Object(r["createCommentVNode"])("",!0)})),D=(n("a9e3"),n("89b4")),T=Object(r["defineComponent"])({components:{IonButton:i["d"]},props:{checkInterval:{type:Number,default:3e4}},setup:function(e){var t=Object(r["ref"])(!1),n=Object(r["ref"])(""),a=new D["a"];function i(){a.setActiveVersion(n.value),location.reload()}return setInterval(Object(o["a"])(regeneratorRuntime.mark((function e(){var r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.value){e.next=6;break}return e.next=3,a.getHeadVersion();case 3:r=e.sent,o=a.getActiveCoreVersion(),"-"!=r&&r!=o&&(n.value=r,t.value=!0);case 6:case"end":return e.stop()}}),e)}))),e.checkInterval),{onVersionUpdate:i,newVersion:n,hasUpdate:t}}});n("65d1");const I=O()(T,[["render",V],["__scopeId","data-v-502ec2d8"]]);var R=I,S=(n("a5d8"),n("323e")),P=n.n(S),A=n("afbc"),E=Object(r["withScopeId"])("data-v-0bf18ee3");Object(r["pushScopeId"])("data-v-0bf18ee3");var B=Object(r["createTextVNode"])(" Confirmation "),F=Object(r["createVNode"])("h1",{class:"vertically-align"},"Do you want to enter fullscreen mode?",-1),L=Object(r["createTextVNode"])(" No "),M=Object(r["createTextVNode"])(" Yes ");Object(r["popScopeId"])();var H=E((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-title"),s=Object(r["resolveComponent"])("ion-toolbar"),u=Object(r["resolveComponent"])("ion-header"),l=Object(r["resolveComponent"])("ion-content"),d=Object(r["resolveComponent"])("ion-button"),p=Object(r["resolveComponent"])("ion-footer"),b=Object(r["resolveComponent"])("ion-page"),f=Object(r["resolveComponent"])("ion-modal");return Object(r["openBlock"])(),Object(r["createBlock"])(f,{"is-open":e.showFullscreenNotice,cssClass:"void-modal"},{default:E((function(){return[Object(r["createVNode"])(b,null,{default:E((function(){return[Object(r["createVNode"])(u,null,{default:E((function(){return[Object(r["createVNode"])(s,null,{default:E((function(){return[Object(r["createVNode"])(c,{class:"ion-text-center"},{default:E((function(){return[B]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(l,{class:"ion-padding ion-text-center"},{default:E((function(){return[F]})),_:1}),Object(r["createVNode"])(p,null,{default:E((function(){return[Object(r["createVNode"])(s,null,{default:E((function(){return[Object(r["createVNode"])(d,{slot:"start",onClick:e.closeModal,size:"large",color:"danger"},{default:E((function(){return[L]})),_:1},8,["onClick"]),Object(r["createVNode"])(d,{slot:"end",onClick:e.enterFullscreen,size:"large",color:"success"},{default:E((function(){return[M]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["is-open"])})),U=Object(r["defineComponent"])({components:{IonModal:i["D"],IonPage:i["F"],IonHeader:i["q"],IonTitle:i["U"],IonButton:i["d"],IonToolbar:i["V"],IonContent:i["n"],IonFooter:i["o"]},setup:function(){var e=Object(r["ref"])(!1);function t(){i["cb"].dismiss()}function n(){document.fullscreenElement||document.documentElement.requestFullscreen({navigationUI:"hide"}),e.value=!1}return document.addEventListener("fullscreenchange",(function(){e.value=!document.fullscreenElement})),{closeModal:t,enterFullscreen:n,showFullscreenNotice:e}}});n("a938");const q=O()(U,[["render",H],["__scopeId","data-v-0bf18ee3"]]);var G=q;function z(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-modal");return Object(r["openBlock"])(),Object(r["createBlock"])(c,{"is-open":e.modalIsOpen},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.activeModal),{onOnDismissModal:e.dismissModal},null,8,["onOnDismissModal"]))]})),_:1},8,["is-open"])}var Y=Object(r["withScopeId"])("data-v-4df5198c");Object(r["pushScopeId"])("data-v-4df5198c");var W=Object(r["createVNode"])("div",{class:"print-section ion-text-center"},[Object(r["createVNode"])("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000","enable-background":"new 0 0 1000 1000","xml:space":"preserve"},[Object(r["createVNode"])("metadata",null," Svg Vector Icons : http://www.onlinewebfonts.com/icon "),Object(r["createVNode"])("g",null,[Object(r["createVNode"])("g",{transform:"translate(0.000000,511.000000) scale(0.100000,-0.100000)"},[Object(r["createVNode"])("path",{d:"M2918.3,4119.3c-303-51.3-610.8-284.4-753-568.8c-102.6-212.1-125.9-359-125.9-822.9v-380h-533.8c-575.8,0-720.3-16.3-899.8-104.9c-237.8-116.6-454.6-410.3-491.9-669l-14-109.6l258.8-128.2l258.8-130.5H5000h4382.5l258.7,130.5l258.8,128.2l-14,109.6c-37.3,261.1-247.1,550.1-487.2,666.7c-184.2,90.9-324,107.2-904.5,107.2h-533.8v380c0,463.9-23.3,610.8-125.9,822.9c-142.2,286.7-435.9,508.2-757.6,568.8C6927.8,4147.2,3088.5,4147.2,2918.3,4119.3z M7158.6,3776.6c79.3-25.6,156.2-81.6,256.4-179.5c216.8-216.8,219.1-230.8,219.1-1102.6v-729.6H5000H2365.8v729.6c0,871.8,2.3,885.8,219.1,1102.6c233.1,230.8,51.3,214.5,2405.7,216.8C6850.9,3816.2,7053.7,3811.5,7158.6,3776.6z"}),Object(r["createVNode"])("path",{d:"M109.3-267.9l7-1382.3l74.6-153.8c90.9-184.2,258.7-349.7,445.2-435.9c130.5-60.6,146.9-62.9,692.3-74.6l559.5-11.7l14-338c11.7-275.1,23.3-361.3,65.3-466.2c163.2-401,484.9-671.4,909.1-757.6c146.9-32.6,452.2-35,2202.9-30.3c2030.4,7,2030.4,7,2184.3,58.3c363.7,123.5,643.4,396.3,773.9,752.9c37.3,95.6,51.3,209.8,60.6,454.6l14,326.4l559.5,11.7l561.8,11.7l153.9,76.9c191.2,93.2,366,277.4,442.9,466.2l53.6,132.9l7,1370.7l7,1370.7l-209.8-107.2l-212.1-104.9H5000H524.3l-212.1,104.9l-209.8,107.2L109.3-267.9z M1107,121.4c207.5-107.2,167.8-435.9-60.6-498.9c-104.9-28-186.5-7-263.4,69.9C701.4-225.9,678.1-121,720.1-20.8C785.4,137.7,955.5,200.7,1107,121.4z M7487.3-368.1c139.9-42,223.8-128.2,268.1-275.1c23.3-72.3,30.3-370.7,30.3-1181.9c0-1079.3,0-1084-53.6-1216.8c-76.9-188.8-251.8-373-442.9-466.2l-156.2-76.9H5000H2867l-156.2,76.9c-191.1,93.2-366,277.4-442.9,466.2c-53.6,130.6-53.6,149.2-60.6,1135.3c-7,1046.7,4.7,1244.8,88.6,1382.3c51.3,86.3,135.2,144.5,240.1,167.8c39.6,11.7,1144.6,18.7,2454.7,21C7053.7-333.2,7384.7-337.8,7487.3-368.1z M1125.7-766.7c65.3-44.3,121.2-151.5,121.2-230.8c0-79.3-55.9-186.5-121.2-230.8c-67.6-48.9-216.8-46.6-298.4,2.4c-172.5,100.2-167.8,368.3,4.7,466.2C906.6-720.1,1062.8-722.5,1125.7-766.7z"}),Object(r["createVNode"])("path",{d:"M3149.1-927.6c-60.6-62.9-67.6-130.5-18.7-195.8l44.3-60.6h1708.7h1708.7l44.3,60.6c48.9,65.3,42,132.9-18.7,195.8c-32.6,30.3-251.8,35-1734.4,35C3400.9-892.6,3181.7-897.3,3149.1-927.6z"}),Object(r["createVNode"])("path",{d:"M3149.1-1860c-60.6-62.9-67.6-130.5-18.7-195.8l44.3-60.6h1708.7h1708.7l44.3,60.6c48.9,65.3,42,132.9-18.7,195.8c-32.6,30.3-251.8,35-1734.4,35C3400.9-1825.1,3181.7-1829.7,3149.1-1860z"}),Object(r["createVNode"])("path",{d:"M3149.1-2792.5c-60.6-62.9-67.6-130.5-18.7-195.8l44.3-60.6h1708.7h1708.7l44.3,60.6c48.9,65.3,42,132.9-18.7,195.8c-32.6,30.3-251.8,35-1734.4,35C3400.9-2757.5,3181.7-2762.2,3149.1-2792.5z"})])])]),Object(r["createVNode"])("h1",null," Printing in progress "),Object(r["createVNode"])("h3",null," Please wait.... ")],-1);Object(r["popScopeId"])();var $=Y((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-content"),s=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(s,null,{default:Y((function(){return[Object(r["createVNode"])(c,null,{default:Y((function(){return[W]})),_:1})]})),_:1})})),K=n("8734"),J=Object(r["defineComponent"])({components:{IonPage:i["F"],IonContent:i["n"]},emits:["onDismissModal"],setup:function(e,t){var n=t.emit;Object(K["a"])(1500).then((function(){n("onDismissModal")}))}});n("8d25");const X=O()(J,[["render",$],["__scopeId","data-v-4df5198c"]]);var Q=X,Z=Object(r["defineComponent"])({components:{IonModal:i["D"],ZebraModal:Q},emits:["modalDismissed"],props:{modalName:{type:String}},setup:function(e,t){var n=t.emit,a=Object(r["ref"])(!1),o=Object(r["ref"])("");function i(){a.value=!1,n("modalDismissed")}return Object(r["watch"])(e,(function(e){var t=e.modalName;t?(o.value=t,a.value=!0):a.value=!1}),{deep:!0}),{dismissModal:i,modalIsOpen:a,activeModal:o}}});const ee=O()(Z,[["render",z]]);var te=ee,ne=Object(r["defineComponent"])({name:"App",components:{FullScreenNotice:G,ModalContainer:te,IonApp:i["a"],IonRouterOutlet:i["I"],ConnectionError:_,UpdateNotification:R},setup:function(){var e=Object(r["ref"])(!0),t=Object(l["e"])(),n=Object(r["ref"])(!0),a=Object(r["ref"])(null),d=Object(r["ref"])(!1),p=Object(r["ref"])(!0),b=new D["a"],f=Object(r["ref"])("");return b.initDateSync(36e5),"boolean"===typeof b.getAppConf("promptFullScreenDialog")&&(d.value=b.getAppConf("promptFullScreenDialog")),"boolean"===typeof b.getAppConf("showUpdateNotifications")&&(p.value=b.getAppConf("showUpdateNotifications")),P.a.configure({easing:"ease",speed:870,trickleSpeed:5}),Object(r["watch"])(t,(function(e){return n.value="API host settings"!=e.name}),{immediate:!0}),Object(r["watch"])(a,(function(t){e.value=!t})),s["b"].on(s["a"].SHOW_MODAL,(function(e){return f.value=e})),s["b"].on(c["a"].BEFORE_API_REQUEST,(function(){return P.a.start()})),s["b"].on(c["a"].AFTER_API_REQUEST,function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.value){e.next=7;break}return clearInterval(a.value),a.value=null,e.next=5,Object(u["a"])("Do you want to refresh the page?",{header:"API connection is back"});case 5:r=e.sent,r&&location.reload();case 7:n&&401===n.status&&"Login"!=t.name&&A["a"].push("/login"),P.a.done();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s["b"].on(c["a"].ON_API_CRASH,(function(){a.value||(i["ab"].dismiss(),a.value=setInterval((function(){"API host settings"!=t.name&&c["b"].healthCheck()}),2500),Object(u["e"])("Unable to reach api. You can fix the error below")),P.a.done()})),{apiOk:e,checkForUpdates:p,activeModal:f,notConfigPage:n,checkFullScreen:d}}});const re=O()(ne,[["render",a]]);var ae=re,oe=n("ae27"),ie=n.n(oe),ce=n("5a0c"),se=n.n(ce),ue=(n("4b63"),n("4041"),n("51ef"),n("a237"),n("e09e"),n("46e5"),n("98b6"),n("2d22"),n("66b0"),n("ce1f"),n("7fa1"),n("1eb2"),n("2fdd"),n("6460"),n("8c28"),Object(r["createApp"])(ae).use(i["W"]).use(A["a"]).use(ie.a));ue.config.globalProperties.$dayjs=se.a,A["a"].isReady().then((function(){ue.mount("#app")}))},cdb4:function(e,t,n){},cf71:function(e,t,n){},cfc5:function(e,t,n){"use strict";n("3a89")},cff5:function(e,t,n){"use strict";n("acb4")},d10e:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n("1da1"),a=n("5530"),o=n("d4ec"),i=n("bee2"),c=n("45eb"),s=n("7e84"),u=n("262e"),l=n("2caf"),d=(n("96cf"),n("1c74")),p=function(e){Object(u["a"])(n,e);var t=Object(l["a"])(n);function n(e){var r;return Object(o["a"])(this,n),r=t.call(this),r.person=e,r}return Object(i["a"])(n,[{key:"create",value:function(){return d["e"].postJson("/people",this.person)}},{key:"update",value:function(e){return d["e"].putJson("people/".concat(e),Object(a["a"])(Object(a["a"])({},this.person),{},{program_id:d["e"].getProgramID()}))}}],[{key:"searchFamilyName",value:function(e){return Object(c["a"])(Object(s["a"])(n),"getJson",this).call(this,"/search/family_name",{search_string:e})}},{key:"searchGivenName",value:function(e){return Object(c["a"])(Object(s["a"])(n),"getJson",this).call(this,"/search/given_name",{search_string:e})}},{key:"getPersonFullName",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])(Object(s["a"])(n),"getJson",this).call(this,"/people/".concat(t,"/names"));case 2:return r=e.sent,e.abrupt("return",r&&r.length?r[0].given_name+" "+r[0].family_name:"");case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(d["e"])},d11f:function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-0ecac256"),o=a((function(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("his-text-input"),u=Object(r["resolveComponent"])("ion-label"),l=Object(r["resolveComponent"])("ion-item"),d=Object(r["resolveComponent"])("ion-list"),p=Object(r["resolveComponent"])("view-port"),b=Object(r["resolveComponent"])("his-keyboard");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(p,{showFull:!e.showKeyboard},{default:a((function(){return[Object(r["createVNode"])(s,{readonly:!e.showKeyboard,value:e.selected,onOnValue:t[1]||(t[1]=function(t){return e.onKbValue(t,e.showKeyboard)})},null,8,["readonly","value"]),Object(r["createVNode"])(d,{class:"view-port-content"},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.filtered,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(l,{class:"his-md-text",button:"",color:t.label===e.selected?"lightblue":"",lines:t.isChecked?"none":"",key:n,disabled:!(!("disabled"in t)||!t.disabled),onClick:function(n){return e.onselect(t)}},{default:a((function(){return[Object(r["createVNode"])(u,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["color","lines","disabled","onClick"])})),128))]})),_:1})]})),_:1},8,["showFull"]),e.showKeyboard?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):Object(r["createCommentVNode"])("",!0)],64)})),i=n("1da1"),c=(n("4de4"),n("d3b7"),n("96cf"),n("82a9")),s=n("2ef0"),u=Object(r["defineComponent"])({name:"HisSelect",mixins:[c["a"]],data:function(){return{isInit:!1}},watch:{clear:function(){this.clearSelection()}},activated:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:if(e.listData=t.sent,e.isInit){t.next=7;break}return t.next=7,e.setDefaultValue();case 7:e.isInit=!0;case 8:case"end":return t.stop()}}),t)})))()},methods:{setDefaultValue:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.defaultValue){t.next=5;break}return t.next=3,e.defaultValue(e.fdata,e.cdata,e.selected);case 3:n=t.sent,n&&(r=Object(s["find"])(e.listData,{label:n})||Object(s["find"])(e.listData,{value:n}),r?e.onselect(r):(e.selected=n,e.filter=n));case 5:case"end":return t.stop()}}),t)})))()},onselect:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.selected=e.label,!t.onValue){n.next=8;break}return n.next=4,t.onValue(e,t);case 4:if(r=n.sent,r){n.next=8;break}return t.selected="",n.abrupt("return");case 8:t.$emit("onValue",e);case 9:case"end":return n.stop()}}),n)})))()}}}),l=(n("2d93"),n("6b0d")),d=n.n(l);const p=d()(u,[["render",o],["__scopeId","data-v-0ecac256"]]);t["a"]=p},d128:function(e,t,n){},d1ca:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r,a=n("3835"),o=n("1da1"),i=(n("96cf"),n("ac1f"),n("1276"),n("ad49"));function c(){return i["a"].get(r.TARGET_LAB)}function s(){return i["a"].isProp("".concat(r.CERVICAL_CANCER_SCREENING,"=true"))}function u(){return i["a"].isProp("".concat(r.VL_ROUTINE_CHECK,"=true"))}function l(){return i["a"].isProp("".concat(r.FAST_TRACK,"=true"))}function d(){return i["a"].isProp("".concat(r.THREE_HP_AUTO_SELECT,"=true"))}function p(){return i["a"].isProp("".concat(r.EXTENDED_LABS,"=true"))}function b(){return i["a"].isProp("".concat(r.FILING_NUMBERS,"=true"))}function f(){return i["a"].isProp("".concat(r.DRUG_MANAGEMENT,"=true"))}function m(){return i["a"].get(r.HTN_SYSTOLIC_THRESHOLD)}function h(){return i["a"].get(r.HTN_DIASTOLIC_THRESHOLD)}function g(){return i["a"].isProp("".concat(r.HTN_ENHANCEMENT,"=true"))}function v(){return i["a"].isProp("".concat(r.PILLS_REMAINING,"=true"))}function O(){return i["a"].get(r.APPOINTMENT_LIMIT)}function j(){return i["a"].get(r.HTN_SCREENING_AGE_THRESHOLD)}function _(){return w.apply(this,arguments)}function w(){return w=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,o,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i["a"].get(r.CERVICAL_CANCER_AGE_BOUNDS);case 2:if(t=e.sent,!t){e.next=6;break}return n=t.split(":"),o=Object(a["a"])(n,2),c=o[0],s=o[1],e.abrupt("return",{start:c,end:s});case 6:return e.abrupt("return",{start:-1,end:-1});case 7:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function k(){return i["a"].get(r.FILING_NUMBER_LIMIT)}function y(){return i["a"].get(r.FILING_NUMBER_PREFIX)}function x(){return i["a"].get(r.ADULT_CLINIC_DAYS)}function N(){return i["a"].get(r.PEADS_CLINIC_DAYS)}function C(){return i["a"].get(r.CLINIC_HOLIDAYS)}function V(e){return i["a"].set(r.HTN_SCREENING_AGE_THRESHOLD,e)}function D(e){return i["a"].set(r.APPOINTMENT_LIMIT,e)}function T(e){return i["a"].set(r.ADULT_CLINIC_DAYS,e)}function I(e){return i["a"].set(r.PEADS_CLINIC_DAYS,e)}function R(e){return i["a"].set(r.FILING_NUMBER_LIMIT,e)}(function(e){e["TARGET_LAB"]="target.lab",e["EXTENDED_LABS"]="extended_labs",e["VL_ROUTINE_CHECK"]="activate.vl.routine.check",e["PILLS_REMAINING"]="ask.pills.remaining.at.home",e["FILING_NUMBERS"]="use.filing.number",e["DRUG_MANAGEMENT"]="activate.drug.management",e["HTN_ENHANCEMENT"]="activate.htn.enhancement",e["FAST_TRACK"]="enable_fast_track",e["THREE_HP_AUTO_SELECT"]="activate_3hp_auto_select",e["APPOINTMENT_LIMIT"]="clinic.appointment.limit",e["HTN_SCREENING_AGE_THRESHOLD"]="htn.screening.age.threshold",e["HTN_SYSTOLIC_THRESHOLD"]="htn.systolic.threshold",e["HTN_DIASTOLIC_THRESHOLD"]="htn.diastolic.threshold",e["PEADS_CLINIC_DAYS"]="peads.clinic.days",e["ADULT_CLINIC_DAYS"]="clinic.days",e["FILING_NUMBER_LIMIT"]="filing.number.limit",e["FILING_NUMBER_PREFIX"]="filing.number.prefix",e["CERVICAL_CANCER_SCREENING"]="activate.cervical.cancer.screening",e["CERVICAL_CANCER_AGE_BOUNDS"]="cervical.cancer.screening.age.bounds",e["CLINIC_HOLIDAYS"]="clinic.holidays",e["EXCLUDE_EXTERNAL_AND_DRUG_REFILLS"]="can.remove.external.and.drug.refills.from.data.cleaning"})(r||(r={})),t["b"]={targetLab:c,cervicalCancerScreeningAgeBounds:_,systolicThreshold:m,diastolicThreshold:h,htnAgeThreshold:j,setHtnAgeThreshold:V,setFilingNumberLimit:R,setAppointmentLimit:D,filingNumberLimit:k,filingNumberPrefix:y,adultClinicDays:x,peadsClinicDays:N,setAdultClinicDays:T,setPeadsClinicDays:I,filingNumbersEnabled:b,drugManagementEnabled:f,htnEnabled:g,appointmentLimit:O,askPillsRemaining:v,extendedLabEnabled:p,threeHPAutoSelectEnabled:d,VLEnabled:u,fastTrackEnabled:l,cervicalCancerScreeningEnabled:s,clinicHolidays:C}},d246:function(e,t,n){"use strict";n("76ad")},d26c:function(e,t,n){},d403:function(e,t,n){},d42f:function(e,t,n){"use strict";n("1c3d")},d4e7:function(e,t,n){},d6aa:function(e,t,n){"use strict";var r=n("7a23"),a={class:"report-content"},o=Object(r["createTextVNode"])("Date Generated: "),i=Object(r["createTextVNode"])("API version: ");function c(e,t,n,c,s,u){var l=Object(r["resolveComponent"])("ion-col"),d=Object(r["resolveComponent"])("ion-row"),p=Object(r["resolveComponent"])("ion-toolbar"),b=Object(r["resolveComponent"])("report-filter"),f=Object(r["resolveComponent"])("ion-header"),m=Object(r["resolveComponent"])("report-table"),h=Object(r["resolveComponent"])("ion-content"),g=Object(r["resolveComponent"])("pagination"),v=Object(r["resolveComponent"])("ion-chip"),O=Object(r["resolveComponent"])("ion-footer"),j=Object(r["resolveComponent"])("his-footer"),_=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(_,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("h1",null,Object(r["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{showPerPageFilter:e.showFilters||e.paginated,disableSearchFilter:e.isTableLoading,disablePerPageFilter:e.isTableLoading,totalRowCount:e.tableRows.length,onOnItemsPerPage:t[1]||(t[1]=function(t){return e.itemsPerPage=t}),onOnSearchFilter:t[2]||(t[2]=function(t){return e.searchFilter=t})},null,8,["showPerPageFilter","disableSearchFilter","disablePerPageFilter","totalRowCount"])]})),_:1})]})),_:1}),Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",a,[Object(r["createVNode"])(m,{rows:e.rows,paginated:e.paginated,asyncRows:e.asyncRows,rowParser:e.rowParser,columns:e.columns,showFilters:e.showFilters,newPage:e.currentPage,searchFilter:e.searchFilter,rowsPerPage:e.itemsPerPage,onOnIsLoading:t[3]||(t[3]=function(t){return e.isTableLoading=t}),onOnTableRows:t[4]||(t[4]=function(t){return e.tableRows=t}),onOnPagination:t[5]||(t[5]=function(t){return e.totalPages=t.length}),onOnActiveColumns:t[6]||(t[6]=function(t){return e.activeColumns=t}),onOnActiveRows:t[7]||(t[7]=function(t){return e.activeRows=t})},null,8,["rows","paginated","asyncRows","rowParser","columns","showFilters","newPage","searchFilter","rowsPerPage"])])]})),_:1}),Object(r["createVNode"])(O,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[!e.searchFilter&&e.paginated||!e.searchFilter&&e.totalPages>0&&e.paginated?(Object(r["openBlock"])(),Object(r["createBlock"])(g,{key:0,perPage:e.itemsPerPage,maxVisibleButtons:10,totalPages:e.totalPages,onOnChangePage:t[8]||(t[8]=function(t){return e.currentPage=t})},null,8,["perPage","totalPages"])):Object(r["createCommentVNode"])("",!0)]})),_:1}),e.showReportStamp?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{color:"primary"},{default:Object(r["withCtx"])((function(){return[o,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.date),1)]})),_:1}),Object(r["createVNode"])(v,{color:"primary"},{default:Object(r["withCtx"])((function(){return[i,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.apiVersion),1)]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(j,{color:e.footerColor,btns:e.btns},null,8,["color","btns"])]})),_:1})}var s=n("2909"),u=(n("a9e3"),n("99af"),n("0f25")),l=n("9ceb"),d=n("80e3"),p=n("8a30"),b=n("ba82"),f=n("1c74"),m=n("9283"),h=n("2f2a"),g=n("1799"),v=Object(r["defineComponent"])({components:{IonCol:p["m"],IonRow:p["J"],Pagination:g["a"],ReportTable:d["a"],ReportFilter:h["a"],HisFooter:u["a"],IonPage:p["F"],IonHeader:p["q"],IonContent:p["n"],IonToolbar:p["V"],IonChip:p["l"],IonFooter:p["o"]},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},rows:{type:Object,default:function(){return[]}},rowParser:{type:Function},showFilters:{type:Boolean,default:!1},rowsPerPage:{type:Number},asyncRows:{type:Function},paginated:{type:Boolean,default:!1},customBtns:{type:Array,default:function(){return[]}},showReportStamp:{type:Boolean,default:!0},footerColor:{type:String,default:"dark"},customFileName:{type:String,default:""},canExport:{type:Boolean,default:!0},onFinish:{type:Function}},data:function(){return{btns:[],isTableLoading:!1,searchFilter:"",itemsPerPage:50,currentPage:0,tableRows:[],totalPages:0,activeColumns:[],activeRows:[],date:m["b"].toStandardHisDisplayFormat(f["e"].getSessionDate()),apiVersion:f["e"].getApiVersion()}},methods:{getFileName:function(){return this.customFileName?this.customFileName:this.title}},created:function(){var e=this;this.btns=[].concat(Object(s["a"])(this.customBtns),[{name:"CSV",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:function(){var t=Object(l["b"])(e.activeColumns,e.activeRows),n=t.columns,r=t.rows;Object(b["a"])(n,r,e.getFileName())}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:this.canExport,onClick:function(){var t=Object(l["b"])(e.activeColumns,e.activeRows),n=t.columns,r=t.rows;Object(b["b"])(n,r,e.getFileName())}},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:function(){if("function"===typeof e.onFinish)return e.onFinish();e.$router.push({path:"/"})}}])}}),O=n("6b0d"),j=n.n(O);const _=j()(v,[["render",c]]);t["a"]=_},d6d4:function(e,t,n){},d6f3:function(e,t,n){"use strict";n("4469")},d77d:function(e,t,n){"use strict";n("18ab")},d8b0:function(e,t,n){"use strict";n("4f45")},d95e:function(e,t,n){"use strict";n.d(t,"b",(function(){return oc})),n.d(t,"a",(function(){return cc}));var r=n("7a23"),a=Object(r["withScopeId"])("data-v-33d9843e");Object(r["pushScopeId"])("data-v-33d9843e");var o={key:0,class:"his-card"};Object(r["popScopeId"])();var i=a((function(e,t,n,i,c,s){var u=Object(r["resolveComponent"])("ion-title"),l=Object(r["resolveComponent"])("ion-radio"),d=Object(r["resolveComponent"])("ion-label"),p=Object(r["resolveComponent"])("ion-item"),b=Object(r["resolveComponent"])("ion-radio-group"),f=Object(r["resolveComponent"])("ion-list"),m=Object(r["resolveComponent"])("ion-col"),h=Object(r["resolveComponent"])("ion-row"),g=Object(r["resolveComponent"])("ion-grid"),v=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(v,null,{default:a((function(){return[Object(r["createVNode"])(g,{class:"view-port-content"},{default:a((function(){return[Object(r["createVNode"])(h,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(m,{size:"6",key:n},{default:a((function(){var n,i;return["boolean"!==typeof(null===t||void 0===t||null===(n=t.other)||void 0===n?void 0:n.visible)||(null===t||void 0===t||null===(i=t.other)||void 0===i?void 0:i.visible)?(Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])(u,{class:"his-md-text"},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(f,null,{default:a((function(){return[Object(r["createVNode"])(b,{modelValue:t.value,"onUpdate:modelValue":function(e){return t.value=e}},{default:a((function(){var n;return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])((null===t||void 0===t||null===(n=t.other)||void 0===n?void 0:n.options)||[],(function(n,o){return Object(r["openBlock"])(),Object(r["createBlock"])(p,{class:"his-md-text",key:o},{default:a((function(){return[Object(r["createVNode"])(l,{slot:"start",value:n.value,onClick:function(r){var a;return"function"===typeof(null===t||void 0===t||null===(a=t.other)||void 0===a?void 0:a.onClick)?t.other.onClick(n,e.listData):null}},null,8,["value","onClick"]),Object(r["createVNode"])(d,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(n.label),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"])]})),_:2},1024)])):Object(r["createCommentVNode"])("",!0)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})})),c=n("1da1"),s=(n("4de4"),n("d3b7"),n("96cf"),n("51c8")),u=n("0a79"),l=n("8a30"),d=n("2ef0"),p=Object(r["defineComponent"])({name:"HisGridOptionSelect",mixins:[s["a"]],components:{IonTitle:l["U"],IonItem:l["w"],IonRadioGroup:l["H"],IonRadio:l["G"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"],ViewPort:u["a"]},data:function(){return{listData:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()},watch:{listData:{handler:function(e){this.$emit("onValue",Object(d["isEmpty"])(e)?null:e.filter((function(e){return"boolean"!==typeof e.other.visible||e.other.visible})))},deep:!0}}}),b=(n("20a4"),n("6b0d")),f=n.n(b);const m=f()(p,[["render",i],["__scopeId","data-v-33d9843e"]]);var h=m,g=n("c05f"),v=n("dd65"),O=Object(r["withScopeId"])("data-v-21ddefcc");Object(r["pushScopeId"])("data-v-21ddefcc");var j={class:"his-floating-keyboard"},_={class:"his-floating-keyboard-content"},w={style:{width:"99.9%"}},k=Object(r["createTextVNode"])(" Space ");Object(r["popScopeId"])();var y=O((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-textarea"),s=Object(r["resolveComponent"])("view-port"),u=Object(r["resolveComponent"])("ion-button");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(s,{showFull:!1},{default:O((function(){return[Object(r["createVNode"])(c,{rows:"6",cols:"20",readonly:"",value:e.value,placeholder:"Start typing....",class:"input_display"},null,8,["value"])]})),_:1}),Object(r["createVNode"])("div",j,[Object(r["createVNode"])("div",_,[Object(r["createVNode"])("table",w,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.layout,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("td",{key:n},[Object(r["createVNode"])(u,{style:{"text-transform":"none"},strong:"",onClick:function(n){return e.keypress(t)},class:"key__button ".concat(t.toLowerCase(),"_btn")},{default:O((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t),1)]})),_:2},1032,["onClick","class"])])})),128))])})),128))])]),Object(r["createVNode"])(u,{onClick:t[1]||(t[1]=function(t){return e.keypress("space")}),strong:"",style:{width:"100%"},shape:"round",size:"large"},{default:O((function(){return[k]})),_:1})])],64)})),x=(n("25f0"),n("d81d"),n("ac1f"),n("466d"),n("2345")),N=n("3800"),C=Object(r["defineComponent"])({components:{ViewPort:u["a"],IonButton:l["d"],IonTextarea:l["S"]},mixins:[s["a"]],data:function(){return{value:"",capsOn:!1,layout:N["h"]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.setDefaultValue();case 3:case"end":return t.stop()}}),t)})))()},methods:{setDefaultValue:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.defaultValue||e.value){t.next=5;break}return t.next=3,e.defaultValue(e.fdata,e.cdata);case 3:n=t.sent,n&&(Object(d["isPlainObject"])(n)?(e.emitValue(n),e.value=n.value.toString()):(e.value=n,e.emitValue({label:n,value:n})));case 5:case"end":return t.stop()}}),t)})))()},updateKeyboardCaps:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.layout=this.layout.map((function(t){return t.map((function(t){return e?t.toUpperCase():t.toLowerCase()}))}))},emitValue:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.onValue){n.next=6;break}return n.next=3,t.onValue(e);case 3:if(r=n.sent,r){n.next=6;break}return n.abrupt("return");case 6:t.value=e.label,t.$emit("onValue",e);case 8:case"end":return n.stop()}}),n)})))()},onKbValue:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.emitValue({label:e,value:e});case 2:case"end":return n.stop()}}),n)})))()},keypress:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=Object(x["a"])(t.capsOn?e.toUpperCase():e.toLowerCase(),t.value),!r.match(/caps/i)){n.next=5;break}return t.capsOn=!t.capsOn,t.updateKeyboardCaps(t.capsOn),n.abrupt("return");case 5:return n.next=7,t.emitValue({label:r,value:r});case 7:case"end":return n.stop()}}),n)})))()}},watch:{clear:function(){this.value=""}}});n("a981");const V=f()(C,[["render",y],["__scopeId","data-v-21ddefcc"]]);var D=V,T=n("d11f"),I=n("0734"),R=n("2fd5"),S=n("6ef9"),P=n("5e75"),A=n("69cf"),E=Object(r["withScopeId"])("data-v-0383b783");Object(r["pushScopeId"])("data-v-0383b783");var B={class:"view-port-content"};Object(r["popScopeId"])();var F=E((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("regimen-card"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-row"),l=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(l,null,{default:E((function(){return[Object(r["createVNode"])("div",B,[Object(r["createVNode"])(u,null,{default:E((function(){return[Object(r["createVNode"])(s,{"size-md":"6","size-sm":"12"},{default:E((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.leftItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{class:"regimen-item",key:n,label:t.label,value:t.value,onOnclick:function(n){return e.onselect(t)},color:t.label===e.selected?"active-card-color":"inactive-card-color"},null,8,["label","value","onOnclick","color"])})),128))]})),_:1}),Object(r["createVNode"])(s,{"size-md":"6","size-sm":"12"},{default:E((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.rightItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(c,{class:"regimen-item",key:n,label:t.label,value:t.value,onOnclick:function(n){return e.onselect(t)},color:t.label===e.selected?"active-card-color":"inactive-card-color"},null,8,["label","value","onOnclick","color"])})),128))]})),_:1})]})),_:1})])]})),_:1})})),L=n("2909"),M=(n("4e82"),n("159b"),n("82a9")),H=Object(r["withScopeId"])("data-v-63209aca");Object(r["pushScopeId"])("data-v-63209aca");var U={class:"title"},q={class:"his-sm-text",style:{textAlign:"center"}};Object(r["popScopeId"])();var G=H((function(e,t,n,a,o,i){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"his-card ".concat(e.state),onClick:t[1]||(t[1]=function(){return e.onclick.apply(e,arguments)})},[Object(r["createVNode"])("table",null,[Object(r["createVNode"])("td",U,Object(r["toDisplayString"])(e.value)+"  ",1),Object(r["createVNode"])("td",q,Object(r["toDisplayString"])(e.label),1)])],2)})),z=Object(r["defineComponent"])({props:{showTitle:{type:Boolean,default:!0},enabled:{type:Boolean,default:!0},color:{type:String},label:{type:String,required:!0},value:{type:String,required:!0}},computed:{state:function(){return this.enabled?"".concat(this.color," clickable"):"disabled-card-color"}},methods:{onclick:function(){this.enabled&&this.$emit("onclick")}}});n("a83d");const Y=f()(z,[["render",G],["__scopeId","data-v-63209aca"]]);var W=Y,$=Object(r["defineComponent"])({components:{ViewPort:u["a"],RegimenCard:W,IonRow:l["J"],IonCol:l["m"]},mixins:[M["a"]],watch:{clear:function(e){e&&this.clearSelection()}},computed:{leftItems:function(){return Object(d["isEmpty"])(this.listData)?[]:this.listData[0]},rightItems:function(){return Object(d["isEmpty"])(this.listData)?[]:this.listData[1]}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}}),t)})))()},activated:function(){this.$emit("onFieldActivated",this)},methods:{init:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.options(e.fdata);case 2:n=t.sent,e.listData=e.buildList(n);case 4:case"end":return t.stop()}}),t)})))()},buildList:function(e){var t=[[],[]],n=function(e){return e.sort((function(e,t){return e.value>t.value?1:-1}))};return e.forEach((function(e){var n=parseInt(e.value.toString());n<10?t[0].push(e):t[1].push(e)})),[n(t[0]),n(t[1])]},onselect:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.selected=e.label,!t.onValue){n.next=9;break}return n.next=4,t.onValue(e);case 4:if(r=n.sent,r){n.next=9;break}return t.selected="",t.$emit("onValue",null),n.abrupt("return");case 9:if(!t.onValueUpdate){n.next=13;break}return n.next=12,t.onValueUpdate(Object(L["a"])(t.listData),e);case 12:t.listData=n.sent;case 13:t.$emit("onValue",e);case 14:case"end":return n.stop()}}),n)})))()}}});n("6dce");const K=f()($,[["render",F],["__scopeId","data-v-0383b783"]]);var J=K,X=Object(r["withScopeId"])("data-v-417bb70a");Object(r["pushScopeId"])("data-v-417bb70a");var Q={class:"view-port-content"},Z={class:"his-md-text"},ee={class:"his-md-text"};Object(r["popScopeId"])();var te=X((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("interval-card"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-row"),l=Object(r["resolveComponent"])("ion-label"),d=Object(r["resolveComponent"])("ion-item"),p=Object(r["resolveComponent"])("ion-chip"),b=Object(r["resolveComponent"])("ion-list"),f=Object(r["resolveComponent"])("ion-card-content"),m=Object(r["resolveComponent"])("ion-card"),h=Object(r["resolveComponent"])("ion-grid"),g=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(g,null,{default:X((function(){return[Object(r["createVNode"])("div",Q,[Object(r["createVNode"])(h,null,{default:X((function(){return[Object(r["createVNode"])(u,null,{default:X((function(){return[Object(r["createVNode"])(s,{size:"4"},{default:X((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:n},{default:X((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{"size-md":"6","size-sm":"12",key:n},{default:X((function(){return[Object(r["createVNode"])(c,{showTitle:e.config.showRegimenCardTitle,label:t.label,onOnclick:function(n){return e.onselect(t)},enabled:t.other.enabled,color:t.label===e.selected?"active-card-color":"inactive-card-color"},null,8,["showTitle","label","onOnclick","enabled","color"])]})),_:2},1024)})),128))]})),_:2},1024)})),128))]})),_:1}),Object(r["createVNode"])(s,{size:"8"},{default:X((function(){return[Object(r["createVNode"])(m,{style:{height:"65vh"}},{default:X((function(){return[e.active.label?(Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:0},{default:X((function(){return[Object(r["createVNode"])("span",Z,Object(r["toDisplayString"])(e.active.other.label),1),Object(r["createVNode"])(d,{class:"his-sm-text"},{default:X((function(){return[Object(r["createVNode"])(l,null,{default:X((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.active.other.value),1)]})),_:1})]})),_:1}),Object(r["createVNode"])("span",ee,Object(r["toDisplayString"])(e.active.other.other.label),1),Object(r["createVNode"])(b,null,{default:X((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.active.other.other.value,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{class:"his-sm-text",key:t},{default:X((function(){return[Object(r["createVNode"])(l,null,{default:X((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024),Object(r["createVNode"])(p,{class:"his-md-text",color:"primary",slot:"end"},{default:X((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.value),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})])]})),_:1})})),ne=Object(r["withScopeId"])("data-v-875731ee");Object(r["pushScopeId"])("data-v-875731ee");var re={key:0},ae={key:1,class:"his-md-text"};Object(r["popScopeId"])();var oe=ne((function(e,t,n,a,o,i){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"his-card ".concat(e.state),onClick:t[1]||(t[1]=function(){return e.enabled?e.$emit("onclick"):null})},[e.enabled?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("s",re,Object(r["toDisplayString"])(e.label),1)),e.enabled?(Object(r["openBlock"])(),Object(r["createBlock"])("div",ae,Object(r["toDisplayString"])(e.label),1)):Object(r["createCommentVNode"])("",!0)],2)})),ie=Object(r["defineComponent"])({props:{color:{type:String},enabled:{type:Boolean,default:!0},label:{type:String,required:!0}},computed:{state:function(){return this.enabled?"clickable ".concat(this.color):"disabled-card-color"}}});n("2b75");const ce=f()(ie,[["render",oe],["__scopeId","data-v-875731ee"]]);var se=ce,ue=n("7e73"),le=Object(r["defineComponent"])({components:{IntervalCard:se,ViewPort:u["a"],IonGrid:l["p"],IonCard:l["f"],IonCardContent:l["g"]},mixins:[M["a"]],data:function(){return{active:{}}},watch:{clear:function(){this.active={},this.clearSelection()}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.init(),e.$emit("onFieldActivated",e),"next"===e.activationState&&(e.active={},e.clearSelection());case 3:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.init();case 1:case"end":return t.stop()}}),t)})))()},methods:{init:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.options(e.fdata);case 2:n=t.sent,e.listData=ue["a"].convertArrayToTurples(n);case 4:case"end":return t.stop()}}),t)})))()},onselect:function(e){this.selected=e.label,this.active=e,this.$emit("onValue",e)}}});n("fb7c");const de=f()(le,[["render",te],["__scopeId","data-v-417bb70a"]]);var pe=de,be=Object(r["withScopeId"])("data-v-5d9fc4b0");Object(r["pushScopeId"])("data-v-5d9fc4b0");var fe={class:"view-port-content"};Object(r["popScopeId"])();var me=be((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("his-table"),s=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(s,null,{default:be((function(){return[Object(r["createVNode"])("div",fe,[Object(r["createVNode"])(c,{columns:e.columns,styles:e.styles,rows:e.rows,rowColors:e.rowColors,cellColors:e.cellColors},null,8,["columns","styles","rows","rowColors","cellColors"])])]})),_:1})})),he=n("a3a5"),ge=Object(r["defineComponent"])({components:{ViewPort:u["a"],HisTable:he["a"]},mixins:[s["a"]],data:function(){return{columns:[],rows:[],rowColors:[],cellColors:[],styles:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata,e.cdata,e);case 3:if(n=t.sent,!Object(d["isEmpty"])(n)){t.next=6;break}return t.abrupt("return");case 6:r=n[0].other,e.columns=r.columns,e.rows=r.rows,e.rowColors=r.rowColors,e.cellColors=r.cellColors,e.styles=e.config?e.config.styles:[];case 12:case"end":return t.stop()}}),t)})))()}});n("5245");const ve=f()(ge,[["render",me],["__scopeId","data-v-5d9fc4b0"]]);var Oe=ve,je=Object(r["withScopeId"])("data-v-4641300f");Object(r["pushScopeId"])("data-v-4641300f");var _e={class:"view-port-content"},we={class:"his-table"},ke=Object(r["createVNode"])("th",null," Medication",-1),ye=Object(r["createTextVNode"])(" Morning "),xe=Object(r["createTextVNode"])(" Noon "),Ne=Object(r["createTextVNode"])(" Evening "),Ce=Object(r["createTextVNode"])(" Frequency "),Ve=Object(r["createVNode"])("option",{value:"Weekly (QW)"}," Weekly ",-1),De=Object(r["createVNode"])("option",{value:"Daily (QOD)"}," Daily ",-1);Object(r["popScopeId"])();var Te=je((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-img"),s=Object(r["resolveComponent"])("ion-input"),u=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(u,null,{default:je((function(){return[Object(r["createVNode"])("div",_e,[Object(r["createVNode"])("table",we,[Object(r["createVNode"])("tr",null,[ke,Object(r["createVNode"])("th",null,[Object(r["createVNode"])(c,{class:"ico",src:e.img("morning")},null,8,["src"]),ye]),Object(r["createVNode"])("th",null,[Object(r["createVNode"])(c,{class:"ico",src:e.img("noon")},null,8,["src"]),xe]),Object(r["createVNode"])("th",null,[Object(r["createVNode"])(c,{class:"ico",src:e.img("evening")},null,8,["src"]),Ne]),Object(r["createVNode"])("th",null,[Object(r["createVNode"])(c,{class:"ico",src:e.img("frequency")},null,8,["src"]),Ce])]),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.label),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(s,{value:t.other.am,onClick:function(n){return e.launchKeyPad(t,"am")},class:"dosage-input"},null,8,["value","onClick"])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(s,{value:t.other.noon,onClick:function(n){return e.launchKeyPad(t,"noon")},class:"dosage-input"},null,8,["value","onClick"])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(s,{value:t.other.pm,onClick:function(n){return e.launchKeyPad(t,"pm")},class:"dosage-input"},null,8,["value","onClick"])]),Object(r["createVNode"])("td",null,[Object(r["withDirectives"])(Object(r["createVNode"])("select",{"onUpdate:modelValue":function(e){return t.other.frequency=e},class:"custom-med-frequency"},[Ve,De],8,["onUpdate:modelValue"]),[[r["vModelSelect"],t.other.frequency]])])])})),128))])])]})),_:1})})),Ie=n("10be"),Re=Object(r["defineComponent"])({components:{ViewPort:u["a"],IonImg:l["s"],IonInput:l["v"]},mixins:[s["a"]],data:function(){return{listData:[]}},watch:{clear:{handler:function(){this.listData=this.listData.filter((function(e){return e.other.am=0,e.other.noon=0,e.other.pm=0,e.other.frequency="Daily (QOD)",!0}))},immediate:!0},listData:{handler:function(){this.$emit("onValue",this.listData)},deep:!0,immediate:!0}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:n=t.sent,e.updateListData(n);case 5:case"end":return t.stop()}}),t)})))()},methods:{img:function(e){return"assets/images/prescription/".concat(e,".png")},updateListData:function(e){var t=this;this.listData=e.map((function(e){var n=Object(d["find"])(t.listData,{label:e.label,value:e.value});return n||(n||e)}))},launchKeyPad:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:Ie["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:e.label,preset:e.other[t],strictNumbers:!0,onKeyPress:function(n){e.other[t]=n}}});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n)})))()}}});n("f145");const Se=f()(Re,[["render",Te],["__scopeId","data-v-4641300f"]]);var Pe=Se,Ae=n("71f2"),Ee=n("5fd1"),Be=Object(r["withScopeId"])("data-v-0f89768a");Object(r["pushScopeId"])("data-v-0f89768a");var Fe={class:"view-port-content"},Le=Object(r["createTextVNode"])("Previous weight"),Me=Object(r["createTextVNode"])("Lastest weight"),He=Object(r["createTextVNode"])("Latest weight change"),Ue=Object(r["createTextVNode"])("Patient Age"),qe=Object(r["createTextVNode"])("Patient BMI");Object(r["popScopeId"])();var Ge=Be((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("apexchart"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-label"),l=Object(r["resolveComponent"])("ion-chip"),d=Object(r["resolveComponent"])("ion-item"),p=Object(r["resolveComponent"])("ion-list"),b=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(f,null,{default:Be((function(){return[Object(r["createVNode"])("div",Fe,[Object(r["createVNode"])(b,{class:"parent-row"},{default:Be((function(){return[Object(r["createVNode"])(s,{size:"7"},{default:Be((function(){return[Object(r["createVNode"])(c,{width:e.width,height:e.height,type:e.type,options:e.chartOptions,series:e.series},null,8,["width","height","type","options","series"])]})),_:1}),Object(r["createVNode"])(s,{size:"5"},{default:Be((function(){return[Object(r["createVNode"])(p,null,{default:Be((function(){return[Object(r["createVNode"])(d,null,{default:Be((function(){return[Object(r["createVNode"])(u,{class:"title"},{default:Be((function(){return[Le]})),_:1}),Object(r["createVNode"])(l,{slot:"end",color:"primary"},{default:Be((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.stats.prevWeight),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(d,null,{default:Be((function(){return[Object(r["createVNode"])(u,{class:"title"},{default:Be((function(){return[Me]})),_:1}),Object(r["createVNode"])(l,{slot:"end",color:"primary"},{default:Be((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.stats.curWeight),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(d,null,{default:Be((function(){return[Object(r["createVNode"])(u,{class:"title"},{default:Be((function(){return[He]})),_:1}),Object(r["withDirectives"])(Object(r["createVNode"])("img",{src:e.stats.weightState,width:"50"},null,8,["src"]),[[r["vShow"],e.stats.weightState]]),Object(r["createVNode"])(l,{slot:"end",color:"primary"},{default:Be((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.stats.curWeightChange),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(d,null,{default:Be((function(){return[Object(r["createVNode"])(u,{class:"title"},{default:Be((function(){return[Ue]})),_:1}),Object(r["createVNode"])(l,{slot:"end",color:"primary"},{default:Be((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.stats.age),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(d,null,{default:Be((function(){return[Object(r["createVNode"])(u,{class:"title"},{default:Be((function(){return[qe]})),_:1}),Object(r["createVNode"])(l,{slot:"end",color:"primary"},{default:Be((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.stats.bmi.index),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(d,null,{default:Be((function(){return[Object(r["createVNode"])(u,{style:{"background-color":e.stats.bmi.color,color:"white",padding:"10px","text-align":"center"}},{default:Be((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.stats.bmi.result),1)]})),_:1},8,["style"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})])]})),_:1})})),ze=n("3835"),Ye=(n("b680"),n("ddb0"),n("1276"),n("99af"),Object(r["defineComponent"])({components:{ViewPort:u["a"],IonCol:l["m"],IonRow:l["J"],IonItem:l["w"],IonChip:l["l"]},mixins:[s["a"]],data:function(){return{stats:{prevWeight:"-",curWeight:"-",curWeightChange:"-",weightState:"",age:"-",bmi:{}},type:"area",width:"100%",height:"560px",series:[],chartOptions:{chart:{id:"weight_chart"},title:{text:"Weight trail (2 year period)"},stroke:{curve:"smooth"},yaxis:{title:{text:"Weight Kg(s)"},min:0},xaxis:{categories:[]},dataLabels:{enabled:!0,textAnchor:"start",formatter:function(e,t){var n,r=null===(n=t.w.config.series[0].data[t.dataPointIndex-1])||void 0===n?void 0:n.y;return r&&r>0?(e/r*100-100).toFixed(2)+" %":"0.0%"}}}}},activated:function(){this.$emit("onFieldActivated",this)},methods:{setStats:function(e){var t,n,r=(null===(t=e.values[e.values.length-2])||void 0===t?void 0:t.y)||0,a=(null===(n=e.values[e.values.length-1])||void 0===n?void 0:n.y)||0;if(this.stats.curWeight=a||"-",this.stats.prevWeight=r||"-",this.stats.age=e.age,this.stats.bmi=e.bmi,a>0&&r>0){this.stats.curWeightChange=Math.abs(a/r*100-100).toFixed(2)+" %";var o="/assets/images/drop-up-arrow.svg",i="/assets/images/drop-down-arrow.svg";this.stats.weightState=a>r?o:i}}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.options(e.fdata);case 2:n=t.sent,r=n[0].other,a=r.values,e.series=[{name:"Weight",data:a.sort((function(e,t){var n=new Date(e.x),r=new Date(t.x);return n-r})).map((function(e){var t=e.x.split("/"),n=Object(ze["a"])(t,2),r=n[0],a=n[1];return{x:"".concat(r,".").concat(a),y:e.y}}))}],e.type=r.type?r.type:"area",e.width=r.width?r.width:"100%",e.setStats(r);case 9:case"end":return t.stop()}}),t)})))()}}));n("cfc5");const We=f()(Ye,[["render",Ge],["__scopeId","data-v-0f89768a"]]);var $e=We,Ke=Object(r["withScopeId"])("data-v-5b07c96e");Object(r["pushScopeId"])("data-v-5b07c96e");var Je={class:"view-port-content"},Xe=Object(r["createVNode"])("p",null,null,-1),Qe={class:"centered his-card"},Ze={class:"keypad"},et={class:"value-highlight"},tt={class:"value-highlight"};Object(r["popScopeId"])();var nt=Ke((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-row"),s=Object(r["resolveComponent"])("option-button"),u=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-input"),d=Object(r["resolveComponent"])("ion-button"),p=Object(r["resolveComponent"])("ion-label"),b=Object(r["resolveComponent"])("ion-item"),f=Object(r["resolveComponent"])("ion-list"),m=Object(r["resolveComponent"])("ion-grid"),h=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(h,null,{default:Ke((function(){return[Object(r["createVNode"])("div",Je,[Object(r["createVNode"])(m,null,{default:Ke((function(){return[e.vitalsStatus?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,class:"mobile-component-view",style:{width:"100%","background-color":e.vitalsStatus.color,color:"white",padding:"10px",textAlign:"center"}},{default:Ke((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.vitalsStatus.status)+" ",1),Xe]})),_:1},8,["style"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(c,null,{default:Ke((function(){return[Object(r["createVNode"])(u,{size:"2"},{default:Ke((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.keys,(function(t,n){return Object(r["withDirectives"])((Object(r["openBlock"])(),Object(r["createBlock"])(s,{class:"his-sm-text",key:n,label:t.label,isActive:e.activeField===n,image:"vitals/"+t.other.icon,onClick:function(t){return e.setActiveField(n)}},null,8,["label","isActive","image","onClick"])),[[r["vShow"],!1!==t.other.visible]])})),128))]})),_:1}),Object(r["createVNode"])(u,{"size-lg":"6","size-sm":"10"},{default:Ke((function(){return[Object(r["createVNode"])("div",Qe,[e.keys.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:0,type:"text",class:"keypad-input",modelValue:e.keys[e.activeField].value,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.keys[e.activeField].value=t}),readonly:e.useVirtualInput},null,8,["modelValue","readonly"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("table",Ze,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.keyboard,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("td",{class:"his-keyboard-margin",key:"btn-".concat(n)},[Object(r["createVNode"])(d,{color:"primary",class:"his-keyboard-btn",onClick:function(n){return e.onKeyPress(t)}},{default:Ke((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t),1)]})),_:2},1032,["onClick"])])})),128))])})),128))])])]})),_:1}),Object(r["createVNode"])(u,{class:"full-component-view",size:"4"},{default:Ke((function(){return[Object(r["createVNode"])(f,null,{default:Ke((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.keys,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(b,{class:"his-sm-text",key:n,color:e.activeField===n?"secondary":""},{default:Ke((function(){return[Object(r["createVNode"])(p,null,{default:Ke((function(){return[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(p,{slot:"end"},{default:Ke((function(){return[Object(r["createVNode"])("span",et,Object(r["toDisplayString"])(t.value||"-"),1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(t.other.modifier),1)]})),_:2},1024)]})),_:2},1032,["color"])})),128)),e.vitalsStatus&&e.vitalsStatus.value?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0},{default:Ke((function(){return[Object(r["createVNode"])(p,null,{default:Ke((function(){return[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.vitalsStatus.label),1)]})),_:1}),Object(r["createVNode"])(p,{slot:"end"},{default:Ke((function(){return[Object(r["createVNode"])("span",tt,Object(r["toDisplayString"])(e.vitalsStatus.value),1)]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(b,null,{default:Ke((function(){return[e.vitalsStatus?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0,style:{"background-color":e.vitalsStatus.color,color:"white",padding:"10px","text-align":"center"}},{default:Ke((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.vitalsStatus.status),1)]})),_:1},8,["style"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})])]})),_:1})})),rt=(n("caad"),n("2532"),n("b64b"),Object(r["withScopeId"])("data-v-321424f0")),at=rt((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("center");return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"his-card ".concat(e.state," clickable")},[Object(r["createVNode"])("img",{src:e.icon},null,8,["src"]),Object(r["createVNode"])(c,null,{default:rt((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:1})],2)})),ot=Object(r["defineComponent"])({props:{label:{type:String,required:!0},image:{type:String,required:!0},isActive:{type:Boolean,default:!0}},computed:{state:function(){return this.isActive?"active-card-color":"disabled-card-color"},icon:function(){return"assets/images/".concat(this.image,".png")}}});n("2ee9");const it=f()(ot,[["render",at],["__scopeId","data-v-321424f0"]]);var ct=it,st=n("b5e4"),ut=n("1718"),lt=n("2ed9"),dt=Object(r["defineComponent"])({components:{ViewPort:u["a"],IonInput:l["v"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"],OptionButton:ct},mixins:[s["a"]],data:function(){return{keys:[],vitalsStatus:{},activeField:0,keyboard:N["l"]}},setup:function(){var e=Object(lt["a"])(),t=e.useVirtualInput;return{useVirtualInput:t}},activated:function(){this.$emit("onFieldActivated",this)},watch:{keys:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.$emit("onValue",e);case 1:case"end":return n.stop()}}),n)})))()},deep:!0,immediate:!0}},mounted:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.options(e.fdata);case 2:e.keys=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:{img:function(e){return Object(ut["a"])("vitals/".concat(e,".png"))},onKeyPress:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.keys[t.activeField].value.toString(),e.match(/del/i)?t.keys[t.activeField].value=r.substring(0,r.length-1):e.match(/clear/i)?t.keys[t.activeField].value="":t.keys[t.activeField].value+=e,"function"!==typeof t.config.onUpdateAlertStatus){n.next=7;break}return n.next=5,t.config.onUpdateAlertStatus(t.keys);case 5:a=n.sent,Object(d["isPlainObject"])(a)&&Object.keys(a).includes("status")&&(t.vitalsStatus=a||null);case 7:case"end":return n.stop()}}),n)})))()},setActiveField:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("function"!==typeof t.config.onChangeOption){n.next=10;break}return n.prev=1,n.next=4,t.config.onChangeOption(t.keys[t.activeField]);case 4:t.activeField=e,n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),Object(st["e"])(n.t0);case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()}}});n("ebcb");const pt=f()(dt,[["render",nt],["__scopeId","data-v-5b07c96e"]]);var bt=pt,ft={class:"view-port-content"},mt={key:0,class:"appointments"},ht=Object(r["createVNode"])("b",null,"Medication Run out Date",-1),gt=Object(r["createVNode"])("p",null,null,-1),vt=Object(r["createVNode"])("b",null,"User set appointment date",-1),Ot=Object(r["createVNode"])("p",null,null,-1),jt=Object(r["createVNode"])("b",null,"Appointment(s)",-1),_t=Object(r["createVNode"])("p",null,null,-1),wt=Object(r["createVNode"])("b",null,"Appointment limit (per/day)",-1),kt=Object(r["createVNode"])("p",null,null,-1);function yt(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("Calendar"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-label"),l=Object(r["resolveComponent"])("ion-item"),d=Object(r["resolveComponent"])("ion-list"),p=Object(r["resolveComponent"])("ion-row"),b=Object(r["resolveComponent"])("ion-grid"),f=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(f,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",ft,[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{size:"8"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{color:"blue",ref:"calendar","is-expanded":"",class:"custom-calendar","min-date":e.sessionDate,"max-date":e.runOutDate,attributes:e.attributes,masks:e.masks,"disable-page-swipe":""},{"day-content":Object(r["withCtx"])((function(t){var n=t.day;return[Object(r["createVNode"])("div",{class:{selected:n.id===e.cDate,isDisabled:n.isDisabled}},[Object(r["createVNode"])("span",{onClick:function(t){return e.dayClicked(n)}},Object(r["toDisplayString"])(n.day),9,["onClick"]),n.id===e.cDate?(Object(r["openBlock"])(),Object(r["createBlock"])("sup",mt,Object(r["toDisplayString"])(e.appointments.length),1)):Object(r["createCommentVNode"])("",!0)],2)]})),_:1},8,["min-date","max-date","attributes","masks"])]})),_:1}),Object(r["createVNode"])(s,{size:"4",class:"his-card"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[e.showMedicationRunoutDate&&e.rDate?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:0,class:"his-sm-text"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{class:"ion-text-wrap"},{default:Object(r["withCtx"])((function(){return[ht,gt,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.rDate),1)]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(l,{class:"his-sm-text"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{class:"ion-text-wrap"},{default:Object(r["withCtx"])((function(){return[vt,Ot,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.aDate),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(l,{class:"his-sm-text"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{class:"ion-text-wrap"},{default:Object(r["withCtx"])((function(){return[jt,_t,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.appointments.length),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(l,{class:"his-sm-text"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{class:"ion-text-wrap"},{default:Object(r["withCtx"])((function(){return[wt,kt,Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.appointmentLimit),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})])]})),_:1})}var xt=n("7b37"),Nt=n("9283"),Ct=n("83af"),Vt=n("d1ca"),Dt=n("5a0c"),Tt=n.n(Dt),It=Object(r["defineComponent"])({components:{ViewPort:u["a"],Calendar:xt["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"]},mixins:[s["a"]],watch:{startDate:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e||Nt["b"].toStandardHisDisplayFormat(t.sessionDate),t.$emit("onValue",{label:"",value:r});case 2:case"end":return n.stop()}}),n)})))()},immediate:!0}},data:function(){return{rows:[],startDate:null,runOutDate:null,appointments:[],clinicHolidays:[],clinicDays:[],patientAge:0,appointmentLimit:0,sessionDate:null,masks:{weekdays:"WWW"}}},activated:function(){this.$emit("onFieldActivated",this)},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.patientAge=e.config.patientAge||0,t.next=3,e.getAppointmentLimit();case 3:return t.next=5,e.getClinicHolidays();case 5:return t.next=7,e.getClinicDays();case 7:return t.next=9,e.options(e.fdata);case 9:return n=t.sent,e.sessionDate=Ct["a"].getSessionDate(),r=n[0].other.appointmentDate,t.next=14,e.getAppointments(r);case 14:e.appointments=t.sent,e.setDate(r),e.runOutDate=n[0].other.runOutDate?new Date(n[0].other.runOutDate):null;case 17:case"end":return t.stop()}}),t)})))()},methods:{getAppointments:function(e){return Ct["a"].getDailiyAppointments(Nt["b"].toStandardHisFormat(e))},getAppointmentLimit:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Vt["b"].appointmentLimit();case 2:n=t.sent,n&&(e.appointmentLimit=n);case 4:case"end":return t.stop()}}),t)})))()},getClinicHolidays:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Vt["b"].clinicHolidays();case 2:n=t.sent,n&&(e.clinicHolidays=n.split(","));case 4:case"end":return t.stop()}}),t)})))()},getClinicDays:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n="",!(e.patientAge>=18)){t.next=7;break}return t.next=4,Vt["b"].adultClinicDays();case 4:n=t.sent,t.next=10;break;case 7:return t.next=9,Vt["b"].peadsClinicDays();case 9:n=t.sent;case 10:n&&(e.clinicDays=n.split(","));case 11:case"end":return t.stop()}}),t)})))()},isDateAvalaible:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getAppointments(e);case 2:if(r=n.sent,!(0!==r.length&&r.length>=t.appointmentLimit)){n.next=9;break}return n.next=6,Object(st["a"])("Appointment limit reached for the selected date ".concat(Nt["b"].toStandardHisDisplayFormat(e)),{header:"APPOINTMENT LIMIT REACHED",cancelBtnLabel:"Proceed with Selected Date",confirmBtnLabel:"Select Another Date"});case 6:if(a=n.sent,!a){n.next=9;break}return n.abrupt("return",!1);case 9:if(!t.clinicHolidays.includes(Nt["b"].toStandardHisFormat(e))){n.next=15;break}return n.next=12,Object(st["a"])("Selected date is a clinic holiday, do you want to set an appointment?");case 12:if(o=n.sent,o){n.next=15;break}return n.abrupt("return",!1);case 15:if(i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=i[Tt()(e).day()],t.clinicDays.includes(c)){n.next=23;break}return n.next=20,Object(st["a"])("The selected date ".concat(Nt["b"].toStandardHisDisplayFormat(e)," is not a clinic day. Do you want to proceed with this date?"));case 20:if(s=n.sent,s){n.next=23;break}return n.abrupt("return",!1);case 23:return t.appointments=r,n.abrupt("return",!0);case 25:case"end":return n.stop()}}),n)})))()},setDate:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.startDate=new Date(e),r=t.$refs.calendar,n.next=4,r.move(t.startDate);case 4:return n.next=6,r.focusDate(t.startDate);case 6:case"end":return n.stop()}}),n)})))()},dayClicked:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.t0=!e.isDisabled,!n.t0){n.next=5;break}return n.next=4,t.isDateAvalaible(e.id);case 4:n.t0=n.sent;case 5:if(n.t1=n.t0,!n.t1){n.next=8;break}t.setDate(e.id);case 8:case"end":return n.stop()}}),n)})))()}},computed:{showMedicationRunoutDate:function(){var e,t;return"boolean"!==typeof(null===(e=this.config)||void 0===e?void 0:e.hideRunoutDate)||!(null!==(t=this.config)&&void 0!==t&&t.hideRunoutDate)},aDate:function(){return Nt["b"].toStandardHisDisplayFormat(this.startDate)},rDate:function(){return Nt["b"].toStandardHisDisplayFormat(this.runOutDate)},cDate:function(){return Nt["b"].toStandardHisFormat(this.startDate)},attributes:function(){return[{highlight:!0,dates:this.aDate}]}}});n("5ba0");const Rt=f()(It,[["render",yt]]);var St=Rt,Pt=Object(r["withScopeId"])("data-v-6ce7f934");Object(r["pushScopeId"])("data-v-6ce7f934");var At={style:{}};Object(r["popScopeId"])();var Et=Pt((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-text"),s=Object(r["resolveComponent"])("ion-label"),u=Object(r["resolveComponent"])("ion-chip"),l=Object(r["resolveComponent"])("ion-col"),d=Object(r["resolveComponent"])("ion-row"),p=Object(r["resolveComponent"])("ion-item"),b=Object(r["resolveComponent"])("ion-list"),f=Object(r["resolveComponent"])("ion-checkbox"),m=Object(r["resolveComponent"])("ion-grid"),h=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])("div",null,[Object(r["createVNode"])(h,{showFull:!e.showKeyboard,style:{padding:"0"}},{default:Pt((function(){return[Object(r["createVNode"])(m,null,{default:Pt((function(){return[Object(r["createVNode"])(d,null,{default:Pt((function(){return[Object(r["createVNode"])(l,{size:"12"},{default:Pt((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.checkedItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:n},[Object(r["createVNode"])(u,{color:"danger",onClick:function(n){return e.uncheck(t)}},{default:Pt((function(){return[Object(r["createVNode"])(s,null,{default:Pt((function(){return[Object(r["createVNode"])(c,{class:"his-md-text"},{default:Pt((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick"])])})),128))]})),_:1})]})),_:1}),Object(r["createVNode"])(d,null,{default:Pt((function(){return[Object(r["createVNode"])(l,{size:"4"},{default:Pt((function(){return[Object(r["createVNode"])(b,{style:{overflowY:"auto",height:"80vh",margin:0}},{default:Pt((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:n,onClick:function(n){return e.getSpecificComplaints(t.value)},detail:!0,color:e.ActiveCategory===t.label?"light":""},{default:Pt((function(){return[Object(r["createVNode"])(s,null,{default:Pt((function(){return[Object(r["createVNode"])(c,{class:"his-md-text"},{default:Pt((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1024)]})),_:2},1032,["onClick","color"])})),128))]})),_:1})]})),_:1}),e.ActiveCategory?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:0,style:{overflowY:"auto",height:"78vh"}},{default:Pt((function(){return[Object(r["createVNode"])("div",At,[Object(r["createVNode"])(b,{class:"view-port-content"},{default:Pt((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.activeCategoryItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:n,color:t.isChecked?"light":""},{default:Pt((function(){return[Object(r["createVNode"])(s,null,{default:Pt((function(){return[Object(r["createVNode"])(c,{class:"his-md-text"},{default:Pt((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1024),Object(r["createVNode"])(f,{slot:"end",modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e},onIonChange:function(n){return e.onselect(t,n)},disabled:null===t||void 0===t?void 0:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]})),_:2},1032,["color"])})),128))]})),_:1})])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1},8,["showFull"])])})),Bt=n("5530"),Ft=(n("b0c0"),n("331e")),Lt=Object(r["defineComponent"])({components:{IonCheckbox:l["k"],IonText:l["R"],IonChip:l["l"]},name:"HisComplaintsPicker",mixins:[M["a"]],data:function(){return{complaintsList:{},ActiveCategory:""}},methods:{onselect:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n.$nextTick(Object(c["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=Object(Bt["a"])({},e),a.isChecked=t.target.checked,!n.onValue||!a.isChecked){r.next=8;break}return r.next=5,n.onValue(a);case 5:if(o=r.sent,o){r.next=8;break}return r.abrupt("return",t.target.checked=!1);case 8:if(!n.onValueUpdate){r.next=12;break}return r.next=11,n.onValueUpdate(Object(Bt["a"])({},n.complaintsList),a);case 11:n.complaintsList=r.sent;case 12:n.$emit("onValue",n.getChecked(n.complaintsList));case 13:case"end":return r.stop()}}),r)}))));case 1:case"end":return r.stop()}}),r)})))()},getSpecificComplaints:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e in t.complaintsList){n.next=5;break}return n.next=3,Ft["a"].getComplaintsList(e);case 3:r=n.sent,t.complaintsList[e]=t.mapListToOptions(r,e);case 5:t.ActiveCategory=e;case 6:case"end":return n.stop()}}),n)})))()},mapListToOptions:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(d["isEmpty"])(e)?[]:e.map((function(e){var n={label:e.name,value:e.name,isChecked:!1,other:e};return t&&(n.other.parent=t),n}))},uncheck:function(e){this.complaintsList[e.other.parent].forEach((function(t){t.label===e.label&&(t.isChecked=!1)}))},getChecked:function(e){var t=[];for(var n in e)t.push.apply(t,Object(L["a"])(e[n].filter((function(e){return e.isChecked}))));return t}},computed:{checkedItems:function(){return this.getChecked(this.complaintsList)},activeCategoryItems:function(){return this.complaintsList[this.ActiveCategory]}},watch:{clear:function(){for(var e in this.complaintsList)this.complaintsList[e]=this.complaintsList[e].map((function(e){return e.isChecked=!1,e}))}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,Ft["a"].getComplaintsList("Presenting complaint group");case 3:n=t.sent,e.listData=e.mapListToOptions(n),e.$emit("onValue",e.getChecked(e.complaintsList));case 6:case"end":return t.stop()}}),t)})))()}});n("341d");const Mt=f()(Lt,[["render",Et],["__scopeId","data-v-6ce7f934"]]);var Ht=Mt,Ut=Object(r["withScopeId"])("data-v-bbb8ce9a");Object(r["pushScopeId"])("data-v-bbb8ce9a");var qt={class:"view-port-content"},Gt=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",null,[Object(r["createVNode"])("b",null,"Total Holidays Set")])],-1);Object(r["popScopeId"])();var zt=Ut((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("DatePicker"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-row"),l=Object(r["resolveComponent"])("ion-grid"),d=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:Ut((function(){return[Object(r["createVNode"])("div",qt,[Object(r["createVNode"])(l,null,{default:Ut((function(){return[Object(r["createVNode"])(u,null,{default:Ut((function(){return[Object(r["createVNode"])(s,{size:"9"},{default:Ut((function(){return[Object(r["createVNode"])(c,{"is-expanded":"",attributes:e.attributes,"select-attribute":e.selectAttribute,onDayclick:e.onDayClick},null,8,["attributes","select-attribute","onDayclick"])]})),_:1}),Object(r["createVNode"])(s,{size:"3"},{default:Ut((function(){return[Object(r["createVNode"])("table",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",null,[Gt,Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.totalDays),1)])])])])]})),_:1})]})),_:1})]})),_:1})])]})),_:1})})),Yt=(n("a15b"),n("c740"),n("a434"),Object(r["defineComponent"])({components:{DatePicker:xt["b"],ViewPort:u["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"]},mixins:[s["a"]],watch:{days:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(Object(d["isEmpty"])(e)){n.next=9;break}if(r=e.map((function(e){return e.date})).join(),!t.onValue){n.next=8;break}return n.next=5,t.onValue(r,t);case 5:if(a=n.sent,a){n.next=8;break}return n.abrupt("return");case 8:t.$emit("onValue",{label:r,value:r});case 9:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},data:function(){return{days:[],selectAttribute:{dot:!0}}},computed:{attributes:function(){return this.days.map((function(e){return{highlight:!0,dates:e.date}}))},totalDays:function(){return this.days.length}},methods:{onDayClick:function(e){var t=this.days.findIndex((function(t){return t.id===e.id}));t>=0?this.days.splice(t,1):this.days.push({id:e.id,date:Nt["b"].toStandardHisFormat(e.date)})}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.defaultValue){t.next=5;break}return t.next=3,e.defaultValue();case 3:n=t.sent,e.days=n.split(",").map((function(e){return{id:e,date:e}}));case 5:case"end":return t.stop()}}),t)})))()},activated:function(){this.$emit("onFieldActivated",this)}}));n("7d9b");const Wt=f()(Yt,[["render",zt],["__scopeId","data-v-bbb8ce9a"]]);var $t=Wt,Kt=Object(r["withScopeId"])("data-v-2e36360d");Object(r["pushScopeId"])("data-v-2e36360d");var Jt={class:"view-port-content"};Object(r["popScopeId"])();var Xt=Kt((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("list"),s=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(s,null,{default:Kt((function(){return[Object(r["createVNode"])("div",Jt,[Object(r["createVNode"])(c,{listData:e.listData},null,8,["listData"])])]})),_:1})})),Qt=Object(r["withScopeId"])("data-v-5ec16ace"),Zt=Qt((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-label"),s=Object(r["resolveComponent"])("ion-item"),u=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-row"),d=Object(r["resolveComponent"])("ion-list");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:Qt((function(){return[Object(r["createVNode"])(l,null,{default:Qt((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.multiViewSummaryItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:n,size:e.singleView?12:6},{default:Qt((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{class:"his-sm-text",key:t},{default:Qt((function(){return[Object(r["createVNode"])(c,null,{default:Qt((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024),Object(r["createVNode"])(c,{class:"lb-value",innerHTML:e.value,slot:"end"},null,8,["innerHTML"])]})),_:2},1024)})),128))]})),_:2},1032,["size"])})),128))]})),_:1})]})),_:1})})),en=Object(r["defineComponent"])({props:{listData:{type:Object}},data:function(){return{splitFactor:10}},components:{IonList:l["y"],IonLabel:l["x"],IonItem:l["w"]},computed:{singleView:function(){var e,t,n=null===(e=this.listData)||void 0===e?void 0:e.length;return n=null===(t=this.listData)||void 0===t?void 0:t.length,!(n>this.splitFactor)},multiViewSummaryItems:function(){var e,t,n=null===(e=this.listData)||void 0===e?void 0:e.length,r=this.singleView?null===(t=this.listData)||void 0===t?void 0:t.length:Math.ceil(n/2);return Object(d["chunk"])(this.listData,r)}}});n("e2d9");const tn=f()(en,[["render",Zt],["__scopeId","data-v-5ec16ace"]]);var nn=tn,rn=Object(r["defineComponent"])({components:{ViewPort:u["a"],list:nn},mixins:[s["a"]],data:function(){return{listData:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("onFieldActivated",e),e.listData=e.options(e.fdata,e.cdata);case 2:case"end":return t.stop()}}),t)})))()}});n("958b");const an=f()(rn,[["render",Xt],["__scopeId","data-v-2e36360d"]]);var on=an,cn=Object(r["withScopeId"])("data-v-7d80ac9d");Object(r["pushScopeId"])("data-v-7d80ac9d");var sn={class:"primary-info"},un={class:"his-md-text"},ln={class:"view-port-content"},dn={class:"his-lg-text",style:{marginLeft:"3%"}},pn={class:"his-md-text secondary-info"};Object(r["popScopeId"])();var bn=cn((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(c,null,{default:cn((function(){return[Object(r["createVNode"])("div",sn,[Object(r["createVNode"])("ul",un,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.titleItems,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("li",{key:t},[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.label)+":",1),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.value),1)])})),128))])]),Object(r["createVNode"])("div",ln,[Object(r["createVNode"])("b",dn,Object(r["toDisplayString"])(e.config.title),1),Object(r["createVNode"])("ul",pn,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.bodyItems,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("li",{key:t},Object(r["toDisplayString"])(e.value),1)})),128))])])]})),_:1})})),fn=Object(r["defineComponent"])({components:{ViewPort:u["a"]},mixins:[s["a"]],data:function(){return{listData:[]}},computed:{titleItems:function(){return this.listData.filter((function(e){var t;return"title-section"===(null===(t=e.other)||void 0===t?void 0:t.type)}))},bodyItems:function(){return this.listData.filter((function(e){var t;return"title-section"!=(null===e||void 0===e||null===(t=e.other)||void 0===t?void 0:t.type)}))}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("onFieldActivated",e),e.listData=e.options(e.fdata);case 2:case"end":return t.stop()}}),t)})))()}});n("0ac8");const mn=f()(fn,[["render",bn],["__scopeId","data-v-7d80ac9d"]]);var hn=mn,gn=Object(r["withScopeId"])("data-v-7f6d880a");Object(r["pushScopeId"])("data-v-7f6d880a");var vn={class:"view-port-content"},On={class:"his-lg-text"},jn={class:"his-lg-text"},_n={class:"his-md-text his-card",style:{textAlign:"left"}};Object(r["popScopeId"])();var wn=gn((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-col"),s=Object(r["resolveComponent"])("ion-row"),u=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("ion-grid"),d=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:gn((function(){return[Object(r["createVNode"])("div",vn,[Object(r["createVNode"])(l,null,{default:gn((function(){return[Object(r["createVNode"])(s,null,{default:gn((function(){return[Object(r["createVNode"])(c,{size:"8"},{default:gn((function(){var t,n;return[Object(r["createVNode"])("b",On,Object(r["toDisplayString"])((null===(t=e.config)||void 0===t||null===(n=t.titles)||void 0===n?void 0:n.label)||"Medication"),1)]})),_:1}),Object(r["createVNode"])(c,{size:"4"},{default:gn((function(){var t,n;return[Object(r["createVNode"])("b",jn,Object(r["toDisplayString"])((null===(t=e.config)||void 0===t||null===(n=t.titles)||void 0===n?void 0:n.value)||"Amount Remaining"),1)]})),_:1})]})),_:1}),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:n},{default:gn((function(){return[Object(r["createVNode"])(c,{size:"8"},{default:gn((function(){return[Object(r["createVNode"])("div",_n,Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(c,{size:"4"},{default:gn((function(){return[Object(r["createVNode"])(u,{value:t.value,onClick:function(n){return e.launchKeyPad(t)},class:"his-card his-md-text"},null,8,["value","onClick"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})])]})),_:1})})),kn=Object(r["defineComponent"])({components:{ViewPort:u["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"],IonInput:l["v"]},mixins:[s["a"]],data:function(){return{listData:[]}},watch:{clear:{handler:function(){this.listData=this.listData.filter((function(e){return e.value="",!0}))},immediate:!0},listData:{handler:function(){this.$emit("onValue",this.listData)},deep:!0,immediate:!0}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata,e.cdata,e.listData);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{launchKeyPad:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["cb"].create({component:Ie["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:e.label,preset:e.value,strictNumbers:!0,onKeyPress:function(t){e.value=t}}});case 2:n=t.sent,n.present();case 4:case"end":return t.stop()}}),t)})))()}}});n("a542");const yn=f()(kn,[["render",wn],["__scopeId","data-v-7f6d880a"]]);var xn=yn,Nn=Object(r["withScopeId"])("data-v-75a49293");Object(r["pushScopeId"])("data-v-75a49293");var Cn={class:"view-port-content"},Vn={class:"his-sm-text"},Dn=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"Accession #"),Object(r["createVNode"])("th",null,"Test Name"),Object(r["createVNode"])("th",null,"Specimen"),Object(r["createVNode"])("th",null,"Ordered"),Object(r["createVNode"])("th",null,"Result"),Object(r["createVNode"])("th",null,"Released"),Object(r["createVNode"])("th",null,"Given")],-1),Tn=Object(r["createVNode"])("br",null,null,-1);Object(r["popScopeId"])();var In=Nn((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(s,null,{default:Nn((function(){return[Object(r["createVNode"])("div",Cn,[Object(r["createVNode"])("table",Vn,[Dn,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.rows,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",null,[Object(r["createVNode"])(c,{color:"light",fill:"none",onClick:function(n){return e.printOrder(t)}},{default:Nn((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.accession_number),1)]})),_:2},1032,["onClick"])]),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.test_name),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.specimen),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.ordered),1),Object(r["createVNode"])("td",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.result,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:t},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e)+" ",1),Tn])})),128))]),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.released),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("span",{style:"color: ".concat("Yes"===t.result_given?"green;":"black;")},Object(r["toDisplayString"])(t.result_given),5)])])})),128))])])]})),_:1})})),Rn=n("c4e4"),Sn=Object(r["defineComponent"])({components:{ViewPort:u["a"],IonButton:l["d"]},mixins:[s["a"]],data:function(){return{HisDate:Nt["b"],rows:[]}},methods:{printOrder:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("function"!==typeof(null===(r=t.config)||void 0===r?void 0:r.printOrder)){n.next=5;break}return n.next=3,Object(st["a"])("Do you want to print order with accession number ".concat(e.accession_number,"?"));case 3:a=n.sent,a&&t.config.printOrder(e.id);case 5:case"end":return n.stop()}}),n)})))()},formatOrders:function(e){return e.map((function(e){return{id:e.order_id,encounter_id:e.encounter_id,result_given:e.result_given,accession_number:e.accession_number,test_name:e.tests[0].name,specimen:e.specimen.name,ordered:Nt["b"].toStandardHisDisplayFormat(e.order_date),result:[],release:""}}))},launchOrderSelection:function(){var e=arguments,t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:null,n.next=3,l["cb"].create({component:Rn["a"],backdropDismiss:!1,cssClass:"large-modal",componentProps:{testFilters:r}});case 3:return a=n.sent,a.present(),n.next=7,a.onDidDismiss();case 7:o=n.sent,i=o.data,Object(d["isEmpty"])(i)||(t.rows=[].concat(Object(L["a"])(t.formatOrders(i)),Object(L["a"])(t.rows)));case 10:case"end":return n.stop()}}),n)})))()}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:n=t.sent,r=n[0].other.values,e.rows=r.map((function(e){return e.id=e.order_id,e.ordered&&(e.ordered=Nt["b"].toStandardHisDisplayFormat(e.ordered)),e.released&&(e.released=Nt["b"].toStandardHisDisplayFormat(e.released)),e}));case 6:case"end":return t.stop()}}),t)})))()}});n("8675");const Pn=f()(Sn,[["render",In],["__scopeId","data-v-75a49293"]]);var An=Pn,En=Object(r["withScopeId"])("data-v-59a29dbb");Object(r["pushScopeId"])("data-v-59a29dbb");var Bn={class:"view-port-content"},Fn={key:0,class:"his-card history"},Ln={class:"his-table"},Mn=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null," Medication"),Object(r["createVNode"])("th",null," Date"),Object(r["createVNode"])("th",null," Amount dispensed ")],-1),Hn={key:1,class:"prescription-tab"},Un={class:"prescription-table-section his-card"},qn={class:"his-table"},Gn=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null," Medication"),Object(r["createVNode"])("th",null," Amount in stock"),Object(r["createVNode"])("th",null," Amount needed"),Object(r["createVNode"])("th",null," Amount dispensed "),Object(r["createVNode"])("th",null," Reset ")],-1),zn={class:"barcode-section"};Object(r["popScopeId"])();var Yn=En((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("nav-button"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("reset-button"),d=Object(r["resolveComponent"])("barcode"),p=Object(r["resolveComponent"])("ion-row"),b=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(b,null,{default:En((function(){return[Object(r["createVNode"])("div",Bn,[Object(r["createVNode"])(p,null,{default:En((function(){return[Object(r["createVNode"])(s,{size:"2"},{default:En((function(){return[Object(r["createVNode"])(c,{onClick:t[1]||(t[1]=function(t){return e.tab="prescribe"}),isActive:"prescribe"===e.tab,image:"prescription/rx",label:"Prescribed"},null,8,["isActive"]),Object(r["createVNode"])(c,{onClick:t[2]||(t[2]=function(t){return e.tab="history"}),isActive:"history"===e.tab,image:"prescription/history",label:"History"},null,8,["isActive"])]})),_:1}),Object(r["createVNode"])(s,{size:"10"},{default:En((function(){return["history"===e.tab?(Object(r["openBlock"])(),Object(r["createBlock"])("div",Fn,[Object(r["createVNode"])("table",Ln,[Mn,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.medicationHistory,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:t},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.medication),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.date),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.amount),1)])})),128))])])):Object(r["createCommentVNode"])("",!0),"prescribe"===e.tab?(Object(r["openBlock"])(),Object(r["createBlock"])("div",Hn,[Object(r["createVNode"])("div",Un,[Object(r["createVNode"])("table",qn,[Gn,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.label),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.isStockManagementEnabled&&t.other.available_stock?t.other.available_stock:"-"),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.other.amount_needed),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(u,{disabled:t.value>0,value:t.value,onClick:function(n){return t.value<=0?e.launchDispenser(t):null},class:"dosage-input"},null,8,["disabled","value","onClick"])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(l,{disabled:t.value<=0,onClick:function(n){return t.value>0?e.onReset(t):null}},null,8,["disabled","onClick"])])])})),128))])]),Object(r["createVNode"])("div",zn,[Object(r["createVNode"])(d,{onOnScan:e.onScan},null,8,["onOnScan"])])])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])]})),_:1})})),Wn=(n("3ca3"),n("efaf")),$n=Object(r["withScopeId"])("data-v-7970cd10"),Kn=$n((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("center");return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:e.state},[Object(r["createVNode"])(c,null,{default:$n((function(){return[Object(r["createVNode"])("img",{src:e.icon},null,8,["src"])]})),_:1})],2)})),Jn=Object(r["defineComponent"])({props:{label:{type:String,required:!0},disabled:{type:Boolean}},computed:{state:function(){return this.disabled?"disabled-btn":"clickable"},icon:function(){return"assets/images/reset.png"}}});n("de49");const Xn=f()(Jn,[["render",Kn],["__scopeId","data-v-7970cd10"]]);var Qn=Xn,Zn=Object(r["withScopeId"])("data-v-7729d4c8");Object(r["pushScopeId"])("data-v-7729d4c8");var er={colspan:"6"},tr=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"Total tab(s) needed "),Object(r["createVNode"])("th",{colspan:"2"}," Available stock "),Object(r["createVNode"])("th",{colspan:"2"}," Dispensed "),Object(r["createVNode"])("th")],-1),nr=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th"),Object(r["createVNode"])("th",null," Pack size "),Object(r["createVNode"])("th",null," Packs "),Object(r["createVNode"])("th",null," Total Tab(s)"),Object(r["createVNode"])("th",null," Packs "),Object(r["createVNode"])("th")],-1),rr={class:"btn-list"},ar=Object(r["createTextVNode"])(" + "),or=Object(r["createTextVNode"])(" - "),ir=Object(r["createTextVNode"])(" Close "),cr=Object(r["createTextVNode"])(" Dispense ");Object(r["popScopeId"])();var sr=Zn((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-content"),u=Object(r["resolveComponent"])("ion-toolbar"),l=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(s,null,{default:Zn((function(){return[Object(r["createVNode"])("table",null,[Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",er,Object(r["toDisplayString"])(e.drugName),1)]),tr,nr]),Object(r["createVNode"])("tbody",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",{rowspan:e.amountNeededRowSpan},Object(r["toDisplayString"])(e.tabsNeeded)+" tab(s) ",9,["rowspan"])]),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("td",{key:t,class:t>=2?"input-field":"his-md-text"},Object(r["toDisplayString"])(e),3)})),128)),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("ul",rr,[Object(r["createVNode"])("li",null,[Object(r["createVNode"])(c,{onClick:function(t){return e.incrementAmount(n)},class:"dispense-btn",size:"large"},{default:Zn((function(){return[ar]})),_:1},8,["onClick"])]),Object(r["createVNode"])("li",null,[Object(r["createVNode"])(c,{onClick:function(t){return e.decrementAmount(n)},class:"dispense-btn",size:"large"},{default:Zn((function(){return[or]})),_:1},8,["onClick"])])])])])})),128))])])]})),_:1}),Object(r["createVNode"])(l,null,{default:Zn((function(){return[Object(r["createVNode"])(u,null,{default:Zn((function(){return[Object(r["createVNode"])(c,{onClick:e.onClose,color:"danger",size:"large",slot:"end"},{default:Zn((function(){return[ir]})),_:1},8,["onClick"]),Object(r["createVNode"])(c,{onClick:t[1]||(t[1]=function(t){return e.onDispense(e.dispensedValues)}),disabled:e.totalTabs<=0,color:"success",size:"large",slot:"end"},{default:Zn((function(){return[cr]})),_:1},8,["disabled"])]})),_:1})]})),_:1})],64)})),ur=Object(r["defineComponent"])({data:function(){return{listData:[],tabsIndex:2,packsIndex:3}},props:{drugName:{type:String,required:!0},tabsNeeded:{type:String,required:!0},items:{type:Array,required:!0},onDispense:{type:Function,required:!0}},computed:{dispensedValues:function(){var e=this;return this.listData.filter((function(t){return t[e.tabsIndex]>0})).map((function(t){return[t[e.tabsIndex],t[e.packsIndex]]}))},amountNeededRowSpan:function(){return this.listData.length+1}},watch:{items:{handler:function(e){e&&(this.listData=Object(L["a"])(e))},deep:!0,immediate:!0}},methods:{onClose:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["cb"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()},incrementAmount:function(e){var t=Object(ze["a"])(this.listData[e],4),n=t[0],r=(t[1],t[2]),a=t[3],o=n+r,i=a+1;this.listData[e][2]=o,this.listData[e][3]=i},decrementAmount:function(e){var t=Object(ze["a"])(this.listData[e],4),n=t[0],r=(t[1],t[2]),a=t[3],o=a-1;if(o>=0){var i=r-n;this.listData[e][2]=i,this.listData[e][3]=o}}}});n("1b4f");const lr=f()(ur,[["render",sr],["__scopeId","data-v-7729d4c8"]]);var dr=lr,pr=Object(r["defineComponent"])({components:{ViewPort:u["a"],Barcode:Wn["a"],NavButton:ct,ResetButton:Qn,IonRow:l["J"],IonCol:l["m"]},mixins:[s["a"]],data:function(){return{tab:"prescribe",isStockManagementEnabled:!1,listData:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,Vt["b"].drugManagementEnabled();case 3:return e.isStockManagementEnabled=t.sent,t.next=6,e.options(e.fdata);case 6:e.listData=t.sent;case 7:case"end":return t.stop()}}),t)})))()},computed:{medicationHistory:function(){return this.config&&this.config.medicationHistory?this.config.medicationHistory:[]}},methods:{onScan:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.split("-"),a=Object(ze["a"])(r,2),o=a[0],i=a[1],s=t.listData.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){var r,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.other.drug_id!==parseInt(o)){e.next=7;break}return r=parseInt(n.value.toString()),a=parseInt(i),e.next=5,t.updateOnValue(n,a,[],!0);case 5:c=e.sent,c&&(n.value=a+r);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.next=4,Promise.all(s);case 4:t.listData=n.sent;case 5:case"end":return n.stop()}}),n)})))()},onReset:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.updateOnValue(e,-1);case 2:case"end":return n.stop()}}),n)})))()},updateOnValue:function(e,t){var n=arguments,r=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var o,i,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=n.length>2&&void 0!==n[2]?n[2]:[],i=n.length>3&&void 0!==n[3]&&n[3],!r.onValue){a.next=8;break}return a.next=5,r.onValue({label:e.label,other:Object(Bt["a"])({dispenses:o},e.other),value:t},i);case 5:if(c=a.sent,c){a.next=8;break}return a.abrupt("return",!1);case 8:if(e.value=t<0?0:t,r.$emit("onValue",e),!r.onValueUpdate){a.next=14;break}return a.next=13,r.onValueUpdate(e,r.listData);case 13:r.listData=a.sent;case 14:return a.abrupt("return",!0);case 15:case"end":return a.stop()}}),a)})))()},launchDispenser:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:dr,backdropDismiss:!1,cssClass:"custom-modal",componentProps:{drugName:e.label,tabsNeeded:e.other.amount_needed,items:e.other.pack_sizes,onDispense:function(){var n=Object(c["a"])(regeneratorRuntime.mark((function n(r){var a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=0,o=r.reduce((function(e,t){return e+t[a]}),0),n.next=4,t.updateOnValue(e,o,r);case 4:if(i=n.sent,!i){n.next=8;break}return n.next=8,l["cb"].dismiss({});case 8:case"end":return n.stop()}}),n)})));function r(e){return n.apply(this,arguments)}return r}()}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()}}});n("ca96");const br=f()(pr,[["render",Yn],["__scopeId","data-v-59a29dbb"]]);var fr=br,mr=Object(r["withScopeId"])("data-v-a0c7510c");Object(r["pushScopeId"])("data-v-a0c7510c");var hr={class:"view-port-content"},gr={key:0,style:{textAlign:"center"}},vr={key:1,class:"his-sm-text his-table"},Or=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"State"),Object(r["createVNode"])("th",null,"State Date"),Object(r["createVNode"])("th",null,"End Date"),Object(r["createVNode"])("th",null,"Actions")],-1);Object(r["popScopeId"])();var jr=mr((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-label"),s=Object(r["resolveComponent"])("ion-item"),u=Object(r["resolveComponent"])("ion-list"),l=Object(r["resolveComponent"])("ion-col"),d=Object(r["resolveComponent"])("ion-button"),p=Object(r["resolveComponent"])("ion-row"),b=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(b,null,{default:mr((function(){return[Object(r["createVNode"])("div",hr,[Object(r["createVNode"])(p,null,{default:mr((function(){return[Object(r["createVNode"])(l,{size:"4"},{default:mr((function(){return[Object(r["createVNode"])(u,null,{default:mr((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{class:"his-sm-text",color:t.label===e.activeProgram.label?"primary":"",key:n,onClick:function(n){return e.onselect(t)},detail:""},{default:mr((function(){return[Object(r["createVNode"])(c,null,{default:mr((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["color","onClick"])})),128))]})),_:1})]})),_:1}),Object(r["createVNode"])(l,{size:"8"},{default:mr((function(){return[e.activeProgram.label&&e.states.length<=0?(Object(r["openBlock"])(),Object(r["createBlock"])("h1",gr," Program has no states ")):Object(r["createCommentVNode"])("",!0),e.activeProgram.label&&e.states.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])("table",vr,[Or,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.states,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.name),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.startDate),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.endDate||"N/A"),1),Object(r["createVNode"])("td",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.actions,(function(t,a){return Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:a,color:t.color,onClick:function(r){return t.action(e.activeProgram,n)}},{default:mr((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.name),1)]})),_:2},1032,["color","onClick"])})),128))])])})),128))])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])]})),_:1})})),_r=Object(r["defineComponent"])({name:"HisSelect",components:{ViewPort:u["a"],IonCol:l["m"],IonRow:l["J"],IonLabel:l["x"],IonList:l["y"],IonButton:l["d"],IonItem:l["w"]},mixins:[s["a"]],watch:{clear:function(e){e&&(this.activeProgram={},this.$emit("onClear"))}},data:function(){return{listData:[],activeProgram:{}}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()},computed:{states:function(){return Object(d["isEmpty"])(this.activeProgram)?[]:this.activeProgram.other.programStates}},methods:{formatDate:function(e){return e?Nt["b"].toStandardHisDisplayFormat(e):"N/A"},onselect:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.activeProgram=e,!t.onValue){n.next=8;break}return n.next=4,t.onValue(e,t);case 4:if(r=n.sent,r){n.next=8;break}return t.activeProgram={},n.abrupt("return");case 8:t.$emit("onValue",e);case 9:case"end":return n.stop()}}),n)})))()}}});n("4445");const wr=f()(_r,[["render",jr],["__scopeId","data-v-a0c7510c"]]);var kr=wr,yr=Object(r["withScopeId"])("data-v-eb25cc2a");Object(r["pushScopeId"])("data-v-eb25cc2a");var xr={class:"view-port-content"},Nr=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",null,[Object(r["createVNode"])("b",null,"Appointment(s)")])],-1);Object(r["popScopeId"])();var Cr=yr((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("DatePicker"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-row"),l=Object(r["resolveComponent"])("ion-grid"),d=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:yr((function(){return[Object(r["createVNode"])("div",xr,[Object(r["createVNode"])(l,null,{default:yr((function(){return[Object(r["createVNode"])(u,null,{default:yr((function(){return[Object(r["createVNode"])(s,{size:"9"},{default:yr((function(){return[Object(r["createVNode"])(c,{"is-expanded":"",modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.date=t}),"max-date":e.maxDate,class:"custom-calendar max-w-full"},null,8,["modelValue","max-date"])]})),_:1}),Object(r["createVNode"])(s,{size:"3"},{default:yr((function(){return[Object(r["createVNode"])("table",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",null,[Nr,Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.appointmentCounter),1)])])])])]})),_:1})]})),_:1})]})),_:1})])]})),_:1})})),Vr=Object(r["defineComponent"])({components:{DatePicker:xt["b"],ViewPort:u["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"]},mixins:[s["a"]],watch:{date:{handler:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=9;break}if(r=Nt["b"].toStandardHisFormat(e),!t.onValue){n.next=8;break}return n.next=5,t.onValue(r,t);case 5:if(a=n.sent,a){n.next=8;break}return n.abrupt("return");case 8:t.$emit("onValue",r);case 9:case"end":return n.stop()}}),n)})))()},immediate:!0}},data:function(){return{date:"",minDate:"",appointmentCounter:0}},created:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.date||"function"!==typeof e.defaultValue){t.next=4;break}return t.next=3,e.defaultValue();case 3:e.date=t.sent;case 4:case"end":return t.stop()}}),t)})))()},activated:function(){this.$emit("onFieldActivated",this)}});n("e9fc"),n("d8b0");const Dr=f()(Vr,[["render",Cr],["__scopeId","data-v-eb25cc2a"]]);var Tr=Dr,Ir=Object(r["withScopeId"])("data-v-0da69385");Object(r["pushScopeId"])("data-v-0da69385");var Rr={class:"large-card"},Sr={class:"large-card"};Object(r["popScopeId"])();var Pr=Ir((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-img"),s=Object(r["resolveComponent"])("ion-avatar"),u=Object(r["resolveComponent"])("ion-label"),l=Object(r["resolveComponent"])("ion-item"),d=Object(r["resolveComponent"])("ion-list"),p=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-row");return Object(r["openBlock"])(),Object(r["createBlock"])(b,null,{default:Ir((function(){return[Object(r["createVNode"])(p,{size:"5"},{default:Ir((function(){return[Object(r["createVNode"])("div",Rr,[Object(r["createVNode"])("h2",null,Object(r["toDisplayString"])(e.foundRecordsTitle)+" ("+Object(r["toDisplayString"])(e.listData.length)+"): ",1),Object(r["createVNode"])(d,null,{default:Ir((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(l,{class:"his-sm-text",button:"",key:n,detail:!0,color:t.value===e.selectedResult.value?"lightblue":"",onClick:function(n){return e.onSelect(t)}},{default:Ir((function(){return[Object(r["createVNode"])(s,null,{default:Ir((function(){return[Object(r["createVNode"])(c,{src:"/assets/images/avatar.svg"})]})),_:1}),Object(r["createVNode"])(u,null,{default:Ir((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["color","onClick"])})),128))]})),_:1})])]})),_:1}),Object(r["createVNode"])(p,{size:"7"},{default:Ir((function(){return[Object(r["createVNode"])("div",Sr,[Object(r["createVNode"])("h3",null,Object(r["toDisplayString"])(e.detailsTitle),1),Object(r["createVNode"])(d,null,{default:Ir((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.patientAttributes,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(l,{class:"his-md-text",key:t,inset:"none"},{default:Ir((function(){return[Object(r["createVNode"])(u,null,{default:Ir((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024),Object(r["createVNode"])(u,{slot:"end"},{default:Ir((function(){return[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.value),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})])]})),_:1})]})),_:1})})),Ar=Object(r["defineComponent"])({mixins:[s["a"]],components:{IonLabel:l["x"],IonAvatar:l["b"],IonRow:l["J"],IonImg:l["s"],IonCol:l["m"],IonList:l["y"],IonItem:l["w"]},data:function(){return{listData:[],selectedResult:{}}},computed:{patientAttributes:function(){var e,t,n,r;return!Object(d["isEmpty"])(this.selectedResult)&&Object(d["isArray"])(null===(e=this.selectedResult)||void 0===e||null===(t=e.other)||void 0===t?void 0:t.options)?null===(n=this.selectedResult)||void 0===n||null===(r=n.other)||void 0===r?void 0:r.options.filter((function(e){var t,n;return"function"!==typeof(null===e||void 0===e||null===(t=e.other)||void 0===t?void 0:t.show)||(null===e||void 0===e||null===(n=e.other)||void 0===n?void 0:n.show())})):[]},foundRecordsTitle:function(){var e;return(null===(e=this.config)||void 0===e?void 0:e.foundRecordsTitle)||"Found People"},detailsTitle:function(){var e;return(null===(e=this.config)||void 0===e?void 0:e.detailsTitle)||"Details:"}},methods:{onSelect:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(!t.onValue){n.next=8;break}return n.next=5,t.onValue(e,t);case 5:if(r=n.sent,r){n.next=8;break}return n.abrupt("return");case 8:t.selectedResult=e,t.$emit("onValue",e);case 10:case"end":return n.stop()}}),n)})))()}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata,e);case 3:e.listData=t.sent,e.onSelect(e.listData.length>0?e.listData[0]:{});case 5:case"end":return t.stop()}}),t)})))()}});n("b308");const Er=f()(Ar,[["render",Pr],["__scopeId","data-v-0da69385"]]);var Br=Er,Fr=Object(r["withScopeId"])("data-v-df58f1c2");Object(r["pushScopeId"])("data-v-df58f1c2");var Lr={class:"tool-bar-medium-card"},Mr=Object(r["createTextVNode"])(" Patient "),Hr={class:"his-sm-text"},Ur=Object(r["createTextVNode"])("Name: "),qr=Object(r["createTextVNode"])("Birthdate: "),Gr=Object(r["createTextVNode"])("Home Address: "),zr={class:"his-md-text tool-bar-medium-card"},Yr=Object(r["createTextVNode"])(" Guardian "),Wr={class:"his-sm-text"},$r=Object(r["createTextVNode"])("Name: "),Kr=Object(r["createTextVNode"])("Birthdate: "),Jr=Object(r["createTextVNode"])("Home Address: "),Xr={class:"view-port-content"},Qr=Object(r["createTextVNode"])("Relationship "),Zr=Object(r["createTextVNode"])("Desc ");Object(r["popScopeId"])();var ea=Fr((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("center"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-icon"),l=Object(r["resolveComponent"])("ion-row"),d=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:Fr((function(){return[Object(r["createVNode"])(l,null,{default:Fr((function(){return[Object(r["createVNode"])(s,null,{default:Fr((function(){return[Object(r["createVNode"])("div",Lr,[Object(r["createVNode"])(c,{class:"relation-category",style:{color:"#3880ff"}},{default:Fr((function(){return[Mr]})),_:1}),Object(r["createVNode"])("ul",Hr,[Object(r["createVNode"])("li",null,[Ur,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.name),1)]),Object(r["createVNode"])("li",null,[qr,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.birth_date),1)]),Object(r["createVNode"])("li",null,[Gr,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.patient.home_address),1)])])])]})),_:1}),Object(r["createVNode"])(s,{size:"2"},{default:Fr((function(){return[Object(r["createVNode"])(c,{class:"relation-category fa-rotate-45"},{default:Fr((function(){return[Object(r["createVNode"])(u,{icon:e.resize,style:{fontSize:"3em"}},null,8,["icon"])]})),_:1})]})),_:1}),Object(r["createVNode"])(s,null,{default:Fr((function(){return[Object(r["createVNode"])("div",zr,[Object(r["createVNode"])(c,{class:"relation-category",style:{color:"#3dc2ff"}},{default:Fr((function(){return[Yr]})),_:1}),Object(r["createVNode"])("ul",Wr,[Object(r["createVNode"])("li",null,[$r,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.guardian.name),1)]),Object(r["createVNode"])("li",null,[Kr,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.guardian.birth_date),1)]),Object(r["createVNode"])("li",null,[Jr,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.guardian.home_address),1)])])])]})),_:1})]})),_:1}),Object(r["createVNode"])("div",Xr,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.relationList,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:n},{default:Fr((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{size:"6",key:n},{default:Fr((function(){return[Object(r["createVNode"])("div",{class:["his-md-text","his-card clickable ".concat(e.selected===t.label?"active-card-color":"")],onClick:function(n){return e.onClick(t)}},[Object(r["createVNode"])("ul",null,[Object(r["createVNode"])("li",null,[Qr,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.label),1)]),Object(r["createVNode"])("li",null,[Zr,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.value),1)])])],10,["onClick"])]})),_:2},1024)})),128))]})),_:2},1024)})),128))])]})),_:1})})),ta=n("ff79"),na=Object(r["defineComponent"])({mixins:[s["a"]],components:{ViewPort:u["a"],IonCol:l["m"],IonRow:l["J"],IonIcon:l["r"]},data:function(){return{patient:{},guardian:{},selected:"",listData:[]}},setup:function(){return{resize:ta["R"]}},computed:{relationList:function(){return ue["a"].convertArrayToTurples(this.listData,2)}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{onClick:function(e){this.selected=e.label,this.$emit("onValue",e)}}});n("70b0");const ra=f()(na,[["render",ea],["__scopeId","data-v-df58f1c2"]]);var aa=ra,oa=Object(r["withScopeId"])("data-v-46eb461a");Object(r["pushScopeId"])("data-v-46eb461a");var ia=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"   "),Object(r["createVNode"])("th",null," Name "),Object(r["createVNode"])("th",null," New Number "),Object(r["createVNode"])("th",null," Old Number ")],-1),ca={class:"f-number f-active-col"},sa={class:"f-number f-inactive-col"};Object(r["popScopeId"])();var ua=oa((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(c,null,{default:oa((function(){return[Object(r["createVNode"])("table",null,[ia,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:t},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.label),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.value),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",ca,Object(r["toDisplayString"])(e.other.activeNumber),1)]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])("div",sa,Object(r["toDisplayString"])(e.other.dormantNumber),1)])])})),128))])]})),_:1})})),la=Object(r["defineComponent"])({components:{ViewPort:u["a"]},mixins:[s["a"]],data:function(){return{listData:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata,e.cdata);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()}});n("b53b");const da=f()(la,[["render",ua],["__scopeId","data-v-46eb461a"]]);var pa=da,ba=Object(r["withScopeId"])("data-v-7c5351d3");Object(r["pushScopeId"])("data-v-7c5351d3");var fa={class:"large-card"},ma=Object(r["createVNode"])("br",null,null,-1),ha=Object(r["createTextVNode"])(" Home District: "),ga=Object(r["createTextVNode"])(),va=Object(r["createVNode"])("br",null,null,-1),Oa=Object(r["createTextVNode"])(" Home TA: "),ja=Object(r["createTextVNode"])(" Score: "),_a={class:"large-card"};Object(r["popScopeId"])();var wa=ba((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-img"),s=Object(r["resolveComponent"])("ion-avatar"),u=Object(r["resolveComponent"])("ion-label"),l=Object(r["resolveComponent"])("ion-item"),d=Object(r["resolveComponent"])("ion-list"),p=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-row");return Object(r["openBlock"])(),Object(r["createBlock"])(b,null,{default:ba((function(){return[Object(r["createVNode"])(p,{size:"5"},{default:ba((function(){return[Object(r["createVNode"])("div",fa,[Object(r["createVNode"])("h3",null," Matches found: ("+Object(r["toDisplayString"])(e.listData.length)+"): ",1),Object(r["createVNode"])(d,null,{default:ba((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(l,{button:"",key:n,detail:!0,color:t.value===e.selectedResult.value?"light":"",onClick:function(n){return e.onSelect(t)}},{default:ba((function(){return[Object(r["createVNode"])(s,null,{default:ba((function(){return[Object(r["createVNode"])(c,{src:"/assets/images/avatar.svg"})]})),_:1}),Object(r["createVNode"])(u,null,{default:ba((function(){var e;return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label)+" ",1),ma,ha,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.other.foundPerson.home_district),1),ga,va,Oa,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.other.home_traditional_authority),1),ja,Object(r["createVNode"])("b",null,Object(r["toDisplayString"])((null===t||void 0===t||null===(e=t.other)||void 0===e?void 0:e.score)||"-"),1)]})),_:2},1024)]})),_:2},1032,["color","onClick"])})),128))]})),_:1})])]})),_:1}),Object(r["createVNode"])(p,{size:"7"},{default:ba((function(){var t,n;return[Object(r["createVNode"])("div",_a,[Object(r["createVNode"])("h1",null," Match score: "+Object(r["toDisplayString"])((null===(t=e.selectedResult)||void 0===t||null===(n=t.other)||void 0===n?void 0:n.score)||"-"),1),Object(r["createVNode"])(d,null,{default:ba((function(){var t,n;return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])((null===(t=e.selectedResult)||void 0===t||null===(n=t.other)||void 0===n?void 0:n.comparisons)||[],(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:t,inset:"none"},{default:ba((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{color:"danger",key:t},{default:ba((function(){return[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e),1)]})),_:2},1024)})),128))]})),_:2},1024)})),128))]})),_:1})])]})),_:1})]})),_:1})})),ka=Object(r["defineComponent"])({mixins:[s["a"]],components:{IonLabel:l["x"],IonAvatar:l["b"],IonRow:l["J"],IonImg:l["s"],IonCol:l["m"],IonList:l["y"],IonItem:l["w"]},data:function(){return{listData:[],selectedResult:{}}},methods:{onSelect:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(!t.onValue){n.next=8;break}return n.next=5,t.onValue(e,t);case 5:if(r=n.sent,r){n.next=8;break}return n.abrupt("return");case 8:t.selectedResult=e,t.$emit("onValue",e);case 10:case"end":return n.stop()}}),n)})))()}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata,e);case 3:e.listData=t.sent,e.onSelect(e.listData[0]||{});case 5:case"end":return t.stop()}}),t)})))()}});n("7e31");const ya=f()(ka,[["render",wa],["__scopeId","data-v-7c5351d3"]]);var xa=ya,Na=n("374c"),Ca=Object(r["withScopeId"])("data-v-f8a8263e");Object(r["pushScopeId"])("data-v-f8a8263e");var Va=Object(r["createTextVNode"])("Total Tins"),Da=Object(r["createTextVNode"])("Expiry Date"),Ta=Object(r["createTextVNode"])("Batch Number"),Ia=Object(r["createTextVNode"])("Add row");Object(r["popScopeId"])();var Ra=Ca((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("his-text-input"),s=Object(r["resolveComponent"])("ion-item"),u=Object(r["resolveComponent"])("ion-list"),l=Object(r["resolveComponent"])("ion-col"),d=Object(r["resolveComponent"])("ion-label"),p=Object(r["resolveComponent"])("ion-input"),b=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("ion-button"),m=Object(r["resolveComponent"])("ion-grid"),h=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(h,null,{default:Ca((function(){return[Object(r["createVNode"])(c,{readonly:"",value:e.fullSelectedDrugName},null,8,["value"]),Object(r["createVNode"])(m,{style:{background:"white"}},{default:Ca((function(){return[Object(r["createVNode"])(b,null,{default:Ca((function(){return[Object(r["createVNode"])(l,{size:"4",class:"border-right scroll-list"},{default:Ca((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.drugs,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:n},{default:Ca((function(){return[Object(r["createVNode"])(s,{detail:"",color:n===e.selectedDrug?"secondary":"",onClick:function(t){return e.selectDrug(n)}},{default:Ca((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])("".concat(t.shortName," (").concat(t.packSizes[0],")")),1)]})),_:2},1032,["color","onClick"])]})),_:2},1024)})),128))]})),_:1}),Object(r["createVNode"])(l,null,{default:Ca((function(){return[null!==e.selectedDrug?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,class:"scroll-list"},{default:Ca((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.drugs[e.selectedDrug].entries,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:n},{default:Ca((function(){return[Object(r["createVNode"])(l,null,{default:Ca((function(){return[Object(r["createVNode"])(s,null,{default:Ca((function(){return[Object(r["createVNode"])(d,{position:"floating"},{default:Ca((function(){return[Va]})),_:1}),Object(r["createVNode"])(p,{readonly:"",placeholder:"0",value:t.tins,onClick:function(t){return e.enterTins(n)}},null,8,["value","onClick"])]})),_:2},1024)]})),_:2},1024),Object(r["createVNode"])(l,null,{default:Ca((function(){return[Object(r["createVNode"])(s,null,{default:Ca((function(){return[Object(r["createVNode"])(d,{position:"floating"},{default:Ca((function(){return[Da]})),_:1}),Object(r["createVNode"])(p,{readonly:"",placeholder:"YYYY/MM/DD",value:t.expiry,onClick:function(t){return e.enterExpiry(n)}},null,8,["value","onClick"])]})),_:2},1024)]})),_:2},1024),Object(r["createVNode"])(l,null,{default:Ca((function(){return[Object(r["createVNode"])(s,null,{default:Ca((function(){return[Object(r["createVNode"])(d,{position:"floating"},{default:Ca((function(){return[Ta]})),_:1}),Object(r["createVNode"])(p,{readonly:"",placeholder:"e.g. 'ABC-123'",value:t.batchNumber,onClick:function(t){return e.enterBatch(n)}},null,8,["value","onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128)),Object(r["createVNode"])(b,null,{default:Ca((function(){return[Object(r["createVNode"])(l,null,{default:Ca((function(){return[Object(r["createVNode"])(f,{onClick:e.addRow,siz:"large"},{default:Ca((function(){return[Ia]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})})),Sa=n("e6e9"),Pa=n("2706"),Aa=n("1c74"),Ea=n("36ad"),Ba=Object(r["defineComponent"])({components:{HisTextInput:Ea["a"],ViewPort:u["a"],IonInput:l["v"],IonLabel:l["x"],IonList:l["y"],IonItem:l["w"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"],IonButton:l["d"]},mixins:[s["a"]],data:function(){return{drugs:[],allDrugsByName:[],selectedDrug:null}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.setDefaultValue();case 3:case"end":return t.stop()}}),t)})))()},methods:{setDefaultValue:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.options();case 2:n=t.sent,e.drugs=e.drugs.filter((function(e){return n.map((function(e){return e.label})).includes(e.label)})),n.forEach((function(t){var n={tabs:t.value.packSizes[0],tins:null,expiry:null,batchNumber:null},r=Object(Bt["a"])({label:t.label,entries:[Object(Bt["a"])({},n),Object(Bt["a"])({},n),Object(Bt["a"])({},n)]},t.value),a=Object(d["find"])(e.drugs,{label:t.label});a||e.drugs.push(r)})),e.drugs.length>=1&&e.selectDrug(0);case 6:case"end":return t.stop()}}),t)})))()},getModalTitle:function(e){return"".concat(e," (").concat(this.drugs[this.selectedDrug].shortName,")")},getDrugValue:function(e,t){return this.drugs[this.selectedDrug].entries[e][t]},setDrugValue:function(e,t,n){this.drugs[this.selectedDrug].entries[e][t]=n?n.value:""},enterTins:function(e){var t=this;this.launchKeyPad({id:"tins",helpText:this.getModalTitle("Enter number of tins"),type:oc.TT_NUMBER,defaultValue:function(){return t.getDrugValue(e,"tins")},validation:function(e){return!e||e&&!e.value?null:Pa["a"].validateSeries([function(){return Pa["a"].isNumber(e)},function(){return e.value<=0?["Number of tins must be greater than 1"]:null}])}},(function(n){return t.setDrugValue(e,"tins",n)}))},enterBatch:function(e){var t=this;this.launchKeyPad({id:"batch",helpText:this.getModalTitle("Enter batch number"),type:oc.TT_TEXT,config:{customKeyboard:[N["c"],[["Delete"]]]},defaultValue:function(){return t.getDrugValue(e,"batchNumber")}},(function(n){var r=Object(Bt["a"])({},n),a="".concat(r.value).toUpperCase();r.label=a,r.value=a,t.setDrugValue(e,"batchNumber",r)}))},enterExpiry:function(e){var t=this;this.launchKeyPad({id:"expiry",helpText:this.getModalTitle("Enter expiry date"),type:oc.TT_FULL_DATE,defaultValue:function(){return t.getDrugValue(e,"expiry")},validation:function(e){if(e&&e.value)return new Date(e.value)<new Date(Aa["e"].getSessionDate())?["You are not allowed to enter expired drugs"]:null}},(function(n){return t.setDrugValue(e,"expiry",n)}))},launchKeyPad:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:Sa["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()},addRow:function(){this.drugs[this.selectedDrug].entries.push({tabs:this.drugs[this.selectedDrug].packSizes[0],tins:null,expiry:null,batchNumber:null})},selectDrug:function(e){this.selectedDrug=e},validateEntry:function(e){return!Object(d["isEmpty"])(e.tins)&&!Object(d["isEmpty"])(e.expiry)&&!Object(d["isEmpty"])(e.batchNumber)}},computed:{fullSelectedDrugName:function(){try{return this.drugs[this.selectedDrug].fullName}catch(e){return"N/A"}},enteredDrugs:function(){var e=this,t=[];return this.drugs.forEach((function(n){var r=n.entries.filter((function(t){return e.validateEntry(t)}));r.forEach((function(e){t.push({label:n.shortName,value:Object(Bt["a"])(Object(Bt["a"])({},e),n)})}))})),t}},watch:{clear:function(){this.drugs=this.drugs.map((function(e){return e.entries=e.entries.map((function(e){return e.tins=null,e.expiry=null,e.batchNumber=null,e})),e}))},drugs:{handler:function(){this.$emit("onValue",this.enteredDrugs)},immediate:!0,deep:!0}}});n("f226");const Fa=f()(Ba,[["render",Ra],["__scopeId","data-v-f8a8263e"]]);var La=Fa,Ma=Object(r["withScopeId"])("data-v-4be61a49");Object(r["pushScopeId"])("data-v-4be61a49");var Ha={key:0,class:"his-card"},Ua=Object(r["createTextVNode"])("Expiry Date"),qa=Object(r["createTextVNode"])("Available Tins"),Ga=Object(r["createTextVNode"])(" Update Stock ");Object(r["popScopeId"])();var za=Ma((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("his-text-input"),s=Object(r["resolveComponent"])("ion-item"),u=Object(r["resolveComponent"])("ion-list"),l=Object(r["resolveComponent"])("ion-col"),d=Object(r["resolveComponent"])("ion-label"),p=Object(r["resolveComponent"])("ion-input"),b=Object(r["resolveComponent"])("ion-button"),f=Object(r["resolveComponent"])("ion-row"),m=Object(r["resolveComponent"])("ion-grid"),h=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(h,null,{default:Ma((function(){return[Object(r["createVNode"])(c,{readonly:"",value:e.fullSelectedDrugName},null,8,["value"]),Object(r["createVNode"])(m,{style:{background:"white"}},{default:Ma((function(){return[Object(r["createVNode"])(f,null,{default:Ma((function(){return[Object(r["createVNode"])(l,{size:"4",class:"border-right scroll-list"},{default:Ma((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.drugs,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:n},{default:Ma((function(){return[Object(r["createVNode"])(s,{detail:"",color:n===e.selectedDrug?"secondary":"",onClick:function(t){return e.selectDrug(n)}},{default:Ma((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])("".concat(t.shortName," (").concat(t.packSizes[0],")")),1)]})),_:2},1032,["color","onClick"])]})),_:2},1024)})),128))]})),_:1}),Object(r["createVNode"])(l,null,{default:Ma((function(){return[null!==e.selectedDrug?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,class:"scroll-list"},{default:Ma((function(){return[e.noStockForDrug?(Object(r["openBlock"])(),Object(r["createBlock"])("h3",Ha," No stock information available for drug")):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.drugs[e.selectedDrug].entries,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:n},{default:Ma((function(){return[Object(r["createVNode"])(l,null,{default:Ma((function(){return[Object(r["createVNode"])(s,null,{default:Ma((function(){return[Object(r["createVNode"])(d,{position:"floating"},{default:Ma((function(){return[Ua]})),_:1}),Object(r["createVNode"])(p,{readonly:"",value:t.expiry_date},null,8,["value"])]})),_:2},1024)]})),_:2},1024),Object(r["createVNode"])(l,null,{default:Ma((function(){return[Object(r["createVNode"])(s,null,{default:Ma((function(){return[Object(r["createVNode"])(d,{position:"floating"},{default:Ma((function(){return[qa]})),_:1}),Object(r["createVNode"])(p,{readonly:"",placeholder:"0",value:t.current_quantity,color:t.current_quantity!=t.originalQuantity?"success":""},null,8,["value","color"])]})),_:2},1024)]})),_:2},1024),Object(r["createVNode"])(l,null,{default:Ma((function(){return[Object(r["createVNode"])(b,{size:"large",onClick:function(t){return e.enterAmount(n)}},{default:Ma((function(){return[Ga]})),_:1},8,["onClick"])]})),_:1})]})),_:2},1024)})),128))]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})})),Ya=n("3d6c"),Wa=Object(r["defineComponent"])({components:{ViewPort:u["a"],HisTextInput:Ea["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"],IonButton:l["d"]},mixins:[s["a"]],data:function(){return{drugs:[],selectedDrug:null,stockService:{}}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),e.stockService=new Ya["a"],t.next=4,e.setDefaultValue();case 4:case"end":return t.stop()}}),t)})))()},methods:{setDefaultValue:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(d["isEmpty"])(e.drugs)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.options();case 4:n=t.sent,e.drugs=[],n.forEach((function(t){e.drugs.push(Object(Bt["a"])({},t.value))}));case 7:case"end":return t.stop()}}),t)})))()},getModalTitle:function(e){return"".concat(e," (").concat(this.drugs[this.selectedDrug].fullName,")")},getDrugValue:function(e,t){return this.drugs[this.selectedDrug].entries[e][t]},setDrugValue:function(e,t,n){this.drugs[this.selectedDrug].entries[e][t]=n?n.value:""},enterAmount:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.getDrugValue(e,"batch_number"),t.launchKeyPad({id:"tins",helpText:t.getModalTitle("Enter number of tins for Batch ".concat(r)),type:oc.TT_NUMBER,defaultValue:function(){return t.getDrugValue(e,"current_quantity")},validation:function(e){return!e||e&&!e.value?null:Pa["a"].validateSeries([function(){return Pa["a"].isNumber(e)},function(){return e.value<0?["Number of tins must be greater than 1"]:null}])}},(function(n){t.setDrugValue(e,"current_quantity",n)}));case 2:case"end":return n.stop()}}),n)})))()},launchKeyPad:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:Sa["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()},selectDrug:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.selectedDrug=e,"entries"in t.drugs[e]){n.next=6;break}return n.next=4,t.stockService.getItem(t.drugs[t.selectedDrug].drugID);case 4:r=n.sent,t.drugs[e]["entries"]=r.map((function(e){return e.originalQuantity=e["current_quantity"],e}));case 6:case"end":return n.stop()}}),n)})))()}},computed:{noStockForDrug:function(){try{return!this.drugs[this.selectedDrug].entries||this.drugs[this.selectedDrug].entries.length<=0}catch(e){return!1}},fullSelectedDrugName:function(){try{return this.drugs[this.selectedDrug].fullName}catch(e){return"N/A"}},enteredDrugs:function(){var e=[];return this.drugs.forEach((function(t){if(t.entries){var n=t.entries.filter((function(e){return e.current_quantity!=e.originalQuantity}));n.forEach((function(n){e.push({label:t.shortname,value:Object(Bt["a"])(Object(Bt["a"])({},n),t)})}))}})),e}},watch:{clear:function(){this.drugs=this.drugs.map((function(e){return e.entries?(e.entries=e.entries.map((function(e){return e["current_quantity"]=e.originalQuantity,e})),e):e}))},drugs:{handler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("onValue",e.enteredDrugs);case 1:case"end":return t.stop()}}),t)})))()},immediate:!0,deep:!0}}});n("fe42");const $a=f()(Wa,[["render",za],["__scopeId","data-v-4be61a49"]]);var Ka=$a,Ja=Object(r["withScopeId"])("data-v-675d3ba2");Object(r["pushScopeId"])("data-v-675d3ba2");var Xa=Object(r["createTextVNode"])("Total Tins");Object(r["popScopeId"])();var Qa=Ja((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("his-text-input"),s=Object(r["resolveComponent"])("ion-item"),u=Object(r["resolveComponent"])("ion-list"),l=Object(r["resolveComponent"])("ion-col"),d=Object(r["resolveComponent"])("ion-label"),p=Object(r["resolveComponent"])("ion-input"),b=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("ion-grid"),m=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(m,null,{default:Ja((function(){return[Object(r["createVNode"])(c,{readonly:"",value:e.fullSelectedDrugName},null,8,["value"]),Object(r["createVNode"])(f,{style:{background:"white"}},{default:Ja((function(){return[Object(r["createVNode"])(b,null,{default:Ja((function(){return[Object(r["createVNode"])(l,{size:"4",class:"border-right scroll-list"},{default:Ja((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.drugs,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:n},{default:Ja((function(){return[Object(r["createVNode"])(s,{detail:"",color:n===e.selectedDrug?"secondary":"",onClick:function(t){return e.selectDrug(n)}},{default:Ja((function(){var e;return[Object(r["createTextVNode"])(Object(r["toDisplayString"])("".concat(null!==(e=t.drug_name)&&void 0!==e?e:t.drug_legacy_name)),1)]})),_:2},1032,["color","onClick"])]})),_:2},1024)})),128))]})),_:1}),Object(r["createVNode"])(l,null,{default:Ja((function(){return[null!==e.selectedDrug?(Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:0,class:"scroll-list"},{default:Ja((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.drugs[e.selectedDrug].entries,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:n},{default:Ja((function(){return[Object(r["createVNode"])(l,null,{default:Ja((function(){return[Object(r["createVNode"])(s,null,{default:Ja((function(){return[Object(r["createVNode"])(d,{position:"floating"},{default:Ja((function(){return[Xa]})),_:1}),Object(r["createVNode"])(p,{readonly:"",placeholder:"0",value:t.tins,onClick:function(t){return e.enterTins(n)}},null,8,["value","onClick"])]})),_:2},1024)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})]})),_:1})})),Za=Object(r["defineComponent"])({components:{ViewPort:u["a"],IonGrid:l["p"],IonList:l["y"],IonCol:l["m"],IonRow:l["J"],IonItem:l["w"],HisTextInput:Ea["a"]},mixins:[s["a"]],data:function(){return{drugs:[],selectedDrug:null}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.setDefaultValue();case 3:case"end":return t.stop()}}),t)})))()},methods:{setDefaultValue:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.options();case 2:n=t.sent,e.drugs=e.drugs.filter((function(e){return n.map((function(e){return e.label})).includes(e.label)})),n.forEach((function(t){var n={tins:null},r=Object(Bt["a"])({label:t.label,entries:[Object(Bt["a"])({},n)]},t.value),a=Object(d["find"])(e.drugs,{label:t.label});a||e.drugs.push(r)})),e.drugs.length>=1&&e.selectDrug(0);case 6:case"end":return t.stop()}}),t)})))()},getModalTitle:function(e){return"".concat(e," (").concat(this.drugs[this.selectedDrug].label,")")},getDrugValue:function(e,t){return this.drugs[this.selectedDrug].entries[e][t]},setDrugValue:function(e,t,n){this.drugs[this.selectedDrug].entries[e][t]=n?n.value:""},enterTins:function(e){var t=this;this.launchKeyPad({id:"tins",helpText:this.getModalTitle("Enter number of tins"),type:oc.TT_NUMBER,defaultValue:function(){return t.getDrugValue(e,"tins")},validation:function(e){return!e||e&&!e.value?null:Pa["a"].validateSeries([function(){return Pa["a"].isNumber(e)},function(){return e.value<=0?["Number of tins must be greater than 1"]:null}])}},(function(n){return t.setDrugValue(e,"tins",n)}))},launchKeyPad:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:Sa["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()},selectDrug:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.selectedDrug=e;case 1:case"end":return n.stop()}}),n)})))()},validateEntry:function(e){return!Object(d["isEmpty"])(e.tins)}},computed:{fullSelectedDrugName:function(){try{return this.drugs[this.selectedDrug].label}catch(e){return"N/A"}},enteredDrugs:function(){var e=this,t=[];return this.drugs.forEach((function(n){if(n.entries){var r=n.entries.filter((function(t){return e.validateEntry(t)}));r.forEach((function(e){t.push({label:n.shortname,value:Object(Bt["a"])(Object(Bt["a"])({},e),n)})}))}})),t}},watch:{clear:function(){this.drugs=this.drugs.map((function(e){return e.entries=e.entries.map((function(e){return e.tins=null,e})),e}))},drugs:{handler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("onValue",e.enteredDrugs);case 1:case"end":return t.stop()}}),t)})))()},immediate:!0,deep:!0}}});n("3130");const eo=f()(Za,[["render",Qa],["__scopeId","data-v-675d3ba2"]]);var to=eo,no=n("2a82"),ro=Object(r["withScopeId"])("data-v-5b4dbb06");Object(r["pushScopeId"])("data-v-5b4dbb06");var ao={class:"center"},oo={class:"text"};Object(r["popScopeId"])();var io=ro((function(e,t,n,a,o,i){return Object(r["openBlock"])(),Object(r["createBlock"])("div",ao,[Object(r["createVNode"])("p",oo,Object(r["toDisplayString"])(e.value),1)])})),co=Object(r["defineComponent"])({mixins:[s["a"]],data:function(){return{value:""}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.options();case 2:n=t.sent,e.value=n[0].value;case 4:case"end":return t.stop()}}),t)})))()}});n("f379");const so=f()(co,[["render",io],["__scopeId","data-v-5b4dbb06"]]);var uo=so,lo=Object(r["withScopeId"])("data-v-b3c75404");Object(r["pushScopeId"])("data-v-b3c75404");var po={class:"view-port-content"},bo={key:0,class:"his-card history"},fo={class:"his-table"},mo=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null," Medication"),Object(r["createVNode"])("th",null," Date"),Object(r["createVNode"])("th",null," Amount dispensed ")],-1),ho={key:1,class:"prescription-tab"},go={class:"prescription-table-section his-card"},vo={class:"his-table"},Oo=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null," Medication"),Object(r["createVNode"])("th",null," Amount needed"),Object(r["createVNode"])("th",null," Amount dispensed "),Object(r["createVNode"])("th",null," Reset ")],-1),jo={class:"barcode-section"};Object(r["popScopeId"])();var _o=lo((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("nav-button"),s=Object(r["resolveComponent"])("ion-col"),u=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("reset-button"),d=Object(r["resolveComponent"])("barcode"),p=Object(r["resolveComponent"])("ion-row"),b=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(b,null,{default:lo((function(){return[Object(r["createVNode"])("div",po,[Object(r["createVNode"])(p,null,{default:lo((function(){return[Object(r["createVNode"])(s,{size:"2"},{default:lo((function(){return[Object(r["createVNode"])(c,{onClick:t[1]||(t[1]=function(t){return e.tab="prescribe"}),isActive:"prescribe"===e.tab,image:"prescription/rx",label:"Prescribed"},null,8,["isActive"]),Object(r["createVNode"])(c,{onClick:t[2]||(t[2]=function(t){return e.tab="history"}),isActive:"history"===e.tab,image:"prescription/history",label:"History"},null,8,["isActive"])]})),_:1}),Object(r["createVNode"])(s,{size:"10"},{default:lo((function(){return["history"===e.tab?(Object(r["openBlock"])(),Object(r["createBlock"])("div",bo,[Object(r["createVNode"])("table",fo,[mo,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.medicationHistory,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:t},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.medication),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.date),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.amount),1)])})),128))])])):Object(r["createCommentVNode"])("",!0),"prescribe"===e.tab?(Object(r["openBlock"])(),Object(r["createBlock"])("div",ho,[Object(r["createVNode"])("div",go,[Object(r["createVNode"])("table",vo,[Oo,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.label),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.other.amount_needed),1),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(u,{disabled:t.value>0,value:t.value,onClick:function(n){return t.value<=0?e.launchDispenser(t):null},class:"dosage-input"},null,8,["disabled","value","onClick"])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(l,{disabled:t.value<=0,onClick:function(n){return t.value>0?e.onReset(t):null}},null,8,["disabled","onClick"])])])})),128))])]),Object(r["createVNode"])("div",jo,[Object(r["createVNode"])(d,{onOnScan:e.onScan},null,8,["onOnScan"])])])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})])]})),_:1})})),wo=Object(r["withScopeId"])("data-v-0d5bc218");Object(r["pushScopeId"])("data-v-0d5bc218");var ko={class:"",style:{border:".1rem solid #c2c2c2c2"}},yo={class:"keypad"},xo=Object(r["createVNode"])("b",null,"Medication: ",-1),No=Object(r["createVNode"])("b",null,"Amount needed: ",-1),Co=Object(r["createVNode"])("b",null,"Amount Dispensed: ",-1),Vo=Object(r["createTextVNode"])(" Close "),Do=Object(r["createTextVNode"])(" Dispense ");Object(r["popScopeId"])();var To=wo((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-input"),s=Object(r["resolveComponent"])("ion-button"),u=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-label"),d=Object(r["resolveComponent"])("ion-item"),p=Object(r["resolveComponent"])("ion-list"),b=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("ion-grid"),m=Object(r["resolveComponent"])("ion-content"),h=Object(r["resolveComponent"])("ion-toolbar"),g=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(m,null,{default:wo((function(){return[Object(r["createVNode"])(f,null,{default:wo((function(){return[Object(r["createVNode"])(b,null,{default:wo((function(){return[Object(r["createVNode"])(u,{size:"5"},{default:wo((function(){return[Object(r["createVNode"])("div",ko,[Object(r["createVNode"])(c,{type:"text",class:"keypad-input",value:e.amount},null,8,["value"]),Object(r["createVNode"])("table",yo,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.keyboard,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("td",{class:"his-keyboard-margin",key:"btn-".concat(n)},[Object(r["createVNode"])(s,{color:"primary",class:"his-keyboard-btn",onClick:function(n){return e.onKeyPress(t)}},{default:wo((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t),1)]})),_:2},1032,["onClick"])])})),128))])})),128))])])]})),_:1}),Object(r["createVNode"])(u,{size:"7"},{default:wo((function(){return[Object(r["createVNode"])(p,null,{default:wo((function(){return[Object(r["createVNode"])(d,null,{default:wo((function(){return[Object(r["createVNode"])(l,null,{default:wo((function(){return[xo,Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.drugName),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(d,null,{default:wo((function(){return[Object(r["createVNode"])(l,null,{default:wo((function(){return[No,Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.amountNeeded),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(d,null,{default:wo((function(){return[Object(r["createVNode"])(l,null,{default:wo((function(){return[Co,Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.amount.length?e.amount:0),1)]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(g,null,{default:wo((function(){return[Object(r["createVNode"])(h,null,{default:wo((function(){return[Object(r["createVNode"])(s,{onClick:e.onClose,color:"danger",size:"large",slot:"start"},{default:wo((function(){return[Vo]})),_:1},8,["onClick"]),Object(r["createVNode"])(s,{onClick:t[1]||(t[1]=function(t){return e.onDispense(e.amount)}),disabled:e.amount.length<=0,color:"success",size:"large",slot:"end"},{default:wo((function(){return[Do]})),_:1},8,["disabled"])]})),_:1})]})),_:1})],64)})),Io=Object(r["defineComponent"])({data:function(){return{amount:"",keyboard:N["e"]}},props:{drugName:{type:String,required:!0},amountNeeded:{type:String,required:!0},onDispense:{type:Function,required:!0}},methods:{onKeyPress:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.amount,e.match(/del/i)?t.amount=r.substring(0,r.length-1):e.match(/clear/i)?t.amount="":e.match(/close/i)?t.onClose():e.match(/reset/i)?t.amount="":e.match(/dispense/i)?(t.amount&&t.onDispense(t.amount),t.onClose()):t.amount+=e;case 2:case"end":return n.stop()}}),n)})))()},onClose:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["cb"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()}}});n("69b6");const Ro=f()(Io,[["render",To],["__scopeId","data-v-0d5bc218"]]);var So=Ro,Po=Object(r["defineComponent"])({components:{ViewPort:u["a"],Barcode:Wn["a"],NavButton:ct,ResetButton:Qn,IonRow:l["J"],IonCol:l["m"]},mixins:[s["a"]],data:function(){return{tab:"prescribe",listData:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()},computed:{medicationHistory:function(){return this.config&&this.config.medicationHistory?this.config.medicationHistory:[]}},methods:{onScan:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.split("-"),a=Object(ze["a"])(r,2),o=a[0],i=a[1],s=t.listData.map(function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(n){var r,a,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n.other.drug_id!==parseInt(o)){e.next=7;break}return r=parseInt(n.value.toString()),a=parseInt(i),e.next=5,t.updateOnValue(n,a,[],!0);case 5:c=e.sent,c&&(n.value=a+r);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.next=4,Promise.all(s);case 4:t.listData=n.sent;case 5:case"end":return n.stop()}}),n)})))()},onReset:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.updateOnValue(e,-1);case 2:case"end":return n.stop()}}),n)})))()},updateOnValue:function(e,t){var n=arguments,r=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var o,i,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=n.length>2&&void 0!==n[2]?n[2]:[],i=n.length>3&&void 0!==n[3]&&n[3],!r.onValue){a.next=8;break}return a.next=5,r.onValue({label:e.label,other:Object(Bt["a"])({dispenses:o},e.other),value:t},i);case 5:if(c=a.sent,c){a.next=8;break}return a.abrupt("return",!1);case 8:if(e.value=t<0?0:t,r.$emit("onValue",e),!r.onValueUpdate){a.next=14;break}return a.next=13,r.onValueUpdate(e,r.listData);case 13:r.listData=a.sent;case 14:return a.abrupt("return",!0);case 15:case"end":return a.stop()}}),a)})))()},launchDispenser:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:So,backdropDismiss:!1,cssClass:"custom-modal",componentProps:{drugName:e.label,amountNeeded:e.other.amount_needed,onDispense:function(){var n=Object(c["a"])(regeneratorRuntime.mark((function n(r){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.updateOnValue(e,r);case 2:if(a=n.sent,!a){n.next=6;break}return n.next=6,l["cb"].dismiss({});case 6:case"end":return n.stop()}}),n)})));function r(e){return n.apply(this,arguments)}return r}()}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()}}});n("cff5");const Ao=f()(Po,[["render",_o],["__scopeId","data-v-b3c75404"]]);var Eo=Ao,Bo=Object(r["withScopeId"])("data-v-34745e5e");Object(r["pushScopeId"])("data-v-34745e5e");var Fo={class:"view-port-content"};Object(r["popScopeId"])();var Lo=Bo((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("his-table"),s=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(s,{style:e.config.viewPortStyle},{default:Bo((function(){return[Object(r["createVNode"])("div",Fo,[Object(r["createVNode"])(c,{columns:e.columns,rows:e.rows,config:e.config.dataTableConfig},null,8,["columns","rows","config"])])]})),_:1},8,["style"])})),Mo=n("80e3"),Ho=Object(r["defineComponent"])({components:{ViewPort:u["a"],HisTable:Mo["a"]},mixins:[s["a"]],data:function(){return{columns:[],rows:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$emit("onFieldActivated",e),"function"!==typeof e.config.columns){t.next=5;break}return t.next=4,e.config.columns(e.fdata,e.cdata);case 4:e.columns=t.sent;case 5:if("function"!==typeof e.config.rows){t.next=9;break}return t.next=8,e.config.rows(e.fdata,e.cdata);case 8:e.rows=t.sent;case 9:case"end":return t.stop()}}),t)})))()}});n("ea3a");const Uo=f()(Ho,[["render",Lo],["__scopeId","data-v-34745e5e"]]);var qo=Uo,Go=Object(r["withScopeId"])("data-v-6218c318");Object(r["pushScopeId"])("data-v-6218c318");var zo={class:"view-port-content"};Object(r["popScopeId"])();var Yo=Go((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-radio"),s=Object(r["resolveComponent"])("ion-label"),u=Object(r["resolveComponent"])("ion-item"),l=Object(r["resolveComponent"])("ion-list"),d=Object(r["resolveComponent"])("ion-radio-group"),p=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("ion-grid"),m=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(m,null,{default:Go((function(){return[Object(r["createVNode"])("div",zo,[Object(r["createVNode"])(f,null,{default:Go((function(){var n,a,o,i;return[Object(r["createVNode"])(b,null,{default:Go((function(){var n,a;return[Object(r["createVNode"])(p,null,{default:Go((function(){return[Object(r["createVNode"])(d,{modelValue:e.selected,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selected=t})},{default:Go((function(){return[Object(r["createVNode"])(l,{class:"his-card"},{default:Go((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{class:"his-md-text",key:t},{default:Go((function(){return[Object(r["createVNode"])(c,{slot:"start",value:e},null,8,["value"]),Object(r["createVNode"])(s,null,{default:Go((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),null!==(n=e.selected)&&void 0!==n&&null!==(a=n.other)&&void 0!==a&&a.options?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0},{default:Go((function(){return[Object(r["createVNode"])(d,{modelValue:e.selected.value,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selected.value=t})},{default:Go((function(){return[Object(r["createVNode"])(l,{class:"his-card"},{default:Go((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.selected.other.options,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{class:"his-md-text",key:t},{default:Go((function(){return[Object(r["createVNode"])(c,{slot:"start",value:e.label},null,8,["value"]),Object(r["createVNode"])(s,null,{default:Go((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1}),null!==(n=e.selected)&&void 0!==n&&null!==(a=n.other)&&void 0!==a&&a.subgroupTitle?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0},{default:Go((function(){return[Object(r["createVNode"])(p,null,{default:Go((function(){var t,n;return[Object(r["createVNode"])("h4",null,Object(r["toDisplayString"])(null===(t=e.selected)||void 0===t||null===(n=t.other)||void 0===n?void 0:n.subgroupTitle),1)]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0),null!==(o=e.selected)&&void 0!==o&&null!==(i=o.other)&&void 0!==i&&i.subGroupOptions?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:1},{default:Go((function(){var n,a,o,i;return[Object(r["createVNode"])(p,null,{default:Go((function(){return[Object(r["createVNode"])(d,{modelValue:e.selected.other.subGroupOptionValue,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.selected.other.subGroupOptionValue=t})},{default:Go((function(){return[Object(r["createVNode"])(l,{class:"his-card"},{default:Go((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.selected.other.subGroupOptions,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{class:"his-md-text",key:t},{default:Go((function(){return[Object(r["createVNode"])(c,{slot:"start",value:e},null,8,["value"]),Object(r["createVNode"])(s,null,{default:Go((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),null!==(n=e.selected)&&void 0!==n&&null!==(a=n.other)&&void 0!==a&&null!==(o=a.subGroupOptionValue)&&void 0!==o&&null!==(i=o.other)&&void 0!==i&&i.options?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:0},{default:Go((function(){return[Object(r["createVNode"])(d,{modelValue:e.selected.other.subGroupOptionValue.value,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.selected.other.subGroupOptionValue.value=t})},{default:Go((function(){return[Object(r["createVNode"])(l,{class:"his-card"},{default:Go((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.selected.other.subGroupOptionValue.other.options,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{class:"his-md-text",key:t},{default:Go((function(){return[Object(r["createVNode"])(c,{slot:"start",value:e.label},null,8,["value"]),Object(r["createVNode"])(s,null,{default:Go((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})])]})),_:1})})),Wo=Object(r["defineComponent"])({mixins:[s["a"]],components:{IonCol:l["m"],IonRow:l["J"],IonGrid:l["p"],IonList:l["y"],IonItem:l["w"],ViewPort:u["a"],IonRadioGroup:l["H"],IonRadio:l["G"],IonLabel:l["x"]},data:function(){return{selected:{},listData:[]}},watch:{selected:{handler:function(e){Object(d["isEmpty"])(e)||this.$emit("onValue",e)},immediate:!0,deep:!0},clear:function(){this.selected={},this.initiateList()}},methods:{initiateList:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.options(e.fdata,e.cdata);case 2:e.listData=t.sent.map((function(e){return e.other.subGroupOptions&&(e.other.subGroupOptionValue=null),e}));case 3:case"end":return t.stop()}}),t)})))()}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("onFieldActivated",e),e.initiateList();case 2:case"end":return t.stop()}}),t)})))()}});n("fedf");const $o=f()(Wo,[["render",Yo],["__scopeId","data-v-6218c318"]]);var Ko=$o,Jo=Object(r["withScopeId"])("data-v-4511dfa4");Object(r["pushScopeId"])("data-v-4511dfa4");var Xo={class:"view-port-content"},Qo={class:"pregnancy-table"},Zo=Object(r["createVNode"])("thead",{class:"ion-text-center"},[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"Pregnancy"),Object(r["createVNode"])("th",null,"Baby count"),Object(r["createVNode"])("th",null,"Details available")])],-1),ei={class:"ion-text-center"};Object(r["popScopeId"])();var ti=Jo((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-icon"),s=Object(r["resolveComponent"])("ion-button"),u=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-input"),d=Object(r["resolveComponent"])("ion-row"),p=Object(r["resolveComponent"])("ion-checkbox"),b=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(b,null,{default:Jo((function(){return[Object(r["createVNode"])("div",Xo,[Object(r["createVNode"])("table",Qo,[Zo,Object(r["createVNode"])("tbody",ei,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",{innerHTML:t.label},null,8,["innerHTML"]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(d,null,{default:Jo((function(){return[Object(r["createVNode"])(u,null,{default:Jo((function(){return[Object(r["createVNode"])(s,{disabled:1===t.value,onClick:function(e){return t.value=t.value>1?t.value-1:1}},{default:Jo((function(){return[Object(r["createVNode"])(c,{slot:"icon-only",icon:e.arrowDown},null,8,["icon"])]})),_:2},1032,["disabled","onClick"])]})),_:2},1024),Object(r["createVNode"])(u,null,{default:Jo((function(){return[Object(r["createVNode"])(l,{class:"baby-count",value:t.value},null,8,["value"])]})),_:2},1024),Object(r["createVNode"])(u,null,{default:Jo((function(){return[Object(r["createVNode"])(s,{disabled:4===t.value,onClick:function(e){return t.value=t.value<4?t.value+1:t.value}},{default:Jo((function(){return[Object(r["createVNode"])(c,{slot:"icon-only",icon:e.arrowUp},null,8,["icon"])]})),_:2},1032,["disabled","onClick"])]})),_:2},1024)]})),_:2},1024)]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(p,{modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e}},null,8,["modelValue","onUpdate:modelValue"])])])})),128))])])])]})),_:1})})),ni=n("0011"),ri=Object(r["defineComponent"])({name:"HisSelect",mixins:[s["a"]],components:{IonInput:l["v"],IonButton:l["d"],IonCheckbox:l["k"],IonCol:l["m"],IonRow:l["J"],IonIcon:l["r"],ViewPort:u["a"]},setup:function(){return{arrowUp:ta["k"],arrowDown:ta["i"]}},data:function(){return{listData:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$emit("onFieldActivated",e),"function"!==typeof e.config.pregnancyCount){t.next=8;break}return t.t0=e,t.next=5,e.config.pregnancyCount(e.fdata);case 5:t.t1=t.sent,e.listData=t.t0.buildOptions.call(t.t0,t.t1),e.$emit("onValue",e.listData);case 8:case"end":return t.stop()}}),t)})))()},methods:{buildOptions:function(e){for(var t=[],n=0;n<e;++n){var r=n+1;t.push({label:"".concat(r," <sup>").concat(Object(ni["b"])(r),"</sup>"),value:1,isChecked:!0})}return t}},watch:{listData:{handler:function(e){e&&this.$emit("onValue",e)},deep:!0,immediate:!0}}});n("3e2c");const ai=f()(ri,[["render",ti],["__scopeId","data-v-4511dfa4"]]);var oi=ai,ii=Object(r["withScopeId"])("data-v-fbc09f50");Object(r["pushScopeId"])("data-v-fbc09f50");var ci={key:0},si=Object(r["createVNode"])("p",null,null,-1);Object(r["popScopeId"])();var ui=ii((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-radio"),s=Object(r["resolveComponent"])("ion-label"),u=Object(r["resolveComponent"])("ion-item"),l=Object(r["resolveComponent"])("ion-radio-group"),d=Object(r["resolveComponent"])("ion-list"),p=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-title"),f=Object(r["resolveComponent"])("ion-row"),m=Object(r["resolveComponent"])("ion-input"),h=Object(r["resolveComponent"])("ion-grid"),g=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(g,null,{default:ii((function(){return[Object(r["createVNode"])(h,{class:"view-port-content"},{default:ii((function(){return[Object(r["createVNode"])(f,null,{default:ii((function(){return[Object(r["createVNode"])(p,{size:"4"},{default:ii((function(){return[Object(r["createVNode"])(d,null,{default:ii((function(){return[Object(r["createVNode"])(l,{modelValue:e.selected,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selected=t})},{default:ii((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{detail:"",lines:"none",class:"his-md-text his-card ion-padding",key:t},{default:ii((function(){return[Object(r["createVNode"])(c,{slot:"start",value:e.label},null,8,["value"]),Object(r["createVNode"])(s,{innerHTML:e.label},null,8,["innerHTML"])]})),_:2},1024)})),128))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),Object(r["createVNode"])(p,null,{default:ii((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:n},[e.selected===t.label?(Object(r["openBlock"])(),Object(r["createBlock"])("div",ci,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t.other.data,(function(a,o){return Object(r["openBlock"])(),Object(r["createBlock"])(h,{style:{"margin-bottom":"10px"},class:"his-card",key:o},{default:ii((function(){var i;return[null!==t&&void 0!==t&&null!==(i=t.other)&&void 0!==i&&i.rowTitles?(Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:0,style:{background:"#F8F8F8"}},{default:ii((function(){return[Object(r["createVNode"])(p,{class:"ion-text-center"},{default:ii((function(){var e,n;return[Object(r["createVNode"])(b,{class:"his-md-text",innerHTML:null!==t&&void 0!==t&&null!==(e=t.other)&&void 0!==e&&e.rowTitles&&(null===t||void 0===t||null===(n=t.other)||void 0===n?void 0:n.rowTitles[o])||""},null,8,["innerHTML"])]})),_:2},1024)]})),_:2},1024)):Object(r["createCommentVNode"])("",!0),si,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(a,(function(t,a){return Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:a},{default:ii((function(){return[Object(r["createVNode"])(p,null,{default:ii((function(){return[t.disabled?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,onClick:function(n){return e.warn("Cannot edit ".concat(t.label))},class:"his-sm-text"},{default:ii((function(){return[Object(r["createVNode"])(s,null,{default:ii((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(m,{placeholder:"N/A",slot:"end"})]})),_:2},1032,["onClick"])):Object(r["createCommentVNode"])("",!0),t.disabled?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:1,class:"his-sm-text",onClick:function(r){return e.editField(t,e.listData[n].other.data[o])}},{default:ii((function(){var e,n;return[Object(r["createVNode"])(s,{color:null!==t&&void 0!==t&&null!==(e=t.value)&&void 0!==e&&e.label?"":"danger"},{default:ii((function(){return[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.label),1)]})),_:2},1032,["color"]),Object(r["createVNode"])(m,{class:"his-md-text",slot:"end",readonly:!0,value:null===t||void 0===t||null===(n=t.value)||void 0===n?void 0:n.label,placeholder:"Click to edit"},null,8,["value"])]})),_:2},1032,["onClick"]))]})),_:2},1024)]})),_:2},1024)})),128))]})),_:2},1024)})),128))])):Object(r["createCommentVNode"])("",!0)])})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1})})),li=Object(r["defineComponent"])({name:"HisSelect",mixins:[s["a"]],components:{IonTitle:l["U"],IonInput:l["v"],IonRadioGroup:l["H"],IonRadio:l["G"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"],ViewPort:u["a"]},setup:function(){return{arrowUp:ta["k"],arrowDown:ta["i"]}},data:function(){return{selected:"",listData:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata);case 3:e.listData=t.sent,e.listData.length&&(e.selected=e.listData[0].label);case 5:case"end":return t.stop()}}),t)})))()},methods:{warn:function(e){Object(st["e"])(e)},launchModal:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:Sa["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});case 2:n.sent.present();case 3:case"end":return n.stop()}}),n)})))()},editField:function(e,t){var n=this;return Object(c["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=function(n){var r,a,o;(e.value=n,"function"===typeof(null===e||void 0===e||null===(r=e.field)||void 0===r?void 0:r.computedValue))&&(e.computedValue=null===e||void 0===e||null===(o=e.field)||void 0===o?void 0:o.computedValue(n));"function"===typeof(null===e||void 0===e||null===(a=e.field)||void 0===a?void 0:a.onValueUpdate)&&e.field.onValueUpdate(n,t)},n.launchModal(e.field,(function(t){var r,o;if(!Array.isArray(t)&&(t.label.match(/unknown/i)&&"function"===typeof(null===(r=e.field)||void 0===r||null===(o=r.config)||void 0===o?void 0:o.onUnknownEstimateField)))return n.launchModal(e.field.config.onUnknownEstimateField(),(function(e){return a(e)}));a(t)}));case 2:case"end":return r.stop()}}),r)})))()}},watch:{listData:{handler:function(e){var t=[],n=e.map((function(e){return e.other.data})).reduce((function(e,t){return[].concat(Object(L["a"])(e),Object(L["a"])(t.reduce((function(e,t){return[].concat(Object(L["a"])(e),Object(L["a"])(t))}),[])))}),[]).filter((function(e){return e.required&&""===e.value?(t.push(e.label),!1):!!e.required})).map((function(e){return{label:e.label,value:e.value,other:{obs:e.computedValue}}}));Object(d["isEmpty"])(t)?this.$emit("onValue",n):this.$emit("onValue",[{label:"_INCOMPLETE_RECORD_ERROR_",value:t.length,other:{incompleteLabels:t}}])},deep:!0}}});n("d9bd");const di=f()(li,[["render",ui],["__scopeId","data-v-fbc09f50"]]);var pi=di,bi=Object(r["createTextVNode"])(" Expected Date Of Delivery: "),fi=Object(r["createTextVNode"])(" Gestation Weeks: "),mi=Object(r["createTextVNode"])("(Abnormal)");function hi(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-label"),s=Object(r["resolveComponent"])("ion-item"),u=Object(r["resolveComponent"])("ion-text"),l=Object(r["resolveComponent"])("ion-list"),d=Object(r["resolveComponent"])("his-date-input"),p=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{config:e.config,options:e.options,clear:e.clear,fdata:e.formData,cdata:e.computedFormData,activationState:e.state,onValue:e.onValue,onOnValue:e.onNewValue,defaultValue:e.defaultValue},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{class:"his-md-text",lines:"none"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{slot:"start"},{default:Object(r["withCtx"])((function(){return[bi]})),_:1}),Object(r["createVNode"])(c,{slot:"end"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.delieveryDate),1)]})),_:1})]})),_:1}),Object(r["createVNode"])(s,{class:"his-md-text",lines:"none"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{slot:"start"},{default:Object(r["withCtx"])((function(){return[fi]})),_:1}),Object(r["createVNode"])(c,{color:e.lmpIsAbnormal?"danger":"success",slot:"end"},{default:Object(r["withCtx"])((function(){return[e.lmpIsAbnormal?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0},{default:Object(r["withCtx"])((function(){return[mi]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.gestationWeeks),1)]})),_:1},8,["color"])]})),_:1})]})),_:1})]})),_:1},8,["config","options","clear","fdata","cdata","activationState","onValue","onOnValue","defaultValue"])]})),_:1})}var gi=Object(r["defineComponent"])({components:{HisDateInput:Na["a"],IonText:l["R"],IonPage:l["F"],IonItem:l["w"],IonLabel:l["x"],IonList:l["y"]},mixins:[s["a"]],data:function(){return{delieveryDate:"N/A",gestationWeeks:"N/A",minGestationWeeks:0,maxGestationWeeks:42}},mounted:function(){var e,t;this.minGestationWeeks=(null===(e=this.config)||void 0===e?void 0:e.minGestationWeeks)||0,this.maxGestationWeeks=(null===(t=this.config)||void 0===t?void 0:t.maxGestationWeeks)||42},computed:{lmpIsAbnormal:function(){var e=parseInt(this.gestationWeeks);return e<this.minGestationWeeks||e>this.maxGestationWeeks}},methods:{onNewValue:function(e){e&&"Unknown"!=e.label?("function"===typeof this.config.calculateDelieveryDate&&(this.delieveryDate=this.config.calculateDelieveryDate(e.value)),"function"===typeof this.config.calculateGestationWeeks&&(this.gestationWeeks=this.config.calculateGestationWeeks(e.value))):(this.delieveryDate="N/A",this.gestationWeeks="N/A"),this.$emit("onValue",Object(Bt["a"])(Object(Bt["a"])({},e),{},{other:this.gestationWeeks}))}}});const vi=f()(gi,[["render",hi]]);var Oi=vi,ji=Object(r["withScopeId"])("data-v-15ce26d8");Object(r["pushScopeId"])("data-v-15ce26d8");var _i={class:"view-port-content"},wi=Object(r["createVNode"])("b",null," Medication ",-1),ki=Object(r["createVNode"])("b",null," Given Amount",-1),yi=Object(r["createVNode"])("b",null," Pills brought ",-1),xi={class:"his-card",style:{textAlign:"left"}};Object(r["popScopeId"])();var Ni=ji((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-col"),s=Object(r["resolveComponent"])("ion-row"),u=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("ion-grid"),d=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:ji((function(){return[Object(r["createVNode"])("div",_i,[Object(r["createVNode"])(l,null,{default:ji((function(){return[Object(r["createVNode"])(s,null,{default:ji((function(){return[Object(r["createVNode"])(c,{size:"6"},{default:ji((function(){return[wi]})),_:1}),Object(r["createVNode"])(c,{size:"3"},{default:ji((function(){return[ki]})),_:1}),Object(r["createVNode"])(c,{size:"3"},{default:ji((function(){return[yi]})),_:1})]})),_:1}),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:n},{default:ji((function(){return[Object(r["createVNode"])(c,{size:"6"},{default:ji((function(){return[Object(r["createVNode"])("div",xi,Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(c,{size:"3"},{default:ji((function(){return[Object(r["createVNode"])(u,{value:t.value,onClick:function(n){return e.launchKeyPad(t,"Given amount")},class:"his-card"},null,8,["value","onClick"])]})),_:2},1024),Object(r["createVNode"])(c,{size:"3"},{default:ji((function(){return[Object(r["createVNode"])(u,{value:t.other.pillsBrought,onClick:function(n){return e.launchKeyPad(t,"Pills brought")},class:"his-card"},null,8,["value","onClick"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})])]})),_:1})})),Ci=Object(r["defineComponent"])({components:{ViewPort:u["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"],IonInput:l["v"]},mixins:[s["a"]],data:function(){return{listData:[]}},watch:{clear:{handler:function(){this.listData=this.listData.filter((function(e){return e.value="",e.other.pillsBrought="",!0}))},immediate:!0},listData:{handler:function(){this.$emit("onValue",this.listData)},deep:!0,immediate:!0}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata,e.cdata,e.listData);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{launchKeyPad:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:Ie["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:e.label,preset:"Given amount"===t?e.value:e.other.pillsBrought,strictNumbers:!0,onKeyPress:function(n){"Given amount"===t&&(e.value=n),"Pills brought"===t&&(e.other.pillsBrought=n)}}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()}}});n("279d");const Vi=f()(Ci,[["render",Ni],["__scopeId","data-v-15ce26d8"]]);var Di=Vi;function Ti(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-checkbox"),s=Object(r["resolveComponent"])("ion-label"),u=Object(r["resolveComponent"])("ion-item"),l=Object(r["resolveComponent"])("multi-column-view"),d=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{style:{width:"100%"},class:"view-port-content",items:e.listData,numberOfColumns:4},{default:Object(r["withCtx"])((function(e){var t=e.entries;return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{lines:"none",style:{"margin-bottom":"10px",padding:"0px",width:"100%"},class:"his-card clickable",key:t,onClick:e.isChecked},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{slot:"start",modelValue:e.isChecked,"onUpdate:modelValue":function(t){return e.isChecked=t}},null,8,["modelValue","onUpdate:modelValue"]),Object(r["createVNode"])(s,{class:"ion-text-wrap"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024)]})),_:2},1032,["onClick"])})),128))]})),_:1},8,["items"])]})),_:1})}var Ii=n("92c1"),Ri=Object(r["defineComponent"])({name:"HisGridSelector",components:{ViewPort:u["a"],IonItem:l["w"],IonLabel:l["x"],IonCheckbox:l["k"],MultiColumnView:Ii["a"]},mixins:[s["a"]],data:function(){return{listData:[]}},watch:{clear:function(){this.listData=this.listData.map((function(e){return e.isChecked=!1,e}))},listData:{handler:function(e){Object(d["isEmpty"])(e)||this.$emit("onValue",this.listData.filter((function(e){return e.isChecked})))},immediate:!0,deep:!0}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata,e.cdata,e.listData);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()}});const Si=f()(Ri,[["render",Ti]]);var Pi=Si,Ai=Object(r["withScopeId"])("data-v-21c84d9e");Object(r["pushScopeId"])("data-v-21c84d9e");var Ei={class:"view-port-content"},Bi=Object(r["createVNode"])("b",null," Drugs ",-1),Fi=Object(r["createVNode"])("b",null," Quantity",-1),Li=Object(r["createVNode"])("b",null," Frequency ",-1),Mi={class:"his-card",style:{textAlign:"left"}};Object(r["popScopeId"])();var Hi=Ai((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-col"),s=Object(r["resolveComponent"])("ion-row"),u=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("ion-grid"),d=Object(r["resolveComponent"])("view-port");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:Ai((function(){return[Object(r["createVNode"])("div",Ei,[Object(r["createVNode"])(l,null,{default:Ai((function(){return[Object(r["createVNode"])(s,null,{default:Ai((function(){return[Object(r["createVNode"])(c,{size:"6"},{default:Ai((function(){return[Bi]})),_:1}),Object(r["createVNode"])(c,{size:"3"},{default:Ai((function(){return[Fi]})),_:1}),Object(r["createVNode"])(c,{size:"3"},{default:Ai((function(){return[Li]})),_:1})]})),_:1}),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:n},{default:Ai((function(){return[Object(r["createVNode"])(c,{size:"6"},{default:Ai((function(){return[Object(r["createVNode"])("div",Mi,Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(c,{size:"3"},{default:Ai((function(){return[Object(r["createVNode"])(u,{readonly:"",value:t.other.quantity,onClick:function(n){return e.editQuantity(t)},class:"his-card"},null,8,["value","onClick"])]})),_:2},1024),Object(r["createVNode"])(c,{size:"3"},{default:Ai((function(){return[Object(r["createVNode"])(u,{readonly:"",value:t.other.frequency,onClick:function(n){return e.editFrequency(t)},class:"his-card"},null,8,["value","onClick"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})])]})),_:1})})),Ui=Object(r["defineComponent"])({components:{ViewPort:u["a"],IonGrid:l["p"],IonCol:l["m"],IonRow:l["J"],IonInput:l["v"]},mixins:[s["a"]],data:function(){return{listData:[]}},watch:{clear:{handler:function(){this.listData=this.listData.filter((function(e){return e.other.frequency="",e.other.quantity="",!0}))},immediate:!0},listData:{handler:function(){this.$emit("onValue",this.listData)},deep:!0,immediate:!0}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata,e.cdata,e.listData);case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()},methods:{launchEditor:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:Sa["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()},editFrequency:function(e){var t=this;this.launchEditor({id:"edit_frequency",helpText:"Edit Frequency for ".concat(e.label),type:oc.TT_SELECT,defaultValue:function(){return e.other.frequency},options:function(){return Object(d["isEmpty"])(t.config.drugFrequencies)?[]:t.config.drugFrequencies},validation:function(e){return Pa["a"].required(e)}},(function(t){e.other.frequency=t.value}))},editQuantity:function(e){this.launchEditor({id:"edit_quantity",helpText:"Edit quantity for ".concat(e.label),type:oc.TT_NUMBER,defaultValue:function(){return e.other.quantity},validation:function(e){return Pa["a"].required(e)}},(function(t){e.other.quantity=parseInt("".concat(t.value))}))}}});n("7510");const qi=f()(Ui,[["render",Hi],["__scopeId","data-v-21c84d9e"]]);var Gi=qi,zi=n("adc7"),Yi=Object(r["withScopeId"])("data-v-770bc616");Object(r["pushScopeId"])("data-v-770bc616");var Wi=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"Drug"),Object(r["createVNode"])("th",null,"Frequency"),Object(r["createVNode"])("th",null,"Dosage"),Object(r["createVNode"])("th",null,"Duration"),Object(r["createVNode"])("th")])],-1);Object(r["popScopeId"])();var $i=Yi((function(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("ion-input"),s=Object(r["resolveComponent"])("ion-icon"),u=Object(r["resolveComponent"])("ion-button"),l=Object(r["resolveComponent"])("ion-col"),d=Object(r["resolveComponent"])("ion-row"),p=Object(r["resolveComponent"])("ion-grid");return Object(r["openBlock"])(),Object(r["createBlock"])(p,null,{default:Yi((function(){return[Object(r["createVNode"])(d,{class:"his-card section drug-section-style"},{default:Yi((function(){return[Object(r["createVNode"])(l,null,{default:Yi((function(){return[Object(r["createVNode"])("table",null,[Wi,Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.drugs,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:n},[Object(r["createVNode"])("td",null,[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(t.label),1)]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(c,{readonly:"",onClick:function(n){return e.selectFrequency(t)},value:t.other.frequency,class:"dosage-input",placeholder:"Add frequency.."},null,8,["onClick","value"])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(c,{readonly:"",onClick:function(n){return e.launchKeyPad(t,"dosage")},value:t.other.dosage,placeholder:"Add dosage..",class:"dosage-input"},null,8,["onClick","value"])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(c,{readonly:"",onClick:function(n){return e.launchKeyPad(t,"duration")},value:t.other.duration,placeholder:"Add duration..",class:"dosage-input"},null,8,["onClick","value"])]),Object(r["createVNode"])("td",null,[Object(r["createVNode"])(u,{onClick:function(n){return e.removeDrug(t)},color:"danger"},{default:Yi((function(){return[Object(r["createVNode"])(s,{icon:e.trash},null,8,["icon"])]})),_:1},8,["onClick"])])])})),128))])])]})),_:1})]})),_:1})]})),_:1})})),Ki=(n("7db0"),n("996c")),Ji=n("1b47"),Xi=Object(r["defineComponent"])({components:{IonInput:l["v"],IonGrid:l["p"],IonCol:l["m"],IonIcon:l["r"],IonRow:l["J"],IonButton:l["d"]},mixins:[s["a"]],data:function(){return{trash:ta["bb"],drugs:[]}},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.options(e.fdata,e.cdata);case 3:n=t.sent,e.drugs=n.map((function(t){return t.other.frequency=e.getFrequency(t),t.other.dosage=e.getDosage(t),void 0===t.other.duration&&(t.other.duration=""),t}));case 5:case"end":return t.stop()}}),t)})))()},methods:{getFrequency:function(e){if(e.other.frequency){var t=Ki["b"].find((function(t){return t.value===parseInt(e.other.frequency)}));if(t)return t.label}return""},getDosage:function(e){return e.other.dosage?e.other.dosage:e.other["dose_strength"]?e.other["dose_strength"]:""},removeDrug:function(e){this.drugs=this.drugs.filter((function(t){return t.label!=e.label}))},selectFrequency:function(e){return Object(c["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["cb"].create({component:Ji["a"],backdropDismiss:!1,componentProps:{title:"".concat(e.label," Frequency"),list:Ki["b"].map((function(e){return e.label})),actionButtons:[{name:"Cancel",color:"danger",slot:"start",role:"default"},{name:"Ok",slot:"end",role:"action"}]}});case 2:return n=t.sent,n.present(),t.next=6,n.onDidDismiss();case 6:r=t.sent,a=r.data,"Cancel"!==a.action&&(e.other.frequency=a.selection);case 9:case"end":return t.stop()}}),t)})))()},launchKeyPad:function(e,t){return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l["cb"].create({component:Ie["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{title:"".concat(e.label," ").concat(t),preset:e.other[t],strictNumbers:!0,onKeyPress:function(n){e.other[t]=n}}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()}},computed:{},watch:{clear:function(){this.drugs=this.drugs.map((function(e){return e.frequency="",e.duration="",e.dose="",e.units="",e}))},drugs:{handler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$emit("onValue",e.drugs);case 1:case"end":return t.stop()}}),t)})))()},immediate:!0,deep:!0}}});n("4e4d"),n("221a");const Qi=f()(Xi,[["render",$i],["__scopeId","data-v-770bc616"]]);var Zi=Qi;n("a4d3"),n("e01a");function ec(e,t,n,a,o,i){var c=Object(r["resolveComponent"])("his-text-input"),s=Object(r["resolveComponent"])("ion-chip"),u=Object(r["resolveComponent"])("ion-text"),l=Object(r["resolveComponent"])("ion-label"),d=Object(r["resolveComponent"])("ion-checkbox"),p=Object(r["resolveComponent"])("ion-item"),b=Object(r["resolveComponent"])("ion-list"),f=Object(r["resolveComponent"])("ion-infinite-scroll-content"),m=Object(r["resolveComponent"])("ion-infinite-scroll"),h=Object(r["resolveComponent"])("ion-content"),g=Object(r["resolveComponent"])("view-port"),v=Object(r["resolveComponent"])("his-keyboard");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(g,{showFull:!e.showKeyboard},{default:Object(r["withCtx"])((function(){return[e.showKeyboard?(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,value:e.selected,onOnValue:e.onKBValue},null,8,["value","onOnValue"])):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.checkedItems,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(s,{color:"danger",key:n,onClick:function(n){return e.unCheck(t)}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1032,["onClick"])})),128)),Object(r["createVNode"])(h,{style:{width:"100%"},class:"ion-padding-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("div",{class:["ion-content-scroll-host",{"ion-margin-bottom ion-padding-bottom":e.disableScroll}]},[Object(r["createVNode"])(b,{class:["view-port-content",{"ion-margin-bottom":e.disableScroll}]},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.listData,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:n,color:t.isChecked?"lightblue":"",lines:t.isChecked?"none":""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){var e;return[Object(r["createVNode"])(u,{class:"his-md-text"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),t.description&&t.isChecked?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,color:null===(e=t.description)||void 0===e?void 0:e.color},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("p",null,[Object(r["createVNode"])("i",null,Object(r["toDisplayString"])(t.description.text),1)])]})),_:2},1032,["color"])):Object(r["createCommentVNode"])("",!0)]})),_:2},1024),Object(r["createVNode"])(d,{slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e},onIonChange:function(n){return e.onSelect(t,n)},disabled:t.disabled},null,8,["modelValue","onUpdate:modelValue","onIonChange","disabled"])]})),_:2},1032,["color","lines"])})),128))]})),_:1},8,["class"]),Object(r["createVNode"])(m,{onIonInfinite:t[1]||(t[1]=function(t){return e.pushData(t)}),threshold:"100px",disabled:e.disableScroll},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{"loading-spinner":"crescent","loading-text":"Loading more data..."})]})),_:1},8,["disabled"])],2)]})),_:1})]})),_:1},8,["showFull"]),e.showKeyboard?(Object(r["openBlock"])(),Object(r["createBlock"])(v,{key:0,kbConfig:e.keyboard,onKeyPress:e.keypress},null,8,["kbConfig","onKeyPress"])):Object(r["createCommentVNode"])("",!0)],64)}var tc=n("6be2"),nc=n("db10"),rc=Object(r["defineComponent"])({name:"HisInfiniteScrollMultipleSelect",mixins:[s["a"]],components:{IonCheckbox:l["k"],IonText:l["R"],IonChip:l["l"],ViewPort:u["a"],HisTextInput:Ea["a"],IonContent:l["n"],IonList:l["y"],IonItem:l["w"],IonLabel:l["x"],HisKeyboard:nc["a"],IonInfiniteScroll:l["t"],IonInfiniteScrollContent:l["u"]},data:function(){return{showKeyboard:!1,keyboard:tc["h"],listData:[],checkedItems:[],disableScroll:!1,filter:"",selected:"",page:1,limit:10}},watch:{clear:function(){this.checkedItems=[],this.filter="",this.selected=""},checkedItems:{handler:function(e){this.listData.forEach((function(t){e.find((function(e){return e.value===t.value}))?t.isChecked=!0:t.isChecked=!1})),this.$emit("onValue",e)},deep:!0,immediate:!0},filter:{handler:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.page=1,e.disableScroll=!1,t.next=4,e.getListData();case 4:n=t.sent,Object(L["a"])(e.checkedItems).forEach((function(e){var t=n.findIndex((function(t){return t.value===e.value}));-1===t?n.push(e):n[t].isChecked=!0})),e.listData=n;case 7:case"end":return t.stop()}}),t)})))()}}},methods:{getListData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.options(e.fdata,e.filter,e.page,e.limit);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},keypress:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.filter||(t.selected=""),t.filter=Object(x["a"])(e,t.selected),t.selected=t.filter;case 3:case"end":return n.stop()}}),n)})))()},onKBValue:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.listData&&t.selected!==e){n.next=2;break}return n.abrupt("return");case 2:t.filter=e,t.selected=t.filter;case 4:case"end":return n.stop()}}),n)})))()},pushData:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.page++,n.next=3,t.getListData();case 3:r=n.sent,r.length>0?t.listData=[].concat(Object(L["a"])(t.listData),Object(L["a"])(r.filter((function(e){return!t.listData.find((function(t){return t.value===e.value}))})))):t.disableScroll=!0,e.target.complete();case 6:case"end":return n.stop()}}),n)})))()},onSelect:function(e,t){var n=this;this.$nextTick(Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.isChecked?-1===n.checkedItems.findIndex((function(t){return t.value===e.value}))&&n.checkedItems.push(e):n.unCheck(e);case 1:case"end":return t.stop()}}),t)}))))},unCheck:function(e){this.checkedItems=this.checkedItems.filter((function(t){return t.value!==e.value}))}},created:function(){var e,t,n,r,a,o,i,c;this.showKeyboard=null!==(e=null===(t=this.config)||void 0===t?void 0:t.showKeyboard)&&void 0!==e&&e,this.keyboard=null!==(n=null===(r=this.config)||void 0===r?void 0:r.keyboard)&&void 0!==n?n:tc["h"],this.page=null!==(a=null===(o=this.config)||void 0===o?void 0:o.page)&&void 0!==a?a:1,this.limit=null!==(i=null===(c=this.config)||void 0===c?void 0:c.limit)&&void 0!==i?i:10},activated:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$emit("onFieldActivated",e),t.next=3,e.getListData();case 3:e.listData=t.sent;case 4:case"end":return t.stop()}}),t)})))()}});const ac=f()(rc,[["render",ec]]);var oc,ic=ac;(function(e){e["TT_MULTI_SELECT_GRID"]="his-multi-select-grid",e["TT_AGE_INPUT"]="his-age-input",e["TT_GROUP_SELECTOR"]="HisGroupSelector",e["TT_DATA_TABLE"]="HisDataTable",e["TT_GRID_SELECTOR"]="HisGridSelector",e["TT_NOTE"]="NoteInput",e["TT_BARCODE"]="BarcodeInput",e["TT_MONTHLY_DAYS"]="monthly-days",e["TT_TEXT"]="text-input",e["TT_NUMBER"]="number-input",e["TT_DATETIME"]="datetime",e["TT_SELECT"]="single-select",e["TT_MULTIPLE_SELECT"]="multiple-select",e["TT_ART_REGIMEN_SELECTION"]="art-regimen-selection",e["TT_NEXT_VISIT_INTERVAL_SELECTION"]="next-visit-interval",e["TT_TABLE_VIEWER"]="table-viewer",e["TT_DOSAGE_INPUT"]="dosage-input",e["TT_YES_NO"]="yes-no",e["TT_MULTIPLE_YES_NO"]="multi-yes-no",e["TT_SUMMARY"]="summary-page",e["TT_WEIGHT_CHART"]="weight-chart",e["TT_VITALS_ENTRY"]="vitals-entry",e["TT_ADHERENCE_INPUT"]="adherence-input",e["TT_ART_STAGING_SUMMARY"]="art-staging-summary",e["TT_LAB_ORDERS"]="lab-orders",e["TT_APPOINTMENTS_ENTRY"]="appointments-entry",e["TT_DISPENSATION_INPUT"]="dispensation-input",e["TT_PROGRAM_SELECTION"]="ProgamSelection",e["TT_APPOINTMENT_PICKER"]="appointment-picker",e["TT_PERSON_RESULT_VIEW"]="PersonSearchView",e["TT_RELATION_SELECTION"]="RelationSelection",e["TT_FILING_NUMBER_VIEW"]="FilingNumberView",e["TT_CARD_SELECTOR"]="SingleSelectCards",e["TT_PERSON_MATCH_VIEW"]="PersonMatchView",e["TT_FULL_DATE"]="date-input",e["TT_BATCH_ENTRY"]="batch-entry",e["TT_BATCH_VERIFICATION"]="batch-verification",e["TT_BATCH_MOVEMENT"]="batch-movement",e["TT_COMPLAINTS_PICKER"]="complaints-picker",e["TT_RADIOLOGY_PICKER"]="radiology-picker",e["TT_IP_ADDRESS"]="IPAddressInput",e["TT_TEXT_BANNER"]="text-banner",e["TT_DRUG_DISPENSER"]="drug-dispenser",e["TT_CLINIC_HOLIDAY_PICKER"]="clinic-holiday-picker",e["TT_ANC_PREGNANCY_INPUT_CONFIG"]="anc-pregnancy-info-config",e["TT_ANC_PREGNANCY_DETAILS_INPUT"]="anc-pregnancy-details-input",e["TT_ANC_LMP_DATE_INPUT"]="anc-lmp-date-input",e["TT_ANC_DRUGSET_INPUT"]="AncDrugSetInput",e["TT_DRUG_TRANSFER_IN"]="drug-transfer-in-qty",e["TT_PRESCRIPTION_INPUT"]="prescription-input",e["TT_INFINITE_SCROLL_MULTIPLE_SELECT"]="infinite-scroll-multiple-select"})(oc||(oc={}));var cc={HisDataTable:qo,TextInput:S["a"],SingleSelect:T["a"],MultipleSelect:R["a"],NumberInput:P["a"],MonthlyDays:A["a"],BarcodeInput:v["a"],ArtRegimenSelection:J,NextVisitInterval:pe,TableViewer:Oe,DosageInput:Pe,YesNo:Ae["a"],SummaryPage:on,MultiYesNo:Ee["a"],WeightChart:$e,VitalsEntry:bt,AdherenceInput:xn,ArtStagingSummary:hn,LabOrders:An,AppointmentsEntry:St,DispensationInput:fr,ProgamSelection:kr,AppointmentPicker:Tr,PersonSearchView:Br,RelationSelection:aa,FilingNumberView:pa,SingleSelectCards:I["a"],PersonMatchView:xa,DateInput:Na["a"],BatchEntry:La,BatchVerification:Ka,BatchMovement:to,ComplaintsPicker:Ht,IPAddressInput:no["a"],TextBanner:uo,DrugDispenser:Eo,ClinicHolidayPicker:$t,NoteInput:D,HisGroupSelector:Ko,AncPregnancyInfoConfig:oi,AncPregnancyDetailsInput:pi,HisAgeInput:g["a"],HisMultiSelectGrid:h,AncLmpDateInput:Oi,DrugTransferInQty:Di,HisGridSelector:Pi,AncDrugSetInput:Gi,RadiologyPicker:zi["a"],PrescriptionInput:Zi,InfiniteScrollMultipleSelect:ic}},d9bd:function(e,t,n){"use strict";n("a7b1")},d9d9:function(e,t,n){},da71:function(e,t,n){},dac2:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,a=n("2909"),o=n("1da1"),i=n("d4ec"),c=n("bee2"),s=n("262e"),u=n("2caf"),l=(n("96cf"),n("d81d"),n("caad"),n("2532"),n("d3b7"),n("99af"),n("159b"),n("07ac"),n("4de4"),n("b0c0"),n("3ca3"),n("ddb0"),n("25f0"),n("71c3")),d=n("9283"),p=n("6d32"),b=n("2ef0"),f=n("cc6f");(function(e){e["CONTRAINDICATION"]="contraindication",e["SIDE_EFFECT"]="side_effect"})(r||(r={}));var m=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(e,r){var a;return Object(i["a"])(this,n),a=t.call(this,e,25,r),a.nextVisitInterval=0,a.fastTrack=!1,a.regimenExtras=[],a.fastTrackMedications=[],a.hangingPills=[],a.medicationOrders=[],a.treatmentState="",a.contraindications={},a.sideEffects={},a.tptPrescriptionCount=0,a.lastSideEffectDate="",a}return Object(c["a"])(n,[{key:"setNextVisitInterval",value:function(e){this.nextVisitInterval=e}},{key:"getHangingPills",value:function(){return this.hangingPills}},{key:"getMedicationOrders",value:function(){return this.medicationOrders.map((function(e){return f["a"].getCachedConceptName(e)}))}},{key:"getTptPrescriptionCount",value:function(){return this.tptPrescriptionCount}},{key:"getLastSideEffectDate",value:function(){return this.lastSideEffectDate}},{key:"getContraindications",value:function(){return this.contraindications}},{key:"getSideEffects",value:function(){return this.sideEffects}},{key:"getRegimenExtras",value:function(){return this.regimenExtras}},{key:"getPatientRegimens",value:function(){return p["a"].getRegimens(this.patientID)}},{key:"getCustomIngridients",value:function(){return p["a"].getCustomIngridients()}},{key:"getFastTrackMedications",value:function(){return this.fastTrackMedications}},{key:"getTreatmentState",value:function(){return this.treatmentState}},{key:"isFastTrack",value:function(){return this.fastTrack}},{key:"medicationOrdersAvailable",value:function(){return!Object(b["isEmpty"])(this.medicationOrders)}},{key:"shouldPrescribeArvs",value:function(){var e=f["a"].getCachedConceptID("Antiretroviral drugs");return this.medicationOrders.includes(e)}},{key:"shouldPrescribeExtras",value:function(){var e=this,t=f["a"].getConceptsByCategory("art_extra_medication_order"),n=t.map((function(t){return e.medicationOrders.includes(t.concept_id)}));return n.some(Boolean)}},{key:"getRegimenStarterpack",value:function(e,t){var n={weight:t,regimen:e};return f["a"].getJson("programs/".concat(f["a"].getProgramID(),"/regimen_starter_packs"),n)}},{key:"getLvpDrugsByType",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f["a"].getJson("programs/".concat(f["a"].getProgramID(),"/regimens/").concat(n),{patient_id:this.patientID,lpv_drug_type:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"loadContraindications",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getConceptID("Contraindications");case 2:return t=e.sent,e.next=5,f["a"].getObs({concept_id:t,person_id:this.patientID});case 5:n=e.sent,n.forEach((function(e){var t=d["b"].toStandardHisFormat(e.obs_datetime);r.contraindications[t]||(r.contraindications[t]=[]);var n=f["a"].getCachedConceptName(e.value_coded);r.contraindications[t].push(n)}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadDrugInduced",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getConceptID("Drug induced");case 2:return t=e.sent,e.next=5,f["a"].getObs({concept_id:t,person_id:this.patientID});case 5:if(n=e.sent,n){e.next=8;break}return e.abrupt("return");case 8:n.forEach((function(e){var t=d["b"].toStandardHisFormat(e.obs_datetime);if(r.lastSideEffectDate||(r.lastSideEffectDate=t),e.value_drug&&e.value_coded){r.sideEffects[t]||(r.sideEffects[t]={}),r.sideEffects[t][e.value_drug]||(r.sideEffects[t][e.value_drug]=[]);var n=f["a"].getCachedConceptName(e.value_coded);r.sideEffects[t][e.value_drug].push(n)}}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadTptPrescriptionCount",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getJson("tpt_prescription_count",{patient_id:this.patientID,date:this.date});case 2:t=e.sent,t&&(n=t.count+1,this.tptPrescriptionCount=n>3?3:n);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFastTrackStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getFirstValueCoded(this.patientID,"Fast track");case 2:return t=e.sent,e.next=5,f["a"].getConceptID("yes");case 5:n=e.sent,t&&(this.fastTrack=t===n);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadRegimenExtras",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:this.date,e.next=3,p["a"].getJson("programs/".concat(p["a"].getProgramID(),"/patients/").concat(this.patientID,"/dosages"),{date:t});case 3:n=e.sent,n&&(this.regimenExtras=Object.values(n));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadMedicationOrders",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getConceptID("Medication orders");case 2:return t=e.sent,e.next=5,f["a"].getObs({concept_id:t,date:this.date,person_id:this.patientID,page_size:5});case 5:n=e.sent,this.medicationOrders=n.map((function(e){return e.value_coded}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadHangingPills",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getAll(this.patientID,"Pills brought");case 2:t=e.sent,t&&(this.hangingPills=t.filter((function(e){return e.value_numeric>=1&&e.order})).map((function(e){return e.order.drug_order.drug_inventory_id})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadFastTrackMedications",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].getLastDrugsReceived(this.patientID);case 2:return t=e.sent,n=t.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.drug,e.next=3,l["a"].getDrugDosages(r.patientID,n.drug_id);case 3:return a=e.sent,e.abrupt("return",{drug_id:n.drug_id,drug_name:n.name,units:n.units,am:a.am,noon:a.noon,pm:a.pm,frequency:t.frequency});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(n);case 6:this.fastTrackMedications=e.sent;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"loadTreatmentState",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={date:this.date},e.next=3,f["a"].getJson("programs/".concat(f["a"].getProgramID(),"/patients/").concat(this.patientID,"/status"),t);case 3:n=e.sent,n&&(this.treatmentState=n["status"]);case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"findAndGroupDrugSideEffects",value:function(e){var t={};for(var n in this.sideEffects){var r=this.sideEffects[n];for(var o in r)e.includes(parseInt(o))&&(t[n]||(t[n]=[]),t[n]=[].concat(Object(a["a"])(t[n]),Object(a["a"])(r[o])))}return t}},{key:"calculatePillsPerDay",value:function(e,t,n){return parseFloat(e.toString())+t+n}},{key:"estimatePackSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e*this.nextVisitInterval/t,r=Math.round(n);return r<=0&&(r+=1),r}},{key:"calculateDosage",value:function(e,t){var n=0;return 0===t&&(n=e),0==e&&(n=t),e>0&&t>0&&(n=(e+t)/2),n}},{key:"calculateEquivalentDosage",value:function(e,t){return e+t}},{key:"calculateDateFromInterval",value:function(){var e=new Date(this.date);return e.setDate(e.getDate()+this.nextVisitInterval),d["b"].toStandardHisFormat(e)}},{key:"getDrugPackSize",value:function(e){if(e.pack_size)return e.pack_size;try{return e.barcodes[0].tabs}catch(t){return 30}}},{key:"getInstructions",value:function(e,t,n,r){return"".concat(e," :- Morning: ").concat(t," ").concat(r,", Evening: ").concat(n," ").concat(r)}},{key:"toOrderObj",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return{drug_inventory_id:e,equivalent_daily_dose:this.calculateEquivalentDosage(r,a),start_date:this.date,auto_expire_date:this.calculateDateFromInterval(),units:n,instructions:this.getInstructions(t,r,a,n),dose:this.calculateDosage(r,a),frequency:o}}},{key:"getReasonForRegimenSwitch",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f["a"].getFirstValueText(this.patientID,"Reason for ARV switch");case 2:return t=e.sent,e.abrupt("return",t||"N/A");case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"createDrugOrder",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",l["a"].create({encounter_id:this.encounterID,drug_orders:t}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createHangingPillsObs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveValueTextObs("appointment type",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"createRegimenSwitchObs",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveValueTextObs("Reason for ARV switch",t));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(f["a"])},db10:function(e,t,n){"use strict";var r=n("7a23"),a={class:"his-floating-keyboard"},o={class:"his-floating-keyboard-content"};function i(e,t,n,i,c,s){var u=Object(r["resolveComponent"])("base-keyboard");return Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["createVNode"])("div",o,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.activeLayout,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:n},[Object(r["createVNode"])(u,{layout:t,onKeyPress:e.keypress},null,8,["layout","onKeyPress"])])})),128))])])}n("d81d");var c=n("6be2"),s=n("c924"),u=Object(r["defineComponent"])({components:{BaseKeyboard:s["a"]},props:{initalKeyboardName:{type:String},kbConfig:{type:Array,required:!0},onKeyPress:{type:Function,required:!0}},data:function(){return{activeLayout:{}}},watch:{initalKeyboardName:{handler:function(e){var t=this;e&&this.$nextTick((function(){return t.switchKeyboard(e)}))},immediate:!0},kbConfig:{handler:function(e){e&&(this.activeLayout=e)},deep:!0,immediate:!0}},methods:{keypress:function(e){this.isFunctionKey(e)||this.onKeyPress(e)},isFunctionKey:function(e){return!!this.switchKeyboard(e)},switchKeyboard:function(e){var t=c["a"].map((function(e){return e.btn})).indexOf(e);return t>=0&&(this.activeLayout=c["a"][t].keyboard,!0)}}}),l=n("6b0d"),d=n.n(l);const p=d()(u,[["render",i]]);t["a"]=p},dd35:function(e,t,n){"use strict";n("3063")},dd65:function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-a66750c2");Object(r["pushScopeId"])("data-v-a66750c2");var o={class:"his-card"};Object(r["popScopeId"])();var i=a((function(e,t,n,a,i,c){var s=Object(r["resolveComponent"])("barcode-input");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])(s,{onOnScan:e.onScan},null,8,["onOnScan"])])})),c=n("1da1"),s=(n("96cf"),n("51c8")),u=n("efaf"),l=Object(r["defineComponent"])({mixins:[s["a"]],components:{BarcodeInput:u["a"]},methods:{onScan:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.onValue){n.next=6;break}return n.next=3,t.onValue(e);case 3:if(r=n.sent,r){n.next=6;break}return n.abrupt("return");case 6:t.$emit("onValue",e);case 7:case"end":return n.stop()}}),n)})))()}}}),d=(n("a16a"),n("6b0d")),p=n.n(d);const b=p()(l,[["render",i],["__scopeId","data-v-a66750c2"]]);t["a"]=b},ddb2:function(e,t,n){"use strict";n("79af")},ddd4:function(e,t,n){"use strict";n("9b7cc")},de49:function(e,t,n){"use strict";n("ee38")},ded6:function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-65e1cf74"),o=a((function(e,t,n,o,i,c){var s=Object(r["resolveComponent"])("ion-skeleton-text"),u=Object(r["resolveComponent"])("ion-item"),l=Object(r["resolveComponent"])("ion-list");return Object(r["openBlock"])(),Object(r["createBlock"])(l,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.items,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:t},{default:a((function(){return[Object(r["createVNode"])(s,{animated:"",style:{width:"100%"}})]})),_:2},1024)})),128))]})),_:1})})),i=(n("a9e3"),n("8a30")),c=Object(r["defineComponent"])({components:{IonSkeletonText:i["P"],IonList:i["y"],IonItem:i["w"]},props:{itemCount:{type:Number,default:10}},setup:function(e){for(var t=[],n=0;n<e.itemCount;++n)t.push(n);return{items:t}}}),s=(n("95a0"),n("6b0d")),u=n.n(s);const l=u()(c,[["render",o],["__scopeId","data-v-65e1cf74"]]);t["a"]=l},df93:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n("5530"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=n("bef6"),u=n("5969"),l=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,[{key:"getVLCoverage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getReport("programs/".concat(this.programID,"/reports/viral_load_coverage"),Object(r["a"])({rebuild_outcomes:!0},e))}},{key:"getMaternalStatus",value:function(e){var t=s["a"].parameterizeObjToString({start_date:this.startDate,end_date:this.endDate,date:this.date,program_id:this.programID,report_definition:"pepfar"});return u["a"].postJson("vl_maternal_status?".concat(t),{patient_ids:e})}},{key:"getViralLoad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getReport("programs/".concat(this.programID,"/reports/vl_disaggregated"),e)}}]),n}(u["a"])},df95:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u}));var r,a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=n("5969");(function(e){e["DobMoreThanEnrolledDate"]="DOB MORE THAN DATE ENROLLED",e["ClientsWithEncountersAfterDeath"]="CLIENTS WITH ENCOUNTERS AFTER DECLARED DEAD",e["DateEnrolledLessThanEarliestStartDate"]="DATE ENROLLED LESS THAN EARLIEST START DATE",e["MalesWithFemaleObs"]="MALE CLIENTS WITH FEMALE OBS",e["PrescriptionWithoutDispensation"]="PRESCRIPTION WITHOUT DISPENSATION",e["MissingDemographics"]="MISSING DEMOGRAPHICS",e["MissingStartReasons"]="MISSING START REASONS",e["MultipleStartReasons"]="MULTIPLE START REASONS",e["PreArtOrUnknownOutcomes"]="PRE ART OR UNKNOWN OUTCOMES"})(r||(r={}));var u=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,[{key:"saveDataCleaningVerification",value:function(e){return s["a"].postJson("data_cleaning_confirmation",e)}},{key:"getCleaningToolReport",value:function(e){return this.getReport("art_data_cleaning_tools",{report_name:e})}},{key:"getEnrolledOnArtBeforeBirth",value:function(){return s["a"].getJson("enrolled_on_art_before_birth")}},{key:"getIncompleteVisits",value:function(){return this.getReport("incomplete_visits",{tool_name:"INCOMPLETE VISITS"})}}]),n}(s["a"])},e109:function(e,t,n){"use strict";n("2be2")},e1cf:function(e,t,n){var r={"./ion-icon.entry.js":["ec64","chunk-2d2304d2"]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id="e1cf",e.exports=a},e2d9:function(e,t,n){"use strict";n("18aa")},e2ee:function(e,t,n){"use strict";n("48de")},e3be:function(e,t,n){"use strict";n("c336")},e63c:function(e,t,n){"use strict";n("c419")},e6e9:function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["createTextVNode"])(" Close "),o=Object(r["createTextVNode"])(" Clear "),i=Object(r["createTextVNode"])(" Done ");function c(e,t,n,c,s,u){var l=Object(r["resolveComponent"])("ion-title"),d=Object(r["resolveComponent"])("ion-toolbar"),p=Object(r["resolveComponent"])("ion-header"),b=Object(r["resolveComponent"])("ion-content"),f=Object(r["resolveComponent"])("ion-button"),m=Object(r["resolveComponent"])("ion-footer"),h=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{class:"his-lg-text ion-text-center"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.currentField.helpText),1)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(),Object(r["createBlock"])(r["KeepAlive"],null,[(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.currentField.type),{key:e.currentField.id,currentFieldig:e.currentField.currentFieldig,options:e.currentField.options,preset:e.currentField.preset,clear:e.valueClearIndex,fdata:e.formData,config:e.currentField.config,cdata:e.computedFormData,activationState:e.state,onValue:e.currentField.onValue,defaultValue:e.currentField.defaultValue,onValueUpdate:e.currentField.onValueUpdate,onOnValue:e.onFieldValue},null,8,["currentFieldig","options","preset","clear","fdata","config","cdata","activationState","onValue","defaultValue","onValueUpdate","onOnValue"]))],1024))]})),_:1}),Object(r["createVNode"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{color:"light"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{disabled:e.disableBtn,onClick:e.onClose,slot:"start",color:"danger",size:"large"},{default:Object(r["withCtx"])((function(){return[a]})),_:1},8,["disabled","onClick"]),Object(r["createVNode"])(f,{disabled:e.disableBtn,onClick:e.onClear,slot:"end",color:"warning",size:"large"},{default:Object(r["withCtx"])((function(){return[o]})),_:1},8,["disabled","onClick"]),Object(r["createVNode"])(f,{disabled:e.disableBtn,onClick:e.onDone,slot:"end",color:"success",size:"large"},{default:Object(r["withCtx"])((function(){return[i]})),_:1},8,["disabled","onClick"])]})),_:1})]})),_:1})]})),_:1})}n("a15b");var s=n("b5e4"),u=n("8a30"),l=n("dd65"),d=n("d11f"),p=n("0734"),b=n("2fd5"),f=n("6ef9"),m=n("5e75"),h=n("69cf"),g=n("71f2"),v=n("5fd1"),O=n("2a82"),j=n("374c"),_=n("c05f"),w=Object(r["defineComponent"])({name:"SingleFieldTouchForm",components:{IonPage:u["F"],IonContent:u["n"],IonFooter:u["o"],IonToolbar:u["V"],IonButton:u["d"],IonHeader:u["q"],IonTitle:u["U"],TextInput:f["a"],SingleSelect:d["a"],MultipleSelect:b["a"],NumberInput:m["a"],MonthlyDays:h["a"],BarcodeInput:l["a"],YesNo:g["a"],MultiYesNo:v["a"],SingleSelectCards:p["a"],DateInput:j["a"],IPAddressInput:O["a"],HisAgeInput:_["a"]},props:{dismissType:{type:String},onFinish:{type:Function,required:!0},currentField:{type:Object,required:!0}},data:function(){return{valueClearIndex:0,formData:{},computedFormData:{},state:"",value:null,disableBtn:!1}},methods:{onClose:function(){"modal"===this.dismissType?u["cb"].dismiss():this.$router.back()},onClear:function(){this.valueClearIndex+=1,this.value=null},onFieldValue:function(e){this.value=e},onDone:function(){if(this.disableBtn=!0,this.currentField.validation){var e=this.currentField.validation(this.value);if(this.disableBtn=!1,e)return Object(s["e"])(e.join(", "),6e4)}try{this.onFinish(this.value)}catch(t){Object(s["c"])(t),console.error(t)}this.onClose(),this.disableBtn=!1}}}),k=n("6b0d"),y=n.n(k);const x=y()(w,[["render",c]]);t["a"]=x},e86e:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"g",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"h",(function(){return v})),n.d(t,"i",(function(){return j})),n.d(t,"j",(function(){return w})),n.d(t,"e",(function(){return y}));var r=n("1da1"),a=(n("96cf"),n("d81d"),n("4de4"),n("d3b7"),n("b0c0"),n("5713")),o=n("2ef0");function i(){return c.apply(this,arguments)}function c(){return c=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,a["a"].getFacilities({name:t});case 3:return n=e.sent,e.abrupt("return",n.filter((function(e){return!Object(o["isEmpty"])(e)})).map((function(e){return{label:e.name,value:e.location_id,other:e}})));case 5:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function s(){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,a["a"].getLabs({search_name:t});case 3:return n=e.sent,e.abrupt("return",n.map((function(e){return{label:e,value:e}})));case 5:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function l(){return d.apply(this,arguments)}function d(){return d=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",e.next=3,a["a"].getFacilities({name:t,tag:"Facility adult sections"});case 3:return n=e.sent,e.abrupt("return",n.map((function(e){return{label:e.name,value:e.name,other:e}})));case 5:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(){return b.apply(this,arguments)}function b(){return b=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].getSpecialistClinics();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{label:e.name,value:e.name,other:e}})));case 4:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function f(){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].getRegions();case 2:return t=e.sent,e.abrupt("return",t.map((function(e){return{label:e.name,value:e.region_id,other:e}})));case 4:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function h(e){return g.apply(this,arguments)}function g(){return g=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["a"].getDistricts(t);case 2:return n=e.sent,e.abrupt("return",n.map((function(e){return{label:e.name,value:e.district_id,other:e}})));case 4:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function v(e){return O.apply(this,arguments)}function O(){return O=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",e.next=3,a["a"].getTraditionalAuthorities(t,n);case 3:return r=e.sent,e.abrupt("return",r.map((function(e){return{label:e.name,value:e.traditional_authority_id,other:e}})));case 5:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function j(e){return _.apply(this,arguments)}function _(){return _=Object(r["a"])(regeneratorRuntime.mark((function e(t){var n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"",e.next=3,a["a"].getVillages(t,n);case 3:return r=e.sent,e.abrupt("return",r.map((function(e){return{label:e.name,value:e.village_id,other:e}})));case 5:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function w(){return k.apply(this,arguments)}function k(){return k=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,n,r,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"",n=o.length>1&&void 0!==o[1]?o[1]:1,e.next=4,a["a"].getVillagesByName(t,n);case 4:return r=e.sent,e.abrupt("return",r.map((function(e){return{label:e.name,value:e.village_id,other:e}})));case 6:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function y(){var e=["Catholic Church","CCAP","Seventh Day","Mosque","Primary School","Borehole","Secondary School","College","Market","Football Ground","Other"];return e.map((function(e){return{label:e,value:e,other:{code:e}}}))}},e897:function(e,t,n){"use strict";n("79fe")},e96c:function(e,t,n){"use strict";n("113a")},e9fc:function(e,t,n){"use strict";n("50e0")},ea3a:function(e,t,n){"use strict";n("b85a")},eb8b:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("d4ec"),a=n("bee2"),o=n("262e"),i=n("2caf"),c=n("5969"),s=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(){return Object(r["a"])(this,n),t.call(this)}return Object(a["a"])(n,[{key:"getTBPrevReport",value:function(){return this.getReport("/programs/".concat(this.programID,"/reports/tb_prev2"))}}]),n}(c["a"])},ebcb:function(e,t,n){"use strict";n("7b3a")},ec2a:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("5530"),a=n("d4ec"),o=n("bee2"),i=n("45eb"),c=n("7e84"),s=n("262e"),u=n("2caf"),l=(n("99af"),n("1c74")),d=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,null,[{key:"create",value:function(e){var t=Object(r["a"])({},e);return"program_id"in t||Object.assign(t,{program_id:this.getProgramID()}),"encounter_datetime"in t||Object.assign(t,{encounter_datetime:this.getSessionDate()}),l["e"].postJson("/encounters",t)}},{key:"voidEncounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown";return Object(i["a"])(Object(c["a"])(n),"void",this).call(this,"/encounters/".concat(e),{reason:t})}},{key:"getSavedEncounters",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this);return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"programs/".concat(t,"/patients/").concat(e,"/saved_encounters"))}},{key:"getEncounters",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(Object(c["a"])(n),"getJson",this).call(this,"/encounters",Object(r["a"])({program_id:Object(i["a"])(Object(c["a"])(n),"getProgramID",this).call(this),patient_id:e,paginate:!1},t))}}]),n}(l["e"])},ec58:function(e,t,n){},ecea:function(e,t,n){},ee38:function(e,t,n){},eeac:function(e,t,n){"use strict";n("27c5")},eed0:function(e,t,n){"use strict";n("ec58")},efaf:function(e,t,n){"use strict";var r=n("7a23"),a=Object(r["withScopeId"])("data-v-cc9bc756");Object(r["pushScopeId"])("data-v-cc9bc756");var o=Object(r["createVNode"])("img",{id:"barcode-img",src:"/assets/images/barcode.svg"},null,-1);Object(r["popScopeId"])();var i=a((function(e,t,n,i,c,s){var u=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-row");return Object(r["openBlock"])(),Object(r["createBlock"])(l,null,{default:a((function(){return[Object(r["createVNode"])(u,{size:"2"},{default:a((function(){return[o]})),_:1}),Object(r["createVNode"])(u,{size:"10"},{default:a((function(){return[Object(r["withDirectives"])(Object(r["createVNode"])("input",{readonly:e.useVirtualInput,ref:"barcode",id:"barcode-inputbox","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.barcodeText=t})},null,8,["readonly"]),[[r["vModelText"],e.barcodeText]])]})),_:1})]})),_:1})})),c=(n("ac1f"),n("466d"),n("5319"),n("8a30")),s=n("2345"),u=n("2ed9"),l=Object(r["defineComponent"])({name:"BarcodeInput",components:{IonRow:c["J"],IonCol:c["m"]},props:["clearValue","virtualText"],setup:function(){var e=Object(r["ref"])(null),t=Object(u["a"])(),n=t.useVirtualInput,a=t.platformType;return"desktop"===a.value&&setInterval((function(){try{e.value.focus()}catch(t){}}),1500),{barcode:e,useVirtualInput:n}},data:function(){return{barcodeText:""}},methods:{checkForbarcode:function(){if(null!=this.barcodeText.match(/.+\$$/i)){var e=this.barcodeText.replace(/\$/gi,"");this.$emit("onScan",e),this.barcodeText=""}}},watch:{clearValue:function(){this.barcodeText=""},virtualText:function(e){this.barcodeText=Object(s["a"])(e,this.barcodeText)},barcodeText:function(e){e&&(this.checkForbarcode(),this.$emit("onValue",e))}}}),d=(n("e3be"),n("6b0d")),p=n.n(d);const b=p()(l,[["render",i],["__scopeId","data-v-cc9bc756"]]);t["a"]=b},f01e:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return u}));var r,a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=n("fa94");(function(e){e["MALES_WITH_ANC_ENCOUNTERS"]="MALES WITH ANC ENCOUNTERS",e["ENCOUNTERS_AFTER_DEATH"]="ENCOUNTERS AFTER DEATH",e["INCOMPLETE_VISITS"]="INCOMPLETE VISITS",e["DUPLICATE_ENCOUNTERS"]="DUPLICATE ENCOUNTERS",e["MISSING_HIV_STATUS"]="NO HIV STATUS"})(r||(r={}));var u=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){return Object(a["a"])(this,n),t.call(this)}return Object(o["a"])(n,[{key:"getDataToolReport",value:function(e){return s["a"].getJson("anc_data_cleaning_tools",this.buildRequestParams({report_name:e}))}}]),n}(s["a"])},f085:function(e,t,n){},f099:function(e,t,n){"use strict";n("3aa1")},f145:function(e,t,n){"use strict";n("7ac4")},f226:function(e,t,n){"use strict";n("318c")},f329:function(e,t,n){},f379:function(e,t,n){"use strict";n("9877")},f768:function(e,t,n){"use strict";var r=n("3835"),a=n("1da1"),o=(n("99af"),n("ac1f"),n("1276"),n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("d1ca")),i=n("7a23");function c(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{skipSummary:!0,onOnIndex:t[1]||(t[1]=function(t){return e.fieldComponent=""}),activeField:e.fieldComponent,cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["activeField","cancelDestinationPath","fields","onFinishAction"])}var s,u,l,d=n("5530"),p=n("2909"),b=(n("d81d"),n("25f0"),n("a15b"),n("4e82"),n("466d"),n("b0c0"),n("d95e")),f=n("2706"),m=n("dac2"),h=n("b5e4"),g=n("9283"),v=n("c21d"),O=n("2ef0"),j=n("7365"),_=(n("caad"),n("4de4"),n("2532"),n("7f35"));(function(e){e["ARV_REGIMENS"]="arv_regimens",e["INTERVAL_SELECTION"]="next_visit_interval"})(s||(s={})),function(e){e["EXIT"]="exit",e["CONTINUE"]="continue"}(u||(u={})),function(e){e["ON_VALUE"]="onValue",e["ON_BUILD"]="onBuild",e["BEFORE_NEXT"]="beforeNext"}(l||(l={}));var w={"Do not prescribe LPV regimens together with 3HP":{priority:1,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.regimenName,e.next=3,Object(_["a"])("3HP - LPV/r conflict",n,"Regimens containing LPV/r <b>cannot</b> be prescribed together with 3HP",[{name:"Close",slot:"end",color:"danger"}],"his-danger-color");case 3:return e.abrupt("return",u.EXIT);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},target:s.ARV_REGIMENS,targetEvent:l.ON_VALUE,conditions:{regimenCode:function(e){return[7,8,9,10,11,12].includes(e)},medicationOrders:function(e){return e.filter((function(e){return!!"".concat(e).match(/3hp/i)})).length>=1}}},"Check for any adverse effects or contraindications associated with the regimen":{priority:1,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.regimenCodeStr,r=t.sideEffectsTable,a=r.columns,o=r.rows,e.next=4,Object(_["d"])("Contraindications / Side effects for ".concat(n),"",a,o,[{name:"Select other regimen",slot:"start"},{name:"Keep selected regimen",slot:"end",color:"danger"}],"his-danger-color");case 4:return i=e.sent,e.abrupt("return","Select other regimen"===i?u.EXIT:u.CONTINUE);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},target:s.ARV_REGIMENS,targetEvent:l.BEFORE_NEXT,conditions:{hasSideEffects:function(e){return e},lastSideEffectDate:function(e,t){var n=t.currentDate;return e>=n}}},"Recommend 2nd line regimen to children under 3":{priority:1,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["b"])("Recommendation","",["Children under 3 years often have a high viral load and may be infected with drug-resistant HIV from previous exposure to ARVs (mother's ART and/or infant nevirapine prophylaxis)","Therefore, children under <b>3 years</b> respond better when <b>started immediately on 2nd line regimen</b> (Regimen <b>11</b>)"],[{name:"Select another regimen",slot:"start"},{name:"Keep selected regimen",slot:"end",color:"danger"}],"his-warning-color");case 2:return t=e.sent,e.abrupt("return","Select another regimen"===t?u.EXIT:u.CONTINUE);case 4:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},target:s.ARV_REGIMENS,targetEvent:l.BEFORE_NEXT,conditions:{age:function(e){return e<3},regimenCode:function(e){return 11!=e}}},"Provide a reason for switching regimens when patient already has one":{priority:1,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["c"])("Are you sure you want to replace ".concat(t.currentRegimenStr,"?"),"Specify reason for switching regimen",["Policy change","Ease of administration (pill burden, swallowing)","Drug drug interaction","Pregnancy intention","Side effects","Treatment failure","Weight Change","Other"],[{name:"Cancel",slot:"start",color:"danger"},{name:"Continue",slot:"end",role:"action"}]);case 2:if(n=e.sent,!n.selection||"Cancel"==n.action){e.next=6;break}return t.reasonForSwitch=n.selection,e.abrupt("return",u.CONTINUE);case 6:return e.abrupt("return",u.EXIT);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},target:s.ARV_REGIMENS,targetEvent:l.ON_VALUE,conditions:{regimenCode:function(e,t){var n=t.currentRegimenCode;return-1!=n&&e!=n}}},"Provide 14 day starter pack for LPV regimens for children under 3 years old":{priority:3,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["a"])("Starter pack needed for 14 days","".concat(t.treatmentInitiationState),"".concat(t.regimenName),[{name:"Cancel",slot:"start",color:"danger"},{name:"Prescribe starter pack",slot:"end"}],"his-info-color");case 2:if(n=e.sent,"Prescribe starter pack"!==n){e.next=6;break}return t.starterPackNeeded=!0,e.abrupt("return",u.CONTINUE);case 6:return e.abrupt("return",u.EXIT);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},target:s.ARV_REGIMENS,targetEvent:l.BEFORE_NEXT,conditions:{age:function(e){return e<3},regimenCode:function(e){return 11===e},treatmentInitiationState:function(e){return["Initiation","Re-initiation"].includes(e)}}},"Provide 14 day starter pack for NVP based regimens on newly initiated/re-initiation patients":{priority:3,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["a"])("Starter pack needed for 14 days","".concat(t.treatmentInitiationState),"".concat(t.regimenName),[{name:"Cancel",slot:"start",color:"danger"},{name:"Prescribe starter pack",slot:"end"}],"his-info-color");case 2:if(n=e.sent,"Prescribe starter pack"!==n){e.next=6;break}return t.starterPackNeeded=!0,e.abrupt("return",u.CONTINUE);case 6:return e.abrupt("return",u.EXIT);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},target:s.ARV_REGIMENS,targetEvent:l.BEFORE_NEXT,conditions:{regimenCode:function(e){return[0,2,6].includes(e)},treatmentInitiationState:function(e){return["Initiation","Re-initiation"].includes(e)}}},"Ask to reuse hanging pills if any":{priority:5,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["a"])("Hanging pills recommendation","Add hanging pills?","",[{name:"No",slot:"start",color:"warning"},{name:"Yes",slot:"end"}],"his-info-color");case 2:return n=e.sent,t.hangingPillsStatus="Yes"===n?"Optimize - including hanging pills":"Exact - excluding hanging pills",e.abrupt("return",u.CONTINUE);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},target:s.INTERVAL_SELECTION,targetEvent:l.BEFORE_NEXT,conditions:{drugs:function(e,t){var n=t.hangingPills,r=e.map((function(e){return n.includes(e)}));return r.some(Boolean)}}},"Provide warning of use of DTG regimen to women of reproductive age":{priority:2,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.regimenName,e.next=3,Object(_["a"])("Use of DTG or EFV in women of reproductive age",n,["There is currently <u>no confirmation</u>","that <b>DTG</b> is safe in <u>very early pregnancy</u>","DTG-based regimens are therefore not used as standard 1st line regimens for","<u>girls and women</u> who may get pregnancy"].join(" "),[{name:"Select another regimen",slot:"start"},{name:"Continue with regimen",slot:"end",color:"danger"}],"his-danger-color");case 3:return r=e.sent,e.abrupt("return","Select another regimen"===r?u.EXIT:u.CONTINUE);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},target:s.ARV_REGIMENS,targetEvent:l.BEFORE_NEXT,conditions:{regimenCode:function(e){return e>=12},isChildBearing:function(e){return e}}},"Provide pallet options for LPV regimens for patient's whose weight is between 3 and 25 kgs":{priority:6,actions:{alert:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["a"])("Pellets (cups) / Tabs","","Prescribe LPV/r in <b>Pellets (cups)</b> or <b>Tablets</b>?",[{name:"Granules",slot:"start"},{name:"Pellets",slot:"end"},{name:"Tabs",slot:"end"}],"his-info-color");case 2:return n=e.sent,t.lpvType=n.toLowerCase(),e.abrupt("return",u.CONTINUE);case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},target:s.ARV_REGIMENS,targetEvent:l.BEFORE_NEXT,conditions:{weight:function(e){return e>=3&&e<=25},regimenCode:function(e){return 11===e||9===e}}},"Provide 14 day interval for NVP or LVP Regimen starter pack":{priority:1,data:{enabled:!1},target:s.INTERVAL_SELECTION,targetEvent:l.ON_BUILD,conditions:{prescriptionType:function(e){return"Regimen"===e},selectedInterval:function(e){return e>14},starterPackNeeded:function(e){return e},regimenCode:function(e){return[0,2,6,11].includes(e)}}},"Provide intervals upto 1 month, 2nd up to 2 months, and 3rd up to 6 months for Patients receiving TPT":{priority:2,data:{enabled:!1},target:s.INTERVAL_SELECTION,targetEvent:l.ON_BUILD,conditions:{prescriptionType:function(e){return"Regimen"===e},medicationOrders:function(e){return e.map((function(e){return!!"".concat(e).match(/3hp/i)})).some(Boolean)},tptPrescriptionCount:function(e,t){var n=t.selectedInterval;return Math.round(n/30)>e}}}},k={"Rifapentine or isoniazid should be taken weekly":{concept:"Weekly (QW)",priority:1,conditions:{drug:function(e){return"".concat(e).match(/Rifapentine|Isoniazid/i)}}},"Use daily frequency for any other drugs":{concept:"Daily (QOD)",priority:2,conditions:{drug:function(e){return!"".concat(e).match(/Rifapentine|Isoniazid/i)}}}},y=n("32b3"),x=n("ad60"),N=n("9ceb"),C={style:{fontSize:"1.3rem !important",borderBottom:"solid 2px #ccc",color:"black",background:"white"}},V=Object(i["defineComponent"])({mixins:[j["a"]],data:function(){return{drugs:[],prescription:{},patientToolbar:[],fieldComponent:"",regimenExtras:[],programInfo:[],facts:{age:-1,gender:"",weight:-1,currentDate:"",isChildBearing:!1,prescriptionType:"",tptPrescriptionCount:0,currentRegimenCode:-1,currentRegimenStr:"",drug:"",drugs:[],contraindications:{},hasSideEffects:!1,sideEffectsTable:{},lastSideEffectDate:"",regimenCode:-1,regimenCodeStr:"",regimenName:"",regimenDrugs:[],hangingPills:[],reasonForSwitch:"",starterPackNeeded:!1,hangingPillsStatus:"",treatmentInitiationState:"",lpvType:"",medicationOrders:[],selectedInterval:0}}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return t.prescription=new m["a"](t.patientID,t.providerID),n.next=5,t.prescription.loadMedicationOrders();case 5:return n.next=7,t.prescription.loadFastTrackStatus();case 7:if(t.prescription.medicationOrdersAvailable()||t.prescription.isFastTrack()){n.next=10;break}return Object(h["e"])("Patient is not eligible for treatment Today! Please check HIV Clinic Consultation"),n.abrupt("return",t.gotoPatientDashboard());case 10:return n.next=12,t.prescription.loadHangingPills();case 12:return n.next=14,t.prescription.loadRegimenExtras();case 14:return n.next=16,t.prescription.loadTreatmentState();case 16:return n.next=18,t.prescription.loadDrugInduced();case 18:return n.next=20,t.prescription.loadContraindications();case 20:return n.next=22,t.prescription.loadTptPrescriptionCount();case 22:return n.next=24,t.initFacts(t.patient);case 24:if(t.prescription.shouldPrescribeExtras()&&(t.regimenExtras=t.prescription.getRegimenExtras()),r=t.resolveHtnDrugs(),Object(O["isEmpty"])(r)||(t.regimenExtras=[].concat(Object(p["a"])(t.regimenExtras),Object(p["a"])(r))),!t.prescription.isFastTrack()){n.next=34;break}return n.next=30,t.prescription.loadFastTrackMedications();case 30:t.drugs=t.prescription.getFastTrackMedications(),t.fieldComponent="next_visit_interval",n.next=35;break;case 34:t.prescription.shouldPrescribeArvs()||Object(O["isEmpty"])(t.regimenExtras)||(t.drugs=t.regimenExtras);case 35:return n.next=37,t.getPatientToolBar();case 37:t.patientToolbar=n.sent,t.fields=t.getFields();case 39:case"end":return n.stop()}}),n)})))()},immediate:!0},drugs:{handler:function(e){this.facts.drugs=e.map((function(e){return e.drug_id}))},immediate:!0,deep:!0}},methods:{initFacts:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,x["a"].getProgramInformation(e.getID());case 2:return t.programInfo=n.sent,t.facts.age=e.getAge(),t.facts.gender=e.getGender(),n.next=7,e.getRecentWeight();case 7:t.facts.weight=n.sent,t.facts.hangingPills=t.prescription.getHangingPills(),t.facts.treatmentInitiationState=t.prescription.getTreatmentState(),t.facts.currentRegimenStr=t.programInfo.current_regimen,t.facts.currentRegimenCode=t.extractRegimenCode(t.programInfo.current_regimen),t.facts.medicationOrders=t.prescription.getMedicationOrders(),t.facts.contraindications=t.prescription.getContraindications(),t.facts.tptPrescriptionCount=t.prescription.getTptPrescriptionCount(),t.facts.lastSideEffectDate=t.prescription.getLastSideEffectDate(),t.facts.currentDate=m["a"].getSessionDate(),t.facts.isChildBearing=e.isChildBearing();case 18:case"end":return n.stop()}}),n)})))()},onSubmit:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.prescription.createEncounter();case 2:if(r=n.sent,t.prescription.setNextVisitInterval(e[s.INTERVAL_SELECTION].value),a=t.mapOrder(t.drugs),r){n.next=7;break}return n.abrupt("return",Object(h["e"])("Unable to create treatment encounter"));case 7:return n.next=9,t.prescription.createDrugOrder(a);case 9:if(o=n.sent,o){n.next=12;break}return n.abrupt("return",Object(h["e"])("Unable to create drug orders!"));case 12:if(!t.facts.reasonForSwitch){n.next=15;break}return n.next=15,t.prescription.createRegimenSwitchObs(t.facts.reasonForSwitch);case 15:if(!t.facts.hangingPillsStatus){n.next=18;break}return n.next=18,t.prescription.createHangingPillsObs(t.facts.hangingPillsStatus);case 18:Object(h["d"])("Drug order has been created"),t.nextTask();case 20:case"end":return n.stop()}}),n)})))()},onEvent:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,o,i,c,s,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a=Object(v["a"])(n.facts,w,e,t),r.t0=regeneratorRuntime.keys(a);case 2:if((r.t1=r.t0()).done){r.next=13;break}if(o=r.t1.value,c=a[o],null===c||void 0===c||null===(i=c.actions)||void 0===i||!i.alert){r.next=11;break}return r.next=8,null===c||void 0===c||null===(s=c.actions)||void 0===s?void 0:s.alert(n.facts);case 8:if(l=r.sent,l!==u.EXIT){r.next=11;break}return r.abrupt("return",!1);case 11:r.next=2;break;case 13:return r.abrupt("return",!0);case 14:case"end":return r.stop()}}),r)})))()},onBuildOptions:function(e,t){var n=Object(v["a"])(this.facts,w,e,t);for(var r in n){var a=n[r];if(a.data)return a.data}return{}},onRegimen:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.label,a=e.value,o=e.other,t.facts.lpvType="",t.facts.hangingPillsStatus="",t.facts.starterPackNeeded=!1,t.facts.regimenName="".concat(a," (").concat(r,")"),t.facts.regimenCodeStr=a.toString(),t.facts.regimenCode=t.extractRegimenCode(a.toString()),t.facts.regimenDrugs=o.regimenDrugs,t.facts.drugs=o.regimenDrugs.map((function(e){return e.drug_id})),i=t.prescription.findAndGroupDrugSideEffects(t.facts.drugs),t.facts.hasSideEffects=!Object(O["isEmpty"])(i),t.facts.sideEffectsTable=t.buildSideEffectsTable(i);case 12:case"end":return n.stop()}}),n)})))()},onBeforeRegimenNext:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.onEvent(s.ARV_REGIMENS,l.BEFORE_NEXT);case 2:if(n=t.sent,r=[],n){t.next=6;break}return t.abrupt("return",!1);case 6:if(!e.facts.lpvType){t.next=12;break}return t.next=9,e.getLpvDrugs();case 9:r=t.sent,t.next=20;break;case 12:if(!e.facts.starterPackNeeded){t.next=19;break}return t.next=15,e.getStarterPackDrugs();case 15:r=t.sent,Object(O["isEmpty"])(r)&&(r=e.facts.regimenDrugs),t.next=20;break;case 19:r=e.facts.regimenDrugs;case 20:return e.drugs=[].concat(Object(p["a"])(e.regimenExtras),Object(p["a"])(r)),t.abrupt("return",!0);case 22:case"end":return t.stop()}}),t)})))()},getLpvDrugs:function(){return this.prescription.getLvpDrugsByType(this.facts.lpvType,this.facts.regimenCode)},resolveHtnDrugs:function(){try{var e=sessionStorage.getItem(y["b"].Prescription);if("string"===typeof e){var t=JSON.parse(e);if(Object(O["isPlainObject"])(t)&&t[this.patientID])return t[this.patientID]}}catch(n){console.warn(n)}return[]},getStarterPackDrugs:function(){return this.prescription.getRegimenStarterpack(this.facts.regimenCode,this.facts.weight)},setCustomDrugs:function(e){this.drugs=e.map((function(e){return e.other}))},buildSideEffectsTable:function(e){var t=["Date","Contraindication(s)","Side effect(s)"],n=[];for(var r in e){var a=this.facts.contraindications[r]||[];n.push([g["b"].toStandardHisDisplayFormat(r),a.join(", "),e[r].join(", ")])}return{columns:t,rows:n}},buildRegimenOptions:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.prescription.getPatientRegimens();case 2:for(a in n=t.sent,r=[],n)o=n[a],i=o.map((function(e){return e.alternative_drug_name||e.concept_name})).sort().join(" + "),r.push({label:i,value:a,other:{regimenDrugs:o}});return t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})))()},buildIntervalOptions:function(){var e=this,t=[{label:"2 weeks",value:14},{label:"1 month",value:28},{label:"2 months",value:56},{label:"3 months",value:84},{label:"4 months",value:112},{label:"5 months",value:140},{label:"6 months",value:168},{label:"7 months",value:196},{label:"8 months",value:224},{label:"9 months",value:252},{label:"10 months",value:280},{label:"11 months",value:308},{label:"12 months",value:336}];return t.map((function(t){var n=t.label,r=t.value;e.facts.selectedInterval=parseInt(r.toString());var a=e.onBuildOptions(s.INTERVAL_SELECTION,l.ON_BUILD);return{label:n,value:r,other:Object(d["a"])(Object(d["a"])({},a),e.getDrugEstimates(e.drugs,e.facts.selectedInterval))}}))},getDrugFrequency:function(e){this.facts.drug=e;var t=Object(v["a"])(this.facts,k);if(!Object(O["isEmpty"])(t))return t[0].concept},extractRegimenCode:function(e){try{return e.match(/n\/a/i)?-1:parseInt(e.substring(0,e.length))}catch(t){return console.warn(t),-1}},getDrugEstimates:function(e,t){var n=this;this.prescription.setNextVisitInterval(t);var r=this.prescription.calculateDateFromInterval(),a=e.map((function(e){var t=n.prescription.getDrugPackSize(e),r=n.prescription.calculatePillsPerDay(e.am,e.noon,e.pm),a=n.prescription.estimatePackSize(r,t);return{label:e.alternative_drug_name||e.drug_name,value:a}}));return{label:"Medication run-out date:",value:g["b"].toStandardHisDisplayFormat(r),other:{label:"Estimated packs/tins:",value:a}}},mapOrder:function(e){var t=this;return e.map((function(e){return t.prescription.toOrderObj(e.drug_id,e.alternative_drug_name||e.drug_name,e.units,e.am,e.pm,e.frequency||t.getDrugFrequency(e.drug_name))}))},getPatientToolBar:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.prescription.getReasonForRegimenSwitch();case 2:return n=t.sent,t.abrupt("return",[{label:"Age",value:"".concat(e.patient.getAge()," Year(s)")},{label:"Gender",value:e.patient.getGender()},{label:"Current Regimen",value:e.programInfo.current_regimen},{label:"Current weight",value:"".concat(e.facts.weight," kg(s)")||!1},{label:"Reason for change",value:n}]);case 4:case"end":return t.stop()}}),t)})))()},getFields:function(){var e=this;return[{id:s.ARV_REGIMENS,helpText:"ARV Regimen(s)",type:b["b"].TT_ART_REGIMEN_SELECTION,condition:function(){return e.prescription.shouldPrescribeArvs()},validation:function(e){return f["a"].required(e)},options:function(){return e.buildRegimenOptions()},onload:function(){return e.facts.prescriptionType="Regimen"},onValue:function(t){return e.onRegimen(t),e.onEvent(s.ARV_REGIMENS,l.ON_VALUE)},beforeNext:function(){return e.onBeforeRegimenNext()},config:{toolbarInfo:this.patientToolbar,footerBtns:[{name:"Custom Regimen",slot:"end",onClick:function(){e.fieldComponent="custom_regimen"}}]}},{id:"custom_regimen",helpText:"Custom prescription",type:b["b"].TT_MULTIPLE_SELECT,condition:function(){return"Custom"===e.facts.prescriptionType},onload:function(){return e.facts.prescriptionType="Custom"},validation:function(e){return f["a"].required(e)},options:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.prescription.getCustomIngridients();case 2:return n=t.sent,t.abrupt("return",n.map((function(e){return{label:e.name,value:e.drug_id,other:Object(d["a"])({},e)}})));case 4:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),config:{showKeyboard:!0,hiddenFooterBtns:["Back"],footerBtns:[{name:"Standard Regimen",size:"large",slot:"end",color:"primary",visible:!1,visibleOnStateChange:function(e){return 1===e.index},onClick:function(){e.fieldComponent="arv_regimens"}}]}},{id:"custom_dosage",helpText:"Custom dose",type:b["b"].TT_DOSAGE_INPUT,condition:function(e){return!Object(O["isEmpty"])(e.custom_regimen)},validation:function(e){if(f["a"].required(e))return["Drugs are not available"];var t=e.map((function(e){var t=e.other;return t.am<=0&&t.pm<=0}));return t.some(Boolean)?["Missing dosage configuration on some drugs"]:null},unload:function(t){return e.setCustomDrugs(t)},summaryMapValue:function(t){var n=t.other;return{label:"Dosages",value:e.prescription.getInstructions(n.drug_name,n.am,n.pm,n.units)}},options:function(t){return t.custom_regimen.map((function(t){return{label:t.label,value:t.value,other:{drug_id:t.other.drug_id,drug_name:t.label,barcodes:t.other.barcodes,units:t.other.units,am:0,noon:0,pm:0,frequency:e.getDrugFrequency(t.label)}}}))}},{id:"selected_meds",helpText:"Selected medication",type:b["b"].TT_DATA_TABLE,config:{toolbarInfo:this.patientToolbar,hiddenFooterBtns:["Clear"],dataTableConfig:{showIndex:!1},viewPortStyle:{height:"76vh"},columns:function(){return[[N["a"].thTxt("Drug name",C),N["a"].thTxt("Units",C),N["a"].thTxt("AM",C),N["a"].thTxt("Noon",C),N["a"].thTxt("PM",C),N["a"].thTxt("Frequency",C)]]},rows:function(){return e.drugs.map((function(t){var n={style:{height:"6vh"},cssClass:function(){if(t.drug_name.match(/cotrimoxazole/i))return"adult-regimen-formulation";switch(t.regimen_category){case"A":return"adult-regimen-formulation";case"P":return"peads-regimen-formulation"}}()};return[N["a"].td(t.alternative_drug_name||t.drug_name,n),N["a"].td(t.units,n),N["a"].td(t.am,n),N["a"].td(t.noon,n),N["a"].td(t.pm,n),N["a"].td(t.frequency||e.getDrugFrequency(t.drug_name),n)]}))}}},{id:s.INTERVAL_SELECTION,helpText:"Interval to next visit",type:b["b"].TT_NEXT_VISIT_INTERVAL_SELECTION,validation:function(e){return f["a"].required(e)},options:function(){return e.buildIntervalOptions()},onValue:function(){return e.onEvent(s.INTERVAL_SELECTION,l.ON_VALUE)},beforeNext:function(){return e.onEvent(s.INTERVAL_SELECTION,l.BEFORE_NEXT)},config:{showRegimenCardTitle:!1}}]}}}),D=n("6b0d"),T=n.n(D);const I=T()(V,[["render",c]]);var R=I;function S(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}n("159b"),n("a4d3"),n("e01a");var P=n("85d6"),A=n("b446"),E=n("3800"),B=n("e86e"),F=Object(i["defineComponent"])({mixins:[j["a"]],data:function(){return{staging:{},showStagingWeightChart:!0,canShowStagingFields:!0,bmiObj:{},stagingFacts:{age:-1,bmi:-1,gender:"",stage:-1,cd4:-1,date:"",isChildBearing:!1,stageOneConditions:[],stageTwoConditions:[],stageThreeConditions:[],stageFourConditions:[],reasonForArt:"",testType:"",pregnant:"",breastFeeding:"",selectedCondition:"",selectedConditions:[],weightPercentile:-1,ageInMonths:-1,cd4Modifier:"",whoStage:""}}},methods:{initStaging:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.staging=new P["a"](e.getID(),e.getAge(),t.providerID),n.next=3,t.staging.loadHivConfirmatoryTestType();case 3:return n.next=5,e.getBMI();case 5:if(t.bmiObj=n.sent,t.stagingFacts.age=e.getAge(),t.stagingFacts.bmi=t.bmiObj["index"],t.stagingFacts.date=P["a"].getSessionDate(),t.stagingFacts.gender=e.isMale()?"M":"F",t.stagingFacts.testType=t.staging.getConfirmatoryTestType(),t.stagingFacts.ageInMonths=e.getAgeInMonths(),t.stagingFacts.isChildBearing=e.isChildBearing(),!t.staging.isPedaid()){n.next=17;break}return n.next=16,e.calculateWeightPercentile();case 16:t.stagingFacts.weightPercentile=n.sent;case 17:case"end":return n.stop()}}),n)})))()},submitStaging:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.staging.createEncounter();case 2:if(r=n.sent,r){n.next=5;break}throw"Unable to create staging encounter";case 5:return n.next=7,t.resolveObs(e,"staging");case 7:return a=n.sent,n.next=10,Promise.all([t.buildReasonForArtObs(),t.buildWhoStageObs()]);case 10:return o=n.sent,n.next=13,t.staging.saveObservationList([].concat(Object(p["a"])(a),Object(p["a"])(o)));case 13:if(i=n.sent,i){n.next=16;break}throw"Unable to save patient observations";case 16:case"end":return n.stop()}}),n)})))()},onStagingCondition:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=e.label,t.stagingFacts.selectedCondition=o,i=t.staging.getAlertGuidelines(),c=Object(v["a"])(t.stagingFacts,i),!Object(O["isEmpty"])(c)){n.next=6;break}return n.abrupt("return",!0);case 6:if(null===(r=c[0])||void 0===r||!r.actions||null===(a=c[0])||void 0===a||!a.actions.alert){n.next=11;break}return n.next=9,null===(s=c[0])||void 0===s?void 0:s.actions.alert(t.stagingFacts);case 9:return u=n.sent,n.abrupt("return",!!u);case 11:return n.abrupt("return",!0);case 12:case"end":return n.stop()}}),n)})))()},getFacilities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(B["b"])(e)},updateStagingFacts:function(){var e=[this.stagingFacts.stageOneConditions,this.stagingFacts.stageTwoConditions,this.stagingFacts.stageThreeConditions,this.stagingFacts.stageFourConditions];this.stagingFacts.stage=e.reduce((function(e,t,n){return Object(O["isEmpty"])(t)?e:n+1}),0),this.stagingFacts.selectedConditions=e.reduce((function(e,t){return e.concat(t)}),[])},buildReasonForArtObs:function(){return this.staging.buildReasonForArtObs(this.stagingFacts.reasonForArt)},buildWhoStageObs:function(){return this.staging.buildWhoStageObs(this.stagingFacts.whoStage)},buildStagingOptions:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.staging.getRecommendedConditionGuidelines();return this.staging.getStagingConditions(e).map((function(e){var a,o=!1,i=n.includes(e.name);t.stagingFacts.selectedCondition=e.name;var c=Object(v["a"])(t.stagingFacts,r);if(!Object(O["isEmpty"])(c)){var s,u,l=c[0];null!==l&&void 0!==l&&null!==(s=l.actions)&&void 0!==s&&s.isChecked&&(i=!0),null!==l&&void 0!==l&&null!==(u=l.actions)&&void 0!==u&&u.disabled&&(o=!0),a=l.description}return{label:e.name,value:e.concept_id,isChecked:i,disabled:o,description:a}}))},setWhoStage:function(){var e,t=this.staging.getWhoStageGuidelines(),n=Object(v["a"])(this.stagingFacts,t);this.stagingFacts.whoStage=(null===(e=n[0])||void 0===e?void 0:e.concept)||""},setReasonForArt:function(){var e,t=this.staging.getProgramEligibilityGuidelines(),n=Object(v["a"])(this.stagingFacts,t);this.stagingFacts.reasonForArt=(null===(e=n[0])||void 0===e?void 0:e.concept)||""},notAsymptomatic:function(e){var t=e.stage_1_conditions;if(t){var n=t.filter((function(e){return e.label.match(/asymptomatic/i)&&e.isChecked}));return Object(O["isEmpty"])(n)}return!0},hasTransferLater:function(e){return"has_transfer_letter"in e&&(e.has_transfer_letter&&"Yes"===e.has_transfer_letter.value)},hasStaging:function(e){return!!this.hasTransferLater(e)||this.canShowStagingFields},getStagingSummaryField:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Summary";return{id:"summary",helpText:t,type:b["b"].TT_ART_STAGING_SUMMARY,condition:function(t){return e.hasStaging(t)},onload:function(){e.setReasonForArt(),e.setWhoStage()},options:function(){return[{label:"WHO Stage",value:e.stagingFacts.whoStage,other:{type:"title-section"}},{label:"Condition on starting ART",value:e.stagingFacts.reasonForArt,other:{type:"title-section"}}].concat(Object(p["a"])(e.stagingFacts.selectedConditions.map((function(e){return{label:e,value:e}}))))},config:{title:"Selected stage defining conditions",hiddenFooterBtns:["Clear"]}}},isANCclient:function(){return"ANC"===P["a"].getSuspendedProgram()},getStagingFields:function(){var e=this;return[{id:"pregnancy_status",helpText:"Pregnant / Breastfeeding",type:b["b"].TT_MULTIPLE_YES_NO,validation:function(e){return f["a"].anyEmpty(e)},summaryMapValue:function(e){return{label:e.label,value:e.value}},computedValue:function(t,n){var r=[];return e.isANCclient()&&!e.hasTransferLater(n)&&(e.stagingFacts["pregnant"]="Yes",r.push(e.staging.buildValueCoded("Is patient pregnant","Yes"))),r=r.concat(t.map((function(t){var n=t.value,r=t.other,a=r.factID;return e.stagingFacts[a]="".concat(n).match(/Yes/i)?"Yes":"No",e.staging.buildValueCoded(r.concept,n)}))),{obs:r,tag:"staging"}},options:function(t){if(Object(O["isEmpty"])(t.pregnancy_status)){var n=[];return e.isANCclient()&&!e.hasTransferLater(t)||n.push({label:"Pregnant?",value:"",other:{values:e.yesNoOptions(),concept:"Is patient pregnant",factID:"pregnant"}}),n.push({label:"Breastfeeding?",value:"",other:{values:e.yesNoOptions(),concept:"Is patient breast feeding",factID:"breastFeeding"}}),n}return t.pregnancy_status},condition:function(t){return e.hasStaging(t)&&e.stagingFacts.isChildBearing}},{id:"patient_weight_chart",helpText:"Weight history",type:b["b"].TT_WEIGHT_CHART,options:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.patient.getWeightHistory();case 2:return n=t.sent,n=n.map((function(e){return{x:g["b"].toStandardHisDisplayFormat(e.date),y:e.weight}})),t.abrupt("return",[{label:"Weight for patient",value:"Weight trail",other:{values:n,age:e.patient.getAge(),bmi:e.bmiObj}}]);case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),config:{hiddenFooterBtns:["Clear"]},condition:function(t){return e.hasStaging(t)&&e.showStagingWeightChart}},{id:"stage_4_conditions",helpText:"Stage 4 conditions",type:b["b"].TT_MULTIPLE_SELECT,options:function(){return e.buildStagingOptions(4,e.stagingFacts.stageFourConditions)},onValue:function(t){return e.onStagingCondition(t)},computedValue:function(t){return{tag:"staging",obs:t.map((function(t){return e.staging.buildWhoCriteriaObs(t.label)}))}},unload:function(t){e.stagingFacts.stageFourConditions=t.map((function(e){return e.label})),e.updateStagingFacts()},onConditionFalse:function(){e.stagingFacts.stageFourConditions=[],e.updateStagingFacts()},condition:function(t){return e.hasStaging(t)&&e.notAsymptomatic(t)}},{id:"stage_3_conditions",helpText:"Stage 3 conditions",type:b["b"].TT_MULTIPLE_SELECT,options:function(){return e.buildStagingOptions(3,e.stagingFacts.stageThreeConditions)},onValue:function(t){return e.onStagingCondition(t)},computedValue:function(t){return{tag:"staging",obs:t.map((function(t){return e.staging.buildWhoCriteriaObs(t.label)}))}},unload:function(t){e.stagingFacts.stageThreeConditions=t.map((function(e){return e.label})),e.updateStagingFacts()},onConditionFalse:function(){e.stagingFacts.stageThreeConditions=[],e.updateStagingFacts()},condition:function(t){return e.hasStaging(t)&&e.notAsymptomatic(t)}},{id:"stage_2_conditions",helpText:"Stage 2 conditions",type:b["b"].TT_MULTIPLE_SELECT,options:function(){return e.buildStagingOptions(2,e.stagingFacts.stageTwoConditions)},onValue:function(t){return e.onStagingCondition(t)},computedValue:function(t){return{tag:"staging",obs:t.map((function(t){return e.staging.buildWhoCriteriaObs(t.label)}))}},unload:function(t){e.stagingFacts.stageTwoConditions=t.map((function(e){return e.label})),e.updateStagingFacts()},onConditionFalse:function(){e.stagingFacts.stageTwoConditions=[],e.updateStagingFacts()},condition:function(t){return e.hasStaging(t)&&e.notAsymptomatic(t)}},{id:"stage_1_conditions",helpText:"Stage 1 conditions",type:b["b"].TT_MULTIPLE_SELECT,validation:function(t){if(Object(O["isEmpty"])(t)&&Object(O["isEmpty"])(e.stagingFacts.selectedConditions))return["Please provide atleast one staging condition"]},options:function(){return e.buildStagingOptions(1,e.stagingFacts.stageOneConditions)},onValue:function(t){return e.onStagingCondition(t)},computedValue:function(t){var n=t.map((function(e){return e.label}));return e.stagingFacts.stageOneConditions=n,e.updateStagingFacts(),{tag:"staging",obs:n.map((function(t){return e.staging.buildWhoCriteriaObs(t)}))}},condition:function(t){return e.hasStaging(t)}},{id:"cd4_available",helpText:"Recent CD4 count results available?",type:b["b"].TT_SELECT,condition:function(t){return e.hasStaging(t)},validation:function(e){return f["a"].required(e)},options:function(){return e.yesNoOptions()}},{id:"cd4_count",helpText:"CD4 Count",type:b["b"].TT_TEXT,computedValue:function(t){var n=t.value.toString(),r=n.charAt(0),a=parseInt(n.substring(1));return{tag:"staging",modifier:r,count:a,obs:e.staging.buildValueNumber("CD4 count",a,r)}},unload:function(t,n,r,a){var o=a["cd4_count"],i=o.count,c=o.modifier;e.stagingFacts.cd4=i,e.stagingFacts.cd4Modifier=c},onConditionFalse:function(){e.stagingFacts.cd4=-1,e.stagingFacts.cd4Modifier=""},validation:function(t){var n=function(){return e.staging.cd4CountIsValid(t.value)};return e.validateSeries([function(){return f["a"].required(t)},function(){return n()?null:["Please start with either modifier first: >, <, or ="]}])},config:{customKeyboard:[E["b"],[["Unknown","Delete"]]]},condition:function(t){return e.hasStaging(t)&&"Yes"===t.cd4_available.value}}].concat(Object(p["a"])(Object(A["b"])({id:"cd4_result_date",helpText:"Cd4 Results",required:!0,minDate:function(){return e.patient.getBirthdate()},maxDate:function(){return e.staging.getDate()},condition:function(t){return e.hasStaging(t)&&"Yes"===t.cd4_available.value},estimation:{allowUnknown:!1},computeValue:function(t,n){return{date:t,tag:"staging",isEstimate:n,obs:e.staging.buildValueDate("Cd4 count datetime",t)}}},this.staging.getDate())),[{id:"location",helpText:"CD4 Location",type:b["b"].TT_SELECT,defaultValue:function(){return P["a"].getLocationName()},computedValue:function(t){var n=t.label;return{tag:"staging",obs:e.staging.buildValueText("Cd4 count location",n)}},validation:function(e){return f["a"].required(e)},options:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.getFacilities(n)},config:{showKeyboard:!0,isFilterDataViaApi:!0},condition:function(t){return e.hasStaging(t)&&"Yes"===t.cd4_available.value}}])}}});const L=F;var M=L,H=n("519d"),U=n("b515"),q=n("aee2"),G=n("5a0c"),z=n.n(G),Y=Object(i["defineComponent"])({mixins:[M],data:function(){return{registration:{},prescription:{},dispensation:{},regimens:[],customRegimens:[],vitals:{}}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return t.canShowStagingFields=!1,t.registration=new H["a"](t.patientID,t.providerID),t.vitals=new U["a"](t.patientID,t.providerID),n.next=7,t.initStaging(t.patient);case 7:t.showStagingWeightChart=!1,t.fields=t.getRegistrationFields();case 9:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onSubmit:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=Object(d["a"])({},t),r.next=3,n.registration.createEncounter();case 3:if(!n.hasStaging(e)){r.next=14;break}return r.next=6,n.submitStaging(t);case 6:return r.next=8,n.vitals.createEncounter();case 8:return r.t0=n.vitals,r.next=11,n.resolveObs(a,"vitals");case 11:return r.t1=r.sent,r.next=14,r.t0.saveObservationList.call(r.t0,r.t1);case 14:return r.t2=n.registration,r.next=17,n.resolveObs(a,"reg");case 17:return r.t3=r.sent,r.next=20,r.t2.saveObservationList.call(r.t2,r.t3);case 20:Object(h["d"])("Clinic registration complete!"),n.nextTask();case 22:case"end":return r.stop()}}),r)})))()},buildDateObs:function(e,t,n){var r={};return r=t.match(/unknown/i)?this.registration.buildValueText(e,"Unknown"):n?this.registration.buildValueDateEstimated(e,t):this.registration.buildValueDate(e,t),r},getRegistrationFields:function(){var e=this;return[{id:"followup_agreement",helpText:"Agrees to follow-up",type:b["b"].TT_MULTIPLE_YES_NO,summaryMapValue:function(e){var t=e.value,n=e.label;return{value:t,label:"".concat(n," followup")}},validation:function(t){return e.validateSeries([function(){return f["a"].required(t)},function(){return f["a"].anyEmpty(t)}])},computedValue:function(t){var n=[];return t.forEach((function(t){var r=t.label,a=t.value;n.push(e.registration.buildValueCoded(r,a)),n.push(e.registration.buildValueCoded("Agrees to followup",r))})),{tag:"reg",obs:n}},options:function(t){return Object(O["isEmpty"])(t.followup_agreement)?[{label:"Phone",value:"",other:{values:e.yesNoOptions()}},{label:"Home visit",value:"",other:{values:e.yesNoOptions()}}]:t.followup_agreement}},{id:"received_arvs",helpText:"Ever received ARVs for treatment or prophylaxis?",type:b["b"].TT_SELECT,computedValue:function(t){var n=t.value;return{tag:"reg",obs:e.registration.buildValueCoded("Ever received ART",n)}},validation:function(e){return f["a"].required(e)},options:function(){return e.yesNoOptions()}}].concat(Object(p["a"])(Object(A["b"])({id:"date_last_taken_arvs",helpText:"Last taken ARVS",required:!0,minDate:function(){return e.patient.getBirthdate()},maxDate:function(){return e.staging.getDate()},condition:function(e){return"Yes"===e.received_arvs.value},estimation:{allowUnknown:!0},computeValue:function(t,n){return{date:t,tag:"reg",isEstimate:n,obs:e.buildDateObs("Date ART last taken",t,n)}}},this.registration.getDate())),[{id:"taken_art_in_last_two_months",helpText:"Taken ARVs in the last two months?",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},computedValue:function(t){var n=t.value;return{tag:"reg",obs:[e.registration.buildValueCoded("Has the patient taken ART in the last two months",n)]}},options:function(){return e.yesNoUnknownOptions()},condition:function(e){return"Unknown"===e.year_date_last_taken_arvs.value}},{id:"taken_art_in_last_two_weeks",helpText:"Taken ARV's in the last two weeks?",type:b["b"].TT_SELECT,computedValue:function(t,n){var r=t.value,a="",o=[],i=-1;return"Yes"===r?i=14:"Yes"===n.taken_art_in_last_two_months.value&&(i=60),i>0&&(a=g["b"].getDateBeforeByDays(e.registration.getDate(),i),o.push(e.registration.buildValueDateEstimated("Date ART last taken",a))),{date:a,tag:"reg",obs:[].concat(o,[e.registration.buildValueCoded("Has the patient taken ART in the last two weeks",r)])}},validation:function(e){return f["a"].required(e)},condition:function(e){return"Yes"===e.taken_art_in_last_two_months.value},options:function(){return e.yesNoUnknownOptions()}},{id:"ever_registered_at_art_clinic",helpText:"Ever registered at an ART clinic?",type:b["b"].TT_SELECT,computedValue:function(t){var n=t.value;return{tag:"reg",obs:e.registration.buildValueCoded("Ever registered at ART clinic",n)}},validation:function(e){return f["a"].required(e)},condition:function(e){return"Yes"===e.received_arvs.value},options:function(){return e.yesNoOptions()}},{id:"location_of_art_initialization",helpText:"Location of ART initiation",type:b["b"].TT_SELECT,computedValue:function(t){var n=t.label;return{tag:"reg",obs:e.registration.buildValueText("Location of ART initiation",n)}},validation:function(e){return f["a"].required(e)},condition:function(e){return"Yes"===e.ever_registered_at_art_clinic.value},options:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.getFacilities(n)},config:{showKeyboard:!0,isFilterDataViaApi:!0}}],Object(p["a"])(Object(A["b"])({id:"date_started_art",helpText:"Started ART",required:!0,unload:function(t,n,r,a){if("next"===n){var o=z()(a.date_started_art.date).diff(e.patient.getBirthdate(),"years");e.staging.setAge(o),e.stagingFacts.age=o,e.stagingFacts.ageInMonths=12*o}else e.staging.setAge(e.patient.getAge()),e.stagingFacts.age=e.patient.getAge(),e.stagingFacts.ageInMonths=e.patient.getAgeInMonths()},condition:function(e){return"Yes"===e.ever_registered_at_art_clinic.value},minDate:function(){return e.patient.getBirthdate()},maxDate:function(){return e.staging.getDate()},estimation:{allowUnknown:!0,estimationFieldType:A["a"].MONTH_ESTIMATE_FIELD},computeValue:function(t,n){return e.staging.setDate(t),e.vitals.setDate(t),{date:t,tag:"reg",isEstimate:n,obs:e.buildDateObs("Date ART started",t,n)}}},this.registration.getDate())),[{id:"previous_art_number",helpText:"ART number at previous location",type:b["b"].TT_TEXT,condition:function(e){return"Yes"===e.ever_registered_at_art_clinic.value},computedValue:function(t){return{tag:"reg",obs:e.registration.buildValueText("ART number at previous location",t.value)}},validation:function(e){return f["a"].required(e)}},{id:"has_transfer_letter",helpText:"Has staging information?",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},computedValue:function(t){var n=t.value;return{tag:"reg",obs:e.registration.buildValueCoded("Has transfer letter",n)}},options:function(){return e.yesNoOptions()},condition:function(e){return"Yes"===e.ever_registered_at_art_clinic.value}},{id:"height",helpText:"Height (CM)",type:b["b"].TT_NUMBER,condition:function(e){return"Yes"===e.has_transfer_letter.value},computedValue:function(t){var n=t.value;return{tag:"vitals",obs:e.vitals.buildValueNumber("Height",n)}},validation:function(t){return e.validateSeries([function(){return f["a"].required(t)},function(){return f["a"].isNumber(t)},function(){return f["a"].rangeOf(t,40,222)}])}},{id:"weight",helpText:"Weight (Kg)",type:b["b"].TT_TEXT,unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r,a){var o,i,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=a.weight.value,i=a.height.value,t.next=4,q["a"].getBMI(o,i,e.patient.getGender(),e.patient.getAge());case 4:if(c=t.sent,e.stagingFacts.bmi=c["index"],e.staging.isPedaid()){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,e.patient.getMedianWeightHeight();case 10:s=t.sent;try{e.stagingFacts.weightPercentile=parseFloat(o)/parseFloat(s["weight"])*100}catch(n){e.stagingFacts.weightPercentile=0}case 12:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}(),computedValue:function(t){var n=t.value;return{tag:"vitals",obs:e.vitals.buildValueNumber("weight",n)}},condition:function(e){return"Yes"===e.has_transfer_letter.value},validation:function(t){return e.validateSeries([function(){var n=Object(d["a"])(Object(d["a"])({},t),{},{other:{modifier:"."}});return e.vitals.isNotEmptyandFloat(n)},function(){return f["a"].rangeOf(t,1,300)}])},config:{customKeyboard:[[["1","2","3",""],["4","5","6",""],["7","8","9","."],["","0","",""]],[["Delete"]]]}}],Object(p["a"])(this.getStagingFields()),[{id:"new_cd4_percent_available",helpText:"CD4 percent available",type:b["b"].TT_SELECT,options:function(){return e.yesNoOptions()},condition:function(e){return"Yes"===e.has_transfer_letter.value},validation:function(e){return f["a"].required(e)}},{id:"cd4_percent",helpText:"CD4 Percent",type:b["b"].TT_TEXT,condition:function(e){return"Yes"===e.new_cd4_percent_available.value},computedValue:function(t){var n=t.value;return{tag:"staging",obs:e.registration.buildValueNumber("CD4 percent",parseInt(n.toString().substring(1)),"%")}},onValue:function(t){return!(t.value&&!e.staging.cd4CountIsValid(t.value))||(Object(h["e"])("Cd4 percentage invalid. Use one modifier or start with either of these symbols: >, < or ="),!1)},validation:function(e){return f["a"].required(e)},config:{customKeyboard:[E["b"],[["Delete"]]]}},{id:"type_of_confirmatory_hiv_test",helpText:"Confirmatory HIV test",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},onValue:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("Not done"!==t.value){e.next=3;break}return e.next=3,Object(_["a"])("Reminder","UNKNOWN HIV CONFIRMATORY TEST","Please arrange for a confirmatory test",[{name:"Agreed",color:"success",slot:"start"}]);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),computedValue:function(t){var n=t.value;return{tag:"reg",obs:e.registration.buildValueCoded("Confirmatory hiv test type",n)}},options:function(){return[{label:"Rapid antibody test",value:"HIV rapid test"},{label:"DNA PCR",value:"HIV DNA polymerase chain reaction"},{label:"Not done",value:"Not done"}]}},{id:"confirmatory_hiv_test_location",helpText:"Location of confirmatory HIV test",type:b["b"].TT_SELECT,defaultValue:function(e){return"Yes"===(e.ever_registered_at_art_clinic&&e.ever_registered_at_art_clinic.value)?"":H["a"].getLocationName()},computedValue:function(t){return{tag:"reg",obs:e.registration.buildValueText("Confirmatory HIV test location",t.label)}},validation:function(e){return f["a"].required(e)},condition:function(e){return"Not done"!=e.type_of_confirmatory_hiv_test.value},options:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.getFacilities(n)},config:{showKeyboard:!0,isFilterDataViaApi:!0}}],Object(p["a"])(Object(A["b"])({id:"date_of_confirmatory_hiv_test",helpText:"Confirmatory HIV test",beforeNext:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("Yes"==r.received_arvs.value){t.next=7;break}if(a=z()(e.staging.getDate()).diff(n,"days"),!(a>=20)){t.next=7;break}return t.next=5,Object(_["a"])("Data inconsistency warning","Confirmatory Date for newly initiated ART patient is ".concat(a," days ago"),"Are you sure this is accurate?",[{name:"No, Re-enter date",slot:"start",color:"success"},{name:"Yes, its accurate",slot:"end",color:"danger"}]);case 5:return o=t.sent,t.abrupt("return","Yes, its accurate"===o);case 7:return t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}(),condition:function(e){return e.confirmatory_hiv_test_location.value},required:!0,minDate:function(){return e.patient.getBirthdate()},maxDate:function(){return e.staging.getDate()},estimation:{allowUnknown:!0,estimationFieldType:A["a"].MONTH_ESTIMATE_FIELD},computeValue:function(t,n){return{date:t,tag:"reg",isEstimate:n,obs:e.buildDateObs("Confirmatory HIV test date",t,n)}}},this.registration.getDate())),[this.getStagingSummaryField("Staging summary")])}}});const W=T()(Y,[["render",S]]);var $=W;function K(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var J=n("7920"),X=n("83af"),Q=n("4db7"),Z=n("3e53"),ee=Object(i["defineComponent"])({mixins:[j["a"]],components:{HisStandardForm:J["a"]},data:function(){return{appointmentDate:"",medicationRunOutDate:"",appointment:{},app:Z["a"].getActiveApp()}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&(t.appointment=new X["a"](t.patientID,t.providerID),t.init());case 1:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onFinish:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.appointment.createEncounter();case 2:if(r=e.sent,r){e.next=5;break}return e.abrupt("return",Object(h["e"])("Unable to create encounter"));case 5:return e.next=7,n.resolveObs(t,"obs");case 7:return a=e.sent,e.next=10,n.appointment.buildValueDate("Estimated date",n.appointmentDate);case 10:return o=e.sent,a.push(o),e.next=14,n.appointment.saveObservationList(a);case 14:if(i=e.sent,i){e.next=17;break}return e.abrupt("return",Object(h["e"])("Unable to create Obs"));case 17:if(Object(h["d"])("Encounter created"),c=new Q["a"](n.patientID),s=["CxCa","ANC"],s.includes(n.app.applicationName)){e.next=23;break}return e.next=23,c.printVisitSummaryLbl();case 23:n.nextTask();case 24:case"end":return e.stop()}}),e)})))()},init:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.appointment.getNextAppointment();case 3:n=t.sent,e.appointmentDate=n.appointment_date,e.medicationRunOutDate=n.drugs_run_out_date,e.fields=e.getFields(),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),Object(h["e"])("Next appointment is not available"),e.gotoPatientDashboard();case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getFields:function(){var e=this;return[{id:"set_appointment",helpText:"Appointments booking",type:b["b"].TT_APPOINTMENTS_ENTRY,validation:function(e){return f["a"].required(e)},computedValue:function(t){return{tag:"obs",obs:e.appointment.buildValueDate("Appointment date",t.value)}},config:{patientAge:this.patient.getAge(),hiddenFooterBtns:["Clear"]},options:function(){return[{label:"",value:"",other:{runOutDate:e.medicationRunOutDate,appointmentDate:e.appointmentDate}}]}}]}}});const te=T()(ee,[["render",K]]);var ne=te;function re(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{skipSummary:!0,fields:e.fields,onFinishAction:e.onSubmit,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var ae=n("0690"),oe=Object(i["defineComponent"])({mixins:[j["a"]],data:function(){return{adherence:{},drugObs:[],askReasonForPoorAdherence:!1,calculationAgreementObs:[]}},methods:{initAdherence:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.adherence=new ae["a"](e.getID(),t),r.next=3,n.adherence.loadPreviousDrugs();case 3:case"end":return r.stop()}}),r)})))()},saveAdherence:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.adherence.createEncounter();case 2:return t.next=4,Promise.all([].concat(Object(p["a"])(e.drugObs),Object(p["a"])(e.calculationAgreementObs)));case 4:return n=t.sent,t.next=7,e.adherence.saveObservationList(n);case 7:if(r=t.sent,r){t.next=10;break}return t.abrupt("return",Object(h["e"])("Unable to save patient observations"));case 10:case"end":return t.stop()}}),t)})))()},buildAdherenceReport:function(e){var t=this,n=this.adherence.getReceiptDate(),r=this.adherence.calcTimeElapsed(n,"day"),a=" Last visit: ".concat(g["b"].toStandardHisDisplayFormat(n)," \n                (").concat(r," Days Elapsed)"),o=[{indexes:[0,3,6],class:"adherence-col-bg"}],i=[],c=[a],s=[["Prescription"],["Tabs given"],["Tabs per"],["Tabs remaining"],["Expected"],["Actual (counted)"],["Adherence"],["Doses missed/ Unaccounted for"],["Doses consumed"],["Art Adherence"]];return e.forEach((function(e,n){var r=t.formatFrequency(e.frequency),a=t.calcPillsExpected(e),o=t.adherence.calculateAdherence(e.quantity,e.pillsBrought,a),u=t.adherence.isAdherenceGood(o)?"Good adherence":"Explore problem",l=t.adherence.calculateUnaccountedOrMissed(a,e.pillsBrought);c.push(e.drug.name),s[0].push(""),s[1].push(e.quantity),s[2].push("".concat(e.equivalent_daily_dose," <b>").concat(r,"</b>")),s[3].push(""),s[4].push(a<0?0:a),s[5].push(e.pillsBrought),s[6].push(""),s[7].push(l),s[8].push("".concat(o,"%")),s[9].push(u),i.push({index:n+1,row:9,class:u.match(/good/i)?"adherence-txt-good":"adherence-txt-bad"})})),[{label:"Selected Medication",value:"Table",other:{columns:c,rows:s,rowColors:o,cellColors:i}}]},formatFrequency:function(e){return"".concat(e).match(/qod/i)?"QOD":"".concat(e).match(/weekly/i)?"QW":e},calcPillsExpected:function(e){return this.adherence.calculateExpected(e.quantity,e.equivalent_daily_dose,e.order.start_date,this.formatFrequency(e.frequency))},getAdherenceFields:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return[{id:"pills_brought",helpText:"Pills remaining (brought to clinic)",type:b["b"].TT_ADHERENCE_INPUT,condition:function(){return t},validation:function(e){if(f["a"].required(e))return["No drugs available"];var t=e.map((function(e){return""===e.value}));return t.some(Boolean)?["Some values are missing"]:null},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.drugObs=[],n.forEach(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r,a,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=n.other,a=r.drug,o=r.order,i=Object(d["a"])(Object(d["a"])({},n.other),{},{pillsBrought:n.value}),c=e.adherence.calculateAdherence(i.quantity,i.pillsBrought,e.calcPillsExpected(i)),e.drugObs.push(e.adherence.buildAdherenceObs(o.order_id,a.drug_id,c)),e.drugObs.push(e.adherence.buildPillCountObs(o.order_id,n.value)),e.askReasonForPoorAdherence||(e.askReasonForPoorAdherence=!e.adherence.isAdherenceGood(i));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),options:function(t){return Object(O["isEmpty"])(t.pills_brought)?e.adherence.getLastDrugs().map((function(e){return{label:e.drug.name,value:"",other:Object(d["a"])({},e)}})):t.pills_brought}},{id:"adherence_report",helpText:"ART adherence",type:b["b"].TT_TABLE_VIEWER,condition:function(){return t},options:function(t){return e.buildAdherenceReport(t.pills_brought.map((function(e){return Object(d["a"])(Object(d["a"])({},e.other),{},{pillsBrought:e.value})})))},config:{hiddenFooterBtns:["Clear"]}},{id:"agree_with_calculation",helpText:"Agree with adherence calculation",type:b["b"].TT_SELECT,condition:function(){return e.askReasonForPoorAdherence&&t},validation:function(e){return f["a"].required(e)},unload:function(t){var n=t.value;e.calculationAgreementObs=[e.adherence.buildValueCoded("Reason for poor treatment adherence",n)]},options:function(){return[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]}}]}}});const ie=oe;var ce=ie,se=Object(i["defineComponent"])({mixins:[ce],watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return n.next=3,t.initAdherence(t.patient,t.providerID);case 3:t.fields=t.getAdherenceFields();case 4:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onSubmit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.saveAdherence();case 2:e.nextTask();case 3:case"end":return t.stop()}}),t)})))()}}});const ue=T()(se,[["render",re]]);var le=ue;function de(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var pe=n("53ca"),be=(n("a9e3"),n("b64b"),n("07ac"),n("3b8c")),fe=n("c1e4"),me=n("9b7c"),he=n("8158"),ge=n("8a30"),ve=Object(i["withScopeId"])("data-v-10a26cd2");Object(i["pushScopeId"])("data-v-10a26cd2");var Oe=Object(i["createTextVNode"])("VL milestone has been reached"),je=Object(i["createTextVNode"])(" Order VL"),_e=Object(i["createTextVNode"])(" Wait till next milestone"),we=Object(i["createTextVNode"])(" Remind me later ");Object(i["popScopeId"])();var ke=ve((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-title"),s=Object(i["resolveComponent"])("ion-toolbar"),u=Object(i["resolveComponent"])("ion-header"),l=Object(i["resolveComponent"])("ion-content"),d=Object(i["resolveComponent"])("ion-button"),p=Object(i["resolveComponent"])("ion-footer");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Object(i["createVNode"])(u,null,{default:ve((function(){return[Object(i["createVNode"])(s,null,{default:ve((function(){return[Object(i["createVNode"])(c,null,{default:ve((function(){return[Oe]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(l,{style:{overflowY:"hidden",background:"grey"}},{default:ve((function(){return[Object(i["createVNode"])("p",null,"ART start date : "+Object(i["toDisplayString"])(e.artStartDate),1),Object(i["createVNode"])("p",null,"Months on ART: "+Object(i["toDisplayString"])(e.monthsOnART),1),Object(i["createVNode"])("p",null,"Last VL order date "+Object(i["toDisplayString"])(e.lastOrder),1),Object(i["createVNode"])("p",null,"Current regimen / start date: "+Object(i["toDisplayString"])(e.currentRegimen)+" - "+Object(i["toDisplayString"])(e.regimenStartDate),1)]})),_:1}),Object(i["createVNode"])(p,null,{default:ve((function(){return[Object(i["createVNode"])(s,null,{default:ve((function(){return[Object(i["createVNode"])(d,{slot:"end",color:"success",size:"large",onClick:t[1]||(t[1]=function(t){return e.closeModal("order")})},{default:ve((function(){return[je]})),_:1}),Object(i["createVNode"])(d,{slot:"end",size:"large",onClick:t[2]||(t[2]=function(t){return e.closeModal("wait")})},{default:ve((function(){return[_e]})),_:1}),Object(i["createVNode"])(d,{slot:"start",color:"danger",size:"large",onClick:t[3]||(t[3]=function(t){return e.closeModal("later")})},{default:ve((function(){return[we]})),_:1})]})),_:1})]})),_:1})],64)})),ye=Object(i["defineComponent"])({name:"Modal",props:{VLData:{type:Object,required:!0}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.artStartDate=g["b"].toStandardHisDisplayFormat(e.VLData.earliest_start_date),e.monthsOnART=e.VLData.period_on_art,e.lastOrder=e.VLData.last_order_date?g["b"].toStandardHisDisplayFormat(e.VLData.last_order_date):"N/A",e.currentRegimen=e.VLData.current_regimen.name?e.VLData.current_regimen.name:"Other",e.regimenStartDate=g["b"].toStandardHisDisplayFormat(e.VLData.current_regimen.date_started);case 5:case"end":return t.stop()}}),t)})))()},methods:{closeModal:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge["cb"].dismiss(e);case 2:case"end":return t.stop()}}),t)})))()}},data:function(){return{content:"Content",artStartDate:"",monthsOnART:"",lastOrder:"",currentRegimen:"",regimenStartDate:""}},components:{IonHeader:ge["q"],IonToolbar:ge["V"],IonTitle:ge["U"],IonContent:ge["n"],IonFooter:ge["o"],IonButton:ge["d"]}});n("d42f");const xe=T()(ye,[["render",ke],["__scopeId","data-v-10a26cd2"]]);var Ne=xe,Ce=n("d4ec"),Ve=n("bee2"),De=n("262e"),Te=n("2caf"),Ie=n("cc6f"),Re=function(e){Object(De["a"])(n,e);var t=Object(Te["a"])(n);function n(e,r){return Object(Ce["a"])(this,n),t.call(this,e,13,r)}return Object(Ve["a"])(n,[{key:"buildDefferedOrder",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ie["a"].getConceptID("HIV viral load");case 2:return n=e.sent,e.next=5,Ie["a"].getConceptID("Delayed milestones");case 5:return r=e.sent,e.abrupt("return",[{concept_id:n,value_text:"Wait till next milestone",value_coded:r,value_numeric:t}]);case 7:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),n}(Ie["a"]),Se=Object(i["withScopeId"])("data-v-546674a2");Object(i["pushScopeId"])("data-v-546674a2");var Pe=Object(i["createTextVNode"])("Side effects suspected causes"),Ae={style:{}},Ee=Object(i["createVNode"])("div",{class:"side-title"}," Select reason ",-1),Be=Object(i["createVNode"])("p",null,"Current Medication",-1),Fe=Object(i["createVNode"])("p",null,"Previous Medication",-1),Le=Object(i["createTextVNode"])("Other, not drug related"),Me=Object(i["createTextVNode"])("Drug side effect"),He=Object(i["createVNode"])("p",null,null,-1),Ue=Object(i["createTextVNode"])(" Close "),qe=Object(i["createTextVNode"])(" Save ");Object(i["popScopeId"])();var Ge=Se((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-title"),s=Object(i["resolveComponent"])("ion-toolbar"),u=Object(i["resolveComponent"])("ion-header"),l=Object(i["resolveComponent"])("ion-label"),d=Object(i["resolveComponent"])("ion-item"),p=Object(i["resolveComponent"])("ion-list"),b=Object(i["resolveComponent"])("ion-col"),f=Object(i["resolveComponent"])("ion-radio"),m=Object(i["resolveComponent"])("ion-radio-group"),h=Object(i["resolveComponent"])("ion-row"),g=Object(i["resolveComponent"])("ion-grid"),v=Object(i["resolveComponent"])("ion-content"),O=Object(i["resolveComponent"])("ion-button"),j=Object(i["resolveComponent"])("ion-footer");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Object(i["createVNode"])(u,null,{default:Se((function(){return[Object(i["createVNode"])(s,null,{default:Se((function(){return[Object(i["createVNode"])(c,null,{default:Se((function(){return[Pe]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(v,{style:{overflowY:"hidden",background:"grey"}},{default:Se((function(){return[Object(i["createVNode"])(g,null,{default:Se((function(){return[Object(i["createVNode"])(h,null,{default:Se((function(){return[Object(i["createVNode"])(b,{size:"4"},{default:Se((function(){return[Object(i["createVNode"])(p,{style:{overflowY:"auto",height:"78vh"}},{default:Se((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.sides,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:t,onClick:function(t){return e.selectSideEffect(n)},detail:!0,style:e.activeIndex===n?"color: green":"color: black"},{default:Se((function(){return[Object(i["createVNode"])(l,null,{default:Se((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["onClick","style"])})),128))]})),_:1})]})),_:1}),Object(i["createVNode"])(b,{style:{overflowY:"auto",height:"78vh"}},{default:Se((function(){return[Object(i["createVNode"])("div",Ae,[Object(i["createVNode"])(p,null,{default:Se((function(){return[null!==e.activeIndex?(Object(i["openBlock"])(),Object(i["createBlock"])(m,{key:0,modelValue:e.sides[e.activeIndex]["reason"],"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.sides[e.activeIndex]["reason"]=t})},{default:Se((function(){return[Ee,Be,(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:t},{default:Se((function(){return[Object(i["createVNode"])(l,null,{default:Se((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.drug.name),1)]})),_:2},1024),Object(i["createVNode"])(f,{slot:"start",value:e.drug_inventory_id},null,8,["value"])]})),_:2},1024)})),128)),Fe,Object(i["createVNode"])(d,null,{default:Se((function(){return[Object(i["createVNode"])(l,null,{default:Se((function(){return[Le]})),_:1}),Object(i["createVNode"])(f,{slot:"start",value:"other"})]})),_:1}),Object(i["createVNode"])(d,null,{default:Se((function(){return[Object(i["createVNode"])(l,null,{default:Se((function(){return[Me]})),_:1}),Object(i["createVNode"])(f,{slot:"start",value:"drug"})]})),_:1})]})),_:1},8,["modelValue"])):Object(i["createCommentVNode"])("",!0)]})),_:1})]),He]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(j,null,{default:Se((function(){return[Object(i["createVNode"])(s,null,{default:Se((function(){return[Object(i["createVNode"])(O,{onClick:e.closeModal,slot:"end",color:"danger"},{default:Se((function(){return[Ue]})),_:1},8,["onClick"]),Object(i["createVNode"])(O,{onClick:e.postSideEffects,slot:"end",disabled:!e.allSelected},{default:Se((function(){return[qe]})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1})],64)})),ze=Object(i["defineComponent"])({name:"Modal",props:{sideEffects:{type:Object,required:!0},drugs:{type:Array,default:[]}},methods:{closeModal:function(){ge["cb"].dismiss()},postSideEffects:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge["cb"].dismiss(e.sides);case 2:case"end":return t.stop()}}),t)})))()},selectSideEffect:function(e){this.activeIndex=e}},computed:{allSelected:function(){return this.sides.filter((function(e){return e["reason"]})).length===this.sides.length}},mounted:function(){this.sides=this.sideEffects},data:function(){return{content:"Content",extendedLabsEnabled:!1,appActivities:[],sides:[],specimens:[],reasons:["Routine","Targeted","Confirmatory","Stat","Repeat / Missing"],activeIndex:null}},components:{IonButton:ge["d"],IonContent:ge["n"],IonHeader:ge["q"],IonTitle:ge["U"],IonToolbar:ge["V"],IonLabel:ge["x"],IonList:ge["y"],IonItem:ge["w"],IonRadioGroup:ge["H"],IonRow:ge["J"]}});n("e96c");const Ye=T()(ze,[["render",Ge],["__scopeId","data-v-546674a2"]]);var We=Ye,$e=n("8df6"),Ke=n("5f2c"),Je=Object(i["defineComponent"])({mixins:[ce],components:{HisStandardForm:J["a"]},data:function(){return{fields:[],currentWeight:-1,weightTrail:[],customRegimens:[],labOrders:[],isDrugRefillPatient:!1,weightLossPercentageNum:0,lostTenPercentBodyWeight:!1,CxCaEnabled:!1,CxCaStartAge:-1,CxCaMaxAge:-1,DueForCxCa:!1,currentlyPregnant:!1,patientHitMenopause:!1,hasPregnancyObsToday:!1,autoSelect3HP:!1,labOrderFieldContext:{},consultation:{},prescription:{},dispensation:{},completed3HP:!1,hasTbHistoryObs:!1,allergicToSulphur:!1,TBSuspected:!1,presentedTBSymptoms:!1,askAdherence:!1,lastDrugsReceived:[],sideEffectsHistory:{},onPermanentFPMethods:!1,guardianVisit:!1,reasonForDecliningTPTObs:{},malawiSideEffectReasonObs:[],otherSideEffectReasonObs:[],wasTransferredIn:!1,dateStartedArt:"",clientHadAHysterectomy:!1}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=91;break}return t.consultation=new be["a"](t.patientID,t.providerID),t.prescription=new m["a"](t.patientID,t.providerID),t.dispensation=new Ke["a"](t.patientID,t.providerID),n.next=6,t.initAdherence(t.patient,t.providerID);case 6:return n.next=8,t.guardianOnlyVisit();case 8:return n.t0=Number,n.next=11,t.patient.getRecentWeight();case 11:return n.t1=n.sent,t.currentWeight=(0,n.t0)(n.t1),n.next=15,t.getTransferInStatus();case 15:if(n.t2=n.sent,n.t2){n.next=18;break}n.t2=!1;case 18:return t.wasTransferredIn=n.t2,n.t3=Number,n.next=22,t.patient.getRecentWeight();case 22:return n.t4=n.sent,t.currentWeight=(0,n.t3)(n.t4),n.next=26,t.getDateStartedArt();case 26:return t.dateStartedArt=n.sent,n.next=29,$e["a"].isDrugRefillPatient(t.patientID);case 29:return t.isDrugRefillPatient=n.sent,n.next=32,t.consultation.getDrugSideEffects();case 32:return t.sideEffectsHistory=n.sent,n.next=35,t.consultation.hasTreatmentHistoryObs();case 35:return t.hasTbHistoryObs=n.sent,n.next=38,o["b"].cervicalCancerScreeningEnabled();case 38:return t.CxCaEnabled=n.sent,n.next=41,t.patient.getWeightHistory();case 41:return t.weightTrail=n.sent,t.weightLossPercentageNum=t.patient.getWeightLossPercentageFromTrail(t.weightTrail),t.lostTenPercentBodyWeight=t.weightLossPercentageNum>=10,n.next=46,t.getVlLabData();case 46:if(t.labOrders=n.sent,!t.CxCaEnabled){n.next=61;break}return n.next=50,o["b"].cervicalCancerScreeningAgeBounds();case 50:return r=n.sent,a=r.start,i=r.end,t.CxCaMaxAge=i,t.CxCaStartAge=a,n.next=57,t.consultation.clientDueForCxCa();case 57:return t.DueForCxCa=n.sent,n.next=60,t.consultation.clientHasHadAHysterectomy();case 60:t.clientHadAHysterectomy=n.sent;case 61:if(!t.patient.isChildBearing()){n.next=68;break}return n.next=64,t.patient.hasPregnancyObsToday();case 64:return t.hasPregnancyObsToday=n.sent,n.next=67,t.patient.isPregnant();case 67:t.currentlyPregnant=n.sent;case 68:if(!t.patient.isFemale()){n.next=72;break}return n.next=71,t.consultation.patientHitMenopause();case 71:t.patientHitMenopause=n.sent;case 72:if(!t.hasTbHistoryObs){n.next=76;break}return n.next=75,t.consultation.patientCompleted3HP();case 75:t.completed3HP=n.sent;case 76:if(t.completed3HP){n.next=80;break}return n.next=79,t.consultation.hasCompleteTptDispensations();case 79:t.completed3HP=n.sent;case 80:return n.next=82,o["b"].threeHPAutoSelectEnabled();case 82:return t.autoSelect3HP=n.sent,t.askAdherence=t.adherence.receivedDrugsBefore(),t.fields=t.getFields(),n.next=87,t.consultation.getTLObs();case 87:return t.onPermanentFPMethods=n.sent,n.next=90,t.consultation.getPreviousDrugs();case 90:t.lastDrugsReceived=n.sent;case 91:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onFinish:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.consultation.createEncounter();case 2:if(a=r.sent,a){r.next=5;break}return r.abrupt("return",Object(h["e"])("Unable to create encounter"));case 5:return r.next=7,n.resolveObs(t,"consultation");case 7:return o=r.sent,r.next=10,Promise.all([].concat(Object(p["a"])(n.malawiSideEffectReasonObs),Object(p["a"])(n.otherSideEffectReasonObs),[n.reasonForDecliningTPTObs]));case 10:return i=r.sent.filter((function(e){return!Object(O["isEmpty"])(e)})),r.next=13,n.consultation.saveObservationList([].concat(Object(p["a"])(o),Object(p["a"])(i)));case 13:if(c=r.sent,!n.askAdherence||n.isNonePatientClient()){r.next=17;break}return r.next=17,n.saveAdherence();case 17:if(c){r.next=19;break}return r.abrupt("return",Object(h["e"])("Unable to save patient observations"));case 19:if(Object(h["d"])("Observations and encounter created!"),!e.refer_to_clinician||"Yes"!==e.refer_to_clinician.value){r.next=23;break}return n.gotoPatientDashboard(),r.abrupt("return");case 23:n.nextTask();case 24:case"end":return r.stop()}}),r)})))()},getTransferInStatus:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,be["a"].getFirstValueCoded(e.patientID,"Ever received ART");case 2:return n=t.sent,t.next=5,be["a"].getFirstObs(e.patientID,"Has transfer letter");case 5:return r=t.sent,a=r?g["b"].toStandardHisFormat(r.obs_datetime):"",t.abrupt("return",n&&n.match(/yes/i)&&r&&"".concat(r.value_coded).match(/yes/i)&&a===e.consultation.getDate());case 8:case"end":return t.stop()}}),t)})))()},getDateStartedArt:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,be["a"].getFirstValueDatetime(e.patientID,"Date ART started");case 2:return n=t.sent,t.abrupt("return",n?g["b"].toStandardHisFormat(n):"");case 4:case"end":return t.stop()}}),t)})))()},checkIfWeightLossIsControlled:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(t.lostTenPercentBodyWeight&&"".concat(e.label).match(/malnutrition/i)&&"".concat(e.value).match(/no/i))){n.next=5;break}return n.next=3,Object(_["a"])("Recommendation","Patient's weight has dropped by ".concat(t.weightLossPercentageNum,"% , is this controlled weight loss??"),"Please verify",[{name:"Confirm weight loss",slot:"start",color:"success"},{name:"Confirm controlled",slot:"end",color:"primary"}]);case 3:r=n.sent,e.value="Confirm weight loss"===r?"Yes":"No";case 5:case"end":return n.stop()}}),n)})))()},guardianOnlyVisit:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.consultation.getClient();case 2:n=t.sent,e.guardianVisit="No"===n;case 4:case"end":return t.stop()}}),t)})))()},checkVLReminder:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x["a"].getPatientVLInfo(e.patientID);case 2:if(n=t.sent,!0!==n.eligibile){t.next=23;break}return t.next=6,ge["cb"].create({component:Ne,backdropDismiss:!1,cssClass:"large-modal",componentProps:{VLData:n}});case 6:return r=t.sent,r.present(),t.next=10,r.onDidDismiss();case 10:a=t.sent,o=a.data,t.t0=o,t.next="order"===t.t0?15:"wait"===t.t0?18:"later"===t.t0?21:22;break;case 15:return t.next=17,e.labOrderFieldContext.launchOrderSelection();case 17:return t.abrupt("break",23);case 18:return t.next=20,e.waitForVL();case 20:return t.abrupt("break",23);case 21:return t.abrupt("break",23);case 22:return t.abrupt("break",23);case 23:case"end":return t.stop()}}),t)})))()},waitForVL:function(){var e=arguments,t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:null,a=new Re(t.patientID,t.providerID),n.next=4,a.createEncounter();case 4:return o=n.sent,n.next=7,a.buildDefferedOrder(r);case 7:if(i=n.sent,o){n.next=10;break}return n.abrupt("return",Object(h["e"])("Unable to create encounter"));case 10:return n.next=12,a.saveObservationList(i);case 12:case"end":return n.stop()}}),n)})))()},canScreenCxCa:function(){var e=this.patient.getAge();return this.patient.isFemale()&&this.DueForCxCa&&this.CxCaEnabled&&e>=this.CxCaStartAge&&e<=this.CxCaMaxAge&&!this.clientHadAHysterectomy},pregnancyEligible:function(){return this.patient.isChildBearing()&&!this.onPermanentFPMethods},showCurrentContraceptionMethods:function(e){return this.pregnancyEligible()&&!this.patientHitMenopause&&!this.isPregnant(e)&&!this.isANCclient()},showNewContraceptionMethods:function(e){return this.pregnancyEligible()&&!this.patientHitMenopause&&!this.isPregnant(e)&&!this.isOnTubalLigation(e)&&!this.isANCclient()},isPregnant:function(e){return e.pregnant_breastfeeding?this.inArray(e.pregnant_breastfeeding,(function(e){return"Pregnant"===e.label&&"Yes"===e.value})):this.currentlyPregnant},isOnTubalLigation:function(e){return this.inArray(e.current_fp_methods,(function(e){return"TUBAL LIGATION"===e.value}))},disableFPMethods:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!t.isChecked||"NONE"!==t.label){r.next=4;break}return r.abrupt("return",e.map((function(e){return"NONE"!=e.label&&(e.isChecked=!1,e.disabled=!1),e})));case 4:if("NONE"==t.label||!t.isChecked){r.next=14;break}return t.label.match(/condom/gi)&&Object(h["b"])("Combine with other modern methods of family planning"),a=Object(O["findIndex"])(e,{label:"NONE"}),e[a].isChecked=!1,o=n.consultation.familyPlanningMethods(t.label,e),i=Object(O["findIndex"])(o,{label:t.label}),o[i].isChecked=!0,r.abrupt("return",o);case 14:return r.abrupt("return",e.map((function(e){return e.disabled=!1,e})));case 15:case"end":return r.stop()}}),r)})))()},disablePrescriptions:function(e,t){if(t.isChecked&&"NONE OF THE ABOVE"===t.label)return e.map((function(e){return"NONE OF THE ABOVE"!=e.label&&(e.isChecked=!1),e}));if("NONE OF THE ABOVE"!=t.label&&t.isChecked){var n=Object(O["findIndex"])(e,{label:"NONE OF THE ABOVE"});e[n].isChecked=!1}return e},buildMedicationOrders:function(e){var t=this;if(this.inArray(e,(function(e){return"NONE OF THE ABOVE"===e.label})))return this.consultation.buildValueCoded("Prescribe drugs","No");var n=this.consultation.buildValueCoded("Prescribe drugs","Yes"),r=e.map((function(e){return t.consultation.buildValueCoded("Medication orders",e.label)}));return[n].concat(Object(p["a"])(r))},declinedFPM:function(e){return this.inArray(e.fp_methods,(function(e){return"NONE"===e.value}))&&this.inArray(e.current_fp_methods,(function(e){return"NONE"===e.value}))},riskOfUnplannedPregnancy:function(e){return"At risk of unplanned pregnancy"===e.reason_for_no_fpm.value},showOtherSideEffects:function(e){return this.inArray(e.side_effects,(function(e){return"Other"===e.label&&"Yes"===e.value}))},hasTBSymptoms:function(e){return this.presentedTBSymptoms=this.inArray(e.tb_side_effects,(function(e){return"Yes"===e.value})),this.presentedTBSymptoms},buildSideEffectObs:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.getSideEffectsReasons(e);case 2:if(a=r.sent,n[t]=[],void 0!==a){r.next=6;break}return r.abrupt("return",!1);case 6:return-1!=a&&(o=he["a"].getCachedConceptID("Drug induced",!0),i=function(e){return!!"".concat(e).match(/other|drug/i)},n[t]=a.map((function(e){return{concept_id:o,value_coded:he["a"].getCachedConceptID(e.label,!0),value_text:i(e.reason)?"Past medication history":null,value_drug:i(e.reason)?null:e.reason}}))),r.abrupt("return",!0);case 8:case"end":return r.stop()}}),r)})))()},getSideEffectsReasons:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.filter((function(e){return!"".concat(e.label).match(/other/i)&&"Yes"===e.value})),!(r.length>0)){n.next=11;break}return n.next=4,ge["cb"].create({component:We,backdropDismiss:!1,cssClass:"large-modal",componentProps:{sideEffects:r,drugs:t.lastDrugsReceived}});case 4:return a=n.sent,a.present(),n.next=8,a.onDidDismiss();case 8:return o=n.sent,i=o.data,n.abrupt("return",i);case 11:return n.abrupt("return",-1);case 12:case"end":return n.stop()}}),n)})))()},getFPMethods:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=this.consultation.getFamilyPlanningMethods(),r=n.filter((function(t){return!e.includes(t)}));return r.map((function(e){return{label:e,value:e,isChecked:t.map((function(e){return e.label})).includes(e)}}))},getOptions:function(e,t){var n=this;return e.map((function(e){var r=Object(O["find"])(t,{label:e});return{label:e,value:r?r.value:"",other:{values:n.yesNoOptions()}}}))},getContraindications:function(e){var t=he["a"].getConceptsByCategory("contraindication",!0).map((function(e){return e.name}));return this.getOptions([].concat(Object(p["a"])(t),["Other"]),e)},getOtherContraindications:function(e){var t=he["a"].getConceptsByCategory("side_effect",!0).map((function(e){return e.name})),n=t.pop();return this.getOptions([].concat(Object(p["a"])(t),["Other (Specify)","".concat(n)]),e)},getTBSymptoms:function(e){var t=he["a"].getConceptsByCategory("tb_symptom",!0).map((function(e){return e.name}));return this.getOptions(Object(p["a"])(t),e)},getReasonsForNoCxcaOptions:function(){return he["a"].getConceptsByCategory("reason_for_no_cxca").map((function(e){return{label:e.name,value:e.name,other:{c:e}}}))},runAppendOptionParams:function(e,t){var n=t.filter((function(e){return e.isChecked})).map((function(e){return e.label}));return e.map((function(e){var t;if("function"===typeof(null===e||void 0===e||null===(t=e.other)||void 0===t?void 0:t.appendOptionParams)){var r,a=null===e||void 0===e||null===(r=e.other)||void 0===r?void 0:r.appendOptionParams();if("object"===Object(pe["a"])(a)){var o={label:e.label,value:e.value,other:e.other};return a.isChecked?(o.isChecked=a.isChecked,delete a.isChecked):o.isChecked=n.includes(e.label),Object(d["a"])(Object(d["a"])({},o),a)}}return e}))},didCompleted3HP:function(e){return!!this.completed3HP||!(!e.routine_tb_therapy||!e.routine_tb_therapy.value.match(/complete/i))},tptAutoSelectionMode:function(e){return this.autoSelect3HP&&!this.didCompleted3HP(e)},on3HPValueUpdate:function(e,t,n){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var o,i,c,s,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(o=function(e){return!!e.label.match(/IPT|3HP/i)},i=function(){var t=e.reduce((function(e,t){return o(t)&&!(t.label in e)&&t.isChecked&&e.push(t.label),e}),[]);return t.includes("IPT")&&(t.includes("3HP (RFP + INH)")||t.includes("INH 300 / RFP 300 (3HP)"))}(),c=o(t)&&e.filter((function(e){return o(e)})).map((function(e){return!e.isChecked})).every(Boolean),!c||!r.tptAutoSelectionMode(n)){a.next=10;break}return a.next=6,Object(_["c"])("Reasons for declining TPT","",["Patient declined","Side-effects (previous or current)","Stock-out","Starting TB treatment","Other"],[{name:"Done",slot:"start",role:"action"}]);case 6:s=a.sent,r.reasonForDecliningTPTObs=r.consultation.buildValueText("Other reason for not seeking services",s.selection),a.next=11;break;case 10:r.reasonForDecliningTPTObs={};case 11:if(!i){a.next=16;break}return a.next=14,Object(_["a"])("IPT / 3HP conflict","IPT and 3HP can NOT be prescribed together","Please pick either one",[{name:"Prescribe 3HP",slot:"start",color:"primary"},{name:"Prescribe IPT",slot:"end",color:"primary"}]);case 14:return u=a.sent,a.abrupt("return",e.map((function(e){return o(e)&&(e.isChecked="Prescribe IPT"===u&&"IPT"===e.label||"Prescribe 3HP"===u&&"INH 300 / RFP 300 (3HP)"===e.label),e})));case 16:return a.abrupt("return",e.map((function(e){return("3HP (RFP + INH)"===t.label&&"INH 300 / RFP 300 (3HP)"===e.label&&t.isChecked||"INH 300 / RFP 300 (3HP)"===t.label&&"3HP (RFP + INH)"===e.label&&t.isChecked)&&(e.isChecked=!1),e})));case 17:case"end":return a.stop()}}),a)})))()},medicationOrderOptions:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.didCompleted3HP(e),a=this.tptAutoSelectionMode(e),o=function(e){return{disabled:!0,isChecked:!1,description:{color:"danger",show:"always",text:e}}};return this.runAppendOptionParams([this.toOption("ARVs",{appendOptionParams:function(){return{isChecked:a&&!t.TBSuspected}}}),this.toOption("CPT",{appendOptionParams:function(){return!a||t.TBSuspected||t.allergicToSulphur?t.allergicToSulphur?o("Allergic to CPT"):{disabled:!1}:{isChecked:!0}}}),this.toOption("3HP (RFP + INH)",{appendOptionParams:function(){return r?o("Completed 3HP"):t.TBSuspected?o("TB Suspect"):t.currentWeight<20?o("Weight below regulation"):void 0}}),this.toOption("INH 300 / RFP 300 (3HP)",{appendOptionParams:function(){return r?o("Completed 3HP"):t.TBSuspected?o("TB Suspect"):t.currentWeight<30?o("Weight below regulation"):{isChecked:a}}}),this.toOption("IPT",{appendOptionParams:function(){return r?o("Completed 3HP"):t.TBSuspected?o("TB Suspect"):void 0}}),this.toOption("NONE OF THE ABOVE")],n)},isNonePatientClient:function(){return this.guardianVisit||this.isDrugRefillPatient},getVlLabData:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,me["a"].getOrdersIncludingGivenResultStatus(e.patientID);case 2:return n=t.sent,t.abrupt("return",me["a"].formatLabs(n));case 4:case"end":return t.stop()}}),t)})))()},isANCclient:function(){return"ANC"===x["a"].getSuspendedProgram()},getFields:function(){var e=this;return[{id:"other_patient_prescription",proxyID:"prescription",helpText:"Medication to prescribe during this visit",type:b["b"].TT_MULTIPLE_SELECT,validation:function(e){return f["a"].required(e)},computedValue:function(t){return{tag:"consultation",obs:e.buildMedicationOrders(t)}},onValueUpdate:function(t,n,r){var a=e.disablePrescriptions(t,n);return e.on3HPValueUpdate(a,n,r)},options:function(t,n,r,a){return Object(O["isEmpty"])(a)?e.medicationOrderOptions(t):a},condition:function(){return e.isNonePatientClient()},exitsForm:function(){return!0}}].concat(Object(p["a"])(Object(A["b"])({id:"date_last_received_arvs",helpText:"Last ARV Dispensation",required:!0,condition:function(){return e.wasTransferredIn},minDate:function(){return e.dateStartedArt},maxDate:function(){return e.consultation.getDate()},computeValue:function(t){return e.prescription.setDate(t),{tag:"consultation",date:t,obs:e.consultation.buildValueDate("Date drug received from previous facility",t)}},estimation:{allowUnknown:!1}},this.consultation.getDate())),[{id:"previous_arvs_received",helpText:"Last ARV drugs dispensed",type:b["b"].TT_MULTIPLE_SELECT,computedValue:function(e){return e.map((function(e){return e.other}))},validation:function(e){return f["a"].required(e)},options:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(O["isEmpty"])(e.customRegimens)){t.next=2;break}return t.abrupt("return",e.customRegimens);case 2:return n=new m["a"](e.patientID,e.providerID),t.next=5,n.getCustomIngridients();case 5:return e.customRegimens=t.sent.map((function(e){return{label:e.name,value:e.drug_id,other:Object(d["a"])({},e)}})),t.abrupt("return",e.customRegimens);case 7:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),config:{showKeyboard:!0},condition:function(){return e.wasTransferredIn}},{id:"drug_interval",helpText:"Duration period for last received ARVs",type:b["b"].TT_NEXT_VISIT_INTERVAL_SELECTION,condition:function(){return e.wasTransferredIn},validation:function(e){return f["a"].required(e)},computedValue:function(e){return e.other.nextAppointment},options:function(){var t=[{label:"2 weeks",value:14},{label:"1 month",value:28},{label:"2 months",value:56},{label:"3 months",value:84},{label:"4 months",value:112},{label:"5 months",value:140},{label:"6 months",value:168},{label:"7 months",value:196},{label:"8 months",value:224},{label:"9 months",value:252},{label:"10 months",value:280},{label:"11 months",value:308},{label:"12 months",value:336}];return t.map((function(t){var n=t.label,r=t.value;e.prescription.setNextVisitInterval(r);var a=e.prescription.calculateDateFromInterval();return{label:n,value:r,other:{label:"Medication run-out date:",value:g["b"].toStandardHisDisplayFormat(a),nextAppointment:a,other:{label:"",value:[]}}}}))}},{id:"arv_quantities",helpText:"Amount of drugs dispensed (From last ART Facility)",type:b["b"].TT_DRUG_TRANSFER_IN,validation:function(t){return e.validateSeries([function(){return f["a"].required(t)},function(){return t.map((function(e){var t;return""===e.value||""===(null===e||void 0===e||null===(t=e.other)||void 0===t?void 0:t.pillsBrought)})).some(Boolean)?["Some Drugs are missing values"]:null}])},computedValue:function(t,n,r){return{tag:"consultation",obs:t.map(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var a,o,i,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=(null===n||void 0===n||null===(a=n.other)||void 0===a||null===(o=a.drug)||void 0===o?void 0:o.drug_id)||0,t.t0=d["a"],t.t1=d["a"],t.t2={},t.next=6,e.consultation.buildObs("Drug received from previous facility",{value_drug:s,value_datetime:(null===r||void 0===r?void 0:r.drug_interval)||null,value_numeric:(null===n||void 0===n?void 0:n.value)||0});case 6:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.next=11,e.consultation.buildObs("Number of tablets brought to clinic",{value_drug:s,value_numeric:(null===n||void 0===n||null===(i=n.other)||void 0===i?void 0:i.pillsBrought)||-1,value_datetime:(null===r||void 0===r||null===(c=r.date_last_received_arvs)||void 0===c?void 0:c.date)||null});case 11:return t.t6=t.sent,t.t7={child:t.t6},t.abrupt("return",(0,t.t0)(t.t4,t.t5,t.t7));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},options:function(e,t,n){return t.previous_arvs_received.map((function(e){var t,r=e["alternative_drug_name"]||e["drug_name"]||e["name"],a=Object(O["find"])(n,{label:r}),o="",i="";a&&(o=null===a||void 0===a?void 0:a.value,i=null===a||void 0===a||null===(t=a.other)||void 0===t?void 0:t.pillsBrought);return{label:r,value:o,other:{drug:e,pillsBrought:i}}}))},condition:function(){return e.wasTransferredIn}},{id:"patient_lab_orders",helpText:"Lab orders",type:b["b"].TT_LAB_ORDERS,unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkVLReminder();case 2:if(n=e.labOrders.filter((function(e){return"No"===e.result_given})),t.t0=n.length,!t.t0){t.next=8;break}return t.next=7,Object(h["a"])("Result(s) Given to Client?");case 7:t.t0=t.sent;case 8:if(!t.t0){t.next=13;break}return r=new Ie["a"](e.patientID,-1,e.providerID),o=n.reduce((function(e,t){return[].concat(Object(p["a"])(e),Object(p["a"])(t.resultIds.map(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.encounterID=t.encounter_id,e.t0=r,e.next=4,r.buildObs("Result Given to Client",{value_coded:"Yes",obs_group_id:n});case 4:return e.t1=e.sent,e.abrupt("return",e.t0.saveObs.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())))}),[]),t.next=13,Promise.all(o);case 13:return t.next=15,e.getVlLabData();case 15:e.labOrders=t.sent;case 16:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),onload:function(t){return e.labOrderFieldContext=t},options:function(){return[{label:"Lab orders",value:"order trail",other:{values:e.labOrders}}]},config:{printOrder:function(t){return new Q["a"](e.patientID).printLabOrderLbl(t)},hiddenFooterBtns:["Clear"],footerBtns:[{name:"Order",size:"large",slot:"end",color:"primary",visible:!0,onClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(O["isEmpty"])(e.labOrderFieldContext)){t.next=3;break}return t.next=3,e.labOrderFieldContext.launchOrderSelection();case 3:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}]}},{id:"pregnant_breastfeeding",helpText:"Patient Pregnant or breastfeeding?",condition:function(){return!e.hasPregnancyObsToday&&e.pregnancyEligible()},type:b["b"].TT_MULTIPLE_YES_NO,validation:function(t){return e.validateSeries([function(){return f["a"].required(t)},function(){return f["a"].anyEmpty(t)}])},computedValue:function(t){var n=[];return e.isANCclient()&&n.push(e.consultation.buildValueCoded("Is patient pregnant","Yes")),n=n.concat(t.map((function(t){return e.consultation.buildValueCoded(t.other.concept,t.value)}))),{obs:n,tag:"consultation"}},options:function(t){var n=[];return e.isANCclient()||n.push({label:"Pregnant",value:"",other:{values:e.yesNoOptions(),concept:"Is patient pregnant"}}),n.push({label:"Breastfeeding",value:"",other:{values:e.yesNoOptions(),concept:"Is patient breast feeding"}}),t.pregnant_breastfeeding||n}},{id:"patient_weight_chart",helpText:"Patient weight chart",type:b["b"].TT_WEIGHT_CHART,options:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.patient.getBMI();case 2:return n=t.sent,r=e.weightTrail,t.abrupt("return",[{label:"Weight for patient",value:"Weight trail",other:{bmi:n,values:r.map((function(e){return{x:g["b"].toStandardHisDisplayFormat(e.date),y:e.weight}})),age:e.patient.getAge()}}]);case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),config:{hiddenFooterBtns:["Clear"]}},{id:"has_fp_methods",helpText:"",type:b["b"].TT_TEXT_BANNER,condition:function(){return e.onPermanentFPMethods},options:function(){return e.mapStrToOptions(["Patient is on Tubal ligation method"])}},{id:"current_fp_methods",helpText:"What method are you currently on?",type:b["b"].TT_MULTIPLE_SELECT,validation:function(e){return f["a"].required(e)},onValueUpdate:function(t,n){return e.disableFPMethods(t,n)},computedValue:function(t){return{tag:"consultation",obs:t.map((function(t){return e.consultation.buildValueCoded("Family planning method",t.value)}))}},condition:function(t){return e.showCurrentContraceptionMethods(t)},options:function(t,n){return e.getFPMethods([],n)}},{id:"fp_methods",helpText:"What method are you providing today?",type:b["b"].TT_MULTIPLE_SELECT,condition:function(t){return e.showNewContraceptionMethods(t)},validation:function(e){return f["a"].required(e)},onValueUpdate:function(t,n){return e.disableFPMethods(t,n)},computedValue:function(t){return{tag:"consultation",obs:t.map((function(t){return e.consultation.buildValueCoded("Family planning, action to take",t.value)}))}},options:function(t,n){return e.getFPMethods([],n)}},{id:"reason_for_no_fpm",helpText:"Main reason for not using family planning methods",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},condition:function(t){return e.declinedFPM(t)},computedValue:function(t){return{tag:"consultation",obs:e.consultation.buildValueText("Why does the woman not use birth control",t.value)}},options:function(){return e.mapStrToOptions(["Not Sexually active","Patient want to get pregnant","Not needed for medical reasons","At risk of unplanned pregnancy","Menopause"])}},{id:"specific_reason_for_no_fpm",helpText:"Specific reason for not using family planning methods",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},computedValue:function(t){return{tag:"consultation",obs:e.consultation.buildValueText("Reason for not using contraceptives",t.value)}},condition:function(t){return e.riskOfUnplannedPregnancy(t)},options:function(){return e.mapStrToOptions(["Following wishes of spouse","Religious reasons","Afraid of side effects","Never though about it","Indifferent (does not mind getting pregnant)"])}},{id:"offer_contraceptives",helpText:"Offer contraceptives",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},condition:function(t){return e.riskOfUnplannedPregnancy(t)},computedValue:function(t){return{tag:"consultation",obs:e.consultation.buildValueCoded("Family planning, action to take",t.value)}},options:function(){return[{label:"Accepted",value:"Yes"},{label:"Declined",value:"No"},{label:"Discuss with spouse",value:"Discuss with spouse"}]}},{id:"offered_intervention",helpText:"Offered intervention",type:b["b"].TT_MULTIPLE_SELECT,validation:function(e){return f["a"].required(e)},condition:function(e){return"Accepted"===e.offer_contraceptives.value},computedValue:function(t){return{tag:"consultation",obs:t.map((function(t){return e.consultation.buildValueCoded(t.label,t.value)}))}},options:function(t,n){return e.getFPMethods(["NONE"],n)}},{id:"offer_cxca",helpText:"Refer client for CxCa screening",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},condition:function(t){return e.canScreenCxCa()&&!e.isPregnant(t)},computedValue:function(t){return{tag:"consultation",obs:e.consultation.buildValueCoded("Offer CxCa",t.value)}},options:function(){return e.yesNoOptions()}},{id:"reason_for_no_cxca",helpText:"Reason for NOT offering CxCa",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},condition:function(e){return"No"===e.offer_cxca.value},computedValue:function(t){return{tag:"consultation",obs:e.consultation.buildValueCoded("Reason for NOT offering CxCa",t.value)}},options:function(){return e.getReasonsForNoCxcaOptions()}}],Object(p["a"])(Object(A["b"])({id:"previous_cxca_test_date",helpText:"Previous CxCa test",required:!0,minDate:function(){return e.patient.getBirthdate()},maxDate:function(){return be["a"].getSessionDate()},condition:function(e){return"Not due for screening"===e.reason_for_no_cxca.value},computeValue:function(t,n){return n?{tag:"consultation",obs:e.consultation.buildValueDateEstimated("CxCa test date",t)}:{tag:"consultation",obs:e.consultation.buildValueDate("CxCa test date",t)}},estimation:{allowUnknown:!0,estimationFieldType:A["a"].MONTH_ESTIMATE_FIELD}})),[{id:"previous_side_effects",helpText:"Side effects / Contraindications history",type:b["b"].TT_DATA_TABLE,config:{columns:function(){return[[N["a"].thTxt("Date"),N["a"].thTxt("Condition"),N["a"].thTxt("Drug induced"),N["a"].thTxt("Drug")]]},rows:function(){return Object.keys(e.sideEffectsHistory).map((function(t){return Object.values(e.sideEffectsHistory[t]).filter((function(e){return!Object(O["isEmpty"])(e.name)})).map((function(e){return[N["a"].tdDate(t),N["a"].td(e.name),N["a"].td(e.drug_induced?"Yes":"No"),N["a"].td(e.drug)]}))})).reduce((function(e,t){return e.concat(t)}),[])}}},{id:"side_effects",helpText:"Contraindications / Side effects (select either 'Yes' or 'No')",type:b["b"].TT_MULTIPLE_YES_NO,validation:function(t){return e.validateSeries([function(){return f["a"].required(t)},function(){return f["a"].anyEmpty(t)}])},computedValue:function(t){return{tag:"consultation",obs:t.map(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=d["a"],t.t1=d["a"],t.t2={},t.next=5,e.consultation.buildValueCoded("Malawi ART side effects",n.label);case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.next=10,e.consultation.buildValueCoded(n.label,n.value);case 10:return t.t6=t.sent,t.t7={child:t.t6},t.abrupt("return",(0,t.t0)(t.t4,t.t5,t.t7));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},beforeNext:function(t){return e.buildSideEffectObs(t,"malawiSideEffectReasonObs")},options:function(t,n){return e.getContraindications(n)}},{id:"other_side_effects",helpText:"Other Contraindications / Side effects (select either 'Yes' or 'No')",type:b["b"].TT_MULTIPLE_YES_NO,onValue:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkIfWeightLossIsControlled(n);case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),condition:function(t){return e.showOtherSideEffects(t)},onConditionFalse:function(){return e.otherSideEffectReasonObs=[]},validation:function(t){return e.validateSeries([function(){return f["a"].required(t)},function(){return f["a"].anyEmpty(t)}])},computedValue:function(t){return{tag:"consultation",obs:t.filter((function(e){return"Other (Specify)"!=e.label})).map(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=d["a"],t.t1=d["a"],t.t2={},t.next=5,e.consultation.buildValueCoded("Other side effect",n.label);case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.next=10,e.consultation.buildValueCoded(n.label,n.value);case 10:return t.t6=t.sent,t.t7={child:t.t6},t.abrupt("return",(0,t.t0)(t.t4,t.t5,t.t7));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},beforeNext:function(t){return e.buildSideEffectObs(t,"otherSideEffectReasonObs")},options:function(t,n){return e.getOtherContraindications(n)}},{id:"other_side_effect_specify",helpText:"Other Contraindications / Side effects (specify)",type:b["b"].TT_NOTE,computedValue:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=d["a"],t.t1=d["a"],t.t2={},t.next=5,e.consultation.buildValueCoded("Other side effect","Other (Specify)");case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.next=10,e.consultation.buildValueText("Other (Specify)",n.value);case 10:return t.t6=t.sent,t.t7={child:t.t6},t.t8=(0,t.t0)(t.t4,t.t5,t.t7),t.abrupt("return",{tag:"consultation",obs:t.t8});case 14:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),condition:function(t){return e.inArray(t.other_side_effects,(function(e){return"Other (Specify)"===e.label&&"Yes"===e.value}))},validation:function(e){return f["a"].required(e)}},{id:"on_tb_treatment",helpText:"On TB Treatment?",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},computedValue:function(t){e.TBSuspected="Yes"===t.value;var n=[e.consultation.buildValueCoded("TB treatment",t.value)];return e.TBSuspected&&n.push(e.consultation.buildValueCoded("TB Status","Confirmed TB on treatment")),{tag:"consultation",obs:n}},options:function(){return e.yesNoOptions()}},{id:"tb_side_effects",helpText:"TB Associated symptoms",type:b["b"].TT_MULTIPLE_YES_NO,onValue:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.checkIfWeightLossIsControlled(n);case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),validation:function(t){return e.validateSeries([function(){return f["a"].required(t)},function(){return f["a"].anyEmpty(t)}])},condition:function(e){return e.on_tb_treatment.value.match(/no/i)},options:function(t,n){return e.getTBSymptoms(n)},computedValue:function(t){return e.presentedTBSymptoms=e.inArray(t,(function(e){return"Yes"===e.value})),{tag:"consultation",obs:t.map(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=d["a"],t.t1=d["a"],t.t2={},t.next=5,e.consultation.buildValueCoded("Routine TB Screening",n.label);case 5:return t.t3=t.sent,t.t4=(0,t.t1)(t.t2,t.t3),t.t5={},t.next=10,e.consultation.buildValueCoded(n.label,n.value);case 10:return t.t6=t.sent,t.t7={child:t.t6},t.abrupt("return",(0,t.t0)(t.t4,t.t5,t.t7));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},{id:"tb_status",helpText:"TB Status",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},condition:function(t){return e.hasTBSymptoms(t)},onConditionFalse:function(){return e.TBSuspected=!1},defaultValue:function(){return"TB Suspected"},computedValue:function(t){return e.TBSuspected="TB Suspected"===t.value,{tag:"consultation",obs:e.consultation.buildValueCoded("TB Status",t.value)}},beforeNext:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("TB Suspected"!==n.value){t.next=5;break}return t.next=3,Object(_["a"])("Lab Order","The patient is a TB suspect. Do you want to take lab orders?","",[{name:"Order now",slot:"start",color:"success"},{name:"NOT now",slot:"end",color:"danger"}]);case 3:r=t.sent,"Order now"===r&&e.labOrderFieldContext.launchOrderSelection(["TB Microscopic Exam","GeneXpert","Culture & Sensitivity","TB Tests"]);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}(),options:function(){return e.mapStrToOptions(["TB NOT suspected","TB Suspected","Confirmed TB Not on treatment"])}},{id:"routine_tb_therapy",helpText:"TB preventive therapy (TPT) history",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},condition:function(){return!e.hasTbHistoryObs},computedValue:function(t){return{tag:"consultation",obs:e.consultation.buildValueText("Previous TB treatment history",t.value)}},options:function(){return e.mapStrToOptions(["Currently on IPT","Currently on 3HP","Complete course of 3HP in the past (3 months RFP+INH)","Complete course of IPT in the past (min. 6 months of INH)","Aborted course of 3HP or IPT in the past","Never taken IPT or 3HP"])}},{id:"allergic_to_sulphur",helpText:"Allergic to Cotrimoxazole",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},computedValue:function(t){return e.allergicToSulphur=t.value.match(/unknown/i)?null:!!t.value.match(/yes/i),{tag:"consultation",obs:function(){return e.consultation.buildValueCoded("Allergic to sulphur",null===e.allergicToSulphur?t.value:e.allergicToSulphur?"Yes":"No")}}},options:function(){return e.yesNoUnknownOptions()}}],Object(p["a"])(this.getAdherenceFields(this.askAdherence)),[{id:"refer_to_clinician",helpText:"Refer to clinician",type:b["b"].TT_SELECT,condition:function(){return fe["a"].isNurse()},validation:function(e){return f["a"].required(e)},computedValue:function(t){return{tag:"consultation",obs:e.consultation.buildValueCoded("Refer to clinician",t.value)}},options:function(){return e.yesNoOptions()}},{id:"medication_to_prescribe",proxyID:"prescription",helpText:"Medication to prescribe during this visit",type:b["b"].TT_MULTIPLE_SELECT,condition:function(e){return!e.refer_to_clinician||"".concat(e.refer_to_clinician.value).match(/no/i)},validation:function(e){return f["a"].required(e)},computedValue:function(t){return{tag:"consultation",obs:e.buildMedicationOrders(t)}},onValueUpdate:function(t,n,r){var a=e.disablePrescriptions(t,n);return e.on3HPValueUpdate(a,n,r)},options:function(t,n,r,a){return e.medicationOrderOptions(t,a)},config:{footerBtns:[{name:"Update allergic to CPT",onClickComponentEvents:{refreshOptions:function(t,n,r){return e.allergicToSulphur="Allergic"===t.btnOutput,e.medicationOrderOptions(r,n)}},onClick:function(){return Object(_["a"])("Allergic to Cotrimoxazole update","Is the patient allergic to cotrimoxazole.","",[{name:"Allergic",slot:"start",color:"success"},{name:"NOT Allergic",slot:"end"}])}}]}}])}}});const Xe=T()(Je,[["render",de]]);var Qe=Xe;function Ze(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{skipSummary:!0,cancelDestinationPath:e.cancelDestination,fields:e.fields},null,8,["cancelDestinationPath","fields"])}var et=Object(i["defineComponent"])({mixins:[j["a"]],data:function(){return{dispensation:{}}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=9;break}return t.dispensation=new Ke["a"](t.patientID,t.providerID),n.next=4,t.dispensation.loadDrugManagementEnabled();case 4:return n.next=6,t.dispensation.loadCurrentDrugOrder();case 6:return n.next=8,t.dispensation.loadDrugHistory();case 8:t.fields=t.getFields();case 9:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{saveDispensations:function(e){var t=this.buildDispensations(e);return this.dispensation.saveDispensations(t)},buildDispensations:function(e){var t,n=this;if(!Object(O["isEmpty"])(null===(t=e.other)||void 0===t?void 0:t.dispenses)){var a=[];return e.other.dispenses.forEach((function(t){var o=Object(r["a"])(t,2),i=o[0],c=o[1];a=[].concat(Object(p["a"])(a),Object(p["a"])(n.dispensation.buildDispensations(e.other.order_id,i,c)))})),a}return this.dispensation.buildDispensations(e.other.order_id,parseInt(e.value.toString()),1)},buildMedicationHistory:function(){return this.dispensation.getDrugHistory().sort((function(e,t){var n=new Date(e.order.start_date),r=new Date(t.order.start_date);return r-n})).map((function(e){return{medication:e.drug.name,date:g["b"].toStandardHisDisplayFormat(e.order.start_date),amount:e.quantity}}))},buildOrderOptions:function(){var e=this;return this.dispensation.getCurrentOrder().map((function(t){return{label:t.drug.name,value:t.quantity||0,other:{order:t,drug_id:t.drug.drug_id,order_id:t.order.order_id,available_stock:t.available_stock||"-",amount_needed:e.calculateCompletePack(t),pack_sizes:e.getPackSizesRows(t.drug.drug_id,t.available_stock||0)}}}))},getPackSizesRows:function(e,t){var n=this.dispensation.getDrugPackSizes(e);return n.map((function(e){var n=t>0?Math.floor(t/e):"-";return[e,n,0,0]}))},calculateCompletePack:function(e){var t=parseFloat(e.amount_needed)-(e.quantity||0);return t<=0?0:this.dispensation.calcCompletePack(e,t)},isDoneDispensing:function(e){return e.map((function(e){return 0!=e.value})).every(Boolean)},isValidDispensation:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=!0,r=parseInt(e.value.toString()),a=e.other["amount_needed"],o=r/a*100,!(o>110)){t.next=8;break}return t.next=7,Object(h["a"])("Are you sure you want to dispense over 110% of the prescribed pill count?");case 7:n=t.sent;case 8:if(!(o<100)){t.next=12;break}return t.next=11,Object(h["a"])("Are you sure you want to dispense less than 100% of the prescribe amount?");case 11:n=t.sent;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t)})))()},getFields:function(){var e=this;return[{id:"dispenses",helpText:"Dispensation",type:b["b"].TT_DISPENSATION_INPUT,onValueUpdate:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1==n.value||!e.isDoneDispensing(r)){t.next=2;break}return t.abrupt("return",e.$router.push({name:"appointment"}));case 2:return n.other["amount_needed"]=n.other["amount_needed"]-(parseInt(n.value.toString())||0),n.other["amount_needed"]<0&&(n.other["amount_needed"]=0),t.next=6,e.dispensation.loadCurrentDrugOrder();case 6:return t.abrupt("return",e.buildOrderOptions());case 7:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}(),onValue:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r){var a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(-1!==n.value){t.next=5;break}return t.next=3,e.dispensation.voidOrder(n.other.order_id);case 3:return a=t.sent,t.abrupt("return",!a);case 5:if(r){t.next=11;break}return t.next=8,e.isValidDispensation(n);case 8:if(o=t.sent,o){t.next=11;break}return t.abrupt("return",!1);case 11:return t.next=13,e.saveDispensations(n);case 13:if(i=t.sent,!i){t.next=16;break}return t.abrupt("return",!0);case 16:return Object(h["e"])("Unable to save dispensation"),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}(),config:{medicationHistory:this.buildMedicationHistory(),toolbarInfo:[{label:"Name",value:this.patient.getFullName()},{label:"Gender",value:this.patient.getGender()},{label:"Date Of Birth",value:g["b"].toStandardHisDisplayFormat(this.patient.getBirthdate())}],hiddenFooterBtns:["Clear","Finish"]},options:function(){return e.buildOrderOptions()}}]}}});const tt=T()(et,[["render",Ze]]);var nt=tt;function rt(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{fields:e.fields,activeField:e.activeField,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","activeField","onFinishAction","cancelDestinationPath"])}n("5319");var at=n("66c5"),ot=Object(i["defineComponent"])({mixins:[j["a"]],components:{HisStandardForm:J["a"]},data:function(){return{reception:{},activeField:"",hasARVNumber:!0,hasGuardian:!1,suggestedNumber:"",patientType:{}}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.patient.getGuardian();case 4:return r=n.sent,t.hasGuardian=!Object(O["isEmpty"])(r),t.reception=new at["a"](t.patientID,t.providerID),n.next=9,t.reception.loadSitePrefix();case 9:if(a=t.patient.getPatientIdentifier(4),""!==a){n.next=16;break}return t.hasARVNumber=!1,n.next=14,x["a"].getNextSuggestedARVNumber();case 14:o=n.sent,t.suggestedNumber=o.arv_number.replace(/^\D+|\s/g,"");case 16:return t.patientType=new $e["a"](t.patientID,t.providerID),n.next=19,t.patientType.loadPatientType();case 19:t.fields=t.getFields();case 20:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onFinish:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,o,i,c,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.reception.createEncounter();case 2:if(a=r.sent,a){r.next=5;break}return r.abrupt("return",Object(h["e"])("Unable to create encounter"));case 5:return r.next=7,n.resolveObs(t,"obs");case 7:return o=r.sent,r.next=10,n.reception.saveObservationList(o);case 10:if(i=r.sent,i){r.next=13;break}return r.abrupt("return",Object(h["e"])("Unable to create Obs"));case 13:if(!e.capture_arv||"Yes"!==e.capture_arv.value){r.next=19;break}return r.next=16,n.reception.createArvNumber(t.arv_number);case 16:if(c=r.sent,c){r.next=19;break}return r.abrupt("return",Object(h["e"])("Unable to save Arv number"));case 19:Object(h["d"])("Encounter created"),s=e.who_is_present.filter((function(e){return"Yes"===e.value&&"Guardian Present?"===e.label})),n.hasGuardian||Object(O["isEmpty"])(s)?n.nextTask():n.$router.push("/guardian/registration/".concat(n.patient.getID()));case 22:case"end":return r.stop()}}),r)})))()},getFields:function(){var e=this;return[{id:"who_is_present",helpText:"HIV reception",type:b["b"].TT_MULTIPLE_YES_NO,validation:function(e){return f["a"].required(e)||f["a"].neitherOr(e)||f["a"].anyEmpty(e)},computedValue:function(t){return{tag:"obs",obs:t.map((function(t){var n=t.other,r=t.value;return e.reception.buildValueCoded(n.concept,r)}))}},onValueUpdate:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",t.map((function(e){return n.label!=e.label&&"No"===n.value&&(e.value="Yes"),e})));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),options:function(t){return t.who_is_present?t.who_is_present:[{label:"Patient present?",value:"",other:{concept:"Patient Present",property:"patient_present",values:e.yesNoOptions()}},{label:"Guardian present?",value:"",other:{concept:"Guardian Present",property:"guardian_present",values:e.yesNoOptions()}}]}},{id:"capture_arv",helpText:"Capture ARV Number?",type:b["b"].TT_SELECT,requireNext:!0,condition:function(){return!e.hasARVNumber&&"New patient"===e.patientType.getType()},validation:function(e){return f["a"].required(e)},options:function(){return e.yesNoOptions()}},{id:"arv_number",helpText:"ART number",type:b["b"].TT_TEXT,computedValue:function(e){var t=e.value;return t},validation:function(e){return f["a"].required(e)},condition:function(t){return!e.hasARVNumber&&"Yes"===t.capture_arv.value},defaultValue:function(){return e.suggestedNumber},config:{prependValue:function(){var e=Z["a"].getActiveApp();if(e&&e.programPatientIdentifiers){var t=e.programPatientIdentifiers["ARV Number"];return t.prefix()}return""}}}]}}});const it=T()(ot,[["render",rt]]);var ct=it;function st(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{skipSummary:!0,cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}var ut=Object(i["defineComponent"])({mixins:[M],watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=4;break}return n.next=3,t.initStaging(t.patient);case 3:t.fields=[].concat(Object(p["a"])(t.getStagingFields()),[t.getStagingSummaryField()]);case 4:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onSubmit:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.submitStaging(t);case 2:Object(h["d"])("Staging information has been saved"),n.nextTask();case 4:case"end":return e.stop()}}),e)})))()}}});const lt=T()(ut,[["render",st]]);var dt=lt,pt=n("ab49");function bt(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var ft=n("80b5"),mt=Object(i["defineComponent"])({mixins:[j["a"]],components:{HisStandardForm:J["a"]},data:function(){return{patientType:{}}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return t.patientType=new $e["a"](t.patientID,t.providerID),n.next=4,t.patientType.loadPatientType();case 4:t.fields=t.getFields();case 5:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onFinish:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.patientType.createEncounter();case 2:if(o=n.sent,o){n.next=5;break}return n.abrupt("return",Object(h["e"])("Unable to create encounter"));case 5:return t.patientType.setLocationName(null===e||void 0===e||null===(r=e.location)||void 0===r?void 0:r.label),t.patientType.setPatientType(null===e||void 0===e||null===(a=e.patient_type)||void 0===a?void 0:a.value),n.next=9,t.patientType.save();case 9:Object(h["d"])("Observations and encounter created!"),t.nextTask();case 11:case"end":return n.stop()}}),n)})))()},facilityLocationField:function(){var e=ft["a"].getFacilityLocationField();return e.condition=function(e){return["Drug Refill","External consultation"].includes(e.patient_type.value)},e},getFields:function(){var e=this;return[{id:"patient_type",helpText:"Current type: ".concat(this.patientType.getType()),type:b["b"].TT_SELECT,validation:function(t){return f["a"].required(t)||f["a"].notTheSame(t.value,e.patientType.getType())},options:function(){return $e["a"].getPatientTypes()}},this.facilityLocationField()]}}});const ht=T()(mt,[["render",bt]]);var gt=ht;function vt(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var Ot=function(e){Object(De["a"])(n,e);var t=Object(Te["a"])(n);function n(e,r){return Object(Ce["a"])(this,n),t.call(this,e,156,r)}return Object(Ve["a"])(n,[{key:"getAssessmentValues",value:function(){return Ie["a"].getConceptsByCategory("fast_track")}}]),n}(Ie["a"]),jt=Object(i["defineComponent"])({mixins:[j["a"]],components:{HisStandardForm:J["a"]},data:function(){return{fields:[],fastTrack:{},options:[],values:[],gender:null}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e&&t.init(t.patient);case 1:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onFinish:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.fastTrack.createEncounter();case 2:if(r=n.sent,!r){n.next=16;break}return n.next=6,t.buildObs(e);case 6:return a=n.sent,n.next=9,t.fastTrack.saveObservationList(a);case 9:if(o=n.sent,o){n.next=12;break}return n.abrupt("return",Object(h["e"])("Unable to save patient observations"));case 12:Object(h["d"])("Observations and encounter created!"),t.nextTask(),n.next=17;break;case 16:return n.abrupt("return",Object(h["e"])("Unable to create fast track encounter"));case 17:case"end":return n.stop()}}),n)})))()},init:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.gender=e.getGender(),t.fastTrack=new Ot(e.getID(),t.providerID),n.next=4,t.getYesNo();case 4:return t.values=n.sent,n.next=7,t.getOptions();case 7:t.options=n.sent,t.fields=t.getFields();case 9:case"end":return n.stop()}}),n)})))()},buildObs:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=[],n.t0=r,n.next=4,t.fastTrack.buildValueCoded("Assess for fast track",e.ft_assessment.value);case 4:if(n.t1=n.sent,n.t0.push.call(n.t0,n.t1),!e.ft_questions){n.next=14;break}return n.next=9,e.ft_questions.forEach(function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=r,e.next=3,t.fastTrack.buildValueCoded(n.label,n.value);case 3:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:return n.t2=r,n.next=12,t.fastTrack.buildValueCoded("Fast track",e.book_client.value);case 12:n.t3=n.sent,n.t2.push.call(n.t2,n.t3);case 14:return n.abrupt("return",r);case 15:case"end":return n.stop()}}),n)})))()},getOptions:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.getYesNo(),t.next=3,e.fastTrack.getAssessmentValues("fast_track").map((function(e){return{label:e.name,value:"",other:{values:n}}}));case 3:if(r=t.sent,"M"!==e.gender){t.next=6;break}return t.abrupt("return",r.filter((function(e){return!e.label.match(/Pregnant/i)})));case 6:return t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()},getYesNo:function(){return[{label:"yes",value:"Yes"},{label:"no",value:"No"}]},getFields:function(){var e=this;return[{id:"ft_assessment",helpText:"Assess client for FT",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return e.getYesNo()}},{id:"ft_questions",helpText:"Assess client for FT",type:b["b"].TT_MULTIPLE_YES_NO,condition:function(e){return"Yes"===e.ft_assessment.value},validation:function(e){return f["a"].anyEmpty(e)},options:function(){return e.options}},{id:"book_client",helpText:"Select type of visit to book",type:b["b"].TT_SELECT,condition:function(e){return"Yes"===e.ft_assessment.value},validation:function(e){return f["a"].required(e)},options:function(){return[{label:"Fast track",value:"No"},{label:"Normal visit",value:"No"}]}}]}}});const _t=T()(jt,[["render",vt]]);var wt=_t,kt={key:0,style:{color:"green"}},yt={slot:"end"},xt=Object(i["createTextVNode"])("add riskfactors"),Nt=Object(i["createVNode"])("h1",{style:{"text-align":"center"}},"Actions",-1),Ct=Object(i["createTextVNode"])(" cancel "),Vt=Object(i["createTextVNode"])(" Refer to clinician "),Dt=Object(i["createTextVNode"])(" Hypertension Diagnosis "),Tt=Object(i["createTextVNode"])(" Enroll in HTN "),It=Object(i["createTextVNode"])(" Finish ");function Rt(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-title"),s=Object(i["resolveComponent"])("ion-button"),u=Object(i["resolveComponent"])("ion-toolbar"),l=Object(i["resolveComponent"])("ion-header"),d=Object(i["resolveComponent"])("data-table"),p=Object(i["resolveComponent"])("ion-content"),b=Object(i["resolveComponent"])("ion-label"),f=Object(i["resolveComponent"])("ion-radio"),m=Object(i["resolveComponent"])("ion-item"),h=Object(i["resolveComponent"])("ion-col"),g=Object(i["resolveComponent"])("ion-row"),v=Object(i["resolveComponent"])("ion-grid"),O=Object(i["resolveComponent"])("ion-radio-group"),j=Object(i["resolveComponent"])("ion-footer"),_=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(_,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])("span",null,"BP management screening on "+Object(i["toDisplayString"])(e.date),1),e.patientOnBPDrugs?(Object(i["openBlock"])(),Object(i["createBlock"])("small",kt," (Patient already on BP drugs)")):Object(i["createCommentVNode"])("",!0)]})),_:1}),Object(i["createVNode"])("span",yt,[e.totalRiskFactors>0?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:0,color:"danger",onClick:e.showRiskFactors},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])("View/Edit risk factors "+Object(i["toDisplayString"])(e.totalRiskFactors),1)]})),_:1},8,["onClick"])):Object(i["createCommentVNode"])("",!0),0===e.totalRiskFactors?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:1,onClick:e.showRiskFactors},{default:Object(i["withCtx"])((function(){return[xt]})),_:1},8,["onClick"])):Object(i["createCommentVNode"])("",!0)])]})),_:1})]})),_:1}),Object(i["createVNode"])(p,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,{config:{showIndex:!1},columns:e.columns,rows:e.rows},null,8,["columns","rows"])]})),_:1}),Object(i["createVNode"])(j,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Nt,Object(i["createVNode"])(O,{modelValue:e.action,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.action=t})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(v,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(g,null,{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.items,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(h,{size:"4",key:t},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(m,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(b,{style:{"font-size":"1.0rem","font-weight":"bold"}},{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.label),1)]})),_:2},1024),Object(i["createVNode"])(f,{value:e},null,8,["value"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(i["createVNode"])(u,{color:"dark"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{size:"large",color:"danger",slot:"start",onClick:e.gotoPatientDashboard},{default:Object(i["withCtx"])((function(){return[Ct]})),_:1},8,["onClick"]),e.showClinicianButton?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:0,size:"large",color:"danger",slot:"start",onClick:e.referPatient},{default:Object(i["withCtx"])((function(){return[Vt]})),_:1},8,["onClick"])):Object(i["createCommentVNode"])("",!0),e.patientHasHyperTensionObs?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:1,size:"large",slot:"end",onClick:e.goToDiagnosis},{default:Object(i["withCtx"])((function(){return[Dt]})),_:1},8,["onClick"])),e.patientHasHyperTensionObs&&!e.isEnrolledInHTN?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:2,size:"large",slot:"end",onClick:e.enrollInHTN},{default:Object(i["withCtx"])((function(){return[Tt]})),_:1},8,["onClick"])):Object(i["createCommentVNode"])("",!0),e.patientHasHyperTensionObs?(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:3,size:"large",color:"success",slot:"end",onClick:e.onFinish},{default:Object(i["withCtx"])((function(){return[It]})),_:1},8,["onClick"])):Object(i["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})}var St=n("77fd"),Pt=n("7957"),At=n("1c74"),Et=n("74f4"),Bt=n("80e3"),Ft={background:"#444444"},Lt=Object(i["defineComponent"])({mixins:[j["a"]],components:{DataTable:Bt["a"],IonTitle:ge["U"],IonToolbar:ge["V"],IonHeader:ge["q"],IonContent:ge["n"],IonGrid:ge["p"],IonRow:ge["J"],IonButton:ge["d"],IonRadioGroup:ge["H"],IonRadio:ge["G"],IonCol:ge["m"],IonFooter:ge["o"],IonPage:ge["F"],IonItem:ge["w"],IonLabel:ge["x"]},data:function(){return{htn:{},hasARVNumber:!0,suggestedNumber:"",columns:[[N["a"].thTxt("Date",{style:Ft}),N["a"].thTxt("Systolic",{style:Ft}),N["a"].thTxt("Diastolic",{style:Ft}),N["a"].thTxt("BP Drugs",{style:Ft}),N["a"].thTxt("Action / Note",{style:Ft})]],bpGradeColorMap:{"N/A":"#ffffff",normal:"#ffffff","grade 1":"#FFC3CE","grade 2":"#F20056","grade 3":"#FF3333"},rows:[],riskFactors:[],action:null,trail:[],date:null,patientOnBPDrugs:!1,patientFirstVisit:!1,normatensive:!1,patientHasHyperTensionObs:!1,currentDrugs:[],items:[],isEnrolledInHTN:!1,isAliveOnHTN:!1,HTNProgramID:20,aliveState:160,refer:!1}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,ge["ab"].create({message:"Please wait...",backdropDismiss:!1});case 4:return r=n.sent,n.next=7,r.present();case 7:return t.htn=new y["a"](t.patientID,t.providerID),n.next=10,t.htn.getBPTrail();case 10:return t.trail=n.sent,t.rows=t.formatBpTrailRows(t.trail),t.normatensive=y["a"].isBpNormotensive(t.trail),n.next=15,t.getRiskFactors();case 15:return t.riskFactors=n.sent,t.date=g["b"].toStandardHisDisplayFormat(At["e"].getSessionDate()),n.next=19,t.isTransfered();case 19:return n.next=21,t.hasHyperTenstion();case 21:return n.next=23,t.getTreatmentStatus();case 23:return n.next=25,t.getProgramStatus();case 25:if(ge["ab"].dismiss(),!t.patientFirstVisit||!t.patientOnBPDrugs){n.next=29;break}return n.next=29,t.alertTransferIn();case 29:t.getItems();case 30:case"end":return n.stop()}}),n)})))()},immediate:!0}},computed:{totalRiskFactors:function(){return this.riskFactors.filter((function(e){return"Yes"===e.value})).length},showClinicianButton:function(){return!(fe["a"].isClinician()&&fe["a"].isDoctor())}},methods:{onFinish:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.action&&!e.refer){t.next=30;break}return t.next=3,e.htn.createEncounter();case 3:if(n=t.sent,n){t.next=6;break}return t.abrupt("return",Object(h["e"])("Unable to create encounter"));case 6:if(!e.refer){t.next=15;break}return t.next=9,e.htn.saveValueCodedObs("Refer patient to clinician","Yes");case 9:if(r=t.sent,r){t.next=12;break}return t.abrupt("return",Object(h["e"])("Unable to create Obs"));case 12:e.gotoPatientDashboard(),t.next=28;break;case 15:return t.next=17,e.htn.saveValueTextObs("Plan",e.action.label);case 17:if(i=t.sent,i){t.next=20;break}return t.abrupt("return",Object(h["e"])("Unable to create Obs"));case 20:return c={state:e.action.value},t.next=23,e.htn.enrollPatient(c);case 23:if("function"!==typeof(null===(a=e.action)||void 0===a||null===(o=a.other)||void 0===o?void 0:o.action)){t.next=27;break}return t.abrupt("return",e.action.other.action());case 27:e.nextTask();case 28:t.next=31;break;case 30:Object(h["e"])("Please select an action");case 31:case"end":return t.stop()}}),t)})))()},referPatient:function(){this.refer=!0,this.onFinish()},goToDiagnosis:function(){return this.$router.push({path:"/art/encounters/hypertension_diagnosis/".concat(this.patientID)})},hasHyperTenstion:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pt["a"].getFirstValueCoded(e.patientID,"Patient has hypertension");case 2:n=t.sent,e.patientHasHyperTensionObs=!!"".concat(n).match(/yes|no/i);case 4:case"end":return t.stop()}}),t)})))()},isTransfered:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pt["a"].getFirstValueCoded(e.patientID,"Transferred");case 2:n=t.sent,e.patientFirstVisit=!n;case 4:case"end":return t.stop()}}),t)})))()},getTreatmentStatus:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pt["a"].getFirstValueText(e.patientID,"Treatment status");case 2:n=t.sent,e.patientOnBPDrugs=!(!n||!n.match(/BP Drugs started/i));case 4:case"end":return t.stop()}}),t)})))()},getProgramStatus:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x["a"].getPatientPrograms(e.patientID);case 2:if(n=t.sent,e.isEnrolledInHTN=n.filter((function(e){return"HYPERTENSION PROGRAM"===e.program.name})).length>0,!e.isEnrolledInHTN){t.next=7;break}return t.next=7,e.programState();case 7:case"end":return t.stop()}}),t)})))()},programState:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,x["a"].getPatientStates(e.patientID,e.HTNProgramID);case 2:n=t.sent,e.isAliveOnHTN=n.filter((function(e){return"Alive"===e.name})).length>0;case 4:case"end":return t.stop()}}),t)})))()},getRiskFactors:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=he["a"].getConceptsByCategory("risk factors"),r=n.map(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pt["a"].getFirstValueCoded(e.patientID,n.name);case 2:return r=t.sent,t.abrupt("return",{concept:n.name,value:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",Promise.all(r));case 3:case"end":return t.stop()}}),t)})))()},formatBpTrailRows:function(e){var t=this;return Object.keys(e).map((function(n){var r=g["b"].toStandardHisDisplayFormat(n);t.currentDrugs=t.currentDrugs.concat(e[n]["drugs"]);var a=function(){var r=y["a"].getBpGrade(parseInt(e[n].sbp),parseInt(e[n].dbp));return t.bpGradeColorMap[r]},o={background:a()};return[N["a"].tdDate(r,{style:o}),N["a"].td(e[n].sbp,{style:o}),N["a"].td(e[n].dbp,{style:o}),N["a"].td(e[n]["drugs"].join(", "),{style:o}),N["a"].td(e[n].note,{style:o})]}))},showRiskFactors:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ge["cb"].create({component:St["a"],backdropDismiss:!1,cssClass:"large-modal",componentProps:{factors:e.riskFactors}});case 2:return n=t.sent,n.present(),t.next=6,n.onDidDismiss();case 6:r=t.sent,a=r.data,Object(O["isEmpty"])(a)||(e.riskFactors=a.map((function(e){var t=!0===e.isChecked?"Yes":"No";return{concept:e.concept,value:t}})));case 9:case"end":return t.stop()}}),t)})))()},alertTransferIn:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(_["a"])("Transfer in","Does the patient want to transfer in for HTN management?","",[{name:"Yes",slot:"end",color:"success"},{name:"No",slot:"start",color:"danger"}]);case 2:if(n=t.sent,"Yes"!==n){t.next=13;break}return t.next=6,e.enrollInHTN();case 6:return t.next=8,e.setHtnTransferred("Yes");case 8:return e.patientFirstVisit=!1,t.next=11,e.getItems();case 11:t.next=16;break;case 13:return t.next=15,e.setHtnTransferred("No");case 15:e.nextTask();case 16:case"end":return t.stop()}}),t)})))()},enrollInHTN:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new Et["a"](e.patientID),n.setProgramId(e.HTNProgramID),n.setStateDate(x["a"].getSessionDate()),n.setStateId(e.aliveState),t.next=7,n.enrollProgram();case 7:return t.next=9,n.updateState();case 9:e.isEnrolledInHTN=!0,Object(h["d"])("Patient is now enrolled in HTN"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error(t.t0),Object(h["e"])(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},setHtnTransferred:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=new U["a"](t.patientID,t.providerID),n.next=3,r.createEncounter();case 3:if(a=n.sent,a){n.next=8;break}Object(h["e"])("Unable to create patient transfer encounter"),n.next=12;break;case 8:return n.next=10,r.saveValueCodedObs("Transferred",e);case 10:o=n.sent,o||Object(h["e"])("Unable to create observation Transferred for patient");case 12:case"end":return n.stop()}}),n)})))()},getItems:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentDrugs.length>0?e.items=[{label:"Did not take prescribed drugs",value:"on treatment",other:{action:function(){return e.$router.push("/art/encounters/bp_adherence/".concat(e.patientID))}}},{label:"Continue drugs",value:"on treatment",other:{action:function(){return e.$router.push("/art/encounters/bp_adherence/".concat(e.patientID))}}},{label:"Review drugs",value:"on treatment",other:{action:function(){return e.$router.push("/art/encounters/bp_adherence/".concat(e.patientID,"?review=true"))}}}]:(e.items=[{label:"Lifestyle advice given",value:"Lifestyle changes only"},{label:"Not yet stable on ART",value:"Symptomatic but not in treatment"},{label:"Patient declining BP drugs ",value:"Symptomatic but not in treatment"}],e.normatensive&&e.items.push({label:"Return to annual screening",value:"Alive"}),e.items.push({label:"Start anti hypertensives",value:"On treatment",other:{action:function(){return e.$router.push("/art/encounters/bp_prescription/".concat(e.patientID))}}}));case 1:case"end":return t.stop()}}),t)})))()}}});const Mt=T()(Lt,[["render",Rt]]);var Ht=Mt;function Ut(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{fields:e.fields,onOnFinish:e.onFinish,skipSummary:!0,cancelDestinationPath:e.cancelDestination},null,8,["fields","onOnFinish","cancelDestinationPath"])}var qt=Object(i["defineComponent"])({mixins:[j["a"]],components:{HisStandardForm:J["a"]},data:function(){return{fields:[],fieldContext:{}}},watch:{ready:{handler:function(e){e&&(this.fields=this.getFields())}}},methods:{onFinish:function(){this.nextTask()},getFields:function(){var e=this;return[{id:"patient_lab_orders",helpText:"Lab orders",type:b["b"].TT_LAB_ORDERS,onload:function(t){e.fieldContext=t},options:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,me["a"].getOrdersIncludingGivenResultStatus(e.patientID);case 2:return n=t.sent,r=me["a"].formatLabs(n),t.abrupt("return",[{label:"Lab orders",value:"order trail",other:{values:r}}]);case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),config:{printOrder:function(t){return new Q["a"](e.patientID).printLabOrderLbl(t)},hiddenFooterBtns:["Clear"],footerBtns:[{name:"Order",size:"large",slot:"end",color:"primary",visible:!0,onClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Object(O["isEmpty"])(e.fieldContext)){t.next=3;break}return t.next=3,e.fieldContext.launchOrderSelection();case 3:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),visibleOnStateChange:function(e){return 0===e.index}}]}}]}}});const Gt=T()(qt,[["render",Ut]]);var zt=Gt;function Yt(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("information-header"),s=Object(i["resolveComponent"])("visit-information"),u=Object(i["resolveComponent"])("ion-content"),l=Object(i["resolveComponent"])("his-footer"),d=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(d,{style:{background:"#fff"}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{items:e.patientCardInfo,numberOfColumns:4,onAddGuardian:e.addGuardian,onUpdate:e.updateDemographics,onUpdateARVNumber:e.updateARVNumber},null,8,["items","onAddGuardian","onUpdate","onUpdateARVNumber"]),Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{getVisitDates:e.getPatientVisitDates,onOnPrint:e.printLabel,style:{"font-size":"11px"}},null,8,["getVisitDates","onOnPrint"])]})),_:1}),Object(i["createVNode"])(l,{btns:e.btns},null,8,["btns"])]})),_:1})}var Wt=n("23e6"),$t=Object(i["withScopeId"])("data-v-94355f20");Object(i["pushScopeId"])("data-v-94355f20");var Kt={style:{padding:".1rem"}},Jt={style:{width:"100%",display:"flex",justifyContent:"space-between",fontSize:"12px",margin:0,padding:0}};Object(i["popScopeId"])();var Xt=$t((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-item"),s=Object(i["resolveComponent"])("ion-list"),u=Object(i["resolveComponent"])("multi-column-view");return Object(i["openBlock"])(),Object(i["createBlock"])("div",Kt,[Object(i["createVNode"])(u,{items:e.items,numberOfColumns:e.numberOfColumns},{default:$t((function(t){var n=t.entries;return[Object(i["createVNode"])(s,null,{default:$t((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(n,(function(t){return Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:t.label,style:{padding:"0 !important",margin:"0 !important"}},{default:$t((function(){return[Object(i["createVNode"])("div",Jt,[Object(i["createVNode"])("span",null,Object(i["toDisplayString"])(t.label)+": ",1),t.other&&t.other.editable?(Object(i["openBlock"])(),Object(i["createBlock"])("span",{key:0,onClick:function(n){return e.onClick(t)}},[Object(i["createVNode"])("a",null,[Object(i["createVNode"])("b",null,Object(i["toDisplayString"])(t.value),1)])],8,["onClick"])):(Object(i["openBlock"])(),Object(i["createBlock"])("b",{key:1,innerHTML:t.value||"N/A"},null,8,["innerHTML"]))])]})),_:2},1024)})),128))]})),_:2},1024)]})),_:1},8,["items","numberOfColumns"])])})),Qt=n("92c1"),Zt=Object(i["defineComponent"])({name:"InformationHeader",components:{MultiColumnView:Qt["a"]},props:{icon:{required:!1},items:{type:Object,required:!0},numberOfColumns:{type:Number,default:2}},emits:["update","updateARVNumber","addGuardian"],setup:function(e,t){var n=t.emit,r=function(e){return"demographics"===e.other.category?n("update",e.other.attribute):"arv_number"===e.other.category?n("updateARVNumber"):n("addGuardian")};return{onClick:r}}});n("8945");const en=T()(Zt,[["render",Xt],["__scopeId","data-v-94355f20"]]);var tn=en,nn=Object(i["withScopeId"])("data-v-2d39ef92");Object(i["pushScopeId"])("data-v-2d39ef92");var rn={class:"report-content"};Object(i["popScopeId"])();var an=nn((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-table");return Object(i["openBlock"])(),Object(i["createBlock"])("div",rn,[Object(i["createVNode"])(c,{asyncRows:e.getRows,columns:e.columns,config:e.tableConfig},null,8,["asyncRows","columns","config"])])})),on=(n("fb6a"),Object(i["createTextVNode"])(" Close "));function cn(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-title"),s=Object(i["resolveComponent"])("ion-toolbar"),u=Object(i["resolveComponent"])("ion-header"),l=Object(i["resolveComponent"])("information-header"),d=Object(i["resolveComponent"])("ion-content"),p=Object(i["resolveComponent"])("ion-button"),b=Object(i["resolveComponent"])("ion-footer");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(l,{items:e.visitData},null,8,["items"])]})),_:1}),Object(i["createVNode"])(b,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{onClick:e.closeModal,slot:"end"},{default:Object(i["withCtx"])((function(){return[on]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var sn=Object(i["defineComponent"])({components:{InformationHeader:tn},props:{title:{type:String,required:!0},visitData:{type:Object,required:!0}},methods:{closeModal:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ge["cb"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()}}});const un=T()(sn,[["render",cn]]);var ln=un,dn={style:{fontSize:"11px !important",border:"1px solid #dddddd !important",textAlign:"left"}},pn={style:{fontSize:"12px !important",fontWeight:"bold",textAlign:"left",border:"1px solid #dddddd !important"}},bn=Object(i["defineComponent"])({name:"HisResultCard",components:{ReportTable:Bt["a"]},data:function(){return{tableConfig:{showIndex:!1,cssClasses:"table-bordered table-striped"},columns:[[N["a"].thTxt("VISIT DATE",pn),N["a"].thTxt("WEIGHT (Kg)",pn),N["a"].thTxt("REG",pn),N["a"].thTxt("VIRAL LOAD",pn),N["a"].thTxt("TB STATUS",pn),N["a"].thTxt("OUTCOME",pn),N["a"].thTxt("PILLS DISPENSED",pn),N["a"].thTxt("ACTIONS",pn)]]}},props:{icon:{required:!1},getVisitDates:{type:Function,required:!0}},methods:{printLabel:function(e){this.$emit("onPrint",e)},showMore:function(e){this.$emit("onDetails",e)},formatAdherence:function(e){if(Object(O["isArray"])(e)){var t=Object(p["a"])(e);if(Object(O["isArray"])(t)){var n="";return t.forEach((function(e){n+="".concat(e[0],": (").concat(e[1],"%), ")})),n}return t}return e},joinData:function(e){if(Object(O["isArray"])(e)){var t=Object(p["a"])(e);if(Object(O["isArray"])(t)){var n="";return t.forEach((function(e){n+="".concat(Object(O["isArray"])(e)?e.join(":"):e,", ")})),n}return t}return e},capitalize:function(e){try{return e.charAt(0).toUpperCase()+e.slice(1)}catch(t){return""}},camelCase:function(e){var t=e.split("_");return"".concat(this.capitalize(t[0])," ").concat(this.capitalize(t[1]))},getRows:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getVisitDates();case 2:return n=t.sent,t.abrupt("return",n.map((function(t){var n,r,o=((null===(n=t.data)||void 0===n||null===(r=n.drugs)||void 0===r?void 0:r.pills_given)||[]).map((function(e){return"".concat(e["short_name"]||e["name"]," <b>(").concat(e.quantity||"?",")</b>")})).join("<br/>"),i=[];return Object.keys(t.data).forEach((function(n){switch(n){case"drugs":break;case"pills_dispensed":i.push({label:"Pills dispensed",value:o});break;case"outcome_date":i.push({label:"Outcome Date",value:g["b"].toStandardHisDisplayFormat(t.data[n])});break;default:n.match(/height/i)&&(n+=" (cm)"),n.match(/weight/i)&&(n+=" (Kg)"),i.push({label:e.camelCase(n),value:e.joinData(t.data[n])})}})),[N["a"].tdBtn(t.label,(function(){return e.printLabel(t.value)}),dn,"secondary"),N["a"].td(t.data.weight,dn),N["a"].td(t.data.regimen,dn),N["a"].td(t.data["viral_load"],dn),N["a"].td(t.data["tb_status"],dn),N["a"].td(t.data.outcome.match(/Unk/i)?"Unknown":t.data.outcome,dn),N["a"].td(o,dn),N["a"].tdBtn("show more",Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ge["cb"].create({component:ln,backdropDismiss:!1,cssClass:"large-modal",componentProps:{title:t.label,visitData:i}});case 2:e.sent.present();case 3:case"end":return e.stop()}}),e)}))),dn,"secondary")]})));case 4:case"end":return t.stop()}}),t)})))()}}});n("0207");const fn=T()(bn,[["render",an],["__scopeId","data-v-2d39ef92"]]);var mn=fn,hn=n("0f25"),gn=n("ec2a"),vn=n("7def"),On=Object(i["defineComponent"])({components:{IonPage:ge["F"],IonContent:ge["n"],VisitInformation:mn,InformationHeader:tn,HisFooter:hn["a"]},data:function(){return{isBDE:!1,currentDate:"",sessionDate:"",nextTask:{},patientId:0,programID:0,patient:{},patientProgram:{},patientCardInfo:[],programCardInfo:[],encounters:[],medications:[],labOrders:[],visitDates:[],activeVisitDate:"",encountersCardItems:[],medicationCardItems:[],labOrderCardItems:[],alertCardItems:[],btns:[],guardians:""}},computed:{visitDatesTitle:function(){return"".concat(this.visitDates.length," Visits")}},watch:{$route:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.params,r){n.next=3;break}return n.abrupt("return");case 3:t.patientId=parseInt(r.patient_id),t.patientId&&t.init();case 5:case"end":return n.stop()}}),n)})))()},deep:!0,immediate:!0},activeVisitDate:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,gn["a"].getEncounters(t.patientId,{date:e});case 2:t.encounters=n.sent;case 3:case"end":return n.stop()}}),n)})))()}},methods:{init:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPatient(e.patientId);case 2:return e.patient=t.sent,t.next=5,e.getGuardian();case 5:return e.guardians=t.sent,t.next=8,e.getPatientCardInfo(e.patient);case 8:e.patientCardInfo=t.sent,e.btns.push(e.getFinishBtn());case 10:case"end":return t.stop()}}),t)})))()},getGuardian:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,vn["a"].getGuardianDetails(e.patientId);case 2:return n=t.sent,t.abrupt("return",n.map((function(e){return" ".concat(e.name," (").concat(e.relationshipType,")")})).join(" "));case 4:case"end":return t.stop()}}),t)})))()},updateDemographics:function(e){this.$router.push({path:"/patient/registration",query:{edit_person:this.patientId,person_attribute:e}})},addGuardian:function(){var e;this.$router.push({path:"/guardian/registration/".concat(this.patientId),query:{source:null===(e=this.$route.name)||void 0===e?void 0:e.toString()}})},updateARVNumber:function(){this.$router.push({name:"Edit ARV Number"})},getFinishBtn:function(){var e=this;return{name:"Finish",color:"success",size:"large",slot:"end",visible:!0,onClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(h["a"])("Are you sure you want to exit?");case 2:if(n=t.sent,!n){t.next=5;break}return t.abrupt("return",e.$router.push("/patient/dashboard/".concat(e.patientId)));case 5:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}},fetchPatient:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wt["a"].findByID(e);case 2:return n=t.sent,t.abrupt("return",n?new Wt["a"](n):{});case 4:case"end":return t.stop()}}),t)})))()},getProp:function(e,t){return t in e?e[t]():"-"},getPatientVisitDates:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Wt["a"].getPatientVisits(e.patientId,!0);case 2:return n=t.sent,r=n.map(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getExtras(n);case 2:return r=t.sent,t.abrupt("return",{label:g["b"].toStandardHisDisplayFormat(n),value:n,data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=6,Promise.all(r);case 6:return o=t.sent,t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)})))()},getExtras:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,x["a"].getCurrentProgramInformation(t.patientId,e);case 2:return r=n.sent,n.next=5,x["a"].getMastercardDrugInformation(t.patientId,e);case 5:return a=n.sent,n.abrupt("return",Object(d["a"])(Object(d["a"])({},r),{},{drugs:a}));case 7:case"end":return n.stop()}}),n)})))()},onActiveVisitDate:function(e){this.activeVisitDate=e.value},getPatientCardInfo:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=g["b"].toStandardHisDisplayFormat,n.next=3,Pt["a"].getAll(t.patientId,"Confirmatory HIV test date");case 3:return a=n.sent,a&&(a=r(a[0].value_datetime)),n.next=7,Pt["a"].getFirstValueText(t.patientId,"Confirmatory HIV test location");case 7:return o=n.sent,n.next=10,Pt["a"].getAll(t.patientId,"Date ART started");case 10:return i=n.sent,i=Object(O["isEmpty"])(i)?"N/A":r(i[0].value_datetime),n.next=14,Pt["a"].getFirstValueCoded(t.patientId,"Ever received ART");case 14:return c=n.sent,n.next=17,Pt["a"].getFirstValueCoded(t.patientId,"Agrees to followup");case 17:return s=n.sent,n.next=20,Pt["a"].getFirstValueCoded(t.patientId,"Reason for ART eligibility");case 20:return u=n.sent,n.t1={label:"ARV Number",value:t.patient.getArvNumber(),other:{editable:!0,category:"arv_number"}},n.t2={label:"National Patient ID",value:e.getNationalID()},n.t3={label:"Given Name",value:e.getGivenName(),other:{editable:!0,attribute:"given_name",category:"demographics"}},n.t4={label:"Family Name",value:e.getFamilyName(),other:{editable:!0,attribute:"family_name",category:"demographics"}},n.t5={label:"Age",value:e.getAge(),other:{editable:!0,attribute:"year_birth_date",category:"demographics"}},n.t6={label:"Sex",value:e.getGender(),other:{editable:!0,attribute:"gender",category:"demographics"}},n.t7={label:"Location",value:e.getCurrentVillage(),other:{editable:!0,attribute:"home_region",category:"demographics"}},n.t8={label:"Landmark",value:e.getAttribute(19)},n.t9={label:"Guardian",value:t.guardians?t.guardians:"add",other:{editable:!t.guardians,attribute:"",category:"guardian"}},n.next=32,e.getInitialWeight();case 32:return n.t10=n.sent,n.t11={label:"Init W(KG)",value:n.t10},n.next=36,e.getInitialHeight();case 36:return n.t12=n.sent,n.t13={label:"Init H(CM)",value:n.t12},n.next=40,e.getInitialBMI();case 40:return n.t14=n.sent,n.t15={label:"BMI(CM)",value:n.t14},n.t16={label:"TI",value:c},n.t17={label:"Agrees to follow up",value:s},n.t18={label:"Reason for starting ART",value:u},n.t19={label:"HIV test date",value:"".concat(a||"")},n.t20={label:"HIV test place",value:"".concat(o||"")},n.t21={label:"Date of starting first line ART",value:i},n.t0=[n.t1,n.t2,n.t3,n.t4,n.t5,n.t6,n.t7,n.t8,n.t9,n.t11,n.t13,n.t15,n.t16,n.t17,n.t18,n.t19,n.t20,n.t21],n.t22=p["a"],n.next=52,t.getTBStats();case 52:return n.t23=n.sent,n.t24=(0,n.t22)(n.t23),n.abrupt("return",n.t0.concat.call(n.t0,n.t24));case 55:case"end":return n.stop()}}),n)})))()},getTBStats:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Pt["a"].getAllValueCoded(e.patientId,"Who stages criteria present");case 2:return n=t.sent,r=function(e){return Array.isArray(n)?n.includes(e)?"Yes":"No":"N/A"},t.abrupt("return",[{label:"Pulmonary TB within the last 2 years",value:r("Tuberculosis (PTB or EPTB) within the last 2 years")},{label:"Extra pulmonary TB (EPTB)",value:r("Extrapulmonary tuberculosis (EPTB)")},{label:"Pulmonary TB (current)",value:r("Pulmonary tuberculosis (current)")},{label:"Kaposis sarcoma",value:r("Kaposis sarcoma")}]);case 5:case"end":return t.stop()}}),t)})))()},openModal:function(e,t,n){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=g["b"].toStandardHisDisplayFormat(r.activeVisitDate.toString()),a.next=3,ge["cb"].create({component:n,backdropDismiss:!1,cssClass:"custom-modal",componentProps:{items:e,title:"".concat(t,": ").concat(o),taskParams:{patient:r.patient.getObj(),program:r.patientProgram,visitDate:r.activeVisitDate,patientID:r.patientId}}});case 3:i=a.sent,i.present();case 5:case"end":return a.stop()}}),a)})))()},printLabel:function(e){new Q["a"](this.patientId).printVisitSummaryLbl(e)}}});const jn=T()(On,[["render",Yt]]);var _n=jn;function wn(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"PEPFAR",config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.canValidate,hasServerSideCaching:!0,headerInfoList:e.headerList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])]})),_:1})}var kn=n("44e3"),yn=n("4ba2"),xn=n("ad8d"),Nn=n("b31c"),Cn=n("2ef6"),Vn=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"PEPFAR Disaggregated Report",headerList:[],errors:[],columns:[[N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thNum("Tx new (new on ART)"),N["a"].thNum("TX curr (receiving ART)"),N["a"].thNum("TX curr (received IPT)"),N["a"].thNum("TX curr (screened for TB)")]],aggregations:[],mohCohort:{},maleFemaleAgeGroupData:{},canValidate:!1,sortIndexes:{},initiated:!1}},created:function(){this.fields=this.getDateDurationFields()},computed:{rows:function(){var e=this;return Object.keys(this.sortIndexes).sort((function(e,t){return parseInt(e)-parseInt(t)})).reduce((function(t,n){return t.concat(e.sortIndexes[n])}),[])}},watch:{canValidate:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.validateReport();case 3:case"end":return n.stop()}}),n)})))()}},methods:{onPeriod:function(e,t){var n=arguments,r=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=!(n.length>2&&void 0!==n[2])||n[2],r.errors=[],r.maleFemaleAgeGroupData={},r.sortIndexes={},r.aggregations=[],r.canValidate=!1,r.report=new Cn["a"],r.mohCohort=new Nn["a"],r.report.setQuarter("pepfar"),r.report.setStartDate(t.start_date),r.report.setEndDate(t.end_date),r.mohCohort.setStartDate(t.start_date),r.mohCohort.setEndDate(t.end_date),r.period=r.report.getDateIntervalPeriod(),r.report.setRebuildOutcome(!r.initiated||a),e.next=17,r.report.init();case 17:if(o=e.sent,o){e.next=20;break}return e.abrupt("return",Object(h["e"])("Unable to initialise report"));case 20:return e.next=22,r.setTableRows();case 22:r.setHeaderInfoList(),r.canValidate=!0,r.initiated=!0;case 25:case"end":return e.stop()}}),e)})))()},getTotals:function(e){return this.aggregations.filter((function(t){return e(t)})).reduce((function(e,t){return e.concat(t.data)}),[])},setHeaderInfoList:function(){var e=this,t=this.getTotals((function(e){return"txCurr"===e.col&&e.gender.match(/male|female/i)}));this.headerList=[{label:"Total Alive and on ART",value:t.length,other:{onclick:function(){return e.runTableDrill(t,"Total Alive and on ART")}}}]},setTableRows:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setFemaleRows(1);case 2:return t.next=4,e.setMaleRows(2);case 4:return t.next=6,e.setTotalMalesRow(3);case 6:return t.next=8,e.setFemalePregnantRows(4);case 8:return t.next=10,e.setFemaleBreastFeedingRows(6);case 10:return t.next=12,e.setFemaleNotPregnantRows(5);case 12:case"end":return t.stop()}}),t)})))()},getValue:function(e,t,n){var r=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:o=[],a.t0=e,a.next="tx_given_ipt"===a.t0?4:"tx_screened_for_tb"===a.t0?8:12;break;case 4:return a.next=6,r.report.getTxIpt();case 6:return o=a.sent,a.abrupt("break",14);case 8:return a.next=10,r.report.getTxCurrTB();case 10:return o=a.sent,a.abrupt("break",14);case 12:return o=t in n?n[t][e]:[],a.abrupt("break",14);case 14:return a.abrupt("return",o);case 15:case"end":return a.stop()}}),a)})))()},setTotalMalesRow:function(e){var t=this,n=function(e,n){var r=t.aggregations.filter((function(t){return t.col===e&&"Male"===t.gender})).reduce((function(e,t){return e.concat(t.data)}),[]);return t.drill(r,n)},r=[N["a"].td("All"),N["a"].td("Male"),n("txNew","Tx New (new on ART) Males"),n("txCurr","Total Curr (received ART) Males"),n("txGivenIpt","Total Curr (received IPT) Males"),n("txScreenTB","Total Curr (screened for TB) Males")];this.sortIndexes[e]=[r]},setFemaleNotPregnantRows:function(e){var t=this,n=function(e,n){return t.aggregations.filter((function(e){return e.gender.match(/fp|fbf/i)&&e.col===n})).reduce((function(e,t){return e.concat(t.data||[])}),[]).includes(e)},r=function(e,r){var a=t.aggregations.filter((function(t){return"Female"===t.gender&&t.col===e})).reduce((function(t,r){return t.concat(r.data.filter((function(t){return!n(t,e)})))}),[]);return t.drill(a,r)},a=[N["a"].td("All"),N["a"].td("FNP"),r("txNew","Tx New (new on ART) FNP"),r("txCurr","Tx Curr (received ART) FNP"),r("txGivenIpt","Tx Curr (received IPT) FNP"),r("txScreenTB","Tx Curr (screened for TB) FNP")];this.sortIndexes[e]=[a]},setFemaleRows:function(e){return this.report.setGender("female"),this.setRows(e,"F",xn["a"],"Female")},setMaleRows:function(e){return this.report.setGender("male"),this.setRows(e,"M",xn["a"],"Male")},setFemalePregnantRows:function(e){return this.report.setGender("pregnant"),this.setRows(e,"F",["All"],"FP","Pregnant")},setFemaleBreastFeedingRows:function(e){return this.report.setGender("breastfeeding"),this.setRows(e,"F",["All"],"FBf","Breastfeeding")},setRows:function(e,t,n,r){var o=arguments,i=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var c,s,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:c=o.length>4&&void 0!==o[4]?o[4]:"",s=regeneratorRuntime.mark((function a(o){var s,u,l,d,p,b,f,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(s=[],u=[],l=[],d=[],p=c||n[o],i.report.setAgeGroup(p),p in i.maleFemaleAgeGroupData){a.next=12;break}return a.next=9,i.report.getCohort();case 9:b=a.sent,i.report.setRebuildOutcome(!1),i.maleFemaleAgeGroupData[p]=Object(O["isEmpty"])(b)?{}:b[p];case 12:if(Object(O["isEmpty"])(i.maleFemaleAgeGroupData[p])){a.next=31;break}return f=function(e){return i.getValue(e,t,i.maleFemaleAgeGroupData[p])},m=function(e,t){return i.aggregations.push({gender:r,col:e,data:t})},a.next=17,f("tx_new");case 17:return s=a.sent,a.next=20,f("tx_curr");case 20:return u=a.sent,a.next=23,f("tx_given_ipt");case 23:return l=a.sent,a.next=26,f("tx_screened_for_tb");case 26:d=a.sent,m("txNew",s),m("txCurr",u),m("txGivenIpt",l),m("txScreenTB",d);case 31:i.sortIndexes[e]||(i.sortIndexes[e]=[]),i.sortIndexes[e].push([N["a"].td(n[o]),N["a"].td(r),i.drill(s,"Tx new (new on ART) | ".concat(p," | ").concat(r)),i.drill(u,"Tx curr (receiving ART) | ".concat(p," | ").concat(r)),i.drill(l,"TX curr (received IPT) | ".concat(p," | ").concat(r)),i.drill(d,"TX curr (screened for TB) | ".concat(p," | ").concat(r))]);case 33:case"end":return a.stop()}}),a)})),a.t0=regeneratorRuntime.keys(n);case 3:if((a.t1=a.t0()).done){a.next=8;break}return u=a.t1.value,a.delegateYield(s(u),"t2",6);case 6:a.next=3;break;case 8:case"end":return a.stop()}}),a)})))()},validateReport:function(){var e=this,t={initiated_on_art_first_time:{param:this.getTotals((function(e){return"txNew"===e.col&&e.gender.match(/male|female/i)})).length,check:function(e,t){return e!=t},error:function(e,t){return"\n                        MOH cohort initiated on ART first time <b>(".concat(e,")</b> is not matching Tx New <b>(").concat(t,")</b>\n                    ")}},initial_pregnant_females_all_ages:{param:this.getTotals((function(e){return"txNew"===e.col&&"FP"===e.gender})).length,check:function(e,t){return e!=t},error:function(e,t){return"\n                        MOH cohort initial pregnant females all ages \n                        <b>(".concat(e,")</b> is not matching with TX new Pregnant women <b>").concat(t,"</b>\n                    ")}},males_initiated_on_art_first_time:{param:this.getTotals((function(e){return"txNew"===e.col&&"Male"===e.gender})).length,check:function(e,t){return e!=t},error:function(e,t){return"\n                        MoH Cohort males initiated on ART first time <b>(".concat(e,")</b>\n                        is not matching with TX new All male <b>(").concat(t,")</b>\n                    ")}}},n=this.mohCohort.validateIndicators(t,(function(t){return e.errors=t}));-1===n&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});const Dn=T()(Vn,[["render",wn]]);var Tn=Dn;function In(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var Rn=n("cc8c"),Sn=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"Defaulters report",rows:[],columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("First name",{exportable:!1}),N["a"].thTxt("Last name",{exportable:!1}),N["a"].thTxt("Gender"),N["a"].thDate("Birthdate"),N["a"].thDate("Date defaulted"),N["a"].thTxt("Address",{exportable:!1})]]}},created:function(){this.fields=this.getDateDurationFields(!1,!1,5,null)},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new Rn["a"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=7,n.report.getDefaulters();case 7:r=e.sent,n.setRows(r),n.title="PEPFAR Defaulters report <b>(".concat(r.length," Defaulters)</b>");case 10:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.sortByArvNumber(e).forEach((function(e){t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.given_name),N["a"].td(e.family_name),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].tdDate(e.defaulter_date),N["a"].td((e.cell_number?"CELL: ".concat(e.cell_number," <br/>"):"")+(e.village?"VILLAGE: ".concat(e.village," <br/>"):"")+(e.district?"DISTRICT: ".concat(e.district," <br/>"):"")+(e.ta?"TA: ".concat(e.ta):""))])}));case 1:case"end":return n.stop()}}),n)})))()}}});const Pn=T()(Sn,[["render",In]]);var An=Pn;function En(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var Bn=n("87e7"),Fn=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"PEPFAR Regimen Report",rows:[],reportReady:!1,isLoading:!1,columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("Gender"),N["a"].thTxt("DOB"),N["a"].thTxt("Curr.Reg"),N["a"].thTxt("ARVs"),N["a"].thTxt("Curr.reg dispensed")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new Bn["d"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.t0=n,e.next=8,n.report.getRegimenReport();case 8:e.t1=e.sent,e.t0.setRows.call(e.t0,e.t1);case 10:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;this.sortByArvNumber(Object.values(e)).forEach((function(e){var n="",r=e.medication.map((function(e){return n=t.toDate(e.start_date),"".concat(e.medication," (").concat(e.quantity,")")}));t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].td(e.current_regimen),N["a"].td(r.join(", ")),N["a"].tdDate(n)])}))}}});const Ln=T()(Fn,[["render",En]]);var Mn=Ln;function Hn(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var Un=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"PEPFAR Regimen Switch Report",rows:[],columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("Gender"),N["a"].thTxt("DOB"),N["a"].thTxt("Prev.Reg"),N["a"].thTxt("Curr.Reg"),N["a"].thTxt("ARVs"),N["a"].thTxt("Curr.reg dispensed date")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new Bn["d"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.t0=n,e.next=8,n.report.getRegimenSwitchReport(!0);case 8:e.t1=e.sent,e.t0.setRows.call(e.t0,e.t1);case 10:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;this.sortByArvNumber(Object.values(e)).forEach((function(e){var n="",r=e.medication.map((function(e){return n=e.start_date,"".concat(e.medication," (").concat(e.quantity,")")}));t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].td(e.previous_regimen),N["a"].td(e.current_regimen),N["a"].td(r.join(", ")),N["a"].tdDate(n)])}))}}});const qn=T()(Un,[["render",Hn]]);var Gn=qn;function zn(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var Yn=n("b85c"),Wn=n("df93"),$n=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"VL Coverage report",cohort:{},rows:[],totals:{F:{},M:{}},columns:[[N["a"].thTxt("",{colspan:5,exportable:!1}),N["a"].thTxt("Sample Drawn",{colspan:2,exportable:!1}),N["a"].thTxt("High VL (>=1000 copies)",{colspan:2,exportable:!1}),N["a"].thTxt("Low VL (<1000 copies)",{colspan:2,exportable:!1})],[N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thTxt("TX CURR"),N["a"].thTxt("Due for VL"),N["a"].thTxt("Routine"),N["a"].thTxt("Targeted"),N["a"].thTxt("Routine"),N["a"].thTxt("Targeted"),N["a"].thTxt("Routine"),N["a"].thTxt("Targeted")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.totals={F:{},M:{}},n.report=new Wn["a"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=8,n.report.getVLCoverage();case 8:return n.cohort=e.sent,e.next=11,n.setRows("F");case 11:return e.next=13,n.setRows("M");case 13:return n.setAllMalesTotalsRow(),e.next=16,n.setFemaleTotalsRow();case 16:case"end":return e.stop()}}),e)})))()},setTotals:function(e,t,n){this.totals[t][e]||(this.totals[t][e]=[]),this.totals[t][e]=this.totals[t][e].concat(n)},drillDown:function(e,t){var n=this;if(e.length>=1){var r=[[N["a"].thTxt("ARV #"),N["a"].thTxt("DOB"),N["a"].thTxt("Gender"),N["a"].thTxt("Action")]],a=function(){return n.sortByArvNumber(e).map((function(e){return[n.tdARV(e.arv_number),N["a"].tdDate(e.birthdate),N["a"].td(e.gender),N["a"].tdBtn("Show",(function(){return n.$router.push({path:"/patient/dashboard/".concat(e.patient_id)})}))]}))};return N["a"].tdLink(e.length,(function(){return n.drilldownAsyncRows(t,r,a)}))}return N["a"].td(0)},setFemaleTotalsRow:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.totals.F,r=n.tx_curr.map((function(e){return e.patient_id})),t.next=4,e.report.getMaternalStatus(r);case 4:a=t.sent,o=a.FBf.concat(a.FP),i=function(e,t){return t.filter((function(t){return a[e].includes(t.patient_id)}))},c=function(e){return e.filter((function(e){return!o.includes(e.patient_id)}))},e.rows.push([N["a"].td("All"),N["a"].td("FP"),e.drillDown(i("FP",n.tx_curr),"TX CURR FP"),e.drillDown(i("FP",n.due_for_vl),"Due for VL FP"),e.drillDown(i("FP",n.drawn_routine),"Routine (Sample Drawn) FP"),e.drillDown(i("FP",n.drawn_targeted),"Targetted (Sample Drawn) FP"),e.drillDown(i("FP",n.high_vl_routine),"Routine (High VL (>=1000 copies)) FP"),e.drillDown(i("FP",n.high_vl_targeted),"Targeted High VL (>=1000 copies) FP"),e.drillDown(i("FP",n.low_vl_routine),"Routine (Low VL (<1000 copies)) FP"),e.drillDown(i("FP",n.low_vl_targeted),"Targeted (Low VL (<1000 copies)) FP")]),e.rows.push([N["a"].td("All"),N["a"].td("FNP"),e.drillDown(c(n.tx_curr),"TX CURR FNP"),e.drillDown(c(n.due_for_vl),"Due for VL FNP"),e.drillDown(c(n.drawn_routine),"Routine (Sample Drawn) FNP"),e.drillDown(c(n.drawn_targeted),"Targetted (Sample Drawn) FNP"),e.drillDown(c(n.high_vl_routine),"Routine (High VL (>=1000 copies)) FNP"),e.drillDown(c(n.high_vl_targeted),"Targeted High VL (>=1000 copies) FNP"),e.drillDown(c(n.low_vl_routine),"Routine (Low VL (<1000 copies)) FNP"),e.drillDown(c(n.low_vl_targeted),"Targeted (Low VL (<1000 copies)) FNP")]),e.rows.push([N["a"].td("All"),N["a"].td("FBf"),e.drillDown(i("FBf",n.tx_curr),"TX CURR FBf"),e.drillDown(i("FBf",n.due_for_vl),"Due for VL FBf"),e.drillDown(i("FBf",n.drawn_routine),"Routine (Sample Drawn) FBf"),e.drillDown(i("FBf",n.drawn_targeted),"Targetted (Sample Drawn) FBf"),e.drillDown(i("FBf",n.high_vl_routine),"Routine (High VL (>=1000 copies)) FBf"),e.drillDown(i("FBf",n.high_vl_targeted),"Targeted High VL (>=1000 copies) FBf"),e.drillDown(i("FBf",n.low_vl_routine),"Routine (Low VL (<1000 copies)) FBf"),e.drillDown(i("FBf",n.low_vl_targeted),"Targeted (Low VL (<1000 copies)) FBf")]);case 11:case"end":return t.stop()}}),t)})))()},setAllMalesTotalsRow:function(){var e=this.totals["M"];return this.rows.push([N["a"].td("All"),N["a"].td("Male"),this.drillDown(e.tx_curr,"TX CURR Male"),this.drillDown(e.due_for_vl,"Due for VL Male"),this.drillDown(e.drawn_routine,"Routine (Sample Drawn) Male"),this.drillDown(e.drawn_targeted,"Targetted (Sample Drawn) Male"),this.drillDown(e.high_vl_routine,"Routine (High VL (>=1000 copies)) Male"),this.drillDown(e.high_vl_targeted,"Targeted High VL (>=1000 copies) Male"),this.drillDown(e.low_vl_routine,"Routine (Low VL (<1000 copies)) Male"),this.drillDown(e.low_vl_targeted,"Targeted (Low VL (<1000 copies)) Male")])},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=Object(Yn["a"])(xn["a"]);try{for(r.s();!(a=r.n()).done;)o=a.value,o in t.cohort?(i=t.cohort[o],c=function(n,r,a){var o=r.filter((function(t){return t.gender===e}));return t.setTotals(n,e,o),t.drillDown(o,a)},t.rows.push([N["a"].td(o),N["a"].td("M"===e?"Male":"Female"),c("tx_curr",i.tx_curr,"".concat(o," TX CURR (").concat(e,")")),c("due_for_vl",i.due_for_vl,"".concat(o," Due for VL (").concat(e,")")),c("drawn_routine",i.drawn.routine,"".concat(o," Routine (Sample Drawn) (").concat(e,")")),c("drawn_targeted",i.drawn.targeted,"".concat(o," Targeted (Sample Drawn) (").concat(e,")")),c("high_vl_routine",i.high_vl.routine,"".concat(o," Routine (High VL (>=1000 copies)) (").concat(e,")")),c("high_vl_targeted",i.high_vl.targeted,"".concat(o," Targeted High VL (>=1000 copies) (").concat(e,")")),c("low_vl_routine",i.low_vl.routine,"".concat(o," Routine (Low VL (<1000 copies)) (").concat(e,")")),c("low_vl_targeted",i.low_vl.targeted,"".concat(o," Targeted (Low VL (<1000 copies)) (").concat(e,")"))])):t.rows.push([N["a"].td(o),N["a"].td(e),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0)])}catch(s){r.e(s)}finally{r.f()}case 2:case"end":return n.stop()}}),n)})))()}}});const Kn=T()($n,[["render",zn]]);var Jn=Kn;function Xn(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"PEPFAR",config:{showIndex:!0},onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var Qn=n("eb8b"),Zn=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"TB PREV Report",cohort:{},rows:[],columns:[[N["a"].thTxt("",{colspan:3,sortable:!1,exportable:!1}),N["a"].thTxt("Started new on ART",{colspan:2,sortable:!1,exportable:!1}),N["a"].thTxt("Started previously on ART",{colspan:2,sortable:!1,exportable:!1}),N["a"].thTxt("Completed New on ART",{colspan:2,sortable:!1,exportable:!1}),N["a"].thTxt("Completed previously on ART",{colspan:2,sortable:!1,exportable:!1})],[N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thNum("3HP",{value:"3HP(Started New on ART)"}),N["a"].thNum("6H",{value:"6H(Started New on ART)"}),N["a"].thNum("3HP",{value:"3HP(Started Previously on ART)"}),N["a"].thNum("6H",{value:"6H(Started Previously on ART)"}),N["a"].thNum("3H",{value:"3HP(Completed New on ART)"}),N["a"].thNum("6H",{value:"6H(Completed New on ART)"}),N["a"].thNum("3H",{value:"3HP(Completed Previously on ART)"}),N["a"].thNum("6H",{value:"6H(Completed Previously on ART)"})]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new Qn["a"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=7,n.report.getTBPrevReport();case 7:n.cohort=e.sent,n.setRows("F"),n.setRows("M");case 10:case"end":return e.stop()}}),e)})))()},makeDrilldown:function(e,t){var n=this;if(e.length){var r=[[N["a"].thTxt("ARV#"),N["a"].thTxt("Birthdate"),N["a"].thTxt("TPT Initiation Date"),N["a"].thTxt("Outcome")]],a=function(){return n.sortByArvNumber(e,"arv_number").map((function(e){return[N["a"].td(e.arv_number),N["a"].tdDate(e.birthdate),N["a"].tdDate(e.tpt_initiation_date),N["a"].td(e.outcome)]}))};return N["a"].tdLink(e.length,(function(){return n.drilldownAsyncRows(t,r,a)}))}return N["a"].td(0)},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(r in xn["a"])a=xn["a"][r],o=t.cohort[a][e],t.rows.push([N["a"].td(a),N["a"].td(e),t.makeDrilldown(o["3HP"]["started_new_on_art"],"".concat(a," Started new on ART 3HP (").concat(e,")")),t.makeDrilldown(o["6H"]["started_new_on_art"],"".concat(a," Start new on ART 6H (").concat(e,")")),t.makeDrilldown(o["3HP"]["started_previously_on_art"],"".concat(a," Started previously on ART 3HP (").concat(e,")")),t.makeDrilldown(o["6H"]["started_previously_on_art"],"".concat(a," Started previously on ART 6H (").concat(e,")")),t.makeDrilldown(o["3HP"]["completed_new_on_art"],"".concat(a," Completed new on ART 3HP (").concat(e,")")),t.makeDrilldown(o["6H"]["completed_new_on_art"],"".concat(a," Completed new on ART 6H (").concat(e,")")),t.makeDrilldown(o["3HP"]["completed_previously_on_art"],"".concat(a," Completed previously on ART 3HP (").concat(e,")")),t.makeDrilldown(o["6H"]["completed_previously_on_art"],"".concat(a," Completed previously on ART 6H (").concat(e,")"))]);case 1:case"end":return n.stop()}}),n)})))()}}});const er=T()(Zn,[["render",Xn]]);var tr=er;function nr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"PEPFAR",config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.showStatus,headerInfoList:e.headerInfoList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])]})),_:1})}n("6062"),n("a630");var rr=n("9a5e"),ar=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"TX Curr MMD Report",cohort:{},rows:[],totals:new Set,errors:[],showStatus:!1,columns:[[N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thNum("# of clients on <3 months of ARVs"),N["a"].thNum("# of clients on 3 - 5 months of ARVs"),N["a"].thNum("# of clients on >= 6 months of ARVs")]],headerInfoList:[],mohCohort:{},canValidate:!1}},watch:{canValidate:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.validateReport();case 3:case"end":return n.stop()}}),n)})))()}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.canValidate=!1,n.totals.clear(),n.errors=[],n.showStatus=!1,n.rows=[],n.report=new rr["a"],n.mohCohort=new Nn["a"],n.mohCohort.setStartDate(t.start_date),n.mohCohort.setEndDate(t.end_date),n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),n.report.initArvRefillPeriod(!0),e.next=15,n.setRows();case 15:n.canValidate=!0,n.showStatus=!0,n.setHeaderInfoList();case 18:case"end":return e.stop()}}),e)})))()},getValues:function(e,t){var n=[],r=[],a=[];for(var o in e){var i=e[o],c=i.prescribed_days;this.totals.add(o),c<90&&n.push(o),c>=90&&c<=150&&r.push(o),c>150&&a.push(o)}return[this.drill(n,"# of clients on < 3 months of ARVs (".concat(t,")")),this.drill(r,"# of clients on 3 - 5 months of ARVs (".concat(t,")")),this.drill(a,"# of clients on  >= 6 months of ARVs (".concat(t,")"))]},setRows:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,o,i,c,s,u,l,d,b,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0,a=0,o=[],i=[],t.t0=regeneratorRuntime.keys(xn["a"]);case 5:if((t.t1=t.t0()).done){t.next=17;break}return c=t.t1.value,s=xn["a"][c],"<1 year"===s?(n=0,a=0):"90 plus years"===s?(n=90,a=1e3):(u=s.split("-"),l=Object(r["a"])(u,2),d=l[0],b=l[1],n=parseInt(d),a=parseInt(b)),t.next=11,e.report.getTxCurrMMDReport(n,a);case 11:f=t.sent,e.report.initArvRefillPeriod(!1),f?(i.push([N["a"].td(s),N["a"].td("Female")].concat(Object(p["a"])(e.getValues(f["Female"],"".concat(s," Female"))))),o.push([N["a"].td(s),N["a"].td("Male")].concat(Object(p["a"])(e.getValues(f["Male"],"".concat(s," Male")))))):(i.push([N["a"].td(s),N["a"].td("Female"),N["a"].td(0),N["a"].td(0),N["a"].td(0)]),o.push([N["a"].td(s),N["a"].td("Male"),N["a"].td(0),N["a"].td(0),N["a"].td(0)])),e.rows=[].concat(i,o),t.next=5;break;case 17:case"end":return t.stop()}}),t)})))()},setHeaderInfoList:function(){var e=this;this.headerInfoList=[{label:"Total clients",value:this.totals.size,other:{onclick:function(){return e.runTableDrill(Array.from(e.totals),"Total Clients")}}}]},validateReport:function(){var e=this,t={total_alive_and_on_art:{param:this.totals.size,check:function(e,t){return t>e},error:function(e,t){return"\n                        MoH cohort Alive and on ART clients <b>(".concat(e,")</b> is not\n                        matching with total TX MMD clients <b>(").concat(t,")</b>.\n                    ")}}},n=this.mohCohort.validateIndicators(t,(function(t){return e.errors=t}));-1===n&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});const or=T()(ar,[["render",nr]]);var ir=or;function cr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var sr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"PEPFAR Curr Ml Report",rows:[],drillData:{},columns:[[N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thTxt("Died"),N["a"].thTxt("IIT <3 mo"),N["a"].thTxt("IIT 3-5 mo"),N["a"].thTxt("IIT 6+ mo"),N["a"].thTxt("Transferred out"),N["a"].thTxt("Refused (Stopped)")]],cohort:{}}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new rr["a"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=7,n.report.getTxMlReport();case 7:return n.cohort=e.sent,e.next=10,n.setRows("F");case 10:return e.next=12,n.setRows("M");case 12:case"end":return e.stop()}}),e)})))()},drilldown:function(e,t){var n=this,r=[[N["a"].thTxt("ARV#"),N["a"].thTxt("DOB"),N["a"].thTxt("Dispensed"),N["a"].thTxt("ARVs")]],o=function(){var r=Object(a["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(t in n.drillData)){r.next=2;break}return r.abrupt("return",n.drillData[t]);case 2:return r.next=4,n.report.getTxMMDClientLevelData(e);case 4:if(a=r.sent,a){r.next=7;break}return r.abrupt("return",[]);case 7:return o=n.report.remapTxClientLevelData(a).map((function(e){var t=e.drugs.map((function(e){var t="\n                                <table style='width: 100%;'> \n                                    <td style='width: 65%;'>".concat(e.name,"</td>\n                                    <td style='width: 30%;'>(").concat(e.quantity,", ").concat(e.dose," a day)</td>\n                                </table>"),n="".concat(e.name," (Quantity: ").concat(e.quantity," Dose: ").concat(e.dose,")");return{tableView:t,dataView:n}}));return[N["a"].td(e.id||"N/A"),N["a"].tdDate(e.dob),N["a"].tdDate(e.dispenseDate),N["a"].td(t.map((function(e){return e.tableView})).join("<p/>"),{value:t.map((function(e){return e.dataView})).join("|")})]})),n.drillData[t]=o,r.abrupt("return",o);case 10:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return e.length<=0?N["a"].td(0):N["a"].tdLink(e.length,(function(){return n.drilldownAsyncRows(t,r,o)}))},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(a in r=["Defaulted (new registration)","Defaulted (old registration)","Died","Stopped","Tranferred out","Unknown"],xn["a"]){o=xn["a"][a];try{(function(){var n=t.cohort[o][e],a="".concat(e," ").concat(o),i=n.map((function(e,n){return t.drilldown(e,"".concat(a," ").concat(r[n]))}));t.rows.push([N["a"].td(o),N["a"].td(e)].concat(Object(p["a"])(i)))})()}catch(i){t.rows.push([N["a"].td(o),N["a"].td(e),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0)])}}case 2:case"end":return n.stop()}}),n)})))()}}});const ur=T()(sr,[["render",cr]]);var lr=ur;function dr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var pr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"TX RTT Report",cohort:{},rows:[],columns:[[N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thTxt("Returned <3 mo"),N["a"].thTxt("Returned 3-5 mo"),N["a"].thTxt("Returned 6+ mo")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new rr["a"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=7,n.report.getTxRttReport();case 7:return n.cohort=e.sent,e.next=10,n.setRows("F");case 10:return e.next=12,n.setRows("M");case 12:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:for(a in r=function(e,t){return e.filter((function(e){return t(e.months)})).map((function(e){return e.patient_id}))},xn["a"])o=xn["a"][a],o in t.cohort?function(){var n=t.cohort[o][e],a=function(e){return r(n,e)},i=a((function(e){return e<3})),c=a((function(e){return e>=3&&e<=5})),s=a((function(e){return e>=6}));t.rows.push([N["a"].td(o),N["a"].td(e),t.drill(i,"".concat(o," (").concat(e,") Returned <3 mo")),t.drill(c,"".concat(o," (").concat(e,") Returned 3-5 mo")),t.drill(s,"".concat(o," (").concat(e,") Returned 6+ mo"))])}():t.rows.push([N["a"].td(o),N["a"].td(e),N["a"].td(0),N["a"].td(0),N["a"].td(0)]);case 2:case"end":return n.stop()}}),n)})))()}}});const br=T()(pr,[["render",dr]]);var fr=br;function mr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var hr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"Clinic Missed Appointments",totalClients:[],rows:[],columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("First name",{exportable:!1}),N["a"].thTxt("Last name",{exportable:!1}),N["a"].thTxt("Gender"),N["a"].thTxt("DOB"),N["a"].thTxt("Appointment"),N["a"].thTxt("Days missed"),N["a"].thTxt("Current outcome"),N["a"].thTxt("Contact details",{exportable:!1})]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new xn["b"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.t0=n,e.next=8,n.report.getMissedAppointments();case 8:e.t1=e.sent,e.t0.setRows.call(e.t0,e.t1);case 10:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.sortByArvNumber(e).forEach((function(e){t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.given_name),N["a"].td(e.family_name),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].tdDate(e.appointment_date),N["a"].td(e.days_missed),N["a"].td(e.current_outcome),N["a"].td("CELL: ".concat(e.cell_number," <br/>\n                        District: ").concat(e.district," <br/>\n                        Village: ").concat(e.village," <br/>\n                        TA: ").concat(e.ta,"\n                    "))])}));case 1:case"end":return n.stop()}}),n)})))()}}});const gr=T()(hr,[["render",mr]]);var vr=gr;function Or(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var jr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"Clinic Defaulters report",rows:[],columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("First name",{exportable:!1}),N["a"].thTxt("Last name",{exportable:!1}),N["a"].thTxt("Gender"),N["a"].thTxt("birthdate"),N["a"].thTxt("Date defaulted"),N["a"].thTxt("Address",{exportable:!1})]]}},created:function(){this.fields=this.getDateDurationFields(!1,!1,5,null)},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new Rn["a"],n.report.setIsPepfar(!1),n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=8,n.report.getDefaulters();case 8:r=e.sent,n.setRows(r),n.title="Clinic Defaulters report <b>(".concat(r.length," Defaulters)</b>");case 11:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.sortByArvNumber(e).forEach((function(e){t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.given_name),N["a"].td(e.family_name),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].tdDate(e.defaulter_date),N["a"].td((e.cell_number?"CELL: ".concat(e.cell_number," <br/>"):"")+(e.village?"VILLAGE: ".concat(e.village," <br/>"):"")+(e.district?"DISTRICT: ".concat(e.district," <br/>"):"")+(e.ta?"TA: ".concat(e.ta):""))])}));case 1:case"end":return n.stop()}}),n)})))()}}});const _r=T()(jr,[["render",Or]]);var wr=_r;function kr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod,config:{showIndex:!1}},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var yr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"Clinic Regimen Report",rows:[],columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("Gender"),N["a"].thTxt("DOB"),N["a"].thTxt("ART start date"),N["a"].thTxt("Weight(Kg)"),N["a"].thTxt("Curr.Reg"),N["a"].thTxt("ARVs"),N["a"].thTxt("Curr.reg dispensed"),N["a"].thTxt("VL result"),N["a"].thTxt("Date of VL result")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new Bn["d"],n.report.setReportType("moh"),n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.t0=n,e.next=9,n.report.getRegimenReport();case 9:e.t1=e.sent,e.t0.setRows.call(e.t0,e.t1);case 11:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;this.sortByArvNumber(Object.values(e)).map((function(e){var n="",r=e.medication.map((function(e){return n=t.toDate(e.start_date),"".concat(e.medication," (").concat(e.quantity,")")}));t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].tdDate(e.art_start_date),N["a"].td(e.current_weight),N["a"].td(e.current_regimen),N["a"].td(r.join(", ")),N["a"].tdDate(n),N["a"].td(e.vl_result),N["a"].tdDate(e.vl_result_date)])}))}}});const xr=T()(yr,[["render",kr]]);var Nr=xr;function Cr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var Vr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"Clinic Regimen Switch Report",rows:[],columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("Gender"),N["a"].thTxt("DOB"),N["a"].thTxt("ART start date"),N["a"].thTxt("Weight"),N["a"].thTxt("Prev.Reg"),N["a"].thTxt("Curr.Reg"),N["a"].thTxt("ARVs"),N["a"].thTxt("Curr.reg dispensed")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new Bn["d"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.t0=n,e.next=8,n.report.getRegimenSwitchReport(!1);case 8:e.t1=e.sent,e.t0.setRows.call(e.t0,e.t1);case 10:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;this.sortByArvNumber(Object.values(e)).forEach((function(e){var n="",r=e.medication.map((function(e){return n=e.start_date,"".concat(e.medication," (").concat(e.quantity,")")}));t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].tdDate(e.art_start_date),N["a"].td(e.current_weight),N["a"].td(e.previous_regimen),N["a"].td(e.current_regimen),N["a"].td(r.join(", ")),N["a"].tdDate(n)])}))}}});const Dr=T()(Vr,[["render",Cr]]);var Tr=Dr;function Ir(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportReady:e.reportReady,isLoading:e.isLoading,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","reportReady","isLoading","onReportConfiguration"])}var Rr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"Clinic Pregnant patients report",totalClients:[],rows:[],reportReady:!1,isLoading:!1,columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("First name",{exportable:!1}),N["a"].thTxt("Last name",{exportable:!1}),N["a"].thTxt("birthdate")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new xn["b"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.t0=n,e.next=8,n.report.getPregnantWomen();case 8:e.t1=e.sent,e.t0.setRows.call(e.t0,e.t1);case 10:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.sortByArvNumber(e).forEach((function(e){t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.given_name),N["a"].td(e.family_name),N["a"].tdDate(e.birthdate)])}));case 1:case"end":return n.stop()}}),n)})))()}}});const Sr=T()(Rr,[["render",Ir]]);var Pr=Sr;function Ar(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,canExportPDf:!0,customFileName:e.exportedReportTitle,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","customFileName","onReportConfiguration"])]})),_:1})}var Er=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"Clinic Clients due for VL <small>(clients with appointments in specified period)</small>",exportedReportTitle:"",rows:[],columns:[]}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o["b"].filingNumbersEnabled();case 2:n=t.sent,e.columns.push([N["a"].thTxt(n?"Filing #":"ARV#"),N["a"].thTxt("App."),N["a"].thTxt("ART started"),N["a"].thTxt("Months on ART"),N["a"].thTxt("Milestone"),N["a"].thTxt("Ordered"),N["a"].thTxt("Result"),N["a"].thTxt("Released")]),e.fields=e.getDateDurationFields();case 5:case"end":return t.stop()}}),t)})))()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new xn["b"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=7,n.report.getClientsDueForVl();case 7:r=e.sent,n.exportedReportTitle="".concat(xn["b"].getLocationName()," Clinic Clients due for VL (clients with appointments in specified period) ").concat(n.period),n.setRows(r);case 10:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.forEach((function(e){t.rows.push([N["a"].tdLink(e.arv_number,(function(){return t.confirmPatient(e.patient_id)})),N["a"].tdDate(e.appointment_date),N["a"].tdDate(e.start_date),N["a"].td(e.months_on_art),N["a"].tdDate(e.mile_stone),N["a"].tdDate(e.last_result_order_date),N["a"].td(e.last_result),N["a"].tdDate(e.last_result_date)])}));case 1:case"end":return n.stop()}}),n)})))()}}});const Br=T()(Er,[["render",Ar]]);var Fr=Br;function Lr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var Mr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"Clinic Retention report",totalClients:[],rows:[],cohort:{},columns:[[N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thTxt("Initiated one month"),N["a"].thTxt("Completed one month"),N["a"].thTxt("Initiated Three months"),N["a"].thTxt("Completed Three months"),N["a"].thTxt("Initiated Six months"),N["a"].thTxt("Completed Six months")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new xn["b"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=7,n.report.getClientRentention();case 7:n.cohort=e.sent,n.setRows("F"),n.setRows("M");case 10:case"end":return e.stop()}}),e)})))()},getValue:function(e,t,n,r){try{var a=this.cohort[e][r].filter((function(e){return e.gender===t&&e.age_group===n})).map((function(e){return e.patient_id}));return this.drill(a)}catch(o){return console.warn(o),0}},setRows:function(e){var t=[].concat(Object(p["a"])(xn["a"]),["Unknown"]);for(var n in t){var r=t[n],a=[N["a"].td(r),N["a"].td(e)];if(Object(O["isEmpty"])(this.cohort))this.rows.push([].concat(a,[N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0),N["a"].td(0)]));else{for(var o in this.cohort)a.push(this.getValue(parseInt(o),e,r,"all")),a.push(this.getValue(parseInt(o),e,r,"retained"));this.rows.push(a)}}}}});const Hr=T()(Mr,[["render",Lr]]);var Ur=Hr;function qr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportReady:e.reportReady,isLoading:e.isLoading,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","reportReady","isLoading","onReportConfiguration"])}var Gr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"Clinic External consultation clients",totalClients:[],rows:[],reportReady:!1,isLoading:!1,columns:[[N["a"].thTxt("NPID"),N["a"].thTxt("Client Type"),N["a"].thTxt("First name",{exportable:!1}),N["a"].thTxt("Last name",{exportable:!1}),N["a"].thTxt("Gender"),N["a"].thTxt("DOB"),N["a"].thTxt("Date set")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.reportReady=!0,n.isLoading=!0,n.rows=[],n.report=new xn["b"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.t0=n,e.next=10,n.report.getExternalConsultationClients();case 10:e.t1=e.sent,e.t0.setRows.call(e.t0,e.t1),n.isLoading=!1;case 13:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.forEach((function(e){t.rows.push([N["a"].td(e.npid),N["a"].td(e.patient_type),N["a"].td(e.given_name),N["a"].td(e.family_name),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].tdDate(e.date_set)])}));case 1:case"end":return n.stop()}}),n)})))()}}});const zr=T()(Gr,[["render",qr]]);var Yr=zr;function Wr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,canExportPDf:!1,showtitleOnly:!0,customFileName:e.customFileName,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","customFileName","onReportConfiguration"])]})),_:1})}var $r=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"",totalClients:[],rows:[],reportReady:!1,isLoading:!1,columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("Gender"),N["a"].thTxt("Birthdate"),N["a"].thTxt("Specimen"),N["a"].thTxt("Ordered"),N["a"].thTxt("Result"),N["a"].thTxt("Released"),N["a"].thTxt("Action")]]}},created:function(){this.fields=[].concat(Object(p["a"])(this.getDateDurationFields()),[{id:"result_type",helpText:"Select result type",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return[{label:"Viraemia 1000+",value:"viraemia-1000"},{label:"Suppressed",value:"suppressed"},{label:"Low level viraemia",value:"low-level-viraemia"}]}}])},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.result_type,n.rows=[],n.report=new xn["b"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),n.title="".concat(a.label," Report <small><b>(between the period of (").concat(n.period,")</b></small>"),n.customFileName="".concat(xn["b"].getLocationName()," ").concat(a.label," ").concat(n.period),r.t0=n,r.next=11,n.report.getViralLoadResults(a.value.toLowerCase());case 11:r.t1=r.sent,r.t0.setRows.call(r.t0,r.t1);case 13:case"end":return r.stop()}}),r)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.sortByArvNumber(e).forEach((function(e){t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].td(e.specimen),N["a"].tdDate(e.order_date),N["a"].td("".concat(e.result_modifier||""," ").concat(e.result)),N["a"].tdDate(e.result_date),N["a"].tdBtn("View",(function(){return t.$router.push("/patient/dashboard/".concat(e["patient_id"]))}))])}));case 1:case"end":return n.stop()}}),n)})))()}}});const Kr=T()($r,[["render",Wr]]);var Jr=Kr;function Xr(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var Qr=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"",totalClients:[],rows:[],columns:[],outcome:""}},created:function(){var e=this,t=[[N["a"].thTxt("ARV#"),N["a"].thTxt("First name",{exportable:!1}),N["a"].thTxt("Last name",{exportable:!1}),N["a"].thTxt("Birthdate"),N["a"].thTxt("Gender"),N["a"].thTxt("Outcome date"),N["a"].thTxt("Actions")]],n=function(t){return[N["a"].td(t.identifier),N["a"].td(t.given_name),N["a"].td(t.family_name),N["a"].tdDate(t.birthdate),N["a"].td(t.gender),N["a"].tdDate(t.start_date),N["a"].tdBtn("View",(function(){return e.$router.push({path:"/patient/dashboard/".concat(t.patient_id)})}))]};this.fields=[].concat(Object(p["a"])(this.getDateDurationFields()),[{id:"outcome",helpText:"Select outcome",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return[{label:"Transfer Out",value:"Transfer Out",other:{columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("First name",{exportable:!1}),N["a"].thTxt("Last name",{exportable:!1}),N["a"].thTxt("Birthdate"),N["a"].thTxt("Gender"),N["a"].thTxt("Outcome date"),N["a"].thTxt("TO Location"),N["a"].thTxt("Actions")]],rowBuilder:function(t){return[N["a"].td(t.identifier),N["a"].td(t.given_name),N["a"].td(t.family_name),N["a"].tdDate(t.birthdate),N["a"].td(t.gender),N["a"].tdDate(t.start_date),N["a"].td(t.transferred_out_to),N["a"].tdBtn("View",(function(){return e.$router.push({path:"/patient/dashboard/".concat(t.patient_id)})}))]}}},{label:"Died",value:"Died",other:{columns:t,rowBuilder:n}},{label:"Stopped",value:"Stopped",other:{columns:t,rowBuilder:n}}]}}])},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.outcome,n.rows=[],n.columns=a.other.columns,n.report=new xn["b"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.outcome=a.value.toString(),n.title="".concat(n.outcome," Report"),n.period=n.report.getDateIntervalPeriod(),r.t0=n,r.next=12,n.report.getOtherOutcome(n.outcome);case 12:r.t1=r.sent,r.t2=a.other.rowBuilder,r.t0.setRows.call(r.t0,r.t1,r.t2);case 15:case"end":return r.stop()}}),r)})))()},setRows:function(e,t){var n=this;e&&this.sortByArvNumber(e,"identifier").forEach((function(e){return n.rows.push(t(e))}))}}});const Zr=T()(Qr,[["render",Xr]]);var ea=Zr;function ta(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}var na=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"Regimen Formulation: Patient level report",totalClients:[],rows:[],columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("Gender"),N["a"].thTxt("DOB")]]}},created:function(){this.fields=[].concat(Object(p["a"])(this.getDateDurationFields()),[{id:"regimen",helpText:"Select regimen",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return Bn["b"].map((function(e){return{label:e,value:e}}))}},{id:"formulation",helpText:"Select formulation",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return Bn["a"].map((function(e){return{label:e,value:e}}))}}])},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.regimen,o=e.formulation,n.rows=[],n.report=new Bn["d"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),r.t0=n,r.next=9,n.report.getRegimenFormulationReport(a.value,o.value);case 9:r.t1=r.sent,r.t0.setRows.call(r.t0,r.t1);case 11:case"end":return r.stop()}}),r)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.sortByArvNumber(e).forEach((function(e){t.rows.push([N["a"].td(e.arv_number),N["a"].td(e.gender),N["a"].tdDate(e.birthdate)])}));case 1:case"end":return n.stop()}}),n)})))()}}});const ra=T()(na,[["render",ta]]);var aa=ra;function oa(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])}n("00b4");var ia=n("1497"),ca=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"Lab test result(s)",rows:[],cohort:[],reportType:"",reportReady:!1,columns:[],patientLevelColumns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("Gender"),N["a"].thTxt("Birthdate"),N["a"].thTxt("Ordered"),N["a"].thTxt("Specimen"),N["a"].thTxt("Test"),N["a"].thTxt("Result"),N["a"].thTxt("Released")]],disaggregatedColumns:[N["a"].thTxt("Age group"),N["a"].thTxt("Gender")]}},created:function(){this.report=new ia["a"],this.fields=this.getFormFields()},methods:{onPeriod:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.type,a=e.tests,t.reportReady=!0,t.rows=[],t.period=t.report.getDateIntervalPeriod(),t.reportType=r.value,"disaggregated"===t.reportType?t.setDisaggregatedRows(a):"patient_level"===t.reportType&&t.setPatientLevelRows(a);case 6:case"end":return n.stop()}}),n)})))()},getFormFields:function(){var e=this;return[].concat(Object(p["a"])(this.getDateDurationFields()),[{id:"tests",helpText:"Available test(s) results",type:b["b"].TT_MULTIPLE_SELECT,options:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r,a){var o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.report.setStartDate(a.start_date),e.report.setEndDate(a.end_date),t.next=4,e.report.getLabResultsReport();case 4:return o=t.sent,i=e.buildAvailableTests(o),t.abrupt("return",e.buildAvailableTestOptions(i));case 7:case"end":return t.stop()}}),t)})));function n(e,n,r){return t.apply(this,arguments)}return n}()},{id:"type",helpText:"Select report type",type:b["b"].TT_SELECT,options:function(){return[{label:"Disaggregated",value:"disaggregated"},{label:"Patient level",value:"patient_level"}]}}])},buildAvailableTests:function(e){var t=this,n={};return e.forEach((function(e){e.measures.forEach((function(r){r.name in n||(n[r.name]=[]),n[r.name].push({id:e.patient_id,arv:e.arv_number,gender:e.gender,ageGroup:e.age_group,birthdate:t.toDate(e.birthdate),ordered:t.toDate(e.order_date),specimen:e.test,test:r.name,result:"".concat(r.modifier," ").concat(r.value),released:t.toDate(e.result_date)})}))})),n},buildAvailableTestOptions:function(e){var t=[];for(var n in e){var r=e[n];t.push({label:n,value:r.length,other:r})}return t},setDisaggregatedRows:function(e){var t=this,n=[],r=[];this.columns=[this.disaggregatedColumns.concat(e.map((function(e){return N["a"].thTxt(e.label)})))];var a=function(a){var o=xn["a"][a],i=[N["a"].td(o),N["a"].td("M")],c=[N["a"].td(o),N["a"].td("F")];e.forEach((function(e){var n=e.other,r=function(e){return n.filter((function(t){return t.gender===e&&t.ageGroup===o})).map((function(e){return e.id}))};i.push(t.drill(r("M"))),c.push(t.drill(r("F")))})),n.push(i),r.push(c),t.rows=[].concat(r,n)};for(var o in xn["a"])a(o)},setPatientLevelRows:function(e){var t=this;this.columns=this.patientLevelColumns,e.forEach((function(e){var n=e.other;t.sortByArvNumber(n,"arv").forEach((function(e){t.rows.push([t.tdARV(e.arv),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].tdDate(e.ordered),N["a"].td(e.specimen),N["a"].td(e.test),N["a"].td(e.result),N["a"].tdDate(e.released)])}))}))}}});const sa=T()(ca,[["render",oa]]);var ua=sa;function la(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,rows:e.rows,columns:e.columns},null,8,["title","rows","columns"])]})),_:1})}var da=n("d6aa"),pa=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:da["a"],IonPage:ge["F"]},data:function(){return{title:"Active clients with adverse outcomes",rows:[],columns:[[N["a"].thTxt("Filing#"),N["a"].thTxt("Outcome"),N["a"].thTxt("Outcome date")]]}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new xn["b"],t.next=3,n.getArchivingCandidates();case 3:r=t.sent,r.forEach((function(t){e.rows.push([N["a"].td(t.filing_number),N["a"].td(t.outcome),N["a"].tdDate(t.outcome_date)])}));case 5:case"end":return t.stop()}}),t)})))()}});const ba=T()(pa,[["render",la]]);var fa=ba;function ma(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,columns:e.columns,headerInfoList:e.headerList,reportPrefix:"MoH",config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.canValidate,hasServerSideCaching:!0,enabledPDFHorizontalPageBreak:!0,onReportConfiguration:e.onPeriod,onDefaultConfiguration:e.onLoadDefault},null,8,["title","period","rows","columns","headerInfoList","validationErrors","showValidationStatus","onReportConfiguration","onDefaultConfiguration"])]})),_:1})}var ha=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"Disaggregated report",columns:[[N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thNum("Tx new (new on ART)"),N["a"].thNum("TX curr (receiving ART)"),N["a"].thNum("TX curr (received IPT)"),N["a"].thNum("TX curr (screened for TB)")].concat(Object(p["a"])(Bn["b"].map((function(e){return N["a"].thNum(e)}))),[N["a"].thNum("Unknown"),N["a"].thNum("Total (regimen)")])],errors:[],showStatus:!1,rowDataRefs:["txNew","txCurr","txGivenIpt","txScreenTB"].concat(Object(p["a"])(Bn["b"]),["N/A","regimenTotals"]),dataRefLabels:{txNew:"Tx new (new on ART)",txCurr:"Tx curr (receiving ART)",txGivenIpt:"TX curr (received IPT)",txScreenTB:"TX curr (screened for TB)","N/A":"Unknown",regimenTotals:"Regimen Totals"},aggregations:[],mohCohort:{},maleFemaleAgeGroupData:{},headerList:[],canValidate:!1,onLoadDefault:null,sortIndexes:{}}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.$route.query,n.start_date&&n.end_date&&n.quarter&&(e.onLoadDefault=function(){return e.onPeriod({quarter:{label:n.quarter,other:{start:n.start_date,end:n.end_date}}},{})});case 2:case"end":return t.stop()}}),t)})))()},watch:{canValidate:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.validateReport();case 3:case"end":return n.stop()}}),n)})))()}},computed:{rows:function(){var e=this;return Object.keys(this.sortIndexes).sort((function(e,t){return parseInt(e)-parseInt(t)})).reduce((function(t,n){return t.concat(e.sortIndexes[n])}),[])}},methods:{onPeriod:function(e,t){var n=arguments,r=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var o,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=n.length>2&&void 0!==n[2]&&n[2],r.canValidate=!1,r.maleFemaleAgeGroupData={},r.aggregations=[],r.sortIndexes={},r.errors=[],r.report=new Cn["a"],r.mohCohort=new Nn["a"],e.quarter?(r.mohCohort.setQuarter(e.quarter.label),r.mohCohort.setStartDate(e.quarter.other.start),r.mohCohort.setEndDate(e.quarter.other.end),r.report.setQuarter(e.quarter.label),r.report.setStartDate(e.quarter.other.start),r.report.setEndDate(e.quarter.other.end),r.period="Custom"===e.quarter.label?r.report.getDateIntervalPeriod():e.quarter.label):(r.mohCohort.setStartDate(t.start_date),r.mohCohort.setEndDate(t.end_date),r.report.setStartDate(t.start_date),r.report.setEndDate(t.end_date),r.period=r.report.getDateIntervalPeriod()),r.report.setRebuildOutcome(o),a.next=12,r.report.init();case 12:if(i=a.sent,i){a.next=15;break}return a.abrupt("return",Object(h["e"])("Unable to initialise report"));case 15:return a.next=17,r.setTableRows();case 17:r.canValidate=!0;case 18:case"end":return a.stop()}}),a)})))()},setTableRows:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setFemaleRows(1);case 2:return t.next=4,e.setMaleRows(2);case 4:return t.next=6,e.setTotalMalesRow(3);case 6:return t.next=8,e.setFemalePregnantRows(4);case 8:return t.next=10,e.setFemaleBreastFeedingRows(6);case 10:return t.next=12,e.setFemaleNotPregnantRows(5);case 12:case"end":return t.stop()}}),t)})))()},getColumnLabel:function(e){return e in this.dataRefLabels?this.dataRefLabels[e]:e},getTotals:function(e){return this.aggregations.filter((function(t){return e(t)})).reduce((function(e,t){return e.concat(t.data)}),[])},addAggregation:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.aggregations.push({col:e,gender:t,data:n})},getRegimenRows:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=[],o=[],r.next=4,n.report.getRegimenDistribution();case 4:return i=r.sent,c=[].concat(Object(p["a"])(Bn["b"]),["N/A"]),c.forEach((function(r){i[r]&&(a=a.concat(i[r])),o.push(n.drill(i[r],"Regimen ".concat(r," | ").concat(e," | ").concat(t))),n.addAggregation(r,t,i[r])})),o.push(n.drill(a,"Regimen Totals | ".concat(e," | ").concat(t))),n.addAggregation("regimenTotals",t,a),r.abrupt("return",o);case 10:case"end":return r.stop()}}),r)})))()},getValue:function(e,t,n){switch(e){case"tx_given_ipt":return this.report.getTxIpt();case"tx_screened_for_tb":return this.report.getTxCurrTB();default:return t in n?n[t][e]:[]}},setTotalMalesRow:function(e){var t=this,n=function(e,n){var r=t.aggregations.filter((function(t){return"Male"===t.gender&&t.col===e})).reduce((function(e,t){return e.concat(t.data)}),[]);return t.drill(r,n)},r=this.rowDataRefs.map((function(e){return n(e,"".concat(t.getColumnLabel(e)," | All Male"))}));this.sortIndexes[e]=[[N["a"].td("All"),N["a"].td("Male")].concat(Object(p["a"])(r))]},setFemaleNotPregnantRows:function(e){var t=this,n=function(e,n){return t.aggregations.filter((function(e){return e.gender.match(/fp|fbf/i)&&e.col===n})).reduce((function(e,t){return e.concat(t.data||[])}),[]).includes(e)},r=function(e,r){var a=t.aggregations.filter((function(t){return"Female"===t.gender&&t.col===e})).reduce((function(t,r){return t.concat(r.data.filter((function(t){return!n(t,e)})))}),[]);return t.drill(a,r)},a=this.rowDataRefs.map((function(e){return r(e,"".concat(t.getColumnLabel(e)," | FNP"))}));this.sortIndexes[e]=[[N["a"].td("All"),N["a"].td("FNP")].concat(Object(p["a"])(a))]},setFemaleRows:function(e){return this.report.setGender("female"),this.setRows(e,"F",xn["a"],"Female")},setMaleRows:function(e){return this.report.setGender("male"),this.setRows(e,"M",xn["a"],"Male")},setFemalePregnantRows:function(e){return this.report.setGender("pregnant"),this.setRows(e,"F",["All"],"FP","Pregnant")},setFemaleBreastFeedingRows:function(e){return this.report.setGender("breastfeeding"),this.setRows(e,"F",["All"],"FBf","Breastfeeding")},setRows:function(e,t,n,r){var o=arguments,i=this;return Object(a["a"])(regeneratorRuntime.mark((function c(){var s,u,l;return regeneratorRuntime.wrap((function(c){while(1)switch(c.prev=c.next){case 0:s=o.length>4&&void 0!==o[4]?o[4]:"",u=regeneratorRuntime.mark((function o(c){var u,l,d,b,f,m,h;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(u=[],l=[],d=[],b=[],f=s||n[c],i.report.setAgeGroup(f),f in i.maleFemaleAgeGroupData){o.next=12;break}return o.next=9,i.report.getCohort();case 9:m=o.sent,i.report.setRebuildOutcome(!1),i.maleFemaleAgeGroupData[f]=Object(O["isEmpty"])(m)?{}:m[f];case 12:if(Object(O["isEmpty"])(i.maleFemaleAgeGroupData[f])){o.next=30;break}return h=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",i.getValue(n,t,i.maleFemaleAgeGroupData[f]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.next=16,h("tx_new");case 16:return u=o.sent,o.next=19,h("tx_curr");case 19:return l=o.sent,o.next=22,h("tx_given_ipt");case 22:return d=o.sent,o.next=25,h("tx_screened_for_tb");case 25:b=o.sent,i.addAggregation("txNew",r,u),i.addAggregation("txCurr",r,l),i.addAggregation("txGivenIpt",r,d),i.addAggregation("txScreenTB",r,b);case 30:o.t0=i.report.getGender(),o.next="breastfeeding"===o.t0?33:"pregnant"===o.t0?36:39;break;case 33:return i.report.setAgeGroup("All"),i.report.setGender("Fbf"),o.abrupt("break",39);case 36:return i.report.setAgeGroup("All"),i.report.setGender("FP"),o.abrupt("break",39);case 39:return i.sortIndexes[e]||(i.sortIndexes[e]=[]),o.t1=i.sortIndexes[e],o.t2=[N["a"].td(n[c]),N["a"].td(r),i.drill(u,"Tx new (new on ART) | ".concat(f," | ").concat(r)),i.drill(l,"Tx curr (receiving ART) | ".concat(f," | ").concat(r)),i.drill(d,"TX curr (received IPT) | ".concat(f," | ").concat(r)),i.drill(b,"TX curr (screened for TB) | ".concat(f," | ").concat(r))],o.t3=p["a"],o.next=45,i.getRegimenRows(f,r);case 45:o.t4=o.sent,o.t5=(0,o.t3)(o.t4),o.t6=o.t2.concat.call(o.t2,o.t5),o.t1.push.call(o.t1,o.t6);case 49:case"end":return o.stop()}}),o)})),c.t0=regeneratorRuntime.keys(n);case 3:if((c.t1=c.t0()).done){c.next=8;break}return l=c.t1.value,c.delegateYield(u(l),"t2",6);case 6:c.next=3;break;case 8:case"end":return c.stop()}}),c)})))()},setHeaderInfoList:function(e){var t=this;this.headerList=[{label:"Total Alive and on ART",value:e.length,other:{onclick:function(){return t.runTableDrill(e,"Total Alive on ART")}}}]},validateReport:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.getTotals((function(e){return"txCurr"===e.col&&e.gender.match(/male|female/i)})),e.setHeaderInfoList(n),r={total_alive_and_on_art:{param:n.length,check:function(e,t){return e!=t},error:function(e,t){return"\n                        Total alive of <b>".concat(t,"</b>\n                        Does not match total alive of <b>").concat(e,"</b> on MOH report\n                    ")}}},a=e.mohCohort.validateIndicators(r,(function(t){return e.errors=t})),-1===a&&(e.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"]);case 5:case"end":return t.stop()}}),t)})))()}}});const ga=T()(ha,[["render",ma]]);var va=ga;function Oa(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!1},reportPrefix:"MoH",hasServerSideCaching:!0,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var ja=n("8bab"),_a={style:{borderRight:"5px solid black !important"}},wa=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"Survival analysis report",totalClients:[],rows:[],columns:[[N["a"].thTxt("Reg cohort"),N["a"].thTxt("Interval (months)"),N["a"].thTxt("Sub group"),N["a"].thTxt("Total Reg (database)"),N["a"].thTxt("Total Reg (Confirmed)",_a),N["a"].thTxt("Alive"),N["a"].thTxt("Died"),N["a"].thTxt("Defaulted"),N["a"].thTxt("Stopped"),N["a"].thTxt("TO"),N["a"].thTxt("Unknown")]]}},created:function(){this.fields=[].concat(Object(p["a"])(this.getDateDurationFields(!0,!1,17)),[{id:"group",helpText:"Select sub-group",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return[{label:"General",value:ja["a"].GENERAL},{label:"Children",value:ja["a"].CHILDREN},{label:"Option B+",value:ja["a"].WOMEN}]}}])},methods:{onPeriod:function(e,t){var n=arguments,r=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var a,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.quarter,o=e.group,i=n.length>2&&void 0!==n[2]&&n[2],r.rows=[],r.period=a.label,r.report=new ja["b"],r.report.setRegenerate(i),r.report.setQuarter(a.label),r.report.setAgeGroup(o.value),t.next=10,r.report.getSurvivalAnalysis();case 10:c=t.sent,r.rows=r.getRows(c);case 12:case"end":return t.stop()}}),t)})))()},getRows:function(e){var t=this;return Object.keys(e).filter((function(t){return!Object(O["isEmpty"])(e[t])})).sort((function(e,t){var n=e.split(" "),a=Object(r["a"])(n,2),o=(a[0],a[1]),i=t.split(" "),c=Object(r["a"])(i,2),s=(c[0],c[1]);return parseInt(o)-parseInt(s)})).map((function(n){var r=e[n],a=0,o=0,i={"On antiretrovirals":0,Defaulted:0,"Patient died":0,"Treatment stopped":0,"Patient transferred out":0,unknown:0};if(!Object(O["isEmpty"])(r)){for(var c in r){var s=r[c];for(var u in s){var l=s[u];a=parseInt(u),c in i?i[c]=l:i["unknown"]=l,o+=l}}return[N["a"].td(n),N["a"].td(a),N["a"].td(t.report.getAgeGroup()),N["a"].td(o),N["a"].td("",_a),N["a"].td(i["On antiretrovirals"]),N["a"].td(i["Patient died"]),N["a"].td(i["Defaulted"]),N["a"].td(i["Treatment stopped"]),N["a"].td(i["Patient transferred out"]),N["a"].td(i["unknown"])]}}))}}});const ka=T()(wa,[["render",Oa]]);var ya=ka;function xa(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{reportPrefix:"MoH",title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.showStatus,headerInfoList:e.headerList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])]})),_:1})}var Na=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"TPT new initiations report",rows:[],cohort:{},canValidate:!1,mohCohort:{},headerList:[],errors:[],showStatus:!1,columns:[[N["a"].thTxt("District"),N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thNum("3HP (Started New on ART)"),N["a"].thNum("6H (Started New on ART)"),N["a"].thNum("3HP (Started Previously on ART)"),N["a"].thNum("6H (Started Previously on ART)")]],totalIpt:[],total3hp:[]}},watch:{canValidate:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.validateReport();case 3:case"end":return n.stop()}}),n)})))()}},created:function(){this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.canValidate=!1,n.rows=[],n.errors=[],n.showStatus=!1,n.totalIpt=[],n.total3hp=[],n.report=new Bn["d"],n.mohCohort=new Nn["a"],n.mohCohort.setStartDate(t.start_date),n.mohCohort.setEndDate(t.end_date),n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=15,n.report.getTptNewInitiations();case 15:n.cohort=e.sent,n.setRows("F"),n.setRows("M"),n.canValidate=!0,n.showStatus=!0;case 20:case"end":return e.stop()}}),e)})))()},drilldown:function(e,t){var n=this,r=[[N["a"].thTxt("ARV #"),N["a"].thTxt("DOB"),N["a"].thTxt("Dispensed date")]],a=function(){return n.sortByArvNumber(e).map((function(e){return[N["a"].td(e.arv_number),N["a"].tdDate(e.birthdate),N["a"].tdDate(e.dispensation_date)]}))};return e.length<=0?N["a"].td(0):N["a"].tdLink(e.length,(function(){return n.drilldownAsyncRows(t,r,a)}))},setRows:function(e){var t="M"===e?"Males":"Females";for(var n in xn["a"]){var r=xn["a"][n],a=this.cohort["Location"];if(!Object(O["isEmpty"])(this.cohort)&&r in this.cohort&&n){var o=this.cohort[r];this.total3hp=Object(O["uniq"])([].concat(Object(p["a"])(this.total3hp),Object(p["a"])(o["3HP_new"][e]),Object(p["a"])(o["3HP_prev"][e]))),this.totalIpt=Object(O["uniq"])([].concat(Object(p["a"])(this.totalIpt),Object(p["a"])(o["6H_new"][e]),Object(p["a"])(o["6H_prev"][e]))),this.rows.push([N["a"].td(a),N["a"].td(r),N["a"].td(e),this.drilldown(o["3HP_new"][e],"".concat(r," ").concat(t," New on 3HP")),this.drilldown(o["6H_new"][e],"".concat(r," ").concat(t," New on 6H")),this.drilldown(o["3HP_prev"][e],"".concat(r," ").concat(t," Previously on 3HP")),this.drilldown(o["6H_prev"][e],"".concat(r," ").concat(t," Previously on 6H"))])}else this.rows.push([N["a"].td(r),N["a"].td(e),N["a"].td(0),N["a"].td(0)])}},validateReport:function(){var e=this,t={newly_initiated_on_3hp:{param:this.total3hp.length,check:function(e,t){return e!=t},error:function(e,t){return"\n                        Total newly initiated on <b>3HP(".concat(t,")</b> is not matching newly \n                        initiated on 3HP in Cohort report <b>(").concat(e,")</b>.\n                    ")}},newly_initiated_on_ipt:{param:this.totalIpt.length,check:function(e,t){return e!=t},error:function(e,t){return"\n                        Total newly initiated on IPT <b>(".concat(t,")</b> is not matching \n                        newly initiated on IPT in Cohort report <b>(").concat(e,")</b>.\n                    ")}}},n=this.mohCohort.validateIndicators(t,(function(t){return e.errors=t}));-1===n&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});const Ca=T()(Na,[["render",xa]]);var Va=Ca;function Da(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"MoH",config:{showIndex:!0},validationErrors:e.errors,showValidationStatus:e.showStatus,headerInfoList:e.headerInfoList,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","validationErrors","showValidationStatus","headerInfoList","onReportConfiguration"])]})),_:1})}var Ta=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"Moh TX CURR MMD Report",cohort:{},rows:[],headerInfoList:[],totals:new Set,mohCohort:{},errors:[],showStatus:!1,columns:[[N["a"].thTxt("Age group"),N["a"].thTxt("Gender"),N["a"].thNum("# of clients on <3 months of ARVs"),N["a"].thNum("# of clients on 3 - 5 months of ARVs"),N["a"].thNum("# of clients on >= 6 months of ARVs")]],canValidate:!1}},created:function(){this.fields=this.getDateDurationFields()},watch:{canValidate:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=3;break}return n.next=3,t.validateReport();case 3:case"end":return n.stop()}}),n)})))()}},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.canValidate=!1,n.rows=[],n.errors=[],n.showStatus=!1,n.report=new rr["a"],n.mohCohort=new Nn["a"],n.mohCohort.setStartDate(t.start_date),n.mohCohort.setEndDate(t.end_date),n.report.setOrg("moh"),n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=14,n.setRows();case 14:n.setHeaderInfoList(),n.canValidate=!0,n.showStatus=!0;case 17:case"end":return e.stop()}}),e)})))()},setHeaderInfoList:function(){var e=this;this.headerInfoList=[{label:"Total clients",value:this.totals.size,other:{onclick:function(){return e.runTableDrill(Array.from(e.totals),"Total Clients")}}}]},getValues:function(e,t){var n=[],r=[],a=[];for(var o in e){var i=e[o],c=i.prescribed_days;this.totals.add(o),c<90&&n.push(o),c>=90&&c<=150&&r.push(o),c>150&&a.push(o)}return[this.drill(n,"".concat(t," < 3 months of Arvs")),this.drill(r,"".concat(t," 3-5 months of Arvs")),this.drill(a,"".concat(t," > 6 months months of Arvs"))]},setRows:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,a,o,i,c,s,u,l,d,b,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=0,a=0,o=[],i=[],t.t0=regeneratorRuntime.keys(xn["a"]);case 5:if((t.t1=t.t0()).done){t.next=17;break}return c=t.t1.value,s=xn["a"][c],"<1 year"===s?(n=0,a=0):"90 plus years"===s?(n=90,a=120):(u=s.split("-"),l=Object(r["a"])(u,2),d=l[0],b=l[1],n=parseInt(d),a=parseInt(b)),t.next=11,e.report.getTxCurrMMDReport(n,a);case 11:f=t.sent,e.report.initArvRefillPeriod(!1),f?(i.push([N["a"].td(s),N["a"].td("Female")].concat(Object(p["a"])(e.getValues(f["Female"],"".concat(s," (F)"))))),o.push([N["a"].td(s),N["a"].td("Male")].concat(Object(p["a"])(e.getValues(f["Male"],"".concat(s," (M)")))))):(i.push([N["a"].td(s),N["a"].td("Female"),N["a"].td(0),N["a"].td(0),N["a"].td(0)]),o.push([N["a"].td(s),N["a"].td("Male"),N["a"].td(0),N["a"].td(0),N["a"].td(0)])),e.rows=[].concat(i,o),t.next=5;break;case 17:case"end":return t.stop()}}),t)})))()},validateReport:function(){var e=this,t={total_alive_and_on_art:{param:this.totals.size,check:function(e,t){return e!=t},error:function(e,t){return"\n                        MoH cohort Alive and on ART clients <b>(".concat(e,")</b> is not\n                        matching with total TX MMD clients <b(").concat(t,").</b>\n                    ")}}},n=this.mohCohort.validateIndicators(t,(function(t){return e.errors=t}));-1===n&&(this.errors=["Report not validated. Run the MoH cohort report for similar reporting period and then run this report"])}}});const Ia=T()(Ta,[["render",Da]]);var Ra=Ia;function Sa(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,reportPrefix:"MoH",config:{showIndex:!1},enabledPDFHorizontalPageBreak:!0,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var Pa=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{rows:[],title:"Regimen distribution (Weight)",columns:[]}},created:function(){this.columns=[[N["a"].thTxt("Weight band"),N["a"].thTxt("Gender")].concat(Object(p["a"])(Bn["c"].map((function(e){return N["a"].thNum(e)}))),[N["a"].thNum("Unknown"),N["a"].thNum("Total (regimen)")])],this.fields=this.getDateDurationFields()},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.rows=[],n.report=new Bn["d"],n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.next=7,n.report.getRegimensByWeight();case 7:return r=e.sent,e.next=10,n.setRows(r);case 10:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=function(e){return[].concat(Object(p["a"])(Bn["c"]),["N/A"]).map((function(t){var n=e.filter((function(e){return!!e[t]})).map((function(e){return Object.values(e)[0]}));return N["a"].td(Object(O["isEmpty"])(n)?0:n[0])}))},a=function(e){return e.reduce((function(e,t){return e+t.td}),0)},Bn["e"].forEach((function(n){var o=e.filter((function(e){return e.weight===n}));o.forEach((function(e){var o=r(e.males),i=r(e.females),c=[N["a"].td(n),N["a"].td("Male")].concat(Object(p["a"])(o),[N["a"].td(a(o))]),s=[N["a"].td(n),N["a"].td("Female")].concat(Object(p["a"])(i),[N["a"].td(a(i))]);if(t.rows.push(c),t.rows.push(s),!Object(O["isEmpty"])(e.unknown_gender)){var u=r(e.unknown_gender),l=a(u);t.rows.push([N["a"].td(n),N["a"].td("Unknown Gender")].concat(Object(p["a"])(u),[N["a"].td(l)]))}}))}));case 3:case"end":return n.stop()}}),n)})))()}}});const Aa=T()(Pa,[["render",Sa]]);var Ea=Aa,Ba={id:"report-content"},Fa=Object(i["createVNode"])("div",{id:"print"},null,-1);function La(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-loading"),s=Object(i["resolveComponent"])("his-standard-form"),u=Object(i["resolveComponent"])("cohort-v"),l=Object(i["resolveComponent"])("cohort-h"),d=Object(i["resolveComponent"])("cohort-ft"),p=Object(i["resolveComponent"])("ion-content"),b=Object(i["resolveComponent"])("his-footer"),f=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Object(i["createVNode"])(c,{"is-open":e.isLoading,message:"Please wait..."},null,8,["is-open"]),e.reportReady?Object(i["createCommentVNode"])("",!0):(Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:0,onOnFinish:e.onPeriod,skipSummary:!0,fields:e.fields},null,8,["onOnFinish","fields"])),e.reportReady?(Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:1},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,{key:e.componentKey,indicators:e.indicators},null,8,["indicators"]),Object(i["createVNode"])("div",Ba,[Object(i["createVNode"])(l,{key:e.componentKey,reportparams:e.period,clinicName:e.clinicName},null,8,["reportparams","clinicName"]),Object(i["createVNode"])(d,{key:e.componentKey,onOnClickIndicator:e.onDrillDown,indicators:e.indicators},null,8,["onOnClickIndicator","indicators"])])]})),_:1}),Object(i["createVNode"])(b,{btns:e.btns},null,8,["btns"])]})),_:1})):Object(i["createCommentVNode"])("",!0),Fa],64)}var Ma=n("bdc2"),Ha=n("364b"),Ua=n("0795"),qa=n("bef6"),Ga=n("ba82"),za=Object(i["defineComponent"])({mixins:[kn["a"]],components:{IonLoading:ge["z"],CohortH:Ma["a"],CohortV:Ha["a"],CohortFt:Ua["a"],HisStandardForm:J["a"],HisFooter:hn["a"],IonPage:ge["F"],IonContent:ge["n"]},data:function(){return{formData:{},componentKey:0,computedFormData:{},indicators:{},cohort:{},btns:[],isLoading:!1,fields:[],reportID:-1,clinicName:Nn["a"].getLocationName(),reportReady:!1,disaggregatedReportParams:"",startDate:"",endDate:"",quarter:""}},created:function(){this.btns=this.getBtns(),this.fields=this.getDateDurationFields(!0,!0,21,null)},methods:{onPeriod:function(e,t){var n=arguments,r=this;return Object(a["a"])(regeneratorRuntime.mark((function o(){var i,c,s,u;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return i=n.length>2&&void 0!==n[2]&&n[2],r.componentKey+=1,r.formData=e,r.computedFormData=t,r.reportReady=!0,r.isLoading=!0,r.report=new Nn["a"],r.report.setRegenerate(i),c={},"custom_period"===e.quarter.value?(r.quarter="Custom",r.startDate=t.start_date,r.endDate=t.end_date):(r.quarter=e.quarter.label,r.startDate=g["b"].toStandardHisFormat(e.quarter.other.start),r.endDate=g["b"].toStandardHisFormat(e.quarter.other.end)),r.report.setQuarter(r.quarter),r.report.setStartDate(r.startDate),r.report.setEndDate(r.endDate),"Custom"===r.quarter?(r.period="Custom ".concat(r.report.getDateIntervalPeriod()),c=r.report.datePeriodRequestParams()):(r.period=r.quarter,c=r.report.qaurterRequestParams()),r.disaggregatedReportParams=qa["a"].parameterizeObjToString({start_date:r.startDate,end_date:r.endDate,quarter:r.quarter}),o.next=17,r.report.requestCohort(c);case 17:s=o.sent,s.ok&&(u=setInterval(Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c.regenerate=!1,e.next=3,r.report.requestCohort(c);case 3:if(t=e.sent,200!==t.status){e.next=14;break}return e.next=7,t.json();case 7:n=e.sent,r.reportID=n.id,r.cohort=n.values,r.indicators=r.toIndicators(n.values),r.isLoading=!1,r.report.cacheCohort(n.values),clearInterval(u);case 14:case"end":return e.stop()}}),e)}))),3e3));case 19:case"end":return o.stop()}}),o)})))()},toIndicators:function(e){return e.reduce((function(e,t){return e[t.name]=parseInt(t.contents),e}),{})},printSpec:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=open("","","width:1024px, height:768px"),n=document.getElementById("report-content"),n&&t&&(t.document.write('\n            <html>\n              <head>\n                <title>Print Cohort</title>\n                <link rel="stylesheet" media="print" href="/assets/css/cohort.css" />\n              </head>\n              <body>\n                '.concat(n.innerHTML,"\n              </body>\n            </html>\n          ")),setTimeout((function(){t.print(),t.close()}),3500));case 3:case"end":return e.stop()}}),e)})))()},regenerate:function(){this.onPeriod(this.formData,this.computedFormData,!0)},onDrillDown:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=Object(O["find"])(t.cohort,{name:e}),r){n.next=3;break}return n.abrupt("return");case 3:return o=r.id,i=[[N["a"].thTxt("ARV number"),N["a"].thTxt("Name",{exportable:!1}),N["a"].thTxt("Gender"),N["a"].thTxt("Birth Date"),N["a"].thTxt("Outcome"),N["a"].thTxt("Action")]],c=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,t.report.getCohortDrillDown(o);case 3:if(e.t1=e.sent,e.t1){e.next=6;break}e.t1=[];case 6:return e.t2=e.t1,n=e.t0.sortByArvNumber.call(e.t0,e.t2,"arv_number"),e.abrupt("return",n.map((function(e){return[t.tdARV(e["arv_number"]),N["a"].td("".concat(e["given_name"]," ").concat(e["family_name"])),N["a"].td(e["gender"]),N["a"].td("".concat(g["b"].toStandardHisDisplayFormat(e["birthdate"])," (").concat(g["b"].getAgeInYears(e["birthdate"]),")")),N["a"].td(e["outcome"]||"N/A"),N["a"].tdBtn("Select",Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ge["cb"].dismiss({});case 2:t.$router.push({path:"/patient/dashboard/".concat(e.person_id)});case 3:case"end":return n.stop()}}),n)}))))]})));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.next=8,t.drilldownAsyncRows(r.description,i,c);case 8:case"end":return n.stop()}}),n)})))()},exportToCsv:function(){var e=this,t=["Indicator","Value"],n=Object.keys(this.indicators).map((function(t){return[t,e.indicators[t]]})),r="".concat(At["e"].getLocationName()," cohort report ").concat(this.period);Object(Ga["a"])([t],[].concat(Object(p["a"])(n),[["Date Created: ".concat(z()().format("DD/MMM/YYYY HH:MM:ss"))],["Quarter: "+(this.quarter.match(/custom/i)?"".concat(this.startDate," - ").concat(this.endDate):this.quarter)],["HIS-Core Version: ".concat(At["e"].getCoreVersion())],["API Version: ".concat(At["e"].getApiVersion())],["Site: ".concat(At["e"].getLocationName())],["Site UUID: ".concat(At["e"].getSiteUUID())]]),r)},getBtns:function(){var e=this;return[{name:"CSV",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){return e.exportToCsv()}},{name:"PDF",size:"large",slot:"start",color:"primary",visible:!0,onClick:function(){return e.printSpec()}},{name:"Regenerate",size:"large",slot:"end",color:"danger",visible:!0,onClick:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.regenerate());case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{name:"Disaggregeted",size:"large",slot:"end",color:"primary",visible:!0,onClick:function(){return e.$router.push("/art/moh_disaggregated_report?".concat(e.disaggregatedReportParams))}},{name:"Finish",size:"large",slot:"end",color:"success",visible:!0,onClick:function(){return e.$router.push({path:"/"})}}]}}});const Ya=T()(za,[["render",La]]);var Wa=Ya;function $a(e,t){var n=Object(i["resolveComponent"])("router-view");return Object(i["openBlock"])(),Object(i["createBlock"])(n)}const Ka={},Ja=T()(Ka,[["render",$a]]);var Xa=Ja;function Qa(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,rows:e.rows,columns:e.columns},null,8,["title","rows","columns"])}var Za=n("91e4"),eo=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:da["a"]},data:function(){return{title:"HIV Stock report",rows:[],stock:[],columns:[[N["a"].thTxt("Medication"),N["a"].thTxt("Earliest Expiry date"),N["a"].thTxt("Stock on hand(Tins)")]]}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.report=new Za["a"],t.next=3,e.report.loadStock();case 3:n=e.report.groupStock(),n.forEach((function(t){e.rows.push([N["a"].td(t.drugName),N["a"].tdDate(t.expiryDate),N["a"].td(t.currentQuantity)])}));case 5:case"end":return t.stop()}}),t)})))()}});const to=T()(eo,[["render",Qa]]);var no=to;function ro(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showtitleOnly:!0,config:{showIndex:!1},onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var ao=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"Booked clients",date:"",rows:[],appointments:[],columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("First name",{exportable:!1}),N["a"].thTxt("Last name",{exportable:!1}),N["a"].thTxt("Gender"),N["a"].thTxt("birthdate"),N["a"].thTxt("Current Address",{exportable:!1}),N["a"].thTxt("Actions")]]}},created:function(){var e=this;this.report=new xn["b"],this.fields=[{id:"date",helpText:"Select date",type:b["b"].TT_APPOINTMENT_PICKER,defaultValue:function(){return xn["b"].getSessionDate()},validation:function(e){return f["a"].required(e)},onValue:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.report.getBookedAppointments(n);case 2:return a=t.sent,e.appointments=Object(O["isEmpty"])(a)?[]:a,r.appointmentCounter=e.appointments.length,t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}]},methods:{onPeriod:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.rows=[],t.period=g["b"].toStandardHisDisplayFormat(e.date),t.setRows(t.appointments);case 3:case"end":return n.stop()}}),n)})))()},setRows:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.sortByArvNumber(e).forEach((function(e){t.rows.push([t.tdARV(e.arv_number||"N/A"),N["a"].td(e.given_name),N["a"].td(e.family_name),N["a"].td(e.gender),N["a"].tdDate(e.birthdate),N["a"].td("District: <br/> <b>".concat(e.district,"</b><br/>\n                        Village: <br/> <b>").concat(e.village,"</b><br/>\n                        Land-mark: <br/> <b>").concat(e.land_mark,"</b><br/>\n                        Cellphone: <br/> <b>").concat(e.cell_phone,"</b>")),N["a"].tdBtn("Select",(function(){return t.confirmPatient(e.person_id)}))])}));case 1:case"end":return n.stop()}}),n)})))()}}});const oo=T()(ao,[["render",ro]]);var io=oo;function co(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template"),s=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(s,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,showFilters:!0,onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","onReportConfiguration"])]})),_:1})}var so=n("df95"),uo=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"],IonPage:ge["F"]},data:function(){return{title:"Data cleaning report",rows:[],columns:[]}},created:function(){var e=this;this.fields=[{id:"indicator",helpText:"Select indicator",type:b["b"].TT_SELECT,requireNext:!1,validation:function(e){return f["a"].required(e)},options:function(){return e.getIndicatorOptions()}}].concat(Object(p["a"])(Object(A["b"])({id:"start_date",helpText:"Start",required:!0,condition:function(e){return!e.indicator.other.skipDateSelection},minDate:function(){return"2001-01-01"},maxDate:function(){return At["e"].getSessionDate()},estimation:{allowUnknown:!1},computeValue:function(e){return e}})),Object(p["a"])(Object(A["b"])({id:"end_date",helpText:"End",required:!0,condition:function(e){return!e.indicator.other.skipDateSelection},minDate:function(e,t){return t.start_date},maxDate:function(){return At["e"].getSessionDate()},estimation:{allowUnknown:!1},computeValue:function(e){return e}})))},methods:{onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.rows=[],n.title=e.indicator.label,a=e.indicator,n.columns=a.other.columns,r.next=6,a.other.setRows(e,t);case 6:case"end":return r.stop()}}),r)})))()},masterCardBtn:function(e){var t=this;return N["a"].tdBtn("View",(function(){return t.$router.push("/art/mastercard/".concat(e))}))},getDefaultIndicatorColumns:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[[N["a"].thTxt("ARV Number"),N["a"].thTxt("Patient Id"),N["a"].thTxt("First Name"),N["a"].thTxt("Last Name"),N["a"].thTxt("Gender"),N["a"].thTxt("Date of birth")].concat(Object(p["a"])(e),[N["a"].thTxt("Action")])]},setDefaultIndicatorRows:function(e,t,n){var r=arguments,o=this;return Object(a["a"])(regeneratorRuntime.mark((function a(){var i,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=r.length>3&&void 0!==r[3]?r[3]:null,o.report=new so["b"],o.report.setStartDate(t),o.report.setEndDate(n),o.period=o.report.getDateIntervalPeriod(),a.t0=o,a.next=8,o.report.getCleaningToolReport(e);case 8:if(a.t1=a.sent,a.t1){a.next=11;break}a.t1=[];case 11:a.t2=a.t1,c=a.t0.sortByArvNumber.call(a.t0,a.t2,"arv_number"),Object(O["isEmpty"])(c)||c.forEach((function(e){var t="function"===typeof i?i(e):[];o.rows.push([N["a"].td(e.arv_number),N["a"].td(e.patient_id),N["a"].td(e.given_name),N["a"].td(e.family_name),N["a"].td(e.gender),N["a"].tdDate(e.birthdate)].concat(Object(p["a"])(t),[o.masterCardBtn(e.patient_id)]))}));case 14:case"end":return a.stop()}}),a)})))()},getIndicatorOptions:function(){var e=this;return[{label:"DOB > Date enrolled",value:so["a"].DobMoreThanEnrolledDate,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:function(t,n){return e.setDefaultIndicatorRows(so["a"].DobMoreThanEnrolledDate,n.start_date,n.end_date)}}},{label:"Date enrolled < Earliest start date",value:so["a"].DateEnrolledLessThanEarliestStartDate,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns([N["a"].thTxt("Earliest start date"),N["a"].thTxt("Date enrolled")]),setRows:function(t,n){return e.setDefaultIndicatorRows(so["a"].DateEnrolledLessThanEarliestStartDate,n.start_date,n.end_date,(function(e){return[N["a"].tdDate(e.earliest_start_date),N["a"].tdDate(e.date_enrolled)]}))}}},{label:"Encounters after Death",value:so["a"].ClientsWithEncountersAfterDeath,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:function(t,n){return e.setDefaultIndicatorRows(so["a"].ClientsWithEncountersAfterDeath,n.start_date,n.end_date)}}},{label:"Incomplete visits",value:"Incomplete visits",other:{skipDateSelection:!1,columns:[[N["a"].thTxt("ARV#"),N["a"].thTxt("NHID"),N["a"].thTxt("First name"),N["a"].thTxt("Last name"),N["a"].thTxt("Gender"),N["a"].thTxt("Birthdate"),N["a"].thTxt("Date(s)"),N["a"].thTxt("Action")]],setRows:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n,r){var a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.report=new so["b"],e.report.setStartDate(r.start_date),e.report.setEndDate(r.end_date),e.period=e.report.getDateIntervalPeriod(),t.next=6,e.report.getIncompleteVisits();case 6:for(o in a=t.sent,a)i=a[o],e.rows.push([N["a"].td(i.arv_number),N["a"].td(i.national_id),N["a"].td(i.given_name),N["a"].td(i.family_name),N["a"].td(i.gender),N["a"].tdDate(i.birthdate),N["a"].td(i.dates.map((function(t){return e.toDate(t)})).join("<br/>")),e.masterCardBtn(parseInt(o.toString()))]);case 8:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()}},{label:"Enrolled on ART before birth",value:"Enrolled on ART before birth",other:{skipDateSelection:!0,columns:[[N["a"].thTxt("ARV number"),N["a"].thTxt("Name"),N["a"].thTxt("Earliest start date"),N["a"].thTxt("Date enrolled"),N["a"].thTxt("Gender"),N["a"].thTxt("Birth Date"),N["a"].thTxt("Action")]],setRows:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.report=new so["b"],t.next=4,e.report.getEnrolledOnArtBeforeBirth();case 4:n=t.sent,n.forEach((function(t){e.rows.push([N["a"].td(t.identifier),N["a"].td(t.name),N["a"].tdDate(t.earliest_start_date),N["a"].tdDate(t.date_enrolled),N["a"].td(t.gender),N["a"].tdDate(t.birthdate),e.masterCardBtn(t.patient_id)])})),t.next=12;break;case 8:if(t.prev=8,t.t0=t["catch"](0),t.t0 instanceof At["c"]){t.next=12;break}throw t.t0;case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));function n(){return t.apply(this,arguments)}return n}()}},{label:"Male patients with female observations",value:so["a"].MalesWithFemaleObs,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns([N["a"].thTxt("Visit date")]),setRows:function(t,n){return e.setDefaultIndicatorRows(so["a"].MalesWithFemaleObs,n.start_date,n.end_date,(function(e){return[N["a"].tdDate(e.visit_date)]}))}}},{label:"Missing important demographics elements",value:so["a"].MissingDemographics,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:function(t,n){return e.setDefaultIndicatorRows(so["a"].MissingDemographics,n.start_date,n.end_date)}}},{label:"Missing start reason",value:so["a"].MissingStartReasons,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:function(t,n){return e.setDefaultIndicatorRows(so["a"].MissingStartReasons,n.start_date,n.end_date)}}},{label:"Multiple start reasons",value:so["a"].MultipleStartReasons,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:function(t,n){return e.setDefaultIndicatorRows(so["a"].MultipleStartReasons,n.start_date,n.end_date)}}},{label:"Patients with Pre-ART / Unknown outcome",value:so["a"].PreArtOrUnknownOutcomes,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns(),setRows:function(t,n){return e.setDefaultIndicatorRows(so["a"].PreArtOrUnknownOutcomes,n.start_date,n.end_date)}}},{label:"Prescriptions without dispensations",value:so["a"].PrescriptionWithoutDispensation,other:{skipDateSelection:!1,columns:this.getDefaultIndicatorColumns([N["a"].thTxt("Visit Date")]),setRows:function(t,n){return e.setDefaultIndicatorRows(so["a"].PrescriptionWithoutDispensation,n.start_date,n.end_date,(function(e){return[N["a"].tdDate(e.visit_date)]}))}}}]}}});const lo=T()(uo,[["render",co]]);var po=lo;function bo(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{fields:e.fields,skipSummary:!0,onFinishAction:e.onFinish},null,8,["fields","onFinishAction"])}var fo=Object(i["defineComponent"])({mixins:[j["a"]],components:{HisStandardForm:J["a"]},data:function(){return{consultation:{}}},watch:{ready:{handler:function(e){e&&(this.consultation=new be["a"](this.patientID,this.providerID),this.fields=this.getFields())},immediate:!0}},methods:{onFinish:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.consultation.createEncounter();case 2:return e.next=4,n.resolveObs(t);case 4:return r=e.sent,e.next=7,n.consultation.saveObservationList(r);case 7:n.$router.back();case 8:case"end":return e.stop()}}),e)})))()},getFields:function(){var e=this;return[{id:"has_hypertension",helpText:"Does the patient have hypertension",type:b["b"].TT_SELECT,options:function(){return e.yesNoOptions()},validation:function(e){return f["a"].required(e)},computedValue:function(e){return Pt["a"].buildValueCoded("Patient has hypertension","".concat(e.value))}}].concat(Object(p["a"])(Object(A["b"])({condition:function(e){return"Yes"===e.has_hypertension.value},id:"hypertension_diagnosis",helpText:"Date the patient was diagnosed with hypertension",required:!0,estimation:{allowUnknown:!1},computeValue:function(e){return Pt["a"].buildValueDate("Hypertension diagnosis date",e)}},be["a"].getSessionDate())))}}});const mo=T()(fo,[["render",bo]]);var ho=mo,go=Object(i["withScopeId"])("data-v-7217b18a");Object(i["pushScopeId"])("data-v-7217b18a");var vo=Object(i["createVNode"])("label",{class:"his-title"}," Prescribe BP drugs ",-1),Oo={key:0,class:"view-port-content"},jo={id:"main-table",style:{width:"100%"}},_o=Object(i["createVNode"])("th",null," ",-1),wo=Object(i["createVNode"])("td",{class:"td-remaining td-title"},[Object(i["createVNode"])("span",null,"New/Current")],-1),ko=Object(i["createVNode"])("td",{class:"td-remaining td-title"},[Object(i["createVNode"])("span",null," ")],-1),yo=Object(i["createTextVNode"])(" Add notes "),xo=Object(i["createVNode"])("p",null,null,-1),No={id:"table-notes",style:{width:"100%"}},Co=Object(i["createVNode"])("caption",{style:{"font-size":"1.2em"}}," Notes ",-1),Vo=Object(i["createVNode"])("p",null,null,-1),Do={class:"table-inner-notes",id:"notes-HCZ"},To={class:"date-td today-td"},Io={class:"date-td today-td"},Ro=Object(i["createTextVNode"])(" X "),So=Object(i["createTextVNode"])(" cancel "),Po=Object(i["createTextVNode"])(" Clear Session Prescription "),Ao=Object(i["createTextVNode"])(" Continue ");Object(i["popScopeId"])();var Eo=go((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-col"),s=Object(i["resolveComponent"])("ion-row"),u=Object(i["resolveComponent"])("ion-toolbar"),l=Object(i["resolveComponent"])("ion-header"),d=Object(i["resolveComponent"])("ion-checkbox"),p=Object(i["resolveComponent"])("ion-button"),b=Object(i["resolveComponent"])("view-port"),f=Object(i["resolveComponent"])("ion-content"),m=Object(i["resolveComponent"])("ion-footer"),h=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(h,null,{default:go((function(){return[Object(i["createVNode"])(l,null,{default:go((function(){return[Object(i["createVNode"])(u,null,{default:go((function(){return[Object(i["createVNode"])(s,null,{default:go((function(){return[Object(i["createVNode"])(c,null,{default:go((function(){return[vo]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(f,null,{default:go((function(){return[Object(i["createVNode"])(b,null,{default:go((function(){return[e.drugs?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Oo,[Object(i["createVNode"])("table",jo,[Object(i["createVNode"])("tr",null,[_o,(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])("th",{key:t},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t)+" ",1),Object(i["createVNode"])(s,null,{default:go((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(c,{class:"col-borders",key:t},{default:go((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.amount||"0mg"),1)]})),_:2},1024)})),128))]})),_:2},1024)])})),128))]),Object(i["createVNode"])("tr",null,[wo,(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])("td",{key:n,class:"td-current td-value"},[Object(i["createVNode"])(s,null,{default:go((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(t.drugs,(function(t,r){return Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:r},{default:go((function(){return[Object(i["createVNode"])(d,{checked:t.selected,onIonChange:function(t){return e.selectDrug(n,r,t)}},null,8,["checked","onIonChange"])]})),_:2},1024)})),128))]})),_:2},1024)])})),128))]),Object(i["createVNode"])("tr",null,[ko,(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(Object.keys(e.drugs),(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])("td",{class:"td-remaining td-value",key:n},[Object(i["createVNode"])(s,null,{default:go((function(){return[Object(i["createVNode"])(c,null,{default:go((function(){return[Object(i["createVNode"])(p,{onClick:function(n){return e.launchNotePad(t)},color:"warning"},{default:go((function(){return[yo]})),_:1},8,["onClick"])]})),_:1})]})),_:1})])})),128))])]),xo,Object(i["createVNode"])("table",No,[Co,Vo,Object(i["createVNode"])("tr",null,[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])("th",{style:{width:"25%"},key:t},[Object(i["createVNode"])("span",null,Object(i["toDisplayString"])(t),1)])})),128))]),Object(i["createVNode"])("tr",null,[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(Object.keys(e.drugs),(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])("td",{id:"HCZ",style:{"padding-top":"2px !important"},valign:"top",key:n},[Object(i["createVNode"])("table",Do,[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs[t].notes,(function(n,r){return Object(i["openBlock"])(),Object(i["createBlock"])("tr",{key:r},[Object(i["createVNode"])("td",To,Object(i["toDisplayString"])(n.date),1),Object(i["createVNode"])("td",Io,Object(i["toDisplayString"])(n.description),1),Object(i["createVNode"])("td",null,[n.isNewNote?(Object(i["openBlock"])(),Object(i["createBlock"])(p,{key:0,color:"danger",onClick:function(n){return e.removeNote(t,r)}},{default:go((function(){return[Ro]})),_:1},8,["onClick"])):Object(i["createCommentVNode"])("",!0)])])})),128))])])})),128))])])])):Object(i["createCommentVNode"])("",!0)]})),_:1})]})),_:1}),Object(i["createVNode"])(m,null,{default:go((function(){return[Object(i["createVNode"])(u,{color:"dark"},{default:go((function(){return[Object(i["createVNode"])(p,{size:"large",color:"danger",slot:"start",onClick:e.gotoPatientDashboard},{default:go((function(){return[So]})),_:1},8,["onClick"]),e.canClearHtnSessionPrescription?(Object(i["openBlock"])(),Object(i["createBlock"])(p,{key:0,size:"large",color:"warning",slot:"end",onClick:e.clearPrescriptionInSession},{default:go((function(){return[Po]})),_:1},8,["onClick"])):Object(i["createCommentVNode"])("",!0),e.selectedDrugs&&e.selectedDrugs.length>0?(Object(i["openBlock"])(),Object(i["createBlock"])(p,{key:1,size:"large",color:"success",slot:"end",onClick:e.onFinish},{default:go((function(){return[Ao]})),_:1},8,["onClick"])):Object(i["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})})),Bo=(n("a434"),n("e9c4"),n("0a79")),Fo=n("e6e9"),Lo=Object(i["defineComponent"])({mixins:[j["a"]],components:{ViewPort:Bo["a"],IonToolbar:ge["V"],IonHeader:ge["q"],IonContent:ge["n"],IonRow:ge["J"],IonButton:ge["d"],IonCol:ge["m"],IonFooter:ge["o"],IonPage:ge["F"],IonCheckbox:ge["k"]},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=11;break}return t.HTN=new y["a"](t.patientID,t.providerID),t.drugs=t.HTN.getDrugs(),n.next=5,t.HTN.getCurrentDrugs();case 5:r=n.sent,a=r.drugs,o=r.notes,t.setPreviousBpDrugs(a),t.setPreviousBpNotes(o),t.canClearHtnSessionPrescription=t.patientHasHtnSessionKey();case 11:case"end":return n.stop()}}),n)})))()},immediate:!0}},data:function(){return{HTN:{},drugs:null,canClearHtnSessionPrescription:!1}},methods:{clearPrescriptionInSession:function(){sessionStorage.removeItem(y["b"].Prescription),this.canClearHtnSessionPrescription=!1},patientHasHtnSessionKey:function(){try{var e=sessionStorage.getItem(y["b"].Prescription);if(e){var t=JSON.parse(e);return t[this.patientID]}}catch(n){console.warn(n)}return!1},removeNote:function(e,t,n){this.drugs[e].notes.splice(n,1)},launchNotePad:function(e){var t=this;this.showModal({id:"note",helpText:"Add notes for ".concat(e),type:b["b"].TT_TEXT},(function(n){n&&t.drugs[e].notes.push({date:x["a"].getSessionDate(),description:n.value||"",drugID:t.drugs[e].drugs[0].drugID,isNewNote:!0})}))},onFinish:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=Object.values(e.drugs).filter((function(e){return!Object(O["isEmpty"])(e.notes)})).map((function(e){return e.notes})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return e.isNewNote})).map((function(t){return e.HTN.buildObs("Clinician notes",{value_text:t.description,value_drug:t.drugID})})),Object(O["isEmpty"])(n)){t.next=16;break}return t.prev=2,t.next=5,e.HTN.createEncounter();case 5:return t.t0=e.HTN,t.next=8,Promise.all(n);case 8:return t.t1=t.sent,t.next=11,t.t0.saveObservationList.call(t.t0,t.t1);case 11:t.next=16;break;case 13:return t.prev=13,t.t2=t["catch"](2),t.abrupt("return",Object(h["e"])("Unable to save notes ".concat(t.t2)));case 16:e.gotoTreatment();case 17:case"end":return t.stop()}}),t,null,[[2,13]])})))()},gotoTreatment:function(){var e=this.selectedDrugs.map((function(e){return Object(O["find"])(y["a"].htnDrugReferences(),{drug_id:e.drugID})})),t={};t[this.patientID]=e,sessionStorage.setItem(y["b"].Prescription,JSON.stringify(t)),this.$router.push("/art/encounters/prescriptions/".concat(this.patientID))},showModal:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,ge["cb"].create({component:Fo["a"],backdropDismiss:!1,cssClass:"full-modal",componentProps:{dismissType:"modal",currentField:e,onFinish:t}});case 2:r=n.sent,r.present();case 4:case"end":return n.stop()}}),n)})))()},setPreviousBpNotes:function(e){var t=this,n=function(n){t.drugs[n].notes=Object.keys(e[n]).map((function(t){return e[n][t].map((function(e){return{date:t,description:e,isNewNote:!1}}))})).reduce((function(e,t){return e.concat(t)}),[])};for(var r in e)n(r)},setPreviousBpDrugs:function(e){var t=this;e.forEach((function(e){var n=function(n){t.drugs[n].drugs.forEach((function(r,a){e.drug_id===r.drugID&&(t.drugs[n].drugs[a].current=!0,t.drugs[n].drugs[a].selected=!0,t.drugs[n].selected=e.drug_id)}))};for(var r in t.drugs)n(r)}))},selectDrug:function(e,t,n){var r=this;this.drugs[e].drugs.forEach((function(t,n){r.drugs[e].drugs[n].selected=!1})),this.drugs[e].drugs[t].selected=n.detail.checked}},computed:{selectedDrugs:function(){return this.drugs?Object.values(this.drugs).map((function(e){return e.drugs})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return e.selected})):[]}}});n("c2f2");const Mo=T()(Lo,[["render",Eo],["__scopeId","data-v-7217b18a"]]);var Ho=Mo;function Uo(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-standard-form");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{fields:e.fields,onFinishAction:e.onFinish,skipSummary:!1,cancelDestinationPath:e.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}var qo=n("fde0"),Go=Object(i["defineComponent"])({mixins:[j["a"]],components:{HisStandardForm:J["a"]},data:function(){return{socialHistory:{},obs:[]}},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return t.socialHistory=new qo["a"](t.patientID,t.providerID),n.next=4,t.getFields();case 4:t.fields=n.sent;case 5:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{onFinish:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.socialHistory.createEncounter();case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return",Object(h["e"])("Unable to create encounter"));case 5:return e.next=7,Promise.all(Object(p["a"])(t.obs));case 7:return r=e.sent,e.next=10,t.socialHistory.saveObservationList(r);case 10:if(a=e.sent,a){e.next=13;break}return e.abrupt("return",Object(h["e"])("Unable to save patient observations"));case 13:Object(h["d"])("Observations and encounter created!"),t.nextTask();case 15:case"end":return e.stop()}}),e)})))()},getFields:function(){var e=this;return[{id:"smoking_history",helpText:"Have you ever smoked cigarettes?",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.obs.push(e.socialHistory.buildValueCoded("SMOKE_HIS",n.value));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"number_of_cigarettes",helpText:"Number of cigarettes smoked per day",type:b["b"].TT_NUMBER,validation:function(e){return f["a"].rangeOf(e,1,90)},condition:function(e){return"Yes"===e.smoking_history.value},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.obs.push(e.socialHistory.buildValueNumber("Number of cigarettes smoked per day",n.value));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"smoking_duration",helpText:"How long have you been smoking?",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},condition:function(e){return"Yes"===e.smoking_history.value},options:function(){return[{label:"Less than five years",value:"Less than five years"},{label:"Five years or more",value:"Five years or more"}]},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.obs.push(e.socialHistory.buildValueText("Smoking duration",n.value));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"current_smoker",helpText:"Do you still smoke?",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},condition:function(e){return"Yes"===e.smoking_history.value},options:function(){return[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.obs.push(e.socialHistory.buildValueCoded("Current smoker",n.value));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"alcohol_history",helpText:"Do you drink alcohol?",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.obs.push(e.socialHistory.buildValueCoded("Does the patient drink alcohol?",n.value));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"number_of_drinks",helpText:"How many alcoholic drinks do you have per day?",type:b["b"].TT_NUMBER,validation:function(e){return f["a"].required(e)},condition:function(e){return"Yes"===e.alcohol_history.value},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.obs.push(e.socialHistory.buildValueNumber("Alcoholic drinks per day",n.value));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"number_of_days_drank",helpText:"Number of days per week alcohol is used?",type:b["b"].TT_NUMBER,validation:function(e){return f["a"].rangeOf(e,1,7)},condition:function(e){return"Yes"===e.alcohol_history.value},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.obs.push(e.socialHistory.buildValueNumber("Number of days per week alcohol is used",n.value));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"exercise",helpText:"Do you do any physical exercise?",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return[{label:"Yes",value:"Yes"},{label:"No",value:"No"}]},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.obs.push(e.socialHistory.buildValueCoded("Physical Exercises",n.value));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},{id:"employment",helpText:"Type of employment?",type:b["b"].TT_SELECT,validation:function(e){return f["a"].required(e)},options:function(){return[{label:"Active",value:"Active"},{label:"Sedentary",value:"Sedentary"}]},unload:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.obs.push(e.socialHistory.buildValueText("Type of employment",n.value));case 1:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}]}}});const zo=T()(Go,[["render",Uo]]);var Yo=zo,Wo=Object(i["withScopeId"])("data-v-15839c59");Object(i["pushScopeId"])("data-v-15839c59");var $o=Object(i["createVNode"])("label",{class:"his-title"}," BP Drug management ",-1),Ko={key:0,class:"view-port-content"},Jo={id:"main-table",style:{width:"100%"}},Xo=Object(i["createVNode"])("th",null," ",-1),Qo=Object(i["createVNode"])("td",{class:"td-current td-title"},[Object(i["createVNode"])("span",null,"Current")],-1),Zo=Object(i["createVNode"])("td",{class:"td-remaining td-title"},[Object(i["createVNode"])("span",null,"Pills remaining")],-1),ei=Object(i["createVNode"])("p",null,null,-1),ti={id:"table-notes",style:{width:"100%"}},ni=Object(i["createVNode"])("caption",{style:{"font-size":"1.4em"}}," Adherence summary ",-1),ri=Object(i["createVNode"])("p",null,null,-1),ai=Object(i["createVNode"])("tr",null,[Object(i["createVNode"])("th",{style:{width:"25%"}},[Object(i["createVNode"])("span",null,"Drug")]),Object(i["createVNode"])("th",{style:{width:"25%"}},[Object(i["createVNode"])("span",null,"Pills dispensed during last visit")]),Object(i["createVNode"])("th",{style:{width:"25%"}},[Object(i["createVNode"])("span",null,"Expected pills remaining")]),Object(i["createVNode"])("th",{style:{width:"25%"}},[Object(i["createVNode"])("span",null,"Adherence for drug")])],-1),oi={class:"date-td today-td"},ii={class:"date-td today-td"},ci={class:"date-td today-td"},si={class:"date-td today-td"},ui=Object(i["createTextVNode"])(" cancel "),li=Object(i["createTextVNode"])(" Change drugs "),di=Object(i["createTextVNode"])(" Continue ");Object(i["popScopeId"])();var pi=Wo((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-col"),s=Object(i["resolveComponent"])("ion-row"),u=Object(i["resolveComponent"])("ion-toolbar"),l=Object(i["resolveComponent"])("ion-header"),d=Object(i["resolveComponent"])("ion-checkbox"),p=Object(i["resolveComponent"])("ion-input"),b=Object(i["resolveComponent"])("view-port"),f=Object(i["resolveComponent"])("ion-content"),m=Object(i["resolveComponent"])("ion-button"),h=Object(i["resolveComponent"])("ion-footer"),g=Object(i["resolveComponent"])("ion-page");return Object(i["openBlock"])(),Object(i["createBlock"])(g,null,{default:Wo((function(){return[Object(i["createVNode"])(l,null,{default:Wo((function(){return[Object(i["createVNode"])(u,null,{default:Wo((function(){return[Object(i["createVNode"])(s,null,{default:Wo((function(){return[Object(i["createVNode"])(c,null,{default:Wo((function(){return[$o]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(f,null,{default:Wo((function(){return[Object(i["createVNode"])(b,null,{default:Wo((function(){return[e.drugs?(Object(i["openBlock"])(),Object(i["createBlock"])("div",Ko,[Object(i["createVNode"])("table",Jo,[Object(i["createVNode"])("tr",null,[Xo,(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])("th",{key:t},[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t)+" ",1),Object(i["createVNode"])(s,null,{default:Wo((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(c,{class:"col-borders",key:t},{default:Wo((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.amount||"0mg"),1)]})),_:2},1024)})),128))]})),_:2},1024)])})),128))]),Object(i["createVNode"])("tr",null,[Qo,(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])("td",{class:"td-current td-value",key:t},[Object(i["createVNode"])(s,null,{default:Wo((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:t},{default:Wo((function(){return[e.current?(Object(i["openBlock"])(),Object(i["createBlock"])(d,{key:0,checked:e.current,disabled:""},null,8,["checked"])):Object(i["createCommentVNode"])("",!0)]})),_:2},1024)})),128))]})),_:2},1024)])})),128))]),Object(i["createVNode"])("tr",null,[Zo,(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.drugs,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])("td",{key:n,class:"td-current td-value"},[Object(i["createVNode"])(s,null,{default:Wo((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(t.drugs,(function(t,r){return Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:r},{default:Wo((function(){return[t.dispensed?(Object(i["openBlock"])(),Object(i["createBlock"])(p,{key:0,type:"number",modelValue:t.remaining,"onUpdate:modelValue":function(e){return t.remaining=e},onClick:function(t){return e.launchKeyPad(n,r)}},null,8,["modelValue","onUpdate:modelValue","onClick"])):Object(i["createCommentVNode"])("",!0)]})),_:2},1024)})),128))]})),_:2},1024)])})),128))])]),ei,Object(i["createVNode"])("table",ti,[ni,ri,ai,(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.selectedDrugs,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])("tr",{key:t,class:"dispensation-row"},[Object(i["createVNode"])("td",oi,Object(i["toDisplayString"])(e.drugName),1),Object(i["createVNode"])("td",ii,Object(i["toDisplayString"])(e.dispensed),1),Object(i["createVNode"])("td",ci,Object(i["toDisplayString"])(e.expectedRemaining),1),Object(i["createVNode"])("td",si,Object(i["toDisplayString"])(e.adherence?"".concat(e.adherence," %"):"?"),1)])})),128))])])):Object(i["createCommentVNode"])("",!0)]})),_:1})]})),_:1}),Object(i["createVNode"])(h,null,{default:Wo((function(){return[Object(i["createVNode"])(u,{color:"dark"},{default:Wo((function(){return[Object(i["createVNode"])(m,{size:"large",color:"danger",slot:"start",onClick:e.gotoPatientDashboard},{default:Wo((function(){return[ui]})),_:1},8,["onClick"]),Object(i["createVNode"])(m,{size:"large",color:"primary",slot:"end",onClick:e.goToPrescription},{default:Wo((function(){return[li]})),_:1},8,["onClick"]),Object(i["createVNode"])(m,{size:"large",color:"success",slot:"end",onClick:e.onFinish},{default:Wo((function(){return[di]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})})),bi=n("10be"),fi=Object(i["defineComponent"])({mixins:[j["a"]],components:{ViewPort:Bo["a"],IonToolbar:ge["V"],IonHeader:ge["q"],IonContent:ge["n"],IonRow:ge["J"],IonInput:ge["v"],IonButton:ge["d"],IonCol:ge["m"],IonFooter:ge["o"],IonPage:ge["F"],IonCheckbox:ge["k"]},watch:{ready:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return t.HTN=new y["a"](t.patientID,t.providerID),t.drugs=t.HTN.getDrugs(),n.next=5,t.getCurrentDrugs();case 5:case"end":return n.stop()}}),n)})))()},immediate:!0}},data:function(){return{HTN:{},drugs:null}},methods:{onFinish:function(){this.selectNextAction()},goToPrescription:function(){this.$router.push("/art/encounters/bp_prescription/".concat(this.patientID))},gotoTreatment:function(){var e=this.selectedDrugs.map((function(e){return Object(O["find"])(y["a"].htnDrugReferences(),{drug_id:e.drugID})})),t={};t[this.patientID]=e,sessionStorage.setItem(y["b"].Prescription,JSON.stringify(t)),this.$router.push("/art/encounters/prescriptions/".concat(this.patientID))},selectNextAction:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(_["c"])("Action confirmation","Please specify how to proceed with patient",["Continue with current BP Drugs","Continue without BP Drugs","Change BP drugs"],[{name:"Cancel",color:"danger",slot:"start"},{name:"Confirm",color:"primary",slot:"end",role:"action"}]);case 2:if(n=t.sent,!n.selection||"Cancel"==n.action){t.next=11;break}t.t0=n.selection,t.next="Continue without BP Drugs"===t.t0?7:"Continue with current BP Drugs"===t.t0?9:"Change BP drugs"===t.t0?10:11;break;case 7:return sessionStorage.removeItem(y["b"].Prescription),t.abrupt("return",e.nextTask());case 9:return t.abrupt("return",e.gotoTreatment());case 10:e.goToPrescription();case 11:case"end":return t.stop()}}),t)})))()},getCurrentDrugs:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.HTN.getCurrentDrugs();case 2:return n=t.sent,t.next=5,e.HTN.getLastDrugs();case 5:r=t.sent,n.drugs.forEach((function(t){var n=function(n){e.drugs[n].drugs.forEach((function(a,o){t.drug_id===a.drugID&&(e.drugs[n].drugs[o].current=!0,e.drugs[n].drugs[o].selected=!0,e.drugs[n].selected=t.drug_id);var i=e.drugs[n].drugs[o].drugName;Object.prototype.hasOwnProperty.call(r,i)&&(e.drugs[n].drugs[o].expectedRemaining=r[i].remaining,e.drugs[n].drugs[o].dispensed=r[i].value_numeric)}))};for(var a in e.drugs)n(a)}));case 7:case"end":return t.stop()}}),t)})))()},launchKeyPad:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,ge["cb"].create({component:bi["a"],backdropDismiss:!1,cssClass:"keypad-modal",componentProps:{strictNumbers:!0,onKeyPress:function(){var r=Object(a["a"])(regeneratorRuntime.mark((function r(a){var o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,n.HTN.getAdherence(n.drugs[e].drugs[t].drugID,a);case 2:o=r.sent,n.drugs[e].drugs[t].adherence=o.adherence,n.drugs[e].drugs[t].remaining=a;case 5:case"end":return r.stop()}}),r)})));function o(e){return r.apply(this,arguments)}return o}()}});case 2:o=r.sent,o.present();case 4:case"end":return r.stop()}}),r)})))()}},computed:{selectedDrugs:function(){return Object.values(this.drugs).map((function(e){return e.drugs})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return e.dispensed}))}}});n("abd7");const mi=T()(fi,[["render",pi],["__scopeId","data-v-15839c59"]]);var hi=mi;function gi(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-template");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{title:e.title,period:e.period,rows:e.rows,fields:e.fields,columns:e.columns,config:{showIndex:!0},reportReady:e.reportReady,isLoading:e.isLoading,reportPrefix:"PEPFAR",onReportConfiguration:e.onPeriod},null,8,["title","period","rows","fields","columns","reportReady","isLoading","onReportConfiguration"])}var vi=Object(i["defineComponent"])({mixins:[kn["a"]],components:{ReportTemplate:yn["a"]},data:function(){return{title:"SC ARV dispensation report",rows:[],reportReady:!1,isLoading:!1,columns:[[N["a"].thTxt("ARV drug category"),N["a"].thTxt("# of bottles (units) dispensed")]]}},created:function(){this.fields=this.getDateDurationFields()},methods:{drilldown:function(e,t,n){var r=this,a=[[N["a"].thTxt("ARV #"),N["a"].thTxt("Drug"),N["a"].thTxt("Quantity"),N["a"].thDate("Date")]],o=n.sort((function(e,t){return r.getArvInt(e[3])>r.getArvInt(t[3])?1:-1})),i=function(){return o.map((function(e){return[N["a"].td(e[3]),N["a"].td(e[0]),N["a"].td(e[1]),N["a"].tdDate(e[2])]}))};return n.length<=0?N["a"].td(0):N["a"].tdLink(t,(function(){return r.drilldownAsyncRows(e,a,i)}))},onPeriod:function(e,t){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.reportReady=!0,n.isLoading=!0,n.rows=[],n.report=new Bn["d"],n.report.setReportType("pepfar"),n.report.setStartDate(t.start_date),n.report.setEndDate(t.end_date),n.period=n.report.getDateIntervalPeriod(),e.t0=n,e.next=11,n.report.getSCReport();case 11:e.t1=e.sent,e.t0.setRows.call(e.t0,e.t1),n.isLoading=!1;case 14:case"end":return e.stop()}}),e)})))()},setRows:function(e){var t=this;e.forEach((function(e){t.rows.push([N["a"].td(e.name),t.drilldown(e.name,e.units,e.dispensations)])}))}}});const Oi=T()(vi,[["render",gi]]);var ji=Oi,_i=[{name:"Data cleaning verification",path:"/art/data_cleaning_verification",component:function(){return n.e("chunk-2d2102e3").then(n.bind(null,"b791"))}},{name:"Edit ARV Number",path:"/art/arv-number/:patient_id",component:function(){return n.e("chunk-405c9842").then(n.bind(null,"1769"))}},{name:"preferences",path:"/art/preferences",component:function(){return n.e("chunk-2c083610").then(n.bind(null,"b236"))}},{name:"target_lab",path:"/art/preferences/target_lab",component:function(){return n.e("chunk-2d0b5f74").then(n.bind(null,"1ac1"))}},{name:o["a"].CLINIC_HOLIDAYS,path:"/art/preferences/clinic_holidays",component:function(){return n.e("chunk-2d0b5f74").then(n.bind(null,"1ac1"))}},{name:"bp_thresholds",path:"/art/preferences/bp_thresholds",component:function(){return n.e("chunk-2d0b5f74").then(n.bind(null,"1ac1"))}},{name:"clinic_days",path:"/art/preferences/clinic_days",component:function(){return n.e("chunk-2d0b5f74").then(n.bind(null,"1ac1"))}},{name:"cervical_cancer",path:"/art/preferences/cervical_cancer_screening",component:function(){return n.e("chunk-2d0b5f74").then(n.bind(null,"1ac1"))}},{name:o["a"].HTN_SCREENING_AGE_THRESHOLD,path:"/art/preferences/htn_age",component:function(){return n.e("chunk-2d0b5f74").then(n.bind(null,"1ac1"))}},{name:o["a"].FILING_NUMBER_LIMIT,path:"/art/preferences/fn/limit",component:function(){return n.e("chunk-2d0b5f74").then(n.bind(null,"1ac1"))}},{name:o["a"].APPOINTMENT_LIMIT,path:"/art/preferences/appointment/limit",component:function(){return n.e("chunk-2d0b5f74").then(n.bind(null,"1ac1"))}},{name:"art_patient_visit_stats",path:"/art/patient_visits",component:function(){return n.e("chunk-2d238053").then(n.bind(null,"fe31"))}},{name:"filing management",path:"/art/filing_numbers/:patient_id",component:function(){return n.e("chunk-2d0aaf0b").then(n.bind(null,"12c7"))}},{name:"Enter stock",path:"/art/stock/enter",component:function(){return n.e("chunk-2d0e8890").then(n.bind(null,"8a4e"))}},{name:"Audit trail",path:"/art/stock/trail",component:function(){return n.e("chunk-2d0cc7e7").then(n.bind(null,"4dbc"))}},{name:"Verify stock",path:"/art/stock/verify",component:function(){return n.e("chunk-2d0e2514").then(n.bind(null,"7dd5"))}},{name:"Move stock",path:"/art/stock/move",component:function(){return n.e("chunk-a9a47c2e").then(n.bind(null,"7052"))}},{name:"Stock report",path:"/art/stock/report",component:function(){return n.e("chunk-2d0d6098").then(n.bind(null,"719a"))}},{name:"Print drug barcode",path:"/drug/print",component:function(){return n.e("chunk-2d228961").then(n.bind(null,"da8f"))}},{name:"treatment",path:"/art/encounters/prescriptions/:patient_id",component:R},{name:"bp_alert",path:"/art/encounters/bp/alert/:patient_id",component:function(){return n.e("chunk-c326e570").then(n.bind(null,"7337"))}},{name:"art adherence",path:"/art/encounters/adherence/:patient_id",component:le},{name:"hiv clinic consultation (clinician)",path:"/art/encounters/consultation/:patient_id",component:Qe},{name:"hiv clinic consultation",path:"/art/encounters/consultation/:patient_id",component:Qe},{name:"hiv clinic registration",path:"/art/encounters/registration/:patient_id",component:$},{name:"hiv reception",path:"/art/encounters/reception/:patient_id",component:ct},{name:"hiv staging",path:"/art/encounters/staging/:patient_id",component:dt},{name:"appointment",path:"/art/encounters/appointment/:patient_id",component:ne},{name:"dispensing",path:"/art/encounters/dispensation/:patient_id",component:nt},{name:"vitals",path:"/art/encounters/vitals/:patient_id",component:pt["default"]},{name:"htn_vitals",path:"/art/encounters/vitals/:patient_id",component:pt["default"]},{name:"patient type",path:"/art/encounters/patient_type/:patient_id",component:gt},{name:"fast track assesment",path:"/art/encounters/fast_track/:patient_id",component:wt},{name:"bp_management",path:"/art/encounters/bp_management/:patient_id",component:Ht},{name:"Hypertesnion diagnosis",path:"/art/encounters/hypertension_diagnosis/:patient_id",component:ho},{name:"BP prescription",path:"/art/encounters/bp_prescription/:patient_id",component:Ho},{name:"Social history",path:"/art/encounters/social_history/:patient_id",component:Yo},{name:"BP adherence",path:"/art/encounters/bp_adherence/:patient_id",component:hi},{name:"lab activities",path:"/art/encounters/lab/:patient_id",component:zt},{name:"patient mstercard",path:"/art/mastercard/:patient_id",component:_n},{name:"Data cleaning",path:"/data_cleaning",component:po},{name:"moh_disaggregated_report",path:"/art/moh_disaggregated_report",component:va},{name:"moh_regimen_report",path:"/art/moh_regimen_report",component:function(){return n.e("chunk-2d0cb702").then(n.bind(null,"4a54"))}},{path:"/art/report/moh",component:Xa,children:[{name:"moh_cohort",path:"moh_cohort",component:Wa},{name:"moh_survial_analysis",path:"moh_survial_analysis",component:ya},{name:"moh_tpt_new_initiations",path:"moh_tpt_new_initiations",component:Va},{name:"moh_tx_curr_mmd",path:"moh_tx_curr_mmd",component:Ra},{name:"moh_regimen_weight_distribution",path:"moh_regimen_weight_distribution",component:Ea}]},{path:"/art/report/clinic",component:Xa,children:[{name:"clinic_archiving_candidates",path:"clinic_archiving_candidates",component:fa},{name:"clinic_retention_report",path:"clinic_retention_report",component:Ur},{name:"clinic_external_consultation_report",path:"clinic_external_consultation_report",component:Yr},{name:"clinic_due_viral_load_report",path:"clinic_due_viral_load_report",component:Fr},{name:"clinic_lab_results",path:"clinic_lab_results",component:ua},{name:"clinic_missed_appointments",path:"clinic_missed_appointments",component:vr},{name:"clinic_defaulters_report",path:"clinic_defaulters",component:wr},{name:"clinic_regimen_report",path:"clinic_regimen_report",component:Nr},{name:"clinic_regimen_switch",path:"clinic_regimen_switch",component:Tr},{name:"clinic_pregnant_patients",path:"clinic_pregnant_patients",component:Pr},{name:"clinic_appointments",path:"clinic_appointments",component:io},{name:"stock_card_report",path:"stock_card_report",component:no},{name:"clinic_viral_load",path:"clinic_viral_load",component:Jr},{name:"clinic_other_outcome_list",path:"clinic_other_outcome_list",component:ea},{name:"clinic_regimen_formulation",path:"clinic_regimen_formulation",component:aa}]},{path:"/art/report/pepfar",component:Xa,children:[{name:"pepfar_disaggregated_report",path:"disaggregated",component:Tn},{name:"pepfar_defaulters_report",path:"defaulters",component:An},{name:"pepfar_regimen_report",path:"regimens",component:Mn},{name:"pepfar_regimen_switch",path:"regimen_switch",component:Gn},{name:"pepfar_tb_prev_report",path:"tb_prev",component:tr},{name:"pepfar_tx_curr_mmd_report",path:"tx_cur_mmd",component:ir},{name:"pepfar_tx_ml_report",path:"tx_ml",component:lr},{name:"pepfar_tx_rtt",path:"tx_rtt",component:fr},{name:"pepfar_vl_coverage",path:"pepfar_vl_coverage",component:Jn},{name:"sc_arv",path:"sc_arv",component:ji}]}],wi=Object(i["withScopeId"])("data-v-20f81f68");Object(i["pushScopeId"])("data-v-20f81f68");var ki=Object(i["createVNode"])("span",{class:"his-md-text"},"Total visits / incomplete visits: last 5 days",-1),yi=Object(i["createVNode"])("span",{class:"his-md-text"},"Encounters created today",-1),xi={class:"his-sm-text"},Ni=Object(i["createVNode"])("tr",null,[Object(i["createVNode"])("th"),Object(i["createVNode"])("th",null,"Female"),Object(i["createVNode"])("th",null,"Male"),Object(i["createVNode"])("th",null,"Me"),Object(i["createVNode"])("th",null,"Facility")],-1),Ci={class:"encounter-td"},Vi={class:"other-td"},Di={class:"other-td"},Ti={class:"other-td"},Ii={class:"other-td"};Object(i["popScopeId"])();var Ri=wi((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("apexchart"),s=Object(i["resolveComponent"])("ion-col"),u=Object(i["resolveComponent"])("ion-row"),l=Object(i["resolveComponent"])("ion-grid");return Object(i["openBlock"])(),Object(i["createBlock"])(l,null,{default:wi((function(){return[Object(i["createVNode"])(u,null,{default:wi((function(){return[Object(i["createVNode"])(s,{"size-lg":"6","size-sm":"12"},{default:wi((function(){return[ki,Object(i["createVNode"])(c,{width:"100%",type:"bar",options:e.options,series:e.series},null,8,["options","series"])]})),_:1}),Object(i["createVNode"])(s,{"size-lg":"6","size-sm":"12"},{default:wi((function(){return[yi,Object(i["createVNode"])("table",xi,[Ni,(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.rows,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])("tr",{key:n},[Object(i["createVNode"])("td",Ci,Object(i["toDisplayString"])(e.getEncounterName(t.encounter)),1),Object(i["createVNode"])("td",Vi,Object(i["toDisplayString"])(t.female),1),Object(i["createVNode"])("td",Di,Object(i["toDisplayString"])(t.male),1),Object(i["createVNode"])("td",Ti,Object(i["toDisplayString"])(t.me),1),Object(i["createVNode"])("td",Ii,Object(i["toDisplayString"])(t.facility),1)])})),128))])]})),_:1})]})),_:1})]})),_:1})})),Si=n("156d"),Pi=Object(i["defineComponent"])({data:function(){return{dayjs:z.a,startDate:"",endDate:"",options:{chart:{id:"vuechart-example"},xaxis:{categories:["","","","",""]}},series:[{name:"Total visits",data:[0,0,0,0,0],color:"#7cb5ec"},{name:"Total incomplete visits",data:[0,0,0,0,0],color:"#434348"}],rows:[{}],encounters:[{"HIV clinic registration":9},{"HIV reception":51},{Vitals:6},{"HIV staging":52},{"HIV clinic consultation":53},{"ART adherence":68},{Treatment:25},{Dispensing:54},{Appointments:7}]}},components:{IonGrid:ge["p"],IonRow:ge["J"],IonCol:ge["m"]},mounted:function(){this.endDate=this.dayjs().subtract(1,"days").format("YYYY-MM-DD"),this.startDate=this.dayjs().subtract(5,"days").format("YYYY-MM-DD"),this.getVisits(),this.getEncounters()},methods:{getVisits:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Si["b"].get("programs/1/reports/visits?name=visits&start_date=".concat(this.startDate,"&end_date=").concat(this.endDate));case 2:if(t=e.sent,!t||200!=t.status){e.next=15;break}return e.next=6,t.json();case 6:n=e.sent,r=Object.keys(n),a=[],o=[],r.forEach((function(e,t){a[t]=n[e].incomplete,o[t]=n[e].complete+n[e].incomplete})),this.series[0].data=[].concat(o),this.series[1].data=[].concat(a),i=r.map((function(e){return c.dayjs(e).format("dddd")})),this.options=Object(d["a"])(Object(d["a"])({},this.options),{xaxis:{categories:Object(p["a"])(i)}});case 15:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getEncounterName:function(e){if(!e)return"";var t=this.encounters.filter((function(t){return Object.values(t)[0]===e}));return Object.keys(t[0])[0]},getEncounters:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={encounter_types:Object(p["a"])(this.encounters.map((function(e){return Object.values(e)[0]})))},n={all:!0,encounter_types:Object(p["a"])(this.encounters.map((function(e){return Object.values(e)[0]})))},e.next=4,Si["b"].post("reports/encounters?date=".concat(At["e"].getSessionDate(),"&program_id=").concat(At["e"].getProgramID()),t);case 4:return r=e.sent,e.next=7,Si["b"].post("reports/encounters?date=".concat(At["e"].getSessionDate(),"&program_id=").concat(At["e"].getProgramID()),n);case 7:if(a=e.sent,!r||!a||200!=r.status||200!=a.status){e.next=18;break}return e.next=11,r.json();case 11:return o=e.sent,e.next=14,a.json();case 14:i=e.sent,c=[],this.encounters.forEach((function(e){var t=Object.values(e)[0];c.push({encounter:t,female:i[t]["F"],male:i[t]["M"],me:o[t]["F"]+o[t]["M"],facility:i[t]["F"]+i[t]["M"]})})),this.rows=[].concat(c);case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}});n("9128");const Ai=T()(Pi,[["render",Ri],["__scopeId","data-v-20f81f68"]]);var Ei=Ai,Bi=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"Cohort / disaggregated",pathName:"moh_cohort"},{name:"Disaggregated",pathName:"moh_disaggregated",condition:function(){return!1}},{name:"Regimen Distribution (Weight)",pathName:"moh_regimen_weight_distribution"},{name:"Survival analysis",pathName:"moh_survial_analysis"},{name:"TPT new initiations",pathName:"moh_tpt_new_initiations"},{name:"TX CURR MMD",pathName:"moh_tx_curr_mmd"},{name:"Regimen Report",pathName:"moh_regimen_report"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Active clients with adverse outcomes",pathName:"clinic_archiving_candidates"},{name:"Defaulter list",pathName:"clinic_defaulters_report"},{name:"Regimen Dispensation",pathName:"clinic_regimen_report"},{name:"Lab results",pathName:"clinic_lab_results"},{name:"Regimen switch",pathName:"clinic_regimen_switch"},{name:"Clients due for VL",pathName:"clinic_due_viral_load_report"},{name:"External and Drug Refill clients",pathName:"clinic_external_consultation_report"},{name:"Retention report",pathName:"clinic_retention_report"},{name:"Pregnant Patient",pathName:"clinic_pregnant_patients"},{name:"Missed Appointment",pathName:"clinic_missed_appointments"},{name:"VL results",pathName:"clinic_viral_load"},{name:"Other outcome list",pathName:"clinic_other_outcome_list"},{name:"Regimens and Formulation",pathName:"clinic_regimen_formulation"},{name:"Appointments",pathName:"clinic_appointments"},{name:"Stock card report",pathName:"stock_card_report",condition:function(){return o["b"].drugManagementEnabled()}}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"Defaulter list",pathName:"pepfar_defaulters_report"},{name:"Disaggregated",pathName:"pepfar_disaggregated_report"},{name:"Regimen Report",pathName:"pepfar_regimen_report"},{name:"Regimen Switch",pathName:"pepfar_regimen_switch"},{name:"TB PREV",pathName:"pepfar_tb_prev_report"},{name:"TX CURR MMD",pathName:"pepfar_tx_curr_mmd_report"},{name:"TX ML",pathName:"pepfar_tx_ml_report"},{name:"TX RTT",pathName:"pepfar_tx_rtt"},{name:"Viral Load Coverage",pathName:"pepfar_vl_coverage"},{name:"SC ARV",pathName:"sc_arv"}]}],Fi=n("cc74");function Li(e,t){return{name:e,pathUrl:"/preferences?label=".concat(e,"&property=").concat(t)}}var Mi=[{name:"Drug Management",icon:"drug.png",condition:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.t0=fe["a"].isAdmin(),!e.t0){e.next=5;break}return e.next=4,o["b"].drugManagementEnabled();case 4:e.t0=e.sent;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),files:[{name:"Enter Receipts",pathUrl:"/art/stock/enter"},{name:"Enter Product relocation/Disposal",pathUrl:"/art/stock/move"},{name:"Enter verified physical stock count",pathUrl:"/art/stock/verify"},{name:"Print Barcode",pathUrl:"/drug/print"},{name:"Audit Trail",pathUrl:"/art/stock/trail"},{name:"Stock report",pathUrl:"/art/stock/report"}]},{name:"System Preferences",icon:"hiv-staging.png",condition:function(){return fe["a"].isAdmin()},files:[{name:"View Systems settings",pathUrl:"/art/preferences"},Li("Activate Extended Lab",o["a"].EXTENDED_LABS),Li("Activate VL routine check",o["a"].VL_ROUTINE_CHECK),Li("Activate Filing Numbers",o["a"].FILING_NUMBERS),Li("Activate drug management",o["a"].DRUG_MANAGEMENT),Li("Activate Hypertension screening",o["a"].HTN_ENHANCEMENT),Li("Activate fast track",o["a"].FAST_TRACK),Li("Activate 3HP auto select",o["a"].THREE_HP_AUTO_SELECT),Li("Is this a military site?",Fi["a"].MILITARY_SITE),Li("(DATA CLEANING) Exclude External and Drug refill",o["a"].EXCLUDE_EXTERNAL_AND_DRUG_REFILLS),{name:"Target lab",pathUrl:"/art/preferences/target_lab"},{name:"Activate CxCa Screening",pathUrl:"/art/preferences/cervical_cancer_screening"},{name:"Set Hypertension Thresholds",pathUrl:"/art/preferences/bp_thresholds"},{name:"Set Clinic Days",pathUrl:"/art/preferences/clinic_days"},{name:"Set HTN Age",pathUrl:"/art/preferences/htn_age"},{name:"Set Appointment Limit",pathUrl:"/art/preferences/appointment/limit"},{name:"Set Filing Numbers Limit",pathUrl:"/art/preferences/fn/limit"},{name:"Set Clinic Holidays",pathUrl:"/art/preferences/clinic_holidays"}]}],Hi=[{id:"hiv clinic registration",name:"Hiv clinic registration",workflowID:"HIV first visits",icon:"registration.png"},{id:"hiv reception",name:"HIV reception",workflowID:"HIV reception visits",icon:"reception.png"},{id:"vitals",name:"Vitals",icon:"vitals.png",taskCompletionChecklist:["Weight"]},{id:"hiv staging",name:"HIV staging",workflowID:"HIV staging visits",icon:"hiv-staging.png"},{id:"hiv clinic consultation",name:"HIV clinic consultation",workflowID:"HIV clinic consultations",taskCompletionChecklist:["Medication orders"],icon:"consultation.png"},{id:"art adherence",name:"ART adherence",workflowID:"ART adherence",icon:"adherence.png"},{id:"treatment",name:"Treatment",workflowID:"Prescriptions",icon:"prescription.png"},{id:"fast track assesment",name:"Fast Track assesment",globalProperty:"".concat(o["a"].FAST_TRACK,"=true"),icon:"fast-track.png",availableOnActivitySelection:!1},{id:"dispensing",name:"Drug Dispensations",encounterTypeName:"DISPENSING",workflowID:"Drug Dispensations",icon:"dispensing.png"},{id:"appointment",name:"Manage Appointments",encounterTypeName:"APPOINTMENT",workflowID:"Manage Appointments",icon:"appointment.png"},{id:"patient type",name:"Patient Type",encounterTypeName:"Registration",icon:"patient-type.png",availableOnActivitySelection:!1},{id:"bp_management",name:"bp_management",icon:"dispensing.png",encounterTypeName:"Hypertension management",globalProperty:"".concat(o["a"].HTN_ENHANCEMENT,"=true"),availableOnActivitySelection:!1},{id:"bp_alert",name:"bp_alert",icon:"dispensing.png",globalProperty:"".concat(o["a"].HTN_ENHANCEMENT,"=true"),availableOnActivitySelection:!1}],Ui=[{id:"master_card",name:"Master card",description:"View mastercard",action:function(e,t){var n=e.patient;t.push("/art/mastercard/".concat(n.patient_id))},icon:"card.png"},{id:"f_number",name:"Filing Number (Print)",description:"Print Patient Filing Number",globalProperty:"".concat(o["a"].FILING_NUMBERS,"=true"),condition:function(e){var t=e.patient,n=new Wt["a"](t);return n.hasActiveFilingNumber()||n.hasDormantFilingNumber()},action:function(e){var t=e.patient,n=new Q["a"](t.patient_id);return n.printFilingNumberLbl()},icon:"folder.png"},{id:"archive_client",name:"Archive client",description:"Archive a client",action:function(e,t){var n=e.patient;t.push("/art/filing_numbers/".concat(n.patient_id,"?archive=true"))},condition:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.patient,e.abrupt("return",new Wt["a"](n).hasActiveFilingNumber());case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),globalProperty:"".concat(o["a"].FILING_NUMBERS,"=true"),icon:"archive.png"},{id:"assign_filing_number",name:"Assign filing number",description:"Assign a new filing number",condition:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.patient,r=new Wt["a"](n),e.abrupt("return",r.hasDormantFilingNumber()||!r.hasActiveFilingNumber());case 3:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),action:function(e,t){var n=e.patient;t.push("/art/filing_numbers/".concat(n.patient_id,"?assign=true"))},globalProperty:"".concat(o["a"].FILING_NUMBERS,"=true"),icon:"archive.png"},{id:"filing_number_trail",name:"View filing number trail",description:"view trail",action:function(e,t){var n=e.patient;t.push("/art/filing_numbers/".concat(n.patient_id,"?trail=true"))},globalProperty:"".concat(o["a"].FILING_NUMBERS,"=true"),icon:"folder.png"}],qi=n("50e7");function Gi(e){return zi.apply(this,arguments)}function zi(){return zi=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"Malawi ART side effects",e.next=3,Pt["a"].getObservations(t,he["a"].getCachedConceptID(n));case 3:return r=e.sent,e.abrupt("return",r.filter((function(e){try{return e.children[0].value_coded==he["a"].getCachedConceptID("Yes")}catch(t){return!1}})));case 5:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}var Yi={alertSideEffects:Gi},Wi=Object(i["createTextVNode"])(" Stock levels (Consumption rate calculated over a 3 month period) "),$i=Object(i["createTextVNode"])("X"),Ki=Object(i["createTextVNode"])("Paeds"),Ji=Object(i["createTextVNode"])("Adults");function Xi(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-title"),s=Object(i["resolveComponent"])("ion-button"),u=Object(i["resolveComponent"])("ion-toolbar"),l=Object(i["resolveComponent"])("ion-header"),d=Object(i["resolveComponent"])("ion-label"),p=Object(i["resolveComponent"])("ion-segment-button"),b=Object(i["resolveComponent"])("ion-segment"),f=Object(i["resolveComponent"])("apexchart"),m=Object(i["resolveComponent"])("ion-content");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Object(i["createVNode"])(l,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,null,{default:Object(i["withCtx"])((function(){return[Wi]})),_:1}),Object(i["createVNode"])(s,{color:"danger",slot:"end",onClick:t[1]||(t[1]=function(t){return e.closeModal()}),class:"ion-margin-end"},{default:Object(i["withCtx"])((function(){return[$i]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(u,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(b,{onIonChange:t[2]||(t[2]=function(t){return e.segmentChanged(t)}),value:e.segment},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,{value:"paeds"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])((function(){return[Ki]})),_:1})]})),_:1}),Object(i["createVNode"])(p,{value:"adults"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])((function(){return[Ji]})),_:1})]})),_:1})]})),_:1},8,["value"])]})),_:1}),Object(i["createVNode"])(m,{class:"ion-padding"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(f,{width:"100%",type:"bar",options:e.options,series:e.series},null,8,["options","series"])]})),_:1})],64)}var Qi=n("3d6c"),Zi=Object(i["defineComponent"])({name:"Modal",components:{IonContent:ge["n"],IonHeader:ge["q"],IonTitle:ge["U"],IonToolbar:ge["V"],IonButton:ge["d"],IonSegment:ge["L"],IonSegmentButton:ge["M"]},methods:{closeModal:function(){return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ge["cb"].dismiss();case 2:case"end":return e.stop()}}),e)})))()},getDrugs:function(){this.paedDrugs=Qi["a"].getPaedeatricDrugs(),this.adultDrugs=Qi["a"].getAdultDrugs(),this.formatDrugs()},segmentChanged:function(e){this.segment=e.detail.value,this.formatDrugs()},formatDrugs:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=new Qi["a"],r="paeds"===e.segment?e.paedDrugs:e.adultDrugs,o=[],e.series[0].data=[].concat(o),r.forEach(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n.getConsumptionRate(r.drugID);case 2:a=t.sent,o=parseInt(a["stock_level_in_months"]),e.series[0].data.push({x:r.shortName,y:o});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})))()}},created:function(){this.getDrugs()},data:function(){return{paedDrugs:[],adultDrugs:[],segment:"paeds",options:{chart:{id:"vuechart-example"},plotOptions:{bar:{borderRadius:4,horizontal:!0,dataLabels:{position:"top"},colors:{ranges:[{from:0,to:2,color:"#ff0000"},{from:2,to:4,color:"#66CDAA"},{from:4,to:1e6,color:"#ffff00"}]}}},dataLabels:{enabled:!0,offsetX:0,style:{fontSize:"12px",colors:["#656565"]}},stroke:{show:!0,width:1,colors:["#fff"]},tooltip:{shared:!0,intersect:!1},grid:{column:{colors:["#FFFFFF","#FFFFFF","green"]}},yaxis:{min:1,max:9,fillColor:"#ffff00",tickAmount:1},xaxis:{fillColor:"#ffff00"}},series:[{name:"Available",data:[]}]}}});const ec=T()(Zi,[["render",Xi]]);var tc=ec,nc=n("0fa1");function rc(e,t,n){return ac.apply(this,arguments)}function ac(){return ac=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=new Et["a"](t),e.next=3,a.enrollProgram();case 3:return o=new $e["a"](t,-1),o.setPatientType(n),o.setLocationName(r),e.next=8,o.createEncounter();case 8:return e.next=10,o.save();case 10:case"end":return e.stop()}}),e)}))),ac.apply(this,arguments)}function oc(){return ic.apply(this,arguments)}function ic(){return ic=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["b"].drugManagementEnabled();case 2:if(!e.sent){e.next=9;break}return e.next=5,ge["cb"].create({component:tc,cssClass:"large-modal",backdropDismiss:!1});case 5:return t=e.sent,t.present(),e.next=9,t.onDidDismiss();case 9:case"end":return e.stop()}}),e)}))),ic.apply(this,arguments)}function cc(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.tests[0],r=n.result[0],a=t?"<br> Result date: &nbsp; ".concat(g["b"].toStandardHisDisplayFormat(r.date)):"",o=me["a"].isHighViralLoadResult(r)?'(<b style="color: #eb445a;">High</b>)':"";return"".concat(n.name," &nbsp; ").concat(r.value_modifier).concat(r.value," ").concat(o," ").concat(a)}function sc(){return uc.apply(this,arguments)}function uc(){return uc=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,Object(nc["c"])(Hi);case 3:if("HomePage"!==t){e.next=6;break}return e.next=6,oc();case 6:case"end":return e.stop()}}),e)}))),uc.apply(this,arguments)}function lc(e,t,n,r,a){return dc.apply(this,arguments)}function dc(){return dc=Object(a["a"])(regeneratorRuntime.mark((function e(t,n,r,a,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,rc(t,n.patient_type,n.location);case 2:return"Yes"===n.relationship&&Object(nc["a"])(t,{from:"Patient Registration",to:"/guardian/registration/".concat(t)}),e.next=5,o["b"].filingNumbersEnabled();case 5:if(e.t0=e.sent,!e.t0){e.next=8;break}e.t0="New patient"===n.patient_type;case 8:if(!e.t0){e.next=10;break}Object(nc["a"])(t,{from:"Yes"===(null===n||void 0===n?void 0:n.relationship)?"Guardian Registration":"Patient Registration",to:"/art/filing_numbers/".concat(t,"?assign=true")});case 10:return Object(nc["b"])(t,a,i),e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}function pc(e){return bc.apply(this,arguments)}function bc(){return bc=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Yi.alertSideEffects(t.getID());case 2:return n=e.sent,e.next=5,t.getBMI();case 5:return r=e.sent,e.abrupt("return",[{label:"Side effects",value:"".concat(n.length)},{label:"Patient BMI is",value:"".concat(r.result)}]);case 7:case"end":return e.stop()}}),e)}))),bc.apply(this,arguments)}function fc(e){var t=e.art_start_date.split("/"),n=Object(r["a"])(t,3),a=n[0],o=n[1],i=n[2],c=e.art_start_date.match(/n\/a/i)?"":"(".concat(z()(At["e"].getSessionDate()).diff("".concat(i,"-").concat(o,"-").concat(a),"months")," Month(s))");return[{label:"ART- Start Date",value:"".concat(e.art_start_date," ").concat(c)},{label:"ARV Number",value:"".concat(e.arv_number," | Regimen: ").concat(e.current_regimen)},{label:"File Number",value:e.filing_number.number},{label:"Current Outcome",value:e.current_outcome}]}function mc(e,t){return hc.apply(this,arguments)}function hc(){return hc=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var a,o,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,me["a"].getOrders(t);case 2:if(a=e.sent.reduce((function(e,t){var n=t.tests.filter((function(e){return e.name.match(/HIV/i)&&!Object(O["isEmpty"])(e.result)})).map((function(e){return null===e||void 0===e?void 0:e.result}));return e.concat(n.reduce((function(e,t){return e.concat(t)}),[]))}),[]).map((function(e){var t=me["a"].isHighViralLoadResult(e)?'(<b style="color: #eb445a;">High</b>)':"";return{label:"".concat(e.indicator.name," &nbsp ").concat(e.value_modifier).concat(e.value," ").concat(t),value:g["b"].toStandardHisDisplayFormat(e.date),other:{wrapTxt:!0}}})).sort((function(e,t){return new Date(e.value)>new Date(t.value)?-1:1})),!(a.length>=2)){e.next=6;break}return o=Object(r["a"])(a,2),i=o[0],c=o[1],e.abrupt("return",[i,c]);case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),hc.apply(this,arguments)}function gc(e){return vc.apply(this,arguments)}function vc(){return vc=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.getID(),e.next=3,x["a"].getProgramInformation(n);case 3:return r=e.sent,e.abrupt("return",{"PROGRAM INFORMATION":function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],e.next=3,qi["a"].getNextTaskParams(n);case 3:return a=e.sent,t.push({label:"Next Task",value:a.name?"".concat(a.name):"NONE"}),t.push({label:"ART Duration",value:"".concat(r.art_duration," month(s) ")}),e.next=8,x["a"].getFastTrackStatus(n).then((function(e){t.push({label:"On Fast Track",value:!0===e["Continue FT"]?"Yes":"No"})}));case 8:return e.next=10,Pt["a"].getObservations(n,he["a"].getCachedConceptID("appointment date"));case 10:return o=e.sent,o.length>0&&(i=g["b"].toStandardHisDisplayFormat(o[0].value_datetime),t.push({label:"Next Appointment",value:i})),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),"PATIENT IDENTIFIERS":function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[{label:"ARV Number",value:t.getArvNumber()},{label:"NPID",value:t.getNationalID()}],e.next=3,o["b"].filingNumbersEnabled();case 3:if(!e.sent){e.next=5;break}n.push({label:"Filing Number",value:t.getFilingNumber()});case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),ALERTS:function(){return pc(t)},"LAB ORDERS":function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=[],e.next=3,me["a"].getOrders(t.getID()).then((function(e){for(var t=me["a"].getViralLoadOrders(e),r=0;r<2&&r<t.length;r++)n.push({value:cc(t[r]),label:""})}));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),OUTCOME:function(){return[{label:"Current Outcome",value:r.current_outcome||"N/A"}]},GUARDIAN:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vn["a"].getGuardianDetails(t.getID());case 2:if(n=e.sent,!(n&&n.length>0)){e.next=7;break}return r=[],n.forEach((function(e){r.push({label:e.name,value:e.relationshipType}),r.push({label:"Phone",value:e.phoneNumber})})),e.abrupt("return",r);case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}()});case 5:case"end":return e.stop()}}),e)}))),vc.apply(this,arguments)}var Oc={init:sc,isPocApp:!0,programID:1,applicationName:"ART",applicationIcon:"aids.png",applicationDescription:"HIV Client management app",appRoutes:_i,primaryPatientActivites:Hi,secondaryPatientActivites:Ui,globalPropertySettings:Mi,programReports:Bi,homeOverviewComponent:Ei,confirmationSummary:gc,formatPatientProgramSummary:fc,getPatientDashboardAlerts:pc,onRegisterPatient:lc,getPatientDashboardLabOrderCardItems:mc,programPatientIdentifiers:{"ARV Number":{id:4,name:"ARV Number",isPrimary:!0,useForSearch:!0,prefix:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0="",e.next=3,Fi["b"].sitePrefix();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1,"-ARV-"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},"Filing number":{id:17,name:"Active Filing number",isPrimary:!1,useForSearch:!0,prefix:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["b"].filingNumberPrefix();case 3:return t=e.sent.split(","),n=Object(r["a"])(t,1),a=n[0],e.abrupt("return",a);case 9:return e.prev=9,e.t0=e["catch"](0),console.warn(e.t0),e.abrupt("return","");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}(),globalPropertySetting:"".concat(o["a"].FILING_NUMBERS,"=true")},"Archived filing number":{id:18,name:"Archived filing number",isPrimary:!1,useForSearch:!0,prefix:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["b"].filingNumberPrefix();case 3:return t=e.sent.split(","),n=Object(r["a"])(t,2),n[0],a=n[1],e.abrupt("return",a);case 10:return e.prev=10,e.t0=e["catch"](0),console.warn(e.t0),e.abrupt("return","");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}(),globalPropertySetting:"".concat(o["a"].FILING_NUMBERS,"=true")}}},jc=Oc,_c=Object(i["withScopeId"])("data-v-a517e22e");Object(i["pushScopeId"])("data-v-a517e22e");var wc={class:"los-overview"};Object(i["popScopeId"])();var kc=_c((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-table");return Object(i["openBlock"])(),Object(i["createBlock"])("div",wc,[Object(i["createVNode"])(c,{rows:e.rows,columns:e.columns},null,8,["rows","columns"])])})),yc=n("45eb"),xc=n("7e84"),Nc=function(e){Object(De["a"])(n,e);var t=Object(Te["a"])(n);function n(){return Object(Ce["a"])(this,n),t.call(this)}return Object(Ve["a"])(n,null,[{key:"overviewStats",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={},e.next=3,this.ordersMade("ordered");case 3:return n=e.sent,e.next=6,this.ordersMade("drawn");case 6:return r=e.sent,n.forEach((function(e){e.name in t||(t[e.name]={ordered:0}),t[e.name].ordered+=1})),r.forEach((function(e){e.name in t||(t[e.name]={drawn:0}),t[e.name].drawn||(t[e.name].drawn=0),t[e.name].drawn+=1})),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"ordersMade",value:function(e){return Object(yc["a"])(Object(xc["a"])(n),"getJson",this).call(this,"orders_made",{date:Object(yc["a"])(Object(xc["a"])(n),"getSessionDate",this).call(this),status:e,start_date:Object(yc["a"])(Object(xc["a"])(n),"getSessionDate",this).call(this),end_date:Object(yc["a"])(Object(xc["a"])(n),"getSessionDate",this).call(this),program_id:Object(yc["a"])(Object(xc["a"])(n),"getProgramID",this).call(this)})}}]),n}(At["e"]),Cc=Object(i["defineComponent"])({components:{ReportTable:Bt["a"]},data:function(){return{rows:[],columns:[[N["a"].thTxt("Test"),N["a"].thTxt("Ordered"),N["a"].thTxt("Drawn")]]}},created:function(){this.setRows()},methods:{setRows:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Nc.overviewStats();case 2:if(n=t.sent,!Object(O["isEmpty"])(n))for(r in n)a=n[r],e.rows.push([N["a"].td(r),N["a"].td(a.ordered),N["a"].td(a.drawn)]);case 4:case"end":return t.stop()}}),t)})))()}}});n("133d");const Vc=T()(Cc,[["render",kc],["__scopeId","data-v-a517e22e"]]);var Dc=Vc,Tc=Object(i["createVNode"])("p",null,null,-1),Ic=Object(i["createTextVNode"])("Open"),Rc=Object(i["createTextVNode"])("Drawn"),Sc=Object(i["createVNode"])("p",null,null,-1),Pc={style:{overflowX:"auto",height:"84%"}},Ac=Object(i["createVNode"])("b",null,"Select specimen",-1),Ec=Object(i["createTextVNode"])("Test: "),Bc=Object(i["createTextVNode"])(" Close "),Fc=Object(i["createTextVNode"])(" Submit ");function Lc(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-label"),s=Object(i["resolveComponent"])("ion-segment-button"),u=Object(i["resolveComponent"])("ion-segment"),l=Object(i["resolveComponent"])("report-table"),d=Object(i["resolveComponent"])("ion-title"),p=Object(i["resolveComponent"])("ion-toolbar"),b=Object(i["resolveComponent"])("ion-header"),f=Object(i["resolveComponent"])("ion-item"),m=Object(i["resolveComponent"])("ion-list"),h=Object(i["resolveComponent"])("ion-col"),g=Object(i["resolveComponent"])("ion-chip"),v=Object(i["resolveComponent"])("ion-row"),O=Object(i["resolveComponent"])("ion-content"),j=Object(i["resolveComponent"])("ion-button"),_=Object(i["resolveComponent"])("ion-footer"),w=Object(i["resolveComponent"])("ion-page"),k=Object(i["resolveComponent"])("ion-modal");return Object(i["openBlock"])(),Object(i["createBlock"])(i["Fragment"],null,[Tc,Object(i["createVNode"])(u,{scrollable:"",value:e.activeTab,class:"ion-justify-content-center"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(s,{value:"openOrders",onClick:t[1]||(t[1]=function(t){return e.activeTab="openOrders"})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,{class:"his-lg-text"},{default:Object(i["withCtx"])((function(){return[Ic]})),_:1})]})),_:1}),Object(i["createVNode"])(s,{class:"his-lg-text",value:"drawnOrders",onClick:t[2]||(t[2]=function(t){return e.activeTab="drawnOrders"})},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,null,{default:Object(i["withCtx"])((function(){return[Rc]})),_:1})]})),_:1})]})),_:1},8,["value"]),Sc,Object(i["createVNode"])("div",Pc,["openOrders"===e.activeTab?(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:0,config:{showIndex:!1},rows:e.labOrderRows,columns:e.openColumns},null,8,["rows","columns"])):Object(i["createCommentVNode"])("",!0),"drawnOrders"===e.activeTab?(Object(i["openBlock"])(),Object(i["createBlock"])(l,{key:1,config:{showIndex:!1},rows:e.drawnOrders,columns:e.drawnColumns},null,8,["rows","columns"])):Object(i["createCommentVNode"])("",!0)]),Object(i["createVNode"])(k,{"is-open":e.showSpecimenModal,class:"custom-modal"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(w,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(b,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(d,null,{default:Object(i["withCtx"])((function(){return[Ac]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(O,{class:"ion-padding"},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(v,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(h,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(m,null,{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.specimens,(function(t,n){return Object(i["openBlock"])(),Object(i["createBlock"])(f,{key:n,color:e.selectedSpecimen.name===t.name?"primary":"",onClick:function(n){return e.selectedSpecimen=t}},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(c,null,{default:Object(i["withCtx"])((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(t.name),1)]})),_:2},1024)]})),_:2},1032,["color","onClick"])})),128))]})),_:1})]})),_:1}),Object(i["createVNode"])(h,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(m,null,{default:Object(i["withCtx"])((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.order.tests,(function(e,t){return Object(i["openBlock"])(),Object(i["createBlock"])(f,{lines:"none",key:t},{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(g,{color:"success"},{default:Object(i["withCtx"])((function(){return[Ec,Object(i["createVNode"])("b",null,Object(i["toDisplayString"])(e.name),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(i["createVNode"])(_,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(p,null,{default:Object(i["withCtx"])((function(){return[Object(i["createVNode"])(j,{color:"danger",slot:"start",onClick:t[3]||(t[3]=function(t){e.showSpecimenModal=!1,e.selectedSpecimen={}})},{default:Object(i["withCtx"])((function(){return[Bc]})),_:1}),Object(i["createVNode"])(j,{disabled:!e.selectedSpecimen.name,color:"success",slot:"end",onClick:t[4]||(t[4]=function(){e.showSpecimenModal=!0,e.drawOrder()})},{default:Object(i["withCtx"])((function(){return[Fc]})),_:1},8,["disabled"])]})),_:1})]})),_:1})]})),_:1})]})),_:1},8,["is-open"])],64)}var Mc=n("9c73");function Hc(e){return Uc.apply(this,arguments)}function Uc(){return Uc=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,c,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:[],e.next=3,Object(h["a"])("Are you sure you want to void?");case 3:if(r=e.sent,r){e.next=6;break}return e.abrupt("return");case 6:return a=[{text:"Mistake/ Wrong Entry",role:"Mistake/ Wrong Entry"},{text:"Duplicate",role:"Duplicate"},{text:"System Error",role:"System Error"},{text:"Cancel",role:"cancel"}],Object(O["isEmpty"])(n)||(a=n.map((function(e){return{text:e,role:e}})),a.push({text:"Cancel",role:"Cancel"})),e.next=10,ge["X"].create({header:"Are you sure you want to void this Encounter?",subHeader:"Please specify reason for voiding this encounter",mode:"ios",buttons:a});case 10:return o=e.sent,o.present(),e.next=14,o.onDidDismiss();case 14:i=e.sent,c=i.role,"cancel"!=c&&t(c);case 17:case"end":return e.stop()}}),e)}))),Uc.apply(this,arguments)}var qc={style:{background:"#f1f1f1",color:"#333",fontSize:"1.1rem !important"}},Gc=Object(i["defineComponent"])({components:{IonTitle:ge["U"],IonCol:ge["m"],IonRow:ge["J"],IonButton:ge["d"],IonList:ge["y"],IonFooter:ge["o"],IonToolbar:ge["V"],IonHeader:ge["q"],IonItem:ge["w"],IonChip:ge["l"],IonModal:ge["D"],IonContent:ge["n"],IonPage:ge["F"],ReportTable:Bt["a"],IonSegment:ge["L"],IonLabel:ge["x"],IonSegmentButton:ge["M"]},emits:["onProgramVisitDates"],data:function(){return{initiated:!1,showSpecimenModal:!1,specimens:[],order:{},selectedSpecimen:{},service:{},activeTab:"openOrders",drawnColumns:[[N["a"].thTxt("Accession #",qc),N["a"].thTxt("Test",qc),N["a"].thTxt("Actions",qc)]],openColumns:[[N["a"].thTxt("Accession #",qc),N["a"].thTxt("Test",qc),N["a"].thTxt("Reason for test",qc),N["a"].thTxt("Drawn",qc),N["a"].thTxt("Void",qc)]],drawnOrdersData:[],openOrdersData:[],drawnOrders:[],labOrderRows:[]}},watch:{visitDate:{handler:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.initiated){n.next=4;break}return n.next=3,t.init();case 3:t.initiated=!0;case 4:e&&t.activeTab&&(t.drawnOrders=t.getdrawnOrders(t.drawnOrdersData.filter((function(n){return t.toDate(n.order_date)===e}))),t.labOrderRows=t.getLabOrderRows(t.openOrdersData.filter((function(n){return t.toDate(n.order_date)===e}))));case 5:case"end":return n.stop()}}),n)})))()},immediate:!0}},methods:{init:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.service=new Mc["a"](e.patient.getID()),t.next=3,e.service.getOrders("ordered");case 3:return e.openOrdersData=t.sent,t.next=6,e.service.getOrders("drawn");case 6:e.drawnOrdersData=t.sent,n=e.drawnOrdersData.concat(e.openOrdersData).map((function(t){return{label:g["b"].toStandardHisDisplayFormat(t.order_date),value:e.toDate(t.order_date)}})),e.$emit("onProgramVisitDates",n);case 9:case"end":return t.stop()}}),t)})))()},toDate:function(e){return g["b"].toStandardHisFormat(e)},removeLabOrderRow:function(e){this.labOrderRows=this.labOrderRows.filter((function(t){var n,r;return(null===(n=t[0])||void 0===n||null===(r=n.value)||void 0===r?void 0:r.orderID)!=e}))},drawOrder:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.service.updateOrderSpecimen(e.order.order_id,e.selectedSpecimen.concept_id);case 3:if(n=t.sent,!n){t.next=11;break}e.drawnOrders=e.drawnOrders.concat(e.getdrawnOrders([n])),e.removeLabOrderRow(e.order.order_id),e.showSpecimenModal=!1,e.service.printSpecimenLabel(e.order.order_id),t.next=12;break;case 11:throw"Unable to draw sample";case 12:t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),console.error(t.t0),Object(h["c"])(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()},getLabOrderRows:function(e){var t=this;return e.map((function(e){return[N["a"].td(e.accession_number,{value:{orderID:e.order_id}}),N["a"].td(e.tests.map((function(e){return e.name})).join(",")),N["a"].td(e.reason_for_test.name||"N/A"),N["a"].tdBtn("Draw",Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.order=e,t.showSpecimenModal=!0,n.next=4,Mc["a"].getSpecimensForTests(e.tests);case 4:t.specimens=n.sent;case 5:case"end":return n.stop()}}),n)}))),{},"success"),N["a"].tdBtn("Void",Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:Hc(function(){var n=Object(a["a"])(regeneratorRuntime.mark((function n(r){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.service.voidOrder(e.order_id,r);case 3:t.removeLabOrderRow(e.order_id),n.next=9;break;case 6:n.prev=6,n.t0=n["catch"](0),Object(h["c"])(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}(),["Duplicate order","Wrong client"]);case 1:case"end":return n.stop()}}),n)}))),{},"danger")]}))},getdrawnOrders:function(e){var t=this;return e.map((function(e){return[N["a"].td(e.accession_number),N["a"].td(e.tests.map((function(e){return e.name})).join(",")),N["a"].tdBtn("Print",(function(){return t.service.printSpecimenLabel(e.order_id)}))]}))}},props:{patient:{type:Object,required:!0},visitDate:{type:String}}});const zc=T()(Gc,[["render",Lc]]);var Yc=zc,Wc=[{id:"draw samples",name:"Draw Samples",icon:"social_history.png",action:function(e,t){var n=e.patient;t.push("/los/forms/order/".concat(n.patient_id,"?type=DRAW_SAMPLES"))}}],$c=[{name:"order tests",path:"/los/forms/order/:patient_id",component:function(){return n.e("chunk-2d237731").then(n.bind(null,"fabb"))}},{name:"Tests requested report",path:"/los/report/tests/requests",component:function(){return n.e("chunk-2d2297b9").then(n.bind(null,"de46"))}},{name:"Test results report",path:"/los/report/tests/results",component:function(){return n.e("chunk-2d226ccc").then(n.bind(null,"e9ce"))}}],Kc={programID:23,isPocApp:!0,applicationName:"LOS",applicationIcon:"order.png",applicationDescription:"Lab Order System",appRoutes:$c,primaryPatientActivites:Wc,secondaryPatientActivites:[],globalPropertySettings:[],homeOverviewComponent:Dc,customPatientDashboardContentComponent:Yc,confirmationSummary:function(e){return{"PATIENT IDENTIFIERS":function(){return[{label:"NPID",value:e.getNationalID()}]},"LAB ORDERS":function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,me["a"].getOrders(e.getID());case 2:return n=t.sent,t.abrupt("return",n.map((function(e){return{label:e.specimen.name,value:"".concat(e.accession_number," - ").concat(g["b"].toStandardHisDisplayFormat(e.order_date))}})));case 4:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}},programReports:[{name:"Clinical",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Test requested",pathUrl:"/los/report/tests/requests"},{name:"Test results",pathUrl:"/los/report/tests/results"}]}]},Jc=Kc,Xc=[{path:"/emc/home",redirect:"/emc/dashboard"},{name:"EMC Dashboard",path:"/emc/dashboard",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-417f6eaa")]).then(n.bind(null,"1d25"))}},{name:"Search/ Create client",path:"/emc/search",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-0dab48e8")]).then(n.bind(null,"de0e"))}},{name:"Users",path:"/emc/users",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-5edc5a62")]).then(n.bind(null,"7498"))}},{name:"User Profile",path:"/emc/profile",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-46991e34")]).then(n.bind(null,"b384"))}},{name:"Patient Regstration",path:"/emc/patient/registration",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-17e27673")]).then(n.bind(null,"e3d3"))}},{name:"EMC Mastercard",path:"/emc/patient/:patientId",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-2840da78"),n.e("chunk-14c7bf0c")]).then(n.bind(null,"99e7"))}},{path:"/emc/registration/:id/:new",name:"new registration",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-2840da78"),n.e("chunk-92e17dd6")]).then(n.bind(null,"897c"))}},{path:"/emc/staging/:id",name:"HIV staging",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-2840da78"),n.e("chunk-e3536730")]).then(n.bind(null,"572f"))}},{path:"/emc/report/clinic",component:function(){return n.e("chunk-2d0dd82f").then(n.bind(null,"8265"))},children:[{name:"clinic_appointments",path:"appointments",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-16967bc5")]).then(n.bind(null,"2b4d"))}},{name:"clinic_defaulters",path:"defaulters",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-16956cff")]).then(n.bind(null,"190b"))}},{name:"missed_appointments",path:"missed_appointments",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-16ac8575")]).then(n.bind(null,"d323"))}},{name:"regimen_dispensation",path:"regimen_dispensation",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-16ad0ee7")]).then(n.bind(null,"e7d4"))}},{name:"regimen_switch",path:"regimen_switch",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-1698c31f")]).then(n.bind(null,"7aa1"))}},{name:"pregnant_patients",path:"pregnant_patients",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-16985331")]).then(n.bind(null,"6bee"))}},{name:"incomplete_visits",path:"incomplete_visits",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-16ab2138")]).then(n.bind(null,"a158"))}},{name:"clients_due_for_vl",path:"clients_due_for_vl",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-1697a130")]).then(n.bind(null,"649f"))}},{name:"regimen_formulation",path:"regimen_formulation",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-1696389c")]).then(n.bind(null,"3192"))}}]},{path:"/emc/report/pepfar",component:function(){return n.e("chunk-2d0dd82f").then(n.bind(null,"8265"))},children:[{name:"sc_arvdisp",path:"sc_arvdisp",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-003bf392")]).then(n.bind(null,"2a4c"))}},{name:"vl_coverage",path:"vl_coverage",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-4d29025e")]).then(n.bind(null,"2e5f"))}},{name:"tb_prev",path:"tb_prev",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-d73f0fe0")]).then(n.bind(null,"d290"))}},{name:"defaulters",path:"defaulters",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-870a1b9e")]).then(n.bind(null,"897cc"))}},{name:"tx_rtt",path:"tx_rtt",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-7cfd9772")]).then(n.bind(null,"469e"))}},{name:"tx_ml",path:"tx_ml",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-7d19a135")]).then(n.bind(null,"f55f"))}},{name:"tx_curr_mmd",path:"tx_curr_mmd",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-e9d7212a")]).then(n.bind(null,"c5a9"))}},{path:"pepfar_disaggregated",name:"pepfar_disaggregated",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-f3be37f8")]).then(n.bind(null,"f315"))}}]},{path:"/emc/report/moh",component:function(){return n.e("chunk-2d0dd82f").then(n.bind(null,"8265"))},children:[{name:"tx_curr_mmd",path:"tx_curr_mmd",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-830779de")]).then(n.bind(null,"c4d7"))}},{name:"tpt_initiation",path:"tpt_initiation",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-47593ffb")]).then(n.bind(null,"a638"))}},{name:"regimen_distribution_weight",path:"regimen_distribution_weight",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-16abb9b8")]).then(n.bind(null,"b9fb"))}},{name:"survival_analysis",path:"survival_analysis",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-1696547a")]).then(n.bind(null,"37e6"))}},{name:"viral_load",path:"viral_load",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-16acc9b1")]).then(n.bind(null,"cd6a"))}},{name:"cohort_disaggregated",path:"cohort_disaggregated",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-6b7fe099")]).then(n.bind(null,"fcba"))}},{name:"cohort",path:"cohort",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-6be05cc1")]).then(n.bind(null,"5efc"))}}]},{path:"/emc/tools",component:function(){return n.e("chunk-2d0dd82f").then(n.bind(null,"8265"))},children:[{name:"data_cleaning",path:"data_cleaning",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-16976a46")]).then(n.bind(null,"4be8"))}},{name:"cleaning_verification",path:"cleaning_verification",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-2840da78"),n.e("chunk-5863124c")]).then(n.bind(null,"8d90"))}},{name:"patient_visit_stats",path:"patient_visit_stats",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-56e43528"),n.e("chunk-28ca73e4"),n.e("chunk-2feddfc6")]).then(n.bind(null,"1648"))}},{name:"patient_merging",path:"patient_merging",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-106f1396")]).then(n.bind(null,"d725"))}}]},{path:"/emc/settings/site_settings",component:function(){return Promise.all([n.e("chunk-0745a21c"),n.e("chunk-5e7fcd2c")]).then(n.bind(null,"94fe"))}}],Qc=[{name:"MoH Reports",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",condition:function(){return!0},files:[{name:"Cohort",pathName:"emc_cohort",icon:"reports/cohort.png"},{name:"Cohort Disagreggated",pathName:"emc_moh_disaggregated",icon:"reports/split.png"},{name:"Survival analysis",pathName:"emc_survival_analysis",icon:"reports/refill.png"},{name:"Viral load",pathName:"emc_viral_load",icon:"reports/vl.png"},{name:"Regimen distribution, Weight",pathName:"emc_regimen_distribution_weight",icon:"reports/electronics.png"},{name:"TX CURR MMD",pathName:"emc_moh_tx_curr_mmd",icon:"reports/px.png"},{name:"TPT new initiation",pathName:"emc_moh_tpt",icon:"reports/new_initiation.png"}]},{name:"Clinic Reports",icon:"reports/clinic.png",defaultFilesIcon:"reports.png",files:[{name:"Diagnosis by address",pathName:"clinic_diagnosis_by_address"},{name:"Diagnosis",pathName:"clinic_diagnosis"},{name:"Registration report",pathName:"clinic_registration"},{name:"LA report",pathName:"clinic_la"},{name:"Cases seen report",pathName:"clinic_cases_seen"},{name:"Mental health report",pathName:"clinic_mental_health"},{name:"Drugs (dispensed without prescription)",pathName:"clinic_drugs_given"},{name:"Drugs (prescribed and dispensed)",pathName:"clinic_drugs"},{name:"With NIDs",pathName:"clinic_with_nids"}]},{name:"PEPFAR Reports",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"Diagnosis by address",pathName:"clinic_diagnosis_by_address"},{name:"Diagnosis",pathName:"clinic_diagnosis"},{name:"Registration report",pathName:"clinic_registration"},{name:"LA report",pathName:"clinic_la"},{name:"Cases seen report",pathName:"clinic_cases_seen"},{name:"Mental health report",pathName:"clinic_mental_health"},{name:"Drugs (dispensed without prescription)",pathName:"clinic_drugs_given"},{name:"Drugs (prescribed and dispensed)",pathName:"clinic_drugs"},{name:"With NIDs",pathName:"clinic_with_nids"}]}],Zc={programID:1,isPocApp:!1,appLandingPage:"/emc/home",applicationName:"EMC",applicationIcon:"aids.png",applicationDescription:"HIV Electronic Master card App",appRoutes:Xc,homeOverviewComponent:{},primaryPatientActivites:[],secondaryPatientActivites:[],globalPropertySettings:[],programReports:Qc,programPatientIdentifiers:{"ARV Number":{id:4,name:"ARV Number",isPrimary:!0,useForSearch:!0,prefix:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0="",e.next=3,Fi["b"].sitePrefix();case 3:return e.t1=e.sent,e.abrupt("return",e.t0.concat.call(e.t0,e.t1,"-ARV-"));case 5:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}}},es=Zc,ts=[{name:"ANC Vitals",path:"/anc/encounters/vitals/:patient_id",component:function(){return n.e("chunk-2d0deeb6").then(n.bind(null,"8866"))}},{name:"anc_pepfar_disaggregated",path:"/anc/pepfar_disaggregated",component:function(){return n.e("chunk-d2a20e8a").then(n.bind(null,"6f07"))}},{name:"anc_clinic_appointment",path:"/anc/clinic_appointments",component:function(){return n.e("chunk-2d0f0d90").then(n.bind(null,"9db1"))}},{name:"anc_moh_report",path:"/anc/moh_report/:template_id",component:function(){return n.e("chunk-149afc72").then(n.bind(null,"0128"))}},{name:"art_followup",path:"/anc/pmtct/:patient_id",component:function(){return n.e("chunk-2d0cedec").then(n.bind(null,"60fb"))}},{name:"anc data-cleaning tools",path:"/anc/datacleaning",component:function(){return n.e("chunk-2d0e8851").then(n.bind(null,"8a2d"))}},{name:"drugset management",path:"/anc/drugset",component:function(){return n.e("chunk-0c5b2e2c").then(n.bind(null,"3286"))}},{name:"add anc drugset",path:"/anc/drugset/add",component:function(){return n.e("chunk-0ced981c").then(n.bind(null,"668a"))}},{name:"anc dispensing",path:"/anc/ttv/:patient_id",component:function(){return n.e("chunk-033a882d").then(n.bind(null,"dc52"))}},{name:"anc visit type",path:"/anc/visit/:patient_id",component:function(){return n.e("chunk-2d229093").then(n.bind(null,"dc75"))}},{name:"surgical history",path:"/anc/surgical_history/:patient_id",component:function(){return n.e("chunk-2d0aa91b").then(n.bind(null,"1226"))}},{name:"medical history",path:"/anc/medical_history/:patient_id",component:function(){return n.e("chunk-77126da4").then(n.bind(null,"ba823"))}},{name:"anc examination",path:"/anc/examination/:patient_id",component:function(){return n.e("chunk-590f9388").then(n.bind(null,"2819"))}},{name:"social history",path:"/anc/social_history/:patient_id",component:function(){return n.e("chunk-2d0de126").then(n.bind(null,"83a6"))}},{name:"lab results",path:"/anc/lab_results/:patient_id",component:function(){return n.e("chunk-2d21f489").then(n.bind(null,"d8ba"))}},{name:"obstetric history",path:"/anc/obsteric/:patient_id",component:function(){return n.e("chunk-2d0a4819").then(n.bind(null,"0773"))}},{name:"current pregnancy",path:"/anc/current_pregnancy/:patient_id",component:function(){return n.e("chunk-72632c0e").then(n.bind(null,"9841"))}},{name:"anc treatment",path:"/anc/treatment/:patient_id",component:function(){return n.e("chunk-6d4bfe7a").then(n.bind(null,"46d3"))}}];function ns(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-data-table");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{asyncRows:e.getRows,columns:e.columns,config:{tableCssTheme:"art-report-theme",skeletonTextRows:5,showIndex:!1}},null,8,["asyncRows","columns"])}var rs=function(e){Object(De["a"])(n,e);var t=Object(Te["a"])(n);function n(){return Object(Ce["a"])(this,n),t.call(this)}return Object(Ve["a"])(n,null,[{key:"getStats",value:function(){return this.getJson("programs/".concat(this.getProgramID(),"/reports/visits"),{name:"visits_report",start_date:this.getSessionDate()})}}]),n}(At["e"]),as=Object(i["defineComponent"])({components:{ReportDataTable:Bt["a"]},setup:function(){var e=[[N["a"].thTxt("Total with:"),N["a"].thTxt("Me"),N["a"].thTxt("Today"),N["a"].thTxt("This Year")]];function t(){return n.apply(this,arguments)}function n(){return n=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,rs.getStats();case 2:return t=e.sent,n=[1,2,3,4,">5"],e.abrupt("return",n.map((function(e){return[N["a"].td("".concat(e," ").concat(1===e?"visit":"visits")),N["a"].td(t.user[e]),N["a"].td(t.today[e]),N["a"].td(t.year[e])]})));case 5:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}return{getRows:t,columns:e}}});const os=T()(as,[["render",ns]]);var is=os,cs=n("9e49"),ss=n("2989"),us=n("afbc");function ls(e){return ds.apply(this,arguments)}function ds(){return ds=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(h["a"])("Do you want switch to ART Application to proceed with PMTCT tasks?");case 2:if(!e.sent){e.next=6;break}Z["a"].switchAppWorkflow("ART",t.patientID,t.router,Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new $e["a"](t.patientID,-1),e.next=3,n.createEncounter();case 3:return e.next=5,n.savePatientType("New patient");case 5:case"end":return e.stop()}}),e)})))),e.next=7;break;case 6:t.router.push("/patient/dashboard/"+t.patientID);case 7:case"end":return e.stop()}}),e)}))),ds.apply(this,arguments)}function ps(e,t){return!!Array.isArray(e)&&e.includes(t)}var bs=[{id:"print_session_lab_results",name:"Lab results (Print)",icon:"barcode.svg",action:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.patientID,r=t.visitDate,a=new cs["a"](n,-1),a.date=r,e.next=5,a.printLabResults();case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{id:"print_session_social_history",name:"Patient history (Print)",icon:"barcode.svg",action:function(e){var t=e.patientID,n=new ss["a"](t,-1);n.printSocialHistory()}}],fs=[{id:"anc dispensing",name:"TTV VACCINATION",encounterTypeName:"DISPENSING",icon:"prescription/medication.png"},{id:"anc visit type",name:"ANC VISIT TYPE",icon:"registration.png"},{id:"surgical history",name:"SURGICAL HISTORY",icon:"surgical_history.png",disabled:function(e){return ps(e.savedEncounters,"SURGICAL HISTORY")}},{id:"medical history",name:"Medical History",icon:"medical_history.png",disabled:function(e){return ps(e.savedEncounters,"MEDICAL HISTORY")}},{id:"anc examination",name:"Examination",workflowID:"ANC examination",encounterTypeName:"ANC EXAMINATION",icon:"diagnosis.png"},{id:"social history",name:"Social History",icon:"social_history.png",disabled:function(e){return ps(e.savedEncounters,"SOCIAL HISTORY")}},{id:"lab results",name:"Lab Results",icon:"lab.png"},{id:"obstetric history",name:"Obstetric history",icon:"obstetric_history.png",disabled:function(e){return ps(e.savedEncounters,"OBSTETRIC HISTORY")}},{id:"current pregnancy",name:"Current Pregnancy",icon:"current_preg.png",disabled:function(e){return ps(e.savedEncounters,"CURRENT PREGNANCY")}},{id:"anc treatment",workflowID:"Give drugs",name:"anc treatment",encounterTypeName:"TREATMENT",icon:"dispensing.png"},{id:"art_followup",name:"art_followup",workflowID:"ARV Follow Up",icon:"pmtct.png"},{id:"vitals",name:"Vitals",icon:"vitals.png",action:function(e){us["a"].push("/anc/encounters/vitals/".concat(e.patientID))},taskCompletionChecklist:["Weight"]},{id:"appointment",name:"Manage Appointments",encounterTypeName:"APPOINTMENT",workflowID:"Manage appointment",icon:"appointment.png"},{id:"hiv clinic registration",name:"Hiv clinic registration",workflowID:"HIV first visits",icon:"registration.png",action:function(e){return ls(e)},condition:function(){return!1}},{id:"hiv reception",name:"HIV reception",workflowID:"HIV reception visits",icon:"reception.png",action:function(e){return ls(e)},condition:function(){return!1}}],ms=n("f01e"),hs=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"Cohort",pathUrl:"/anc/moh_report/CohortTemplate"},{name:"Monthly",pathUrl:"/anc/moh_report/MonthlyTemplate"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Appointments",pathName:"anc_clinic_appointment"},{name:"Incomplete visits",pathUrl:"/anc/datacleaning?cleaning_tool=".concat(ms["a"].INCOMPLETE_VISITS)}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"Disaggregated",pathName:"anc_pepfar_disaggregated"}]}],gs={programID:12,applicationName:"ANC",applicationIcon:"anc.png",applicationDescription:"Antenatal Program",isPocApp:!0,appRoutes:ts,primaryPatientActivites:fs,secondaryPatientActivites:bs,programReports:hs,homeOverviewComponent:is,init:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nc["c"])(fs);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),formatPatientProgramSummary:function(e){return[{label:"Date of last ANC visit",value:e.date_of_lnmp||"N/A"},{label:"Gestation:",value:e.gestation?"".concat(e.gestation," week(s)"):"N/A"},{label:"ANC Visits",value:e.anc_visits||"N/A"},{label:"Current outcome",value:e.current_outcome||"N/A"}]},confirmationSummary:function(e,t){var n=e.getID(),r=function(e){return g["b"].toStandardHisDisplayFormat(e)};return{"PATIENT IDENTIFIERS":function(){return[{label:"NPID",value:e.getNationalID()},{label:"National ID",value:e.getMWNationalID()}]},"PROGRAM INFO":function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Pt["a"].getFirstValueDatetime(n,"appointment date");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0="N/A";case 5:return t=e.t0,e.next=8,x["a"].getProgramInformation(n);case 8:return a=e.sent,e.t1={label:"ANC visit",value:a.anc_visits||"N/A"},e.t2={label:"Next Appointment Date",value:r(t)},e.t3={label:"Gestation Age",value:a.gestation?"".concat(a.gestation," week(s)"):"N/A"},e.t4={label:"Date of LMP",value:r(a.date_of_lnmp)},e.t5={label:"EDOD",value:a.edod?r(a.edod):"N/A"},e.next=16,qi["a"].getNextTaskParams(n);case 16:if(e.t6=e.sent.name.toUpperCase(),e.t6){e.next=19;break}e.t6="N/A";case 19:return e.t7=e.t6,e.t8={label:"Next task",value:e.t7},e.abrupt("return",[e.t1,e.t2,e.t3,e.t4,e.t5,e.t8]);case 22:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),OUTCOME:function(){return[{label:"Current Outcome",value:t.outcome||"N/A"}]},LABS:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,me["a"].getOrders(n);case 2:return e.abrupt("return",e.sent.map((function(e){return{label:e.tests.map((function(e){return e.name})).join(" & "),value:g["b"].toStandardHisDisplayFormat(e.order_date)}})));case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),ALERTS:function(){return[]},GUARDIANS:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vn["a"].getGuardianDetails(n);case 2:if(t=e.sent,!t){e.next=5;break}return e.abrupt("return",t.map((function(e){return{label:e.name,value:e.relationshipType}})));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}},onRegisterPatient:function(e){return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new Ie["a"](e,5,-1),t.next=3,n.createEncounter();case 3:return t.next=5,n.saveValueCodedObs("Type of patient","New patient");case 5:case"end":return t.stop()}}),t)})))()},programPatientIdentifiers:{"National ID":{id:28,name:"National ID",isPrimary:!0,useForSearch:!0,prefix:function(){return""}}}},vs=gs,Os=Object(i["withScopeId"])("data-v-87abacbc");Object(i["pushScopeId"])("data-v-87abacbc");var js={class:"los-overview"},_s=Object(i["createVNode"])("h4",null,"Today's clients booked from HIV/ART program",-1);Object(i["popScopeId"])();var ws=Os((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("his-basic-table"),s=Object(i["resolveComponent"])("ion-col"),u=Object(i["resolveComponent"])("ion-row"),l=Object(i["resolveComponent"])("ion-grid");return Object(i["openBlock"])(),Object(i["createBlock"])("div",js,[Object(i["createVNode"])(l,{style:{height:"100%"}},{default:Os((function(){return[Object(i["createVNode"])(u,null,{default:Os((function(){return[Object(i["createVNode"])(s,{size:"6"},{default:Os((function(){return[Object(i["createVNode"])(c,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])]})),_:1}),Object(i["createVNode"])(s,{size:"6",style:{"border-left":"5px solid black"}},{default:Os((function(){return[_s,Object(i["createVNode"])(c,{columns:e.screenedColumns,rows:e.screenedRows},null,8,["columns","rows"])]})),_:1})]})),_:1})]})),_:1})])})),ks=n("a3a5"),ys=function(e){Object(De["a"])(n,e);var t=Object(Te["a"])(n);function n(){return Object(Ce["a"])(this,n),t.call(this)}return Object(Ve["a"])(n,null,[{key:"overviewStats",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.dashboardStats();case 2:for(r in t=e.sent,n=[],t)n.push([r,t[r]]);return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"screenedOverviewStats",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.screenedStats();case 2:for(r in t=e.sent,n=[],t){a=t[r],o=0,i=Object(Yn["a"])(a);try{for(i.s();!(c=i.n()).done;)s=c.value,1==s["screening_method_present"]&&o++}catch(u){i.e(u)}finally{i.f()}n.push([r,a.length,o])}return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"dashboardStats",value:function(){return Object(yc["a"])(Object(xc["a"])(n),"getJson",this).call(this,"dashboard_stats",{date:Object(yc["a"])(Object(xc["a"])(n),"getSessionDate",this).call(this),program_id:Object(yc["a"])(Object(xc["a"])(n),"getProgramID",this).call(this)})}},{key:"screenedStats",value:function(){return Object(yc["a"])(Object(xc["a"])(n),"getJson",this).call(this,"screened_for_cxca",{date:Object(yc["a"])(Object(xc["a"])(n),"getSessionDate",this).call(this),program_id:Object(yc["a"])(Object(xc["a"])(n),"getProgramID",this).call(this),report_name:"BOOKED CLIENTS FROM ART",start_date:Object(yc["a"])(Object(xc["a"])(n),"getSessionDate",this).call(this),end_date:Object(yc["a"])(Object(xc["a"])(n),"getSessionDate",this).call(this)})}}]),n}(At["e"]),xs=Object(i["defineComponent"])({components:{HisBasicTable:ks["a"]},data:function(){return{rows:[],columns:["Today's screening method","Count"],screenedColumns:["Age group","Booked","Screened"],screenedRows:[]}},created:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.setRows();case 2:case"end":return t.stop()}}),t)})))()},methods:{setRows:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ys.overviewStats();case 2:return n=t.sent,e.rows=Object(p["a"])(n),t.next=6,ys.screenedOverviewStats();case 6:r=t.sent,e.screenedRows=Object(p["a"])(r);case 8:case"end":return t.stop()}}),t)})))()}}});n("8081");const Ns=T()(xs,[["render",ws],["__scopeId","data-v-87abacbc"]]);var Cs=Ns,Vs=[{id:"cxca test",name:"cxca test",workflowID:"cxca test",icon:"via-test.png"},{id:"cxca screening result",name:"cxca screening result",workflowID:"cxca screening result",icon:"first-aid-kit.png"},{id:"cxca treatment",name:"cxca treatment",workflowID:"cxca treatment",icon:"cancer.png"},{id:"cxca referral feedback",name:"cxca referral feedback",workflowID:"cxca referral feedback",icon:"referral.png"},{id:"appointment",name:"Manage Appointments",workflowID:"Manage Appointments",encounterTypeName:"appointment",icon:"appointment.png"}],Ds=[{name:"cxca test",path:"/cxca/encounters/clinical_assessment/:patient_id",component:function(){return n.e("chunk-2d226508").then(n.bind(null,"e7aa"))}},{name:"cxca treatment",path:"/cxca/encounters/cancer_treatment/:patient_id",component:function(){return n.e("chunk-2d0a4381").then(n.bind(null,"0605"))}},{name:"cxca reception",path:"/cxca/encounters/cancer_reception/:patient_id",component:function(){return n.e("chunk-2d21a0bf").then(n.bind(null,"ba9c"))}},{name:"cxca referral feedback",path:"/cxca/encounters/cancer_feedback/:patient_id",component:function(){return n.e("chunk-2d0a36f9").then(n.bind(null,"01bd"))}},{name:"cxca screening result",path:"/cxca/encounters/cancer_screening_result/:patient_id",component:function(){return n.e("chunk-2d21e7b5").then(n.bind(null,"d66c"))}},{name:"cxca result",path:"/cxca/encounters/cancer_result/:patient_id",component:function(){return n.e("chunk-2d0ab079").then(n.bind(null,"1411"))}},{path:"/cxca/report/pepfar",component:Xa,children:[{name:"cc_basic_results",path:"cc_basic_results",component:function(){return n.e("chunk-a1cd6b92").then(n.bind(null,"601a"))}},{name:"cc_all_questions",path:"cc_all_questions",component:function(){return n.e("chunk-e1b2290e").then(n.bind(null,"f240"))}},{name:"cc_type_of_screen",path:"cc_type_of_screen",component:function(){return n.e("chunk-56a17156").then(n.bind(null,"ac7a"))}},{name:"cc_screen_result",path:"cc_screen_result",component:function(){return n.e("chunk-b5456e0e").then(n.bind(null,"3c35f"))}},{name:"cc_type_of_treatment",path:"cc_type_of_treatment",component:function(){return n.e("chunk-08704c19").then(n.bind(null,"0437"))}}]},{path:"/cxca/report/clinic",component:Xa,children:[{name:"cc_visit_reasons",path:"cc_visit_reasons",component:function(){return n.e("chunk-453836da").then(n.bind(null,"9e35"))}},{name:"cc_booked_clients",path:"cc_booked_clients",component:function(){return n.e("chunk-c7215964").then(n.bind(null,"c930"))}}]}],Ts=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",files:[{name:"MoH report",pathName:"screened_for_cxca"}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Visit reason",pathName:"cc_visit_reasons"},{name:"Booked clients",pathName:"cc_booked_clients"}]},{name:"PEPFAR",icon:"login-logos/PEPFAR.png",defaultFilesIcon:"reports.png",files:[{name:"CC All Questions",pathName:"cc_all_questions"},{name:"CC Basic Results",pathName:"cc_basic_results"},{name:"CC Type of Screen",pathName:"cc_type_of_screen"},{name:"CC Screen Result",pathName:"cc_screen_result"},{name:"CC Type of Treatment",pathName:"cc_type_of_treatment"}]}];function Is(e){return Rs.apply(this,arguments)}function Rs(){return Rs=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Et["a"](t),e.next=3,n.enrollProgram();case 3:return r=new Ie["a"](t,5),e.next=6,r.createEncounter();case 6:return e.next=8,r.saveValueCodedObs("Type of patient","New Patient");case 8:case"end":return e.stop()}}),e)}))),Rs.apply(this,arguments)}var Ss={programID:24,applicationName:"CxCa",applicationIcon:"ccm.png",applicationDescription:"Cervical cancer screening module",appRoutes:Ds,isPocApp:!0,primaryPatientActivites:Vs,secondaryPatientActivites:[],globalPropertySettings:[],onRegisterPatient:Is,homeOverviewComponent:Cs,confirmationSummary:function(e,t){return{"PATIENT IDENTIFIERS":function(){return[{label:"NPID",value:e.getNationalID()}]}}},programReports:Ts},Ps=Ss,As=Object(i["withScopeId"])("data-v-14f2eb30");Object(i["pushScopeId"])("data-v-14f2eb30");var Es={class:"overview"};Object(i["popScopeId"])();var Bs=As((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-table");return Object(i["openBlock"])(),Object(i["createBlock"])("div",Es,[Object(i["createVNode"])(c,{rows:e.rows,columns:e.columns,config:{tableCssTheme:"art-report-theme",skeletonTextRows:5,showIndex:!1}},null,8,["rows","columns"])])})),Fs=n("866d"),Ls=Object(i["defineComponent"])({components:{ReportTable:Bt["a"]},setup:function(){var e=[[N["a"].thTxt("Task"),N["a"].thTxt("Me"),N["a"].thTxt("Today")]],t=Object(i["ref"])([]);return Object(i["onMounted"])((function(){var e=Fs["a"].getSessionDate(),n=new Fs["a"]("DASHBOARD STATISTICS",e,e),r=n.requestReport();"object"===Object(pe["a"])(r)&&r.then&&r.then((function(e){e.forEach((function(e){t.value.push([N["a"].td(e.name),N["a"].td(e.me),N["a"].td(e.clinic)])}))})).catch((function(e){return Object(h["c"])("".concat(e))}))})),{columns:e,rows:t}}});n("e63c");const Ms=T()(Ls,[["render",Bs],["__scopeId","data-v-14f2eb30"]]);var Hs=Ms,Us={programID:28,applicationName:"RADIOLOGY",applicationIcon:"radiology_types.png",applicationDescription:"Radiology service",homeOverviewComponent:Hs,configDefaultPatientDashboardCards:{alertsEnabled:!1,medicationsEnabled:!1,labEnabled:!1},appRoutes:[{name:"Examination",path:"/radiology/examination/:patient_id",component:function(){return n.e("chunk-2d20ebf7").then(n.bind(null,"b14f"))}},{name:"Radiology Appointment",path:"/radiology/appointment",component:function(){return n.e("chunk-2d20957d").then(n.bind(null,"a93b"))}},{name:"daily radiology report",path:"/radiology/report/daily",component:function(){return n.e("chunk-2d2089fc").then(n.bind(null,"a61b"))}},{name:"revenue radiology report",path:"/radiology/report/revenue",component:function(){return n.e("chunk-2d0d6ec8").then(n.bind(null,"752f"))}},{name:"radiology referral report",path:"/radiology/report/referral",component:function(){return n.e("chunk-2d0c77ae").then(n.bind(null,"5195"))}}],programReports:[{name:"Daily Report",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Daily Report",pathUrl:"/radiology/report/daily"}]},{name:"Revenue Collection Report",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Revenue Collection",pathUrl:"/radiology/report/revenue"}]},{name:"Referral Report",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Referral Report",pathUrl:"/radiology/report/referral"}]}],primaryPatientActivites:[{id:"Examination",name:"Examination",icon:"radiology_types.png"},{id:"Radiology Appointment",name:"Radiology Appointment",icon:"appointment.png"}],secondaryPatientActivites:[]},qs=Us,Gs=Object(i["withScopeId"])("data-v-1e3de004");Object(i["pushScopeId"])("data-v-1e3de004");var zs={class:"overview"};Object(i["popScopeId"])();var Ys=Gs((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("report-table");return Object(i["openBlock"])(),Object(i["createBlock"])("div",zs,[Object(i["createVNode"])(c,{rows:e.rows,columns:e.columns,config:{tableCssTheme:"art-report-theme",skeletonTextRows:5,showIndex:!1}},null,8,["rows","columns"])])})),Ws=function(e){Object(De["a"])(n,e);var t=Object(Te["a"])(n);function n(){return Object(Ce["a"])(this,n),t.call(this)}return Object(Ve["a"])(n,[{key:"requestReport",value:function(){return At["e"].getJson("dashboard_stats",{program_id:At["e"].getProgramID(),date:At["e"].getSessionDate()})}}]),n}(At["e"]),$s=Object(i["defineComponent"])({components:{ReportTable:Bt["a"]},setup:function(){var e=[[N["a"].thTxt("Task"),N["a"].thTxt("Me"),N["a"].thTxt("Today")]],t=Object(i["ref"])([]);return Object(i["onMounted"])((function(){var e=new Ws,n=e.requestReport();"object"===Object(pe["a"])(n)&&n.then&&n.then((function(e){["Newly Registered Patients","Returning Patients"].forEach((function(n){var r=e[n];t.value.push([N["a"].td(n),N["a"].td(r.me),N["a"].td(r.total)]),delete e[n]})),Object.keys(e).forEach((function(n){t.value.push([N["a"].td(n),N["a"].td(e[n].me),N["a"].td(e[n].total)])}))})).catch((function(e){return Object(h["c"])("".concat(e))}))})),{columns:e,rows:t}}});n("e109");const Ks=T()($s,[["render",Ys],["__scopeId","data-v-1e3de004"]]);var Js=Ks,Xs=[{id:"Outpatient Reception",name:"Outpatient Reception",icon:"reception.png"},{id:"Patient Services",name:"Patient Services",icon:"attributes.png"}],Qs=[],Zs=[{name:"Outpatient Reception",path:"/registration/encounters/outpatient_reception/:patient_id",component:function(){return n.e("chunk-2d210591").then(n.bind(null,"b805"))}},{name:"Patient Services",path:"/registration/encounters/patient_services/:patient_id",component:function(){return n.e("chunk-2d0c4c38").then(n.bind(null,"3be8"))}}];function eu(e){return tu.apply(this,arguments)}function tu(){return tu=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Et["a"](t),e.next=3,n.enrollProgram();case 3:return r=new Ie["a"](t,5),e.next=6,r.createEncounter();case 6:return e.next=8,r.saveValueCodedObs("Type of patient","New Patient");case 8:return us["a"].push("/registration/encounters/outpatient_reception/"+t),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)}))),tu.apply(this,arguments)}function nu(e,t){return ru.apply(this,arguments)}function ru(){return ru=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wt["a"].findByID(n);case 2:return r=e.sent,a=new Wt["a"](r),e.abrupt("return",[{label:"Malawi National ID",value:a.getMWNationalID()}]);case 5:case"end":return e.stop()}}),e)}))),ru.apply(this,arguments)}function au(e,t){return{"PATIENT IDENTIFIERS":function(){return[{label:"NPID",value:e.getNationalID()}]}}}var ou={programID:29,applicationName:"Registration",applicationIcon:"active-files.png",applicationDescription:"Patient Registration Program",appRoutes:Zs,programReports:Qs,primaryPatientActivites:Xs,secondaryPatientActivites:Xs,homeOverviewComponent:Js,onRegisterPatient:eu,formatPatientProgramSummary:nu,confirmationSummary:au,programPatientIdentifiers:{"National ID":{id:28,name:"National ID",isPrimary:!0,useForSearch:!0,prefix:function(){return""},validation:function(e){return f["a"].isMWNationalID(e)}}}},iu=ou,cu=Object(i["withScopeId"])("data-v-8f1b8bca"),su=cu((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("opd-stat-card"),s=Object(i["resolveComponent"])("ion-col"),u=Object(i["resolveComponent"])("ion-row"),l=Object(i["resolveComponent"])("opd-stat-chart"),d=Object(i["resolveComponent"])("syndromic-stat-chart"),p=Object(i["resolveComponent"])("ion-grid");return Object(i["openBlock"])(),Object(i["createBlock"])(p,null,{default:cu((function(){return[Object(i["createVNode"])(u,null,{default:cu((function(){return[(Object(i["openBlock"])(!0),Object(i["createBlock"])(i["Fragment"],null,Object(i["renderList"])(e.patientSummaryStats,(function(e){return Object(i["openBlock"])(),Object(i["createBlock"])(s,{key:e.label},{default:cu((function(){var t;return[Object(i["createVNode"])(c,{label:e.label,value:e.value,color:null!==(t=e.color)&&void 0!==t?t:""},null,8,["label","value","color"])]})),_:2},1024)})),128))]})),_:1}),Object(i["createVNode"])(u,null,{default:cu((function(){return[Object(i["createVNode"])(s,null,{default:cu((function(){return[Object(i["createVNode"])(l,{series:e.accumulativeVisits.visits,categories:e.accumulativeVisits.days},null,8,["series","categories"])]})),_:1}),Object(i["createVNode"])(s,null,{default:cu((function(){return[Object(i["createVNode"])(d,{categories:e.AccumulativePatietRespiratoryComplaints.categories,series:e.AccumulativePatietRespiratoryComplaints.series},null,8,["categories","series"])]})),_:1})]})),_:1})]})),_:1})})),uu=Object(i["withScopeId"])("data-v-5ce582b2"),lu=uu((function(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("ion-card-subtitle"),s=Object(i["resolveComponent"])("ion-spinner"),u=Object(i["resolveComponent"])("ion-card-content"),l=Object(i["resolveComponent"])("ion-card");return Object(i["openBlock"])(),Object(i["createBlock"])(l,{style:e.bgColor},{default:uu((function(){return[Object(i["createVNode"])(u,null,{default:uu((function(){return[Object(i["createVNode"])(c,null,{default:uu((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.label),1)]})),_:1}),-1===e.value?(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:0},{default:uu((function(){return[Object(i["createVNode"])(s,{name:"crescent"})]})),_:1})):(Object(i["openBlock"])(),Object(i["createBlock"])(c,{key:1},{default:uu((function(){return[Object(i["createTextVNode"])(Object(i["toDisplayString"])(e.value),1)]})),_:1}))]})),_:1})]})),_:1},8,["style"])})),du=Object(i["defineComponent"])({props:{label:String,value:Number,color:String},components:{IonCard:ge["f"],IonCardContent:ge["g"],IonCardSubtitle:ge["i"],IonSpinner:ge["Q"]},setup:function(e){var t;return{bgColor:"background-color: ".concat(null!==(t=e.color)&&void 0!==t?t:"")}}});n("985a");const pu=T()(du,[["render",lu],["__scopeId","data-v-5ce582b2"]]);var bu=pu;function fu(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("apexchart");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{width:"100%",height:"350px",type:"bar",options:e.options,series:e.series},null,8,["options","series"])}var mu=Object(i["defineComponent"])({props:{categories:Array,series:Array},setup:function(e){var t=Object(i["ref"])({chart:{height:"auto",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},toolbar:{show:!1}},title:{text:"New registered , Returning and Referred clients",margin:20,align:"center",style:{fontWeight:"regular"}},subtitle:{text:"For the past 12 months",align:"center",margin:10},xaxis:{categories:e.categories},yaxis:{min:0,forceNiceScale:!0,title:{text:"Number of clients"}},noData:{text:"Loading data. Please wait...",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#000000",fontSize:"30px",fontFamily:"Helvetica"}}});return{options:t}}});const hu=T()(mu,[["render",fu]]);var gu=hu;function vu(e,t,n,r,a,o){var c=Object(i["resolveComponent"])("apexchart");return Object(i["openBlock"])(),Object(i["createBlock"])(c,{width:"99%",height:"350px",type:"area",options:e.options,series:e.series},null,8,["options","series"])}var Ou=Object(i["defineComponent"])({props:{categories:Array,series:Array},setup:function(e){var t=Object(i["ref"])({chart:{height:"auto",animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:350}},toolbar:{show:!1}},title:{text:"Influenza Like Illness , Respiratory",margin:20,align:"center",style:{fontWeight:"regular"}},subtitle:{text:"For the past 12 months",align:"center",margin:10},xaxis:{categories:e.categories},yaxis:{min:0,forceNiceScale:!0,title:{text:"Number of clients"}},noData:{text:"Loading data. Please wait...",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#000000",fontSize:"30px",fontFamily:"Helvetica"}}});return{options:t}}});const ju=T()(Ou,[["render",vu]]);var _u=ju;function wu(e){return e.charAt(0).toUpperCase()+e.slice(1)}var ku={capitalizeFirstLetter:wu},yu=function(e){Object(De["a"])(n,e);var t=Object(Te["a"])(n);function n(){return Object(Ce["a"])(this,n),t.call(this)}return Object(Ve["a"])(n,null,[{key:"getStatistics",value:function(){return Object(yc["a"])(Object(xc["a"])(n),"getJsonSWR",this).call(this,"dashboard_stats",{date:Object(yc["a"])(Object(xc["a"])(n),"getSessionDate",this).call(this),program_id:Object(yc["a"])(Object(xc["a"])(n),"getProgramID",this).call(this)})}},{key:"getTodaysPatientVisits",value:function(e){var t=Object.keys(e),n=0,r=[];return t.forEach((function(t){r.push({label:ku.capitalizeFirstLetter(t.replace("_"," ")),value:e[t],color:"lightyellow"}),n+=e[t]})),r.push({label:"Total",value:n,color:"yellowgreen"}),r}},{key:"getAccumulativePatientVisits",value:function(e){var t=Object.keys(e),n=Object.keys(e[t[0]]),r=[],a=[];for(var o in t){var i=[];for(var c in n){var s=e[t[o]][n[c]].start_date,u=z()(s).format("MMM/YYYY");u!==r[c]&&r.push(u),i.push(e[t[o]][n[c]].count)}a.push({name:ku.capitalizeFirstLetter(t[o]),data:i})}return{days:r,visits:a}}},{key:"getRespiratory",value:function(){return Object(yc["a"])(Object(xc["a"])(n),"getJsonSWR",this).call(this,"/dashboard_stats_for_syndromic_statistics",{date:Object(yc["a"])(Object(xc["a"])(n),"getSessionDate",this).call(this),program_id:Object(yc["a"])(Object(xc["a"])(n),"getProgramID",this).call(this)})}},{key:"getAccumulativePatietRespiratoryComplaints",value:function(e){var t=[],n=e,r=[],a=[],o=[],i=[],c=[{name:"Influenza Like Illness ",data:[0,0,0,0,0,0,0,0,0,0,0,0,0]},{name:"Respiratory",data:[0,0,0,0,0,0,0,0,0,0,0,0,0]}];for(var s in n){var u=n[s];for(s in u)t.push(parseInt(s));break}t=t.sort((function(e,t){return e-t}));for(var l=["ILI","Respiratory"],d={},p=0;p<t.length;p++){var b=n[l[0]][t[p]].start_date,f=z()(b).format("MMM/YYYY");r.push(f)}for(var m=0;m<r.length;m++){for(var h in n){var g=n[h];for(var v in g){var O=n[h][v].start_date,j=z()(O).format("MMM/YYYY");j==r[m]&&(void 0==d[h]&&(d[h]=[]),"ILI"==h&&a.push(n[h][v].count),"Respiratory"==h&&o.push(n[h][v].count))}}c[0].data=[].concat(a),c[1].data=[].concat(o),i=[].concat(r)}return{categories:i,series:c}}}]),n}(At["e"]),xu=Object(i["defineComponent"])({components:{OpdStatCard:bu,OpdStatChart:gu,IonGrid:ge["p"],IonRow:ge["J"],IonCol:ge["m"],SyndromicStatChart:_u},setup:function(){var e=yu.getStatistics(),t=Object(i["computed"])((function(){var t;return e.value?yu.getTodaysPatientVisits(null===(t=e.value)||void 0===t?void 0:t.top):[{label:"Registered today",value:-1,color:"lightyellow"},{label:"Returning today",value:-1,color:"lightyellow"},{label:"Referred today",value:-1,color:"lightyellow"},{label:"Total",value:-1,color:"yellowgreen"}]})),n=Object(i["computed"])((function(){var t;return e.value?yu.getAccumulativePatientVisits(null===(t=e.value)||void 0===t?void 0:t.down):{days:[],visits:[]}})),r=yu.getRespiratory(),a=Object(i["computed"])((function(){var e;return r.value?yu.getAccumulativePatietRespiratoryComplaints(null===(e=r.value)||void 0===e?void 0:e.down):{categories:[],series:[]}}));return{patientSummaryStats:t,accumulativeVisits:n,AccumulativePatietRespiratoryComplaints:a}}});n("e897");const Nu=T()(xu,[["render",su],["__scopeId","data-v-8f1b8bca"]]);var Cu=Nu,Vu=[{id:"patient registration",name:"Patient registration",icon:"attributes.png"},{id:"vitals",name:"Vitals",icon:"vitals.png"},{id:"presenting complaints",name:"Presenting complaints",icon:"complaints.png"},{id:"hiv status",name:"HIV STatus",icon:"aids.png",encounterTypeName:"update hiv status",availableOnActivitySelection:!1},{id:"outpatient diagnosis",name:"Outpatient diagnosis",icon:"diagnosis.png"},{id:"outcome status",name:"Outcome status",icon:"outcomes.png",availableOnActivitySelection:!1},{id:"lab orders",name:"Lab orders",icon:"clinical-notes.png",availableOnActivitySelection:!1,action:function(e,t){var n=e.patient;t.push("/los/forms/order/".concat(n.patient_id,"?type=DRAW_SAMPLES"))}},{id:"lab results",name:"Lab results",icon:"enter.png",availableOnActivitySelection:!1,action:function(e,t){var n=e.patient;t.push({path:"/lab/results/".concat(n.patient_id)})}},{id:"OPD social history",name:"OPD social history",icon:"medical-report.png",availableOnActivitySelection:!1},{id:"prescription",name:"Prescription",encounterTypeName:"Treatment",icon:"drugs-given.png"},{id:"dispensation",name:"Dispensation",encounterTypeName:"dispensing",icon:"dispensing.png",availableOnActivitySelection:!1}],Du=[{id:"radiology examination",name:"radiology examination",icon:"radiology_types.png"}],Tu=["Queen Elizabeth Central Hospital","Kamuzu Central Hospital","Mzuzu Central Hospital","Zomba Central Hospital"];function Iu(){var e,t=Object(Yn["a"])(Tu);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n==At["e"].getLocationName())return!0}}catch(r){t.e(r)}finally{t.f()}return!1}var Ru=[{name:"MoH",icon:"login-logos/Malawi-Coat_of_arms_of_arms.png",defaultFilesIcon:"reports.png",condition:function(){return!0},files:[{name:"LA report",pathName:"moh_la",condition:function(){return!1}},{name:"Drug report",pathName:"moh_drug",condition:function(){return!1}},{name:"Malaria report",pathName:"moh_malaria",condition:function(){return!1}},{name:"IPT",pathName:"moh_ipt",condition:function(){return!1}},{name:"IDSR Weekley Report",pathName:"idsr_weekly"},{name:"IDSR Monthly Report",pathName:"idsr_monthly"},{name:"HMIS 15 Report",pathName:"hmis_15",condition:function(){return!Iu()}},{name:"HMIS 17 Report",pathName:"hmis_17",condition:function(){return Iu()}}]},{name:"Clinic",icon:"reports.png",defaultFilesIcon:"reports.png",files:[{name:"Diagnosis by address",pathName:"clinic_diagnosis_by_address"},{name:"Diagnosis",pathName:"clinic_diagnosis"},{name:"Registration report",pathName:"clinic_registration"},{name:"LA report",pathName:"clinic_la"},{name:"Cases seen report",pathName:"clinic_cases_seen"},{name:"Mental health report",pathName:"clinic_mental_health"},{name:"Drugs (dispensed without prescription)",pathName:"clinic_drugs_given"},{name:"Drugs (prescribed and dispensed)",pathName:"clinic_drugs"},{name:"With NIDs",pathName:"clinic_with_nids"}]}];function Su(e,t){var n=Object(i["resolveComponent"])("router-view");return Object(i["openBlock"])(),Object(i["createBlock"])(n)}const Pu={},Au=T()(Pu,[["render",Su]]);var Eu=Au,Bu=[{name:"patient registration",path:"/opd/encounters/registration/:patient_id",component:function(){return n.e("chunk-770d622c").then(n.bind(null,"c7512"))}},{name:"hiv status",path:"/opd/encounters/hiv-status/:patient_id",component:function(){return n.e("chunk-2d0de711").then(n.bind(null,"8652"))}},{name:"vitals",path:"/opd/encounters/vitals/:patient_id",component:function(){return Promise.resolve().then(n.bind(null,"ab49"))}},{name:"outpatient diagnosis",path:"/opd/encounters/diagnosis/:patient_id",component:function(){return n.e("chunk-76ee8285").then(n.bind(null,"a16a6"))}},{name:"outcome status",path:"/opd/encounters/outcome-status/:patient_id",component:function(){return n.e("chunk-2d0dd6ae").then(n.bind(null,"80ff"))}},{name:"OPD social history",path:"/opd/encounters/social/:patient_id",component:function(){return n.e("chunk-2d209573").then(n.bind(null,"a949"))}},{name:"presenting complaints",path:"/opd/encounters/complaints/:patient_id",component:function(){return n.e("chunk-65055ecc").then(n.bind(null,"fea93"))}},{name:"prescription",path:"/opd/encounters/prescription/:patient_id",component:function(){return n.e("chunk-2d0ab2c7").then(n.bind(null,"13c2"))}},{name:"dispensation",path:"/opd/encounters/dispensing/:patient_id",component:function(){return n.e("chunk-2d0ccf55").then(n.bind(null,"4fc0"))}},{name:"radiology examination",path:"/opd/encounters/radiology/:patient_id",component:function(){return n.e("chunk-2d0cf669").then(n.bind(null,"640e"))}},{path:"/opd/reports/clinic",component:Eu,children:[{name:"clinic_with_nids",path:"clinic_with_nids",component:function(){return n.e("chunk-297f5928").then(n.bind(null,"efa6"))}},{name:"clinic_drugs_given",path:"clinic_drugs_given",component:function(){return n.e("chunk-1b5b3d32").then(n.bind(null,"d48c"))}},{name:"clinic_drugs",path:"clinic_drugs",component:function(){return n.e("chunk-c3f36d04").then(n.bind(null,"2941"))}},{name:"clinic_registration",path:"cclinic_registration",component:function(){return n.e("chunk-4734f41a").then(n.bind(null,"fd0a"))}},{name:"clinic_la",path:"clinic_la",component:function(){return n.e("chunk-73f2f583").then(n.bind(null,"7666"))}},{name:"clinic_cases_seen",path:"clinic_cases_seen",component:function(){return n.e("chunk-3b1a42fa").then(n.bind(null,"f482"))}},{name:"clinic_mental_health",path:"clinic_mental_health",component:function(){return n.e("chunk-6b3e685a").then(n.bind(null,"3c87"))}},{name:"clinic_diagnosis",path:"clinic_diagnosis",component:function(){return n.e("chunk-17bf2c46").then(n.bind(null,"15ab"))}},{name:"clinic_diagnosis_by_address",path:"clinic_diagnosis_by_address",component:function(){return n.e("chunk-b28e0d76").then(n.bind(null,"e4c1"))}}]},{path:"/opd/reports/moh",component:Eu,children:[{name:"idsr_weekly",path:"idsr_weekly",component:function(){return Promise.all([n.e("chunk-34d9cdae"),n.e("chunk-245216b5")]).then(n.bind(null,"53dc"))}},{name:"idsr_monthly",path:"idsr_monthly",component:function(){return Promise.all([n.e("chunk-34d9cdae"),n.e("chunk-05a3c442")]).then(n.bind(null,"9ad4"))}},{name:"hmis_15",path:"hmis_15",component:function(){return Promise.all([n.e("chunk-34d9cdae"),n.e("chunk-6f19fe7a")]).then(n.bind(null,"39a4"))}},{name:"hmis_17",path:"hmis_17",component:function(){return Promise.all([n.e("chunk-34d9cdae"),n.e("chunk-6afe013c")]).then(n.bind(null,"8410"))}}]}],Fu=n("66fd");function Lu(e,t){return{name:e,pathUrl:"/preferences?label=".concat(e,"&property=").concat(t)}}var Mu=[{name:"System Preferences",icon:"diagnosis.png",condition:function(){return fe["a"].isAdmin()},files:[Lu("Activate PACs",Fu["a"].PACS_ENABLED)]}];function Hu(e){return Uu.apply(this,arguments)}function Uu(){return Uu=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new Et["a"](t),e.next=3,n.enrollProgram();case 3:return r=new Ie["a"](t,5),e.next=6,r.createEncounter();case 6:return e.next=8,r.saveValueCodedObs("Type of patient","New Patient");case 8:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}function qu(e,t){return Gu.apply(this,arguments)}function Gu(){return Gu=Object(a["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Wt["a"].findByID(n);case 2:return r=e.sent,a=new Wt["a"](r),e.next=6,Pt["a"].getFirstValueText(a.getID(),"HIV Status");case 6:return o=e.sent,e.abrupt("return",[{label:"Malawi National ID",value:a.getMWNationalID()},{label:"HIV Status",value:o||"Unknown"}]);case 8:case"end":return e.stop()}}),e)}))),Gu.apply(this,arguments)}function zu(e){return Yu.apply(this,arguments)}function Yu(){return Yu=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Yi.alertSideEffects(t.getID());case 2:return n=e.sent,e.next=5,t.getBMI();case 5:return r=e.sent,e.abrupt("return",[{label:"Side effects",value:"".concat(n.length)},{label:"Patient BMI is",value:"".concat(r.result)}]);case 7:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}function Wu(e){var t=e.tests[0],n=t.result[0],r=me["a"].isHighViralLoadResult(n)?'(<b style="color: #eb445a;">High</b>)':"";return"".concat(t.name," ").concat(n.value_modifier).concat(n.value," ").concat(r)}function $u(e,t){return{"PATIENT IDENTIFIERS":function(){return[{label:"NPID",value:e.getNationalID()}]},ALERTS:function(){return zu(e)},"LAB ORDERS":function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=[],t.next=3,me["a"].getOrders(e.getID()).then((function(e){var t=me["a"].getViralLoadOrders(e);t.forEach((function(e){n.push({value:Wu(e),label:""})}))}));case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}(),OUTCOME:function(){return[{label:"Current Outcome",value:t.outcome||"N/A"}]},GUARDIAN:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,vn["a"].getGuardianDetails(e.getID());case 2:if(n=t.sent,!n){t.next=5;break}return t.abrupt("return",n.map((function(e){return{label:e.name,value:e.relationshipType}})));case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}}var Ku={programID:14,applicationName:"OPD",applicationIcon:"opd.png",applicationDescription:"Outpatient Program",appRoutes:Bu,isPocApp:!0,programReports:Ru,primaryPatientActivites:Vu,secondaryPatientActivites:Du,homeOverviewComponent:Cu,globalPropertySettings:Mu,onRegisterPatient:Hu,formatPatientProgramSummary:qu,confirmationSummary:$u,init:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(nc["c"])(Vu,"OPD_activities");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),programPatientIdentifiers:{"National ID":{id:28,name:"National ID",isPrimary:!0,useForSearch:!0,prefix:function(){return""},validation:function(e){return f["a"].isMWNationalID(e)}}}},Ju=Ku;t["a"]=[jc,Jc,Ju,vs,Ps,qs,iu,es]},fa73:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("5530"),a=n("4f96"),o=n("1da1"),i=n("d4ec"),c=n("bee2"),s=n("262e"),u=n("2caf"),l=(n("d81d"),n("fb6a"),n("d3b7"),n("caad"),n("2532"),n("99af"),n("ac1f"),n("466d"),n("a15b"),n("1276"),n("96cf"),n("1c74")),d=n("2ef0"),p=n("4db7"),b=n("9283"),f=n("23e6"),m=n("cc74"),h=function(e){Object(s["a"])(n,e);var t=Object(u["a"])(n);function n(){var e;return Object(i["a"])(this,n),e=t.call(this),e.patientID=-1,e.enabled=!1,e}return Object(c["a"])(n,[{key:"setPatientID",value:function(e){this.patientID=e}},{key:"loadDDEStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["b"].ddeEnabled();case 2:this.enabled=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isEnabled",value:function(){return this.enabled}},{key:"postMerge",value:function(e){var t=e.map((function(e){return{patient_id:e.patientID,doc_id:e.docID||""}})),n=Object(a["a"])(t),r=n[0],o=n.slice(1);return this.patientID=r.patient_id,this.mergePatients({primary:r,secondary:o,program_id:l["e"].getProgramID()})}},{key:"checkPotentialDuplicates",value:function(e){return l["e"].getJson("dde/patients/match_by_demographics",Object(r["a"])(Object(r["a"])({},e),{},{program_id:l["e"].getProgramID()}))}},{key:"hasPatientDoubles",value:function(e){return e.map((function(t){return e.map((function(e){return e.patient_id})).includes(t.patient_id)})).some(Boolean)}},{key:"searchDemographics",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["e"].getJson("dde/patients/find_by_name_and_gender",Object(r["a"])({program_id:l["e"].getProgramID()},t));case 2:if(n=e.sent,a=function(e,t){var n=new f["a"](e);return Object(r["a"])({patient_type:t,doc_id:n.getPatientIdentifier(27)},e)},!n){e.next=8;break}return o=n.locals.map((function(e){return a(e,"Local")})),i=n.remotes.map((function(e){return a(e,"Remote")})),e.abrupt("return",o.concat(i));case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"searchNpid",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.findNpid(t);case 2:if(n=e.sent,!n){e.next=11;break}if(r=n.locals.concat(n.remotes),!Object(d["isEmpty"])(r)){e.next=7;break}return e.abrupt("return",[]);case 7:return a=this.hasPatientDoubles(n.locals),o=this.hasPatientDoubles(n.remotes),this.patientID=r[0].patient_id,e.abrupt("return",a||o?r:r[0]);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"findNpid",value:function(e){return l["e"].getJson("dde/patients/find_by_npid",{npid:e,program_id:l["e"].getProgramID()})}},{key:"findVoidedIdentifier",value:function(e){return l["e"].getJson("search/patients/by_identifier",{type_id:3,voided:!0,identifier:e})}},{key:"shouldCreateNpid",value:function(e){return!Object(d["isEmpty"])(e)&&e.npid}},{key:"formatDiffValuesByType",value:function(e,t){var n={};for(var r in e)n[r]=e[t];return n}},{key:"diffsToTurple",value:function(e){var t=[],n=function(e,t){return"string"===typeof t&&e.match(/date/i)?b["b"].toStandardHisDisplayFormat(t):t};for(var r in e){var a=e[r],o=r.split("_").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ");t.push([o,n(r,a.local),n(r,a.remote)])}return t}},{key:"shouldUpdateDiffs",value:function(e){return!Object(d["isEmpty"])(e)}},{key:"mergePatients",value:function(e){return l["e"].postJson("dde/patients/merge",e)}},{key:"reassignNpid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.patientID;return l["e"].postJson("dde/patients/reassign_npid",{program_id:l["e"].getProgramID(),patient_id:t,doc_id:e})}},{key:"createNPID",value:function(e){return l["e"].postJson("patient_identifiers",{identifier:e,patient_id:this.patientID,identifier_type:3})}},{key:"printNpid",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.patientID;return new p["a"](e).printNidLbl()}},{key:"getLocalAndRemoteDiffs",value:function(){return l["e"].getJson("dde/patients/diff",{patient_id:this.patientID,program_id:l["e"].getProgramID()})}},{key:"updateLocalDifferences",value:function(e){return l["e"].putJson("people/".concat(this.patientID),Object(r["a"])({program_id:l["e"].getProgramID()},e))}},{key:"refreshDemographics",value:function(){return l["e"].getJson("dde/patients/refresh",{patient_id:this.patientID,program_id:l["e"].getProgramID()})}}],[{key:"getRemainingNpids",value:function(){return l["e"].getJson("dde/patients/remaining_npids",{program_id:l["e"].getProgramID()})}}]),n}(l["e"])},fa94:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n("5530"),a=n("d4ec"),o=n("bee2"),i=n("262e"),c=n("2caf"),s=n("1c74"),u=function(e){Object(i["a"])(n,e);var t=Object(c["a"])(n);function n(){var e;return Object(a["a"])(this,n),e=t.call(this),e.startDate="",e.endDate="",e.date=s["e"].getSessionDate(),e.programID=s["e"].getProgramID(),e}return Object(o["a"])(n,[{key:"setStartDate",value:function(e){this.startDate=e}},{key:"setEndDate",value:function(e){this.endDate=e}},{key:"buildRequestParams",value:function(e){var t={};return this.startDate&&(t["start_date"]=this.startDate),this.endDate&&(t["end_date"]=this.endDate),this.date&&(t["date"]=this.date),this.programID&&(t["program_id"]=this.programID),Object(r["a"])(Object(r["a"])({},t),e)}}]),n}(s["e"])},fb7c:function(e,t,n){"use strict";n("d9d9")},fbf9:function(e,t,n){"use strict";n("c187")},fde0:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("bee2"),a=n("d4ec"),o=n("262e"),i=n("2caf"),c=n("cc6f"),s=function(e){Object(o["a"])(n,e);var t=Object(i["a"])(n);function n(e,r){return Object(a["a"])(this,n),t.call(this,e,84,r)}return Object(r["a"])(n)}(c["a"])},fe42:function(e,t,n){"use strict";n("4366")},fedf:function(e,t,n){"use strict";n("d403")},ffe1:function(e,t,n){}});
//# sourceMappingURL=app.259dd50b.js.map
import{F as a}from"./dynamic-import-helper-9HnG3Mif.js";import{H as o}from"./HisStandardForm-tiWNF5wA.js";import{d as s,aZ as p,V as r,_ as m,r as d,o as h,c}from"./index-iM2cGz0p.js";import{_ as l}from"./EncounterMixin.vue_vue_type_script_lang-rY_xqw9L.js";import{A as i}from"./appointment_service-IK1rwH-Y.js";import"./TouchScreenForm-hvB0I83y.js";import"./ToolbarMediumCard-ny9gUih7.js";import"./Transformers-XlEF3tgP.js";import"./ViewPort-4mhPlN2U.js";import"./encounter_guidelines-zqd44jxT.js";import"./GuidelineEngine-syyQoOzo.js";const u=s({mixins:[l],components:{HisStandardForm:o},data:()=>({appointmentDate:"",maxAppointmentDate:"",appointment:{}}),watch:{ready:{async handler(t){t&&(this.appointment=new i(this.patientID,this.providerID),this.init())},immediate:!0}},methods:{async onFinish(t,e){await this.appointment.createEncounter(),await this.appointment.saveObservationList(await this.resolveObs(e,"obs")),this.gotoPatientDashboard()},init(){this.appointmentDate=i.getSessionDate(),this.maxAppointmentDate=p(this.appointmentDate).add(100,"year").format("YYYY-MM-DD"),this.fields=this.getFields()},getFields(){return[{id:"set_appointment",helpText:"Appointments booking",type:a.TT_APPOINTMENTS_ENTRY,validation:t=>r.required(t),computedValue:t=>({tag:"obs",obs:[this.appointment.buildValueDate("Appointment date",t.value)]}),config:{patientAge:this.patient.getAge(),hideRunoutDate:!0,hiddenFooterBtns:["Clear"]},options:()=>[{label:"",value:"",other:{runOutDate:this.maxAppointmentDate,appointmentDate:this.appointmentDate}}]}]}}});function f(t,e,D,_,A,g){const n=d("his-standard-form");return h(),c(n,{fields:t.fields,onFinishAction:t.onFinish,skipSummary:!0,cancelDestinationPath:t.cancelDestination},null,8,["fields","onFinishAction","cancelDestinationPath"])}const k=m(u,[["render",f]]);export{k as default};

(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc54cec2"],{"6f4a":function(e,t,n){},"72e3":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a={key:0,style:{color:"green"}},o={slot:"end"},c=Object(r["createTextVNode"])("add riskfactors"),i=Object(r["createVNode"])("h1",{style:{"text-align":"center"}},"Actions",-1),s=Object(r["createTextVNode"])(" cancel "),u=Object(r["createTextVNode"])(" Refer to clinician "),l=Object(r["createTextVNode"])(" Hypertension Diagnosis "),d=Object(r["createTextVNode"])(" Enroll in HTN "),b=Object(r["createTextVNode"])(" Finish ");function p(e,t,n,p,f,m){var h=Object(r["resolveComponent"])("ion-title"),O=Object(r["resolveComponent"])("ion-button"),v=Object(r["resolveComponent"])("ion-toolbar"),g=Object(r["resolveComponent"])("ion-header"),j=Object(r["resolveComponent"])("data-table"),k=Object(r["resolveComponent"])("ion-content"),x=Object(r["resolveComponent"])("ion-label"),C=Object(r["resolveComponent"])("ion-radio"),w=Object(r["resolveComponent"])("ion-item"),N=Object(r["resolveComponent"])("ion-col"),I=Object(r["resolveComponent"])("ion-row"),V=Object(r["resolveComponent"])("ion-grid"),y=Object(r["resolveComponent"])("ion-radio-group"),D=Object(r["resolveComponent"])("ion-footer"),T=Object(r["resolveComponent"])("ion-page");return Object(r["openBlock"])(),Object(r["createBlock"])(T,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])("span",null,"BP management screening on "+Object(r["toDisplayString"])(e.date),1),e.patientOnBPDrugs?(Object(r["openBlock"])(),Object(r["createBlock"])("small",a," (Patient already on BP drugs)")):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])("span",o,[e.totalRiskFactors>0?(Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:0,color:"danger",onClick:e.showRiskFactors},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])("View/Edit risk factors "+Object(r["toDisplayString"])(e.totalRiskFactors),1)]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0),0===e.totalRiskFactors?(Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:1,onClick:e.showRiskFactors},{default:Object(r["withCtx"])((function(){return[c]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0)])]})),_:1})]})),_:1}),Object(r["createVNode"])(k,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{config:{showIndex:!1},columns:e.columns,rows:e.rows},null,8,["columns","rows"])]})),_:1}),Object(r["createVNode"])(D,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,null,{default:Object(r["withCtx"])((function(){return[i,Object(r["createVNode"])(y,{modelValue:e.action,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.action=t})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(V,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(I,null,{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.items,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(N,{size:"4",key:t},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(w,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(x,{style:{"font-size":"1.0rem","font-weight":"bold"}},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024),Object(r["createVNode"])(C,{value:e},null,8,["value"])]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(v,{color:"dark"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(O,{size:"large",color:"danger",slot:"start",onClick:e.gotoPatientDashboard},{default:Object(r["withCtx"])((function(){return[s]})),_:1},8,["onClick"]),e.showClinicianButton?(Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:0,size:"large",color:"danger",slot:"start",onClick:e.referPatient},{default:Object(r["withCtx"])((function(){return[u]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0),e.patientHasHyperTensionObs?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:1,size:"large",slot:"end",onClick:e.goToDiagnosis},{default:Object(r["withCtx"])((function(){return[l]})),_:1},8,["onClick"])),e.patientHasHyperTensionObs&&!e.isEnrolledInHTN?(Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:2,size:"large",slot:"end",onClick:e.enrollInHTN},{default:Object(r["withCtx"])((function(){return[d]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0),e.patientHasHyperTensionObs?(Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:3,size:"large",color:"success",slot:"end",onClick:e.onFinish},{default:Object(r["withCtx"])((function(){return[b]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})}var f=n("1da1"),m=(n("4de4"),n("d3b7"),n("ac1f"),n("466d"),n("b0c0"),n("d81d"),n("3ca3"),n("ddb0"),n("b64b"),n("99af"),n("a15b"),n("96cf"),n("8a30")),h=n("b5e4"),O=n("7365"),v=n("77fd"),g=n("7957"),j=n("8158"),k=n("1c74"),x=n("9283"),C=n("2ef0"),w=n("32b3"),N=n("c1e4"),I=n("ad60"),V=n("b515"),y=n("74f4"),D=n("80e3"),T=n("9ceb"),R=n("7f35"),B={background:"#444444"},P=Object(r["defineComponent"])({mixins:[O["a"]],components:{DataTable:D["a"],IonTitle:m["P"],IonToolbar:m["Q"],IonHeader:m["q"],IonContent:m["n"],IonGrid:m["p"],IonRow:m["H"],IonButton:m["d"],IonRadioGroup:m["F"],IonRadio:m["E"],IonCol:m["m"],IonFooter:m["o"],IonPage:m["D"],IonItem:m["w"],IonLabel:m["x"]},data:function(){return{htn:{},hasARVNumber:!0,suggestedNumber:"",columns:[[T["a"].thTxt("Date",{style:B}),T["a"].thTxt("Systolic",{style:B}),T["a"].thTxt("Diastolic",{style:B}),T["a"].thTxt("BP Drugs",{style:B}),T["a"].thTxt("Action / Note",{style:B})]],bpGradeColorMap:{"N/A":"#ffffff",normal:"#ffffff","grade 1":"#FFC3CE","grade 2":"#F20056","grade 3":"#FF3333"},rows:[],riskFactors:[],action:null,trail:[],date:null,patientOnBPDrugs:!1,patientFirstVisit:!1,normatensive:!1,patientHasHyperTensionObs:!1,currentDrugs:[],items:[],isEnrolledInHTN:!1,isAliveOnHTN:!1,HTNProgramID:20,aliveState:160,refer:!1}},watch:{ready:{handler:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,m["V"].create({message:"Please wait...",backdropDismiss:!1});case 4:return r=n.sent,n.next=7,r.present();case 7:return t.htn=new w["a"](t.patientID,t.providerID),n.next=10,t.htn.getBPTrail();case 10:return t.trail=n.sent,t.rows=t.formatBpTrailRows(t.trail),t.normatensive=w["a"].isBpNormotensive(t.trail),n.next=15,t.getRiskFactors();case 15:return t.riskFactors=n.sent,t.date=x["b"].toStandardHisDisplayFormat(k["e"].getSessionDate()),n.next=19,t.isTransfered();case 19:return n.next=21,t.hasHyperTenstion();case 21:return n.next=23,t.getTreatmentStatus();case 23:return n.next=25,t.getProgramStatus();case 25:if(m["V"].dismiss(),!t.patientFirstVisit||!t.patientOnBPDrugs){n.next=29;break}return n.next=29,t.alertTransferIn();case 29:t.getItems();case 30:case"end":return n.stop()}}),n)})))()},immediate:!0}},computed:{totalRiskFactors:function(){return this.riskFactors.filter((function(e){return"Yes"===e.value})).length},showClinicianButton:function(){return!(N["a"].isClinician()&&N["a"].isDoctor())}},methods:{onFinish:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,c,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.action&&!e.refer){t.next=30;break}return t.next=3,e.htn.createEncounter();case 3:if(n=t.sent,n){t.next=6;break}return t.abrupt("return",Object(h["e"])("Unable to create encounter"));case 6:if(!e.refer){t.next=15;break}return t.next=9,e.htn.saveValueCodedObs("Refer patient to clinician","Yes");case 9:if(r=t.sent,r){t.next=12;break}return t.abrupt("return",Object(h["e"])("Unable to create Obs"));case 12:e.gotoPatientDashboard(),t.next=28;break;case 15:return t.next=17,e.htn.saveValueTextObs("Plan",e.action.label);case 17:if(c=t.sent,c){t.next=20;break}return t.abrupt("return",Object(h["e"])("Unable to create Obs"));case 20:return i={state:e.action.value},t.next=23,e.htn.enrollPatient(i);case 23:if("function"!==typeof(null===(a=e.action)||void 0===a||null===(o=a.other)||void 0===o?void 0:o.action)){t.next=27;break}return t.abrupt("return",e.action.other.action());case 27:e.nextTask();case 28:t.next=31;break;case 30:Object(h["e"])("Please select an action");case 31:case"end":return t.stop()}}),t)})))()},referPatient:function(){this.refer=!0,this.onFinish()},goToDiagnosis:function(){return this.$router.push({path:"/art/encounters/hypertension_diagnosis/".concat(this.patientID)})},hasHyperTenstion:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["a"].getFirstValueCoded(e.patientID,"Patient has hypertension");case 2:n=t.sent,e.patientHasHyperTensionObs=!!"".concat(n).match(/yes|no/i);case 4:case"end":return t.stop()}}),t)})))()},isTransfered:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["a"].getFirstValueCoded(e.patientID,"Transferred");case 2:n=t.sent,e.patientFirstVisit=!n;case 4:case"end":return t.stop()}}),t)})))()},getTreatmentStatus:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["a"].getFirstValueText(e.patientID,"Treatment status");case 2:n=t.sent,e.patientOnBPDrugs=!(!n||!n.match(/BP Drugs started/i));case 4:case"end":return t.stop()}}),t)})))()},getProgramStatus:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I["a"].getPatientPrograms(e.patientID);case 2:if(n=t.sent,e.isEnrolledInHTN=n.filter((function(e){return"HYPERTENSION PROGRAM"===e.program.name})).length>0,!e.isEnrolledInHTN){t.next=7;break}return t.next=7,e.programState();case 7:case"end":return t.stop()}}),t)})))()},programState:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,I["a"].getPatientStates(e.patientID,e.HTNProgramID);case 2:n=t.sent,e.isAliveOnHTN=n.filter((function(e){return"Alive"===e.name})).length>0;case 4:case"end":return t.stop()}}),t)})))()},getRiskFactors:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=j["a"].getConceptsByCategory("risk factors"),r=n.map(function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,g["a"].getFirstValueCoded(e.patientID,n.name);case 2:return r=t.sent,t.abrupt("return",{concept:n.name,value:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",Promise.all(r));case 3:case"end":return t.stop()}}),t)})))()},formatBpTrailRows:function(e){var t=this;return Object.keys(e).map((function(n){var r=x["b"].toStandardHisDisplayFormat(n);t.currentDrugs=t.currentDrugs.concat(e[n]["drugs"]);var a=function(){var r=w["a"].getBpGrade(parseInt(e[n].sbp),parseInt(e[n].dbp));return t.bpGradeColorMap[r]},o={background:a()};return[T["a"].tdDate(r,{style:o}),T["a"].td(e[n].sbp,{style:o}),T["a"].td(e[n].dbp,{style:o}),T["a"].td(e[n]["drugs"].join(", "),{style:o}),T["a"].td(e[n].note,{style:o})]}))},showRiskFactors:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,m["X"].create({component:v["a"],backdropDismiss:!1,cssClass:"large-modal",componentProps:{factors:e.riskFactors}});case 2:return n=t.sent,n.present(),t.next=6,n.onDidDismiss();case 6:r=t.sent,a=r.data,Object(C["isEmpty"])(a)||(e.riskFactors=a.map((function(e){var t=!0===e.isChecked?"Yes":"No";return{concept:e.concept,value:t}})));case 9:case"end":return t.stop()}}),t)})))()},alertTransferIn:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(R["a"])("Transfer in","Does the patient want to transfer in for HTN management?","",[{name:"Yes",slot:"end",color:"success"},{name:"No",slot:"start",color:"danger"}]);case 2:if(n=t.sent,"Yes"!==n){t.next=13;break}return t.next=6,e.enrollInHTN();case 6:return t.next=8,e.setHtnTransferred("Yes");case 8:return e.patientFirstVisit=!1,t.next=11,e.getItems();case 11:t.next=16;break;case 13:return t.next=15,e.setHtnTransferred("No");case 15:e.nextTask();case 16:case"end":return t.stop()}}),t)})))()},enrollInHTN:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,n=new y["a"](e.patientID),n.setProgramId(e.HTNProgramID),n.setStateDate(I["a"].getSessionDate()),n.setStateId(e.aliveState),t.next=7,n.enrollProgram();case 7:return t.next=9,n.updateState();case 9:e.isEnrolledInHTN=!0,Object(h["d"])("Patient is now enrolled in HTN"),t.next=17;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error(t.t0),Object(h["e"])(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,13]])})))()},setHtnTransferred:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=new V["a"](t.patientID,t.providerID),n.next=3,r.createEncounter();case 3:if(a=n.sent,a){n.next=8;break}Object(h["e"])("Unable to create patient transfer encounter"),n.next=12;break;case 8:return n.next=10,r.saveValueCodedObs("Transferred",e);case 10:o=n.sent,o||Object(h["e"])("Unable to create observation Transferred for patient");case 12:case"end":return n.stop()}}),n)})))()},getItems:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.currentDrugs.length>0?e.items=[{label:"Did not take prescribed drugs",value:"on treatment",other:{action:function(){return e.$router.push("/art/encounters/bp_adherence/".concat(e.patientID))}}},{label:"Continue drugs",value:"on treatment",other:{action:function(){return e.$router.push("/art/encounters/bp_adherence/".concat(e.patientID))}}},{label:"Review drugs",value:"on treatment",other:{action:function(){return e.$router.push("/art/encounters/bp_adherence/".concat(e.patientID,"?review=true"))}}}]:(e.items=[{label:"Lifestyle advice given",value:"Lifestyle changes only"},{label:"Not yet stable on ART",value:"Symptomatic but not in treatment"},{label:"Patient declining BP drugs ",value:"Symptomatic but not in treatment"}],e.normatensive&&e.items.push({label:"Return to annual screening",value:"Alive"}),e.items.push({label:"Start anti hypertensives",value:"On treatment",other:{action:function(){return e.$router.push("/art/encounters/bp_prescription/".concat(e.patientID))}}}));case 1:case"end":return t.stop()}}),t)})))()}}}),F=n("6b0d"),_=n.n(F);const H=_()(P,[["render",p]]);t["default"]=H},"77fd":function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-1b2b2db4");Object(r["pushScopeId"])("data-v-1b2b2db4");var o=Object(r["createTextVNode"])("Risk Factors"),c=Object(r["createTextVNode"])(" Close "),i=Object(r["createTextVNode"])(" Manage BP "),s=Object(r["createTextVNode"])(" Save ");Object(r["popScopeId"])();var u=a((function(e,t,n,u,l,d){var b=Object(r["resolveComponent"])("ion-title"),p=Object(r["resolveComponent"])("ion-toolbar"),f=Object(r["resolveComponent"])("ion-header"),m=Object(r["resolveComponent"])("ion-label"),h=Object(r["resolveComponent"])("ion-checkbox"),O=Object(r["resolveComponent"])("ion-item"),v=Object(r["resolveComponent"])("ion-list"),g=Object(r["resolveComponent"])("ion-col"),j=Object(r["resolveComponent"])("ion-row"),k=Object(r["resolveComponent"])("ion-grid"),x=Object(r["resolveComponent"])("ion-content"),C=Object(r["resolveComponent"])("ion-button"),w=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(f,null,{default:a((function(){return[Object(r["createVNode"])(p,null,{default:a((function(){return[Object(r["createVNode"])(b,null,{default:a((function(){return[o]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(x,{style:{overflowY:"hidden",background:"grey"}},{default:a((function(){return[Object(r["createVNode"])(k,null,{default:a((function(){return[Object(r["createVNode"])(j,null,{default:a((function(){return[Object(r["createVNode"])(g,null,{default:a((function(){return[Object(r["createVNode"])(v,{style:{overflowY:"auto",height:"78vh"}},{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.riskFactors,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:e},{default:a((function(){return[Object(r["createVNode"])(m,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.name),1)]})),_:2},1024),Object(r["createVNode"])(h,{modelValue:e.isChecked,"onUpdate:modelValue":function(t){return e.isChecked=t},slot:"start"},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)})),128))]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(w,null,{default:a((function(){return[Object(r["createVNode"])(p,null,{default:a((function(){return[Object(r["createVNode"])(C,{size:"large",onClick:e.exit,slot:"start",color:"danger"},{default:a((function(){return[c]})),_:1},8,["onClick"]),e.showManageBPButton?(Object(r["openBlock"])(),Object(r["createBlock"])(C,{key:0,size:"large",onClick:e.manageBP,slot:"start"},{default:a((function(){return[i]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(C,{size:"large",color:"success",onClick:e.postActivities,slot:"end"},{default:a((function(){return[s]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)})),l=n("1da1"),d=(n("96cf"),n("d81d"),n("d3b7"),n("159b"),n("c740"),n("8a30")),b=n("cc6f");class p extends b["a"]{constructor(e,t){super(e,30,t)}}var f=n("8158"),m=Object(r["defineComponent"])({name:"Modal",props:{factors:{type:Object,required:!0},title:{type:String,default:""}},computed:{showManageBPButton:function(){return"bp_management"!=this.$route.name}},created:function(){this.patientID=parseInt("".concat(this.$route.params.patient_id))},methods:{postActivities:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new p(e.patientID,-1),t.next=3,n.createEncounter();case 3:if(r=t.sent,!r){t.next=12;break}return t.next=7,e.buildObs();case 7:return a=t.sent,t.next=10,n.saveObservationList(a);case 10:return t.next=12,e.closeModal();case 12:case"end":return t.stop()}}),t)})))()},manageBP:function(){this.$router.push("/art/encounters/bp_management/".concat(this.patientID))},exit:function(){d["X"].dismiss([])},closeModal:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d["X"].dismiss(e.riskFactors);case 2:case"end":return t.stop()}}),t)})))()},buildObs:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e.riskFactors.map((function(e){var t=!0===e.isChecked?"Yes":"No",n=f["a"].getConceptID(t,!0),r=f["a"].getConceptID(e.concept,!0);return{concept_id:r,value_coded:n}})));case 1:case"end":return t.stop()}}),t)})))()}},data:function(){return{patientID:-1,riskFactors:[{name:"Diabetes",isChecked:!1,concept:"Diabetes"},{name:"Cronic kidney disease",isChecked:!1,concept:"CKD"},{name:"Past history of IHD or CVD",isChecked:!1,concept:"history of CVD"},{name:"First degree relative with IHD or CVD <65",isChecked:!1,concept:"relative with CVD"},{name:"Patient currently smokes",isChecked:!1,concept:"patient smokes"}]}},mounted:function(){var e=this;this.factors.forEach((function(t){if("Yes"===t.value){var n=e.riskFactors.findIndex((function(e){return e.concept===t.concept}));e.riskFactors[n].isChecked=!0}}))},components:{IonButton:d["d"],IonContent:d["n"],IonHeader:d["q"],IonTitle:d["P"],IonToolbar:d["Q"],IonLabel:d["x"],IonList:d["y"],IonItem:d["w"],IonCheckbox:d["k"],IonRow:d["H"],IonFooter:d["o"],IonGrid:d["p"],IonCol:d["m"]}}),h=(n("9719"),n("6b0d")),O=n.n(h);const v=O()(m,[["render",u],["__scopeId","data-v-1b2b2db4"]]);t["a"]=v},9719:function(e,t,n){"use strict";n("6f4a")},b515:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("cc6f"),a=n("2ef0");class o extends r["a"]{constructor(e,t){super(e,6,t)}isNotEmptyandNumber(e){return(""+e.value).match(/^-?\d+\.?\d*$/)?null:["Invalid entry for "+e.label]}isNotEmptyandFloat(e){return(""+e.value).match(/^\d{1,3}\.\d{1,5}$/)?null:[`Invalid entry for ${e.label}. Don't forget to add a decimal. e.g. 56.2 ${e.other.modifier}`]}checkMinMax(e,t,n){const r=[];var a,o;parseFloat(""+e.value)<t&&r.push([`${e.label} entered is less than minimum ${t} ${(null===e||void 0===e||null===(a=e.other)||void 0===a?void 0:a.modifier)||""}`]);parseFloat(""+e.value)>n&&r.push([`${e.label} entered is greater than maximum ${n} ${(null===e||void 0===e||null===(o=e.other)||void 0===o?void 0:o.modifier)||""}`]);return r.length>0?r:null}validateAll(e){const t=[];return e.map(e=>{const n=this.validator(e);return Object(a["isArray"])(n)?t.push(n):null}),t.length>0?t:null}mergeErrors(e){const t=[];return e.forEach(e=>{Object(a["isArray"])(e)&&t.push(e)}),t.length>0?t:null}isValidBPReading(e){const t=[],n=(""+e.value).match(/^\d{1,3}\/\d{1,3}$/g)?null:["Invalid BP reading"];if(t.push(n),null==n){const n=(""+e.value).split("/"),r={label:"Systolic",value:n[0]},a={label:"Diastolic",value:n[1]};t.push(this.checkMinMax(a,30,200)),t.push(this.checkMinMax(r,40,250))}return this.mergeErrors(t)}validator(e){const t=[{name:"Weight",validator:e=>{const t=this.isNotEmptyandFloat(e),n=this.checkMinMax(e,2,250);return this.mergeErrors([t,n])}},{name:"Height",validator:e=>{const t=[];return t.push(this.isNotEmptyandNumber(e)),t.push(this.checkMinMax(e,40,220)),this.mergeErrors(t)}},{name:"BP",validator:e=>this.isValidBPReading(e)},{name:"Temp",validator:e=>{const t=this.isNotEmptyandNumber(e),n=this.checkMinMax(e,30,42);return this.mergeErrors([t,n])}},{name:"SP02",validator:e=>{const t=this.checkMinMax(e,40,100);return this.mergeErrors([t])}},{name:"Pulse",validator:e=>{const t=this.checkMinMax(e,50,120);return this.mergeErrors([t])}}],n=t.filter(t=>t.name===e.label);return n.length>0?n[0].validator(e):null}}},c740:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").findIndex,o=n("44d2"),c=n("ae40"),i="findIndex",s=!0,u=c(i);i in[]&&Array(1)[i]((function(){s=!1})),r({target:"Array",proto:!0,forced:s||!u},{findIndex:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o(i)}}]);
//# sourceMappingURL=chunk-dc54cec2.c4da361d.js.map
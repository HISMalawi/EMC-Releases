{"version":3,"sources":["webpack:///./src/apps/OPD/views/encounters/Complaints.vue?d358","webpack:///./src/apps/OPD/views/encounters/Complaints.vue?ac39","webpack:///./src/apps/OPD/views/encounters/modals/radiology.vue?972c","webpack:///./src/apps/OPD/views/encounters/modals/radiology.vue","webpack:///./src/apps/OPD/views/encounters/modals/radiology.vue?82f3","webpack:///./src/apps/OPD/views/encounters/Complaints.vue","webpack:///./src/apps/OPD/views/encounters/Complaints.vue?5171"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_his_standard_form","_resolveComponent","_component_ion_page","_openBlock","_createBlock","default","_withCtx","_createVNode","cancelDestinationPath","cancelDestination","fields","onFinishAction","onSubmit","skipSummary","_","_hoisted_1","_createTextVNode","_hoisted_2","_hoisted_3","_component_ion_title","_component_ion_toolbar","_component_ion_header","_component_his_radiology_picker","_component_ion_content","_component_ion_button","_component_ion_footer","_Fragment","class","style","onOnValue","onValue","onClick","$event","size","slot","disabled","emitedSelectedOptions","length","closeModal","color","defineComponent","name","components","IonButton","IonContent","IonHeader","IonTitle","IonToolbar","IonFooter","HisRadiologyPicker","mixins","EncounterMixinVue","data","radiologyService","isPacsEnabled","watch","ready","handler","isReady","PatientRadiologyService","patientID","providerID","OPD_GLOBAL_PROP","isPACsEnabled","immediate","deep","methods","selected","getSelected","map","option","buildValueCoded","other","parent","buildValueCodedFromConceptId","concept_id","child","this","isEmpty","Promise","all","createEncounter","obsObj","saveObservationList","savedObsData","printOrders","patient","submitToPacs","console","log","modalController","dismiss","__exports__","HisStandardForm","IonPage","complaintsService","todaysDate","ObservationService","getSessionDate","presentingComplaints","radiologyBtnName","hasTriageComplaints","PatientComplaintsService","getTriagePresentingComplaints","getFields","computedData","complaints","nextTask","launchOrderSelection","create","component","LabOrderModal","backdropDismiss","cssClass","modal","present","onDidDismiss","launchRadiologyOrderSelection","radiology","fetchLatestTriageEncounter","EncounterService","getEncounters","encounters","todayPresentingComplaints","filter","el","type","HisDate","toStandardHisFormat","encounter_datetime","observations","buildResults","columns","group","rows","item","obs_group_id","value_text","undefined","label","value","id","helpText","condition","FieldType","TT_TABLE_VIEWER","options","d","config","hiddenFooterBtns","TT_COMPLAINTS_PICKER","validation","Validation","required","computedValue","showRadiologyOdersBtn","disableBackBtn","footerBtns","visible","visibleOnStateChange","state","index","TT_SUMMARY","b","buildSummaryResults","OPDComplaint","triageComplaint","concat"],"mappings":"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","file":"js/chunk-65055ecc.e609dfd2.js","sourcesContent":["export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Complaints.vue?vue&type=style&index=0&id=ac007cae&lang=css\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_his_standard_form = _resolveComponent(\"his-standard-form\")\n  const _component_ion_page = _resolveComponent(\"ion-page\")\n\n  return (_openBlock(), _createBlock(_component_ion_page, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_his_standard_form, {\n        cancelDestinationPath: _ctx.cancelDestination,\n        fields: _ctx.fields,\n        onFinishAction: _ctx.onSubmit,\n        skipSummary: true\n      }, null, 8, [\"cancelDestinationPath\", \"fields\", \"onFinishAction\"])\n    ]),\n    _: 1\n  }))\n}","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Radiology Examination\")\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" Place orders \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" Close \")\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ion_title = _resolveComponent(\"ion-title\")\n  const _component_ion_toolbar = _resolveComponent(\"ion-toolbar\")\n  const _component_ion_header = _resolveComponent(\"ion-header\")\n  const _component_his_radiology_picker = _resolveComponent(\"his-radiology-picker\")\n  const _component_ion_content = _resolveComponent(\"ion-content\")\n  const _component_ion_button = _resolveComponent(\"ion-button\")\n  const _component_ion_footer = _resolveComponent(\"ion-footer\")\n\n  return (_openBlock(), _createBlock(_Fragment, null, [\n    _createVNode(_component_ion_header, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_title, { class: \"his-lg-text\" }, {\n              default: _withCtx(() => [\n                _hoisted_1\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_content, { style: {\"overflow\":\"hidden\",\"background\":\"grey\",\"height\":\"70vh\"} }, {\n      default: _withCtx(() => [\n        _createVNode(_component_his_radiology_picker, { onOnValue: _ctx.onValue }, null, 8, [\"onOnValue\"])\n      ]),\n      _: 1\n    }),\n    _createVNode(_component_ion_footer, null, {\n      default: _withCtx(() => [\n        _createVNode(_component_ion_toolbar, null, {\n          default: _withCtx(() => [\n            _createVNode(_component_ion_button, {\n              onClick: _cache[1] || (_cache[1] = $event => (_ctx.onSubmit())),\n              size: \"large\",\n              slot: \"end\",\n              disabled: _ctx.emitedSelectedOptions.length === 0\n            }, {\n              default: _withCtx(() => [\n                _hoisted_2\n              ]),\n              _: 1\n            }, 8, [\"disabled\"]),\n            _createVNode(_component_ion_button, {\n              onClick: _cache[2] || (_cache[2] = $event => (_ctx.closeModal())),\n              size: \"large\",\n              slot: \"start\",\n              color: \"danger\"\n            }, {\n              default: _withCtx(() => [\n                _hoisted_3\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        })\n      ]),\n      _: 1\n    })\n  ], 64 /* STABLE_FRAGMENT */))\n}","\nimport {\n  IonContent,\n  IonButton,\n  IonHeader,\n  IonTitle,\n  IonToolbar,\n  modalController,\n  IonFooter,\n} from \"@ionic/vue\";\nimport { defineComponent } from 'vue'\nimport EncounterMixinVue from '@/views/EncounterMixin.vue';\nimport { PatientRadiologyService } from \"@/apps/OPD/services/patient_radiology_service\";\nimport HisRadiologyPicker from '@/components/FormElements/HisRadiologyPicker.vue'\nimport OPD_GLOBAL_PROP from \"@/apps/OPD/opd_global_props\";\nimport { isEmpty } from \"lodash\";\n\nexport default defineComponent({\n  name: \"Modal\",\n  components: { \n    IonButton,\n    IonContent,\n    IonHeader,\n    IonTitle,\n    IonToolbar,\n    IonFooter,\n    HisRadiologyPicker\n  },\n  mixins: [EncounterMixinVue],\n  data: () => ({\n    radiologyService: {} as any,\n    isPacsEnabled: false,\n    emitedSelectedOptions: {} as any\n  }),\n  watch: {\n    ready: {\n      async handler(isReady: boolean) {\n        if(isReady){\n          this.radiologyService = new PatientRadiologyService(this.patientID, this.providerID)\n          this.isPacsEnabled = (await OPD_GLOBAL_PROP.isPACsEnabled())\n        }\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n  methods: {\n    async onValue(selected: any) {\n      this.emitedSelectedOptions = selected\n    },\n    async getSelected() {\n      return this.emitedSelectedOptions.map(async (option: any) => ({\n        ...(await this.radiologyService.buildValueCoded('Radiology Orders', option.other.parent)),\n        child: (await this.radiologyService.buildValueCodedFromConceptId(option.other.parent, option.other.concept_id))\n      }))\n    },\n    async onSubmit(){\n      if(!isEmpty(this.emitedSelectedOptions)) {\n        this.closeModal()\n        let data = await this.getSelected()\n        data = await Promise.all(data)\n        await this.radiologyService.createEncounter()\n        const obsObj = await this.radiologyService.obsObj(data) \n        const savedObsData = await this.radiologyService.saveObservationList(obsObj)\n        await this.radiologyService.printOrders(data, this.patient)\n        if(this.isPacsEnabled) {\n          try {\n            await this.radiologyService.submitToPacs(savedObsData, this.patient)\n          } catch (error) {\n            console.log(error)\n          }\n        }\n      }\n    },\n    async closeModal() {\n      await modalController.dismiss([])\n    }\n  },\n})\n","import { render } from \"./radiology.vue?vue&type=template&id=426e5eb9&ts=true\"\nimport script from \"./radiology.vue?vue&type=script&lang=ts\"\nexport * from \"./radiology.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","\nimport { defineComponent } from 'vue'\nimport HisStandardForm from \"@/components/Forms/TouchScreenForm.vue\";\nimport EncounterMixinVue from '@/views/EncounterMixin.vue';\nimport { PatientComplaintsService } from \"@/apps/OPD/services/patient_complaints_service\";\nimport LabOrderModal from \"@/components/DataViews/LabOrderModal.vue\"\nimport radiology from \"@/apps/OPD/views/encounters/modals/radiology.vue\"\nimport Validation from '@/components/Forms/validations/StandardValidations';\nimport { Field, Option } from '@/components/Forms/FieldInterface';\nimport { FieldType } from '@/components/Forms/BaseFormElements';\nimport { modalController, IonPage } from '@ionic/vue';\nimport { ObservationService } from \"@/services/observation_service\"\nimport { EncounterService } from '@/services/encounter_service'\nimport HisDate from \"@/utils/Date\"\nimport OPD_GLOBAL_PROP from \"@/apps/OPD/opd_global_props\";\n\nexport default defineComponent({\n  components: { HisStandardForm, IonPage },\n  mixins: [EncounterMixinVue],\n  data: () => ({\n    complaintsService: {} as any,\n    todaysDate: ObservationService.getSessionDate(),\n    presentingComplaints: \"\" as any,\n    isPacsEnabled: false,\n    radiologyBtnName: 'Radiology Order',\n    hasTriageComplaints: false,\n  }),\n  watch: {\n    ready: {\n      async handler(isReady: boolean) {\n        if(isReady){\n          this.complaintsService = new PatientComplaintsService(this.patientID, this.providerID)\n          this.isPacsEnabled = (await OPD_GLOBAL_PROP.isPACsEnabled())\n          this.hasTriageComplaints = await this.getTriagePresentingComplaints()\n          this.fields = this.getFields()\n        }\n      },\n      immediate: true,\n      deep: true\n    }\n  },\n  methods: {\n    async onSubmit(_: any, computedData: any){     \n      const data = await Promise.all(computedData.complaints)   \n      await this.complaintsService.createEncounter()    \n      await this.complaintsService.saveObservationList(data)\n      this.nextTask()        \n    },\n    async launchOrderSelection() {\n      const modal = await modalController.create({\n        component: LabOrderModal,\n        backdropDismiss: false,\n        cssClass: 'large-modal'\n      })\n      modal.present()\n      await modal.onDidDismiss()\n    },\n    async launchRadiologyOrderSelection() {\n      const modal = await modalController.create({\n        component: radiology,\n        backdropDismiss: false,\n        cssClass: 'large-modal'\n      })\n      modal.present()\n      await modal.onDidDismiss()\n    },\n    async getTriagePresentingComplaints(){\n      const data =  await this.complaintsService.fetchLatestTriageEncounter();\n      if(!(data.length > 0)){ return false;}\n\n      const encounters = await EncounterService.getEncounters(this.patientID, this.todaysDate)\n      const todayPresentingComplaints = encounters.filter(function (el: any){\n        return el.type.name == \"TRIAGE PRESENTING COMPLAINTS\" &&\n        HisDate.toStandardHisFormat(el.encounter_datetime) == ObservationService.getSessionDate() \n      });\n      if(!(todayPresentingComplaints.length > 0)) {return false;}\n\n      this.presentingComplaints =   todayPresentingComplaints[0].observations;\n      return true;\n    },\n    buildResults() {\n      const columns = [ 'Group','Presenting complaints'];\n      let group = \"\";\n      let rows =this.presentingComplaints.map((item: any) =>{\n        if(item.obs_group_id != null)\n          return [group,item.value_text]\n\n        group = item.value_text;\n      });\n      rows = rows.filter((el: any) =>{\n        return el != undefined\n      })\n      this.presentingComplaints = rows;\n      return [\n        {\n          label: '',\n          value: '',\n          other: { columns, rows},\n        },\n      ];\n    },\n\n    getFields(): Array<Field>{\n      return [\n        {\n          id: \"triage_complaints\",\n          helpText: \"Triaging Complaints\",\n          condition: () => this.hasTriageComplaints,\n          type: FieldType.TT_TABLE_VIEWER,\n          options: (d: any) => this.buildResults(),\n          config: {\n            hiddenFooterBtns: [\"Clear\"],\n          },\n        },\n        {\n          id: 'complaints',\n          helpText: 'Presenting Complaints',\n          type: FieldType.TT_COMPLAINTS_PICKER,\n          validation: (data: any) => Validation.required(data),\n          computedValue: (options: Option[]) => {\n            return options.map(async (option)=> ({\n              ...(await this.complaintsService.buildValueCoded('Presenting complaint', option.other.parent)),\n              child: (await this.complaintsService.buildValueCodedFromConceptId(option.other.parent, option.other.concept_id))\n            }))\n          },\n          config: {\n            hiddenFooterBtns: [ this.showRadiologyOdersBtn(), this.disableBackBtn()],\n            footerBtns: [\n              {\n                name: \"Lab Order\",\n                size: \"large\",\n                slot: \"end\",\n                color: \"primary\",\n                visible: true,\n                onClick: async () => await this.launchOrderSelection(),\n                visibleOnStateChange: (state: Record<string, any>) => {\n                  return state.index === 1;\n                },\n              },\n              {\n                name: this.radiologyBtnName,\n                size: \"large\",\n                slot: \"end\",\n                color: \"primary\",\n                visible: true,\n                onClick: async () => await this.launchRadiologyOrderSelection(),\n                visibleOnStateChange: (state: Record<string, any>) => {\n                  return state.index === 1;\n                },\n              }\n            ],\n          }\n        },\n        {\n          id: \"all_presenting_complaints\",\n          helpText: \"Summary\",\n          condition: () => this.presentingComplaints.length > 0,\n          type: FieldType.TT_SUMMARY,\n          options: (d: any, b: any) => this.buildSummaryResults(d),\n          config: {\n            hiddenFooterBtns: [\"Clear\"],\n          },\n        },\n      ]\n    },\n    showRadiologyOdersBtn() {\n      if(this.isPacsEnabled) {\n        return ''\n      } else return this.radiologyBtnName\n    },\n    buildSummaryResults(data: any) {\n      const OPDComplaint = data.complaints.map((value: any)=>{\n        return {\n          'label': \"OPD Complaints\",\n          'value': value.label,\n        };\n      })\n      const triageComplaint = this.presentingComplaints.map((value: any)=>{\n        return {\n          'label': 'Triaging Complaints',\n          'value': value[1],\n        };\n      })\n      return OPDComplaint.concat(triageComplaint);\n    },\n    disableBackBtn() {\n      if(this.hasTriageComplaints) {\n        return ''\n      } else return 'Back'\n    }\n  }\n})\n","import { render } from \"./Complaints.vue?vue&type=template&id=ac007cae&ts=true\"\nimport script from \"./Complaints.vue?vue&type=script&lang=ts\"\nexport * from \"./Complaints.vue?vue&type=script&lang=ts\"\n\nimport \"./Complaints.vue?vue&type=style&index=0&id=ac007cae&lang=css\"\n\nimport exportComponent from \"/home/daniel/local-repos/HIS-Core/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}
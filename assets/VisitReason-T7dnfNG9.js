import{R as l}from"./BaseTableReport-1n8G0cXk.js";import{d,I as u,L as s,_ as f,r as c,o as h,c as _,w as R,b as S}from"./index-hoLU9YgK.js";import{_ as w}from"./ReportMixin.vue_vue_type_script_lang-VKPiCK7V.js";import{C as g}from"./cxca_report_service-BymYuRbN.js";import"./Export-g1vHKjsV.js";import"./HisStandardForm-rzQ2tZDj.js";import"./TouchScreenForm-3AdFBAzj.js";import"./dynamic-import-helper-9HnG3Mif.js";import"./ToolbarMediumCard-8sJVQ55x.js";import"./Transformers-XlEF3tgP.js";import"./ViewPort-kkmofE00.js";import"./BasicReportTemplate-7WBogXGX.js";import"./SIngleTouchField-iKsJUYy8.js";import"./Pagination-Ex8Q9IMR.js";import"./MultiFieldDateHelper-PDSV6pPV.js";import"./KbLayouts-9dqmDWmG.js";import"./HisKbConfigurations-a7K7dizM.js";const v=d({components:{ReportTemplate:l,IonPage:u},mixins:[w],data:()=>({title:"Visit reasons",rows:[],reportService:{},columns:[[s.thTxt(""),s.thTxt("Reason"),s.thTxt("Number")]]}),created(){this.fields=this.getDateDurationFields()},methods:{async init(t,r){this.reportService=new g,this.reportService.setStartDate(r.start_date),this.reportService.setEndDate(r.end_date);const e=await this.reportService.getClinicReport("VISIT REASONS");this.rows=this.buildRows(e)},buildRows(t){const r=[],e={},a=["Initial Screening","Postponed treatment","One year subsequent check-up after treatment","Subsequent screening","Problem visit after treatment","Referral"];let p=1;for(const o of a){e[o]==null&&(e[o]=[]);for(const i of t){const n=i.reason,m=i.patient_id;n==o&&e[n].push(m)}}for(const o in e)r.push([s.td(p++),s.td(o),s.td(e[o].length)]);return r}}});function C(t,r,e,a,p,o){const i=c("report-template"),n=c("ion-page");return h(),_(n,null,{default:R(()=>[S(i,{title:t.title,rows:t.rows,fields:t.fields,columns:t.columns,period:t.period,onReportConfiguration:t.init},null,8,["title","rows","fields","columns","period","onReportConfiguration"])]),_:1})}const L=f(v,[["render",C]]);export{L as default};

(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ddcec0d4"],{3800:function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"l",(function(){return a})),i.d(t,"e",(function(){return r})),i.d(t,"b",(function(){return s})),i.d(t,"k",(function(){return o})),i.d(t,"i",(function(){return c})),i.d(t,"g",(function(){return l})),i.d(t,"a",(function(){return u})),i.d(t,"j",(function(){return d})),i.d(t,"c",(function(){return p})),i.d(t,"h",(function(){return f})),i.d(t,"f",(function(){return g}));const n=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["","Done",""]],a=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","Del"],["Clear","%","/"]],r=[["1","2","3"],["4","5","6"],["7","8","9"],["Del.","0","Clear"]],s=[["1","2","3","<"],["4","5","6",">"],["7","8","9","="],["","0",""]],o=[["1","2","3","+","-","/","*"],["4","5","6","%","=","<",">","Qwerty"],["7","8","9",".",","],["","0",""]],c=[["1","2","3"],["4","5","6"],["7","8","9"],["","0",""]],l=[["1","2","3","4","5","6","7"],["8","9","10","11","12","13","14"],["15","16","17","18","19","20","21"],["22","23","24","25","26","27","28"],["29","30","31"]],u=[["a","b","c","d","e","f","g","h","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],d=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","'"],["z","x","c","v","b","n","m",",",".","A-Z"]],p=[["1","2","3","4","5","6","7","8","9","0"],["a","b","c","d","e","f","g","h","-","."],["i","j","k","l","m","n","o","p","q"],["r","s","t","u","v","w","x","y","z"]],f=[["1","2","3","4","5","6","7","8","9","0","Del"],["q","w","e","r","t","y","u","i","o","p","Clear"],["a","s","d","f","g","h","j","k","l",".","Caps"],["z","x","c","v","b","n","m","<",">","/","Enter"]],g=[["1","2","3","4","5","6","7","8","9","0"],["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l","Del."],["z","x","c","v","b","n","m","Caps","Login"]]},5713:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("1c74"),a=i("8158");class r extends n["e"]{constructor(){super()}static createAddress(e,t,i){return this.postJson("addresses",{address_type:e,addresses_name:t,parent_location:i})}static getFacilities(e={}){return super.getJson("/locations",e)}static async getSpecialistClinics(){const e=await a["a"].getConceptID("Specialist clinic");return super.getJson("/concept_set",{id:e})}static getRegions(){return super.getJson("/regions")}static getDistricts(e){return super.getJson("/districts",{region_id:e,page_size:1e3})}static getVillages(e,t=""){return super.getJson("/villages",{traditional_authority_id:e,name:t})}static getTraditionalAuthorities(e,t=""){return super.getJson("/traditional_authorities",{district_id:e,name:t})}}},c7512:function(e,t,i){"use strict";i.r(t);var n=i("7a23");function a(e,t,i,a,r,s){const o=Object(n["resolveComponent"])("his-standard-form");return Object(n["openBlock"])(),Object(n["createBlock"])(o,{cancelDestinationPath:e.cancelDestination,fields:e.fields,onFinishAction:e.onSubmit},null,8,["cancelDestinationPath","fields","onFinishAction"])}var r=i("9441"),s=i("7365"),o=i("cc6f");class c extends o["a"]{constructor(e,t){super(e,104,t)}}var l=i("2706"),u=i("d95e"),d=i("e86e"),p=i("b5e4"),f=i("23e6");const g=28;var v=i("3800"),b=Object(n["defineComponent"])({components:{HisStandardForm:r["a"]},mixins:[s["a"]],data:()=>({registrationService:{}}),watch:{ready:{async handler(e){e&&(this.registrationService=new c(this.patient.getID(),this.providerID),this.fields=this.getFields())},immediate:!0,deep:!0}},methods:{async onSubmit(e,t){await this.asignNID(e);const i=await this.registrationService.createEncounter();if(!i)return Object(p["e"])("Unable to create registration encounter");const n=await this.resolveObs({...t}),a=await this.registrationService.saveObservationList(n);if(!a)return Object(p["e"])("Unable to save observations");this.nextTask()},async asignNID(e){const t=e["national_id_available"],i=e["national_id"];t&&"Yes"===t.value&&await this.patient.updateMWNationalId(i.value)},async mwIdExists(e){if(!e)return!1;const t=await f["a"].findByOtherID(g,e);return t.length>0},getFields(){return[{id:"visit_type",helpText:"Type of visit",type:u["b"].TT_SELECT,validation:e=>l["a"].required(e),computedValue:e=>({obs:this.registrationService.buildValueCoded("Type of visit",e.value)}),options:()=>[{label:"New",value:"New patient"},{label:"Referral",value:"Referral"},{label:"Re-visiting",value:"Re-visiting"}]},{id:"referring_facility_name",helpText:"Referred from",type:u["b"].TT_SELECT,validation:e=>l["a"].required(e),computedValue:({label:e})=>({obs:this.registrationService.buildValueText("Referred from",e)}),condition:e=>"Referral"===e.visit_type.value,options:(e,t="")=>Object(d["b"])(t),config:{showKeyboard:!0,isFilterDataViaApi:!0}},{id:"national_id_available",helpText:"National ID Available",type:u["b"].TT_SELECT,validation:e=>l["a"].required(e),condition:()=>"Unknown"===this.patient.getMWNationalID(),options:()=>this.yesNoUnknownOptions(),appearInSummary:()=>!1},{id:"national_id",helpText:"Enter National ID",type:u["b"].TT_TEXT,validation:e=>l["a"].isMWNationalID(e),condition:e=>"Yes"===e.national_id_available.value,beforeNext:async e=>!e.value||!await this.mwIdExists(e.value.toString())||(Object(p["e"])("National ID already exists"),!1),summaryMapValue:({value:e})=>({value:e,label:"National ID"}),config:{casing:"uppercase",customKeyboard:[v["c"],[["Delete"]]]}},{id:"patient_pregnant",helpText:"Patient pregnant",type:u["b"].TT_SELECT,validation:e=>l["a"].required(e),computedValue:({value:e})=>({obs:this.registrationService.buildValueCoded("PATIENT PREGNANT",e)}),condition:()=>this.patient.isChildBearing(),options:()=>this.yesNoUnknownOptions()}]}}}),h=i("6b0d"),m=i.n(h);const y=m()(b,[["render",a]]);t["default"]=y},e86e:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"c",(function(){return s})),i.d(t,"e",(function(){return o})),i.d(t,"d",(function(){return c})),i.d(t,"a",(function(){return l})),i.d(t,"f",(function(){return u})),i.d(t,"g",(function(){return d}));var n=i("5713"),a=i("2ef0");async function r(e=""){const t=await n["a"].getFacilities({name:e});return t.filter(e=>!Object(a["isEmpty"])(e)).map(e=>({label:e.name,value:e.location_id,other:e}))}async function s(e=""){const t=await n["a"].getFacilities({name:e,tag:"Facility adult sections"});return t.map(e=>({label:e.name,value:e.name,other:e}))}async function o(){const e=await n["a"].getSpecialistClinics();return e.map(e=>({label:e.name,value:e.name,other:e}))}async function c(){const e=await n["a"].getRegions();return e.map(e=>({label:e.name,value:e.region_id,other:e}))}async function l(e){const t=await n["a"].getDistricts(e);return t.map(e=>({label:e.name,value:e.district_id,other:e}))}async function u(e,t=""){const i=await n["a"].getTraditionalAuthorities(e,t);return i.map(e=>({label:e.name,value:e.traditional_authority_id,other:e}))}async function d(e,t=""){const i=await n["a"].getVillages(e,t);return i.map(e=>({label:e.name,value:e.village_id,other:e}))}}}]);
//# sourceMappingURL=chunk-ddcec0d4.24993040.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2feddfc6"],{1648:function(e,t,n){"use strict";n.r(t);var r=n("7a23");function o(e,t,n,o,a,c){var i=Object(r["resolveComponent"])("date-range-picker"),u=Object(r["resolveComponent"])("ion-col"),s=Object(r["resolveComponent"])("line-chart"),l=Object(r["resolveComponent"])("ion-row"),d=Object(r["resolveComponent"])("ion-grid"),f=Object(r["resolveComponent"])("layout");return Object(r["openBlock"])(),Object(r["createBlock"])(f,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{size:"5",offset:"7",class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{range:e.range,onRangeChange:e.fetchData},null,8,["range","onRangeChange"])]})),_:1}),Object(r["createVNode"])(u,{size:"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{series:e.series,options:e.options,onPointSelection:e.pointSelection},null,8,["series","options","onPointSelection"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})}var a=n("b85c"),c=n("1da1"),i=n("2909"),u=n("3835"),s=(n("96cf"),n("d81d"),n("4de4"),n("d3b7"),n("4fad"),n("99af"),n("b64b"),n("8d56"));function l(e,t,n,o,a,c){var i=Object(r["resolveComponent"])("apexchart"),u=Object(r["resolveComponent"])("ion-card-content"),s=Object(r["resolveComponent"])("ion-card");return Object(r["openBlock"])(),Object(r["createBlock"])(s,{class:"his-card"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{style:{"min-height":"45vh"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{width:"100%",height:"100%",type:"line",options:e.chartOptions,series:e.series,onClick:t[1]||(t[1]=function(t,n,r){return e.$emit("pointSelection",r)})},null,8,["options","series"])]})),_:1})]})),_:1})}var d=n("5530"),f=n("8a30"),b=Object(r["defineComponent"])({name:"LineChart",props:{series:{type:Array,default:function(){return[]}},options:{type:Object,default:function(){return[]}}},components:{IonCard:f["f"],IonCardContent:f["g"]},emits:["pointSelection"],setup:function(e){var t=Object(r["computed"])((function(){var t={chart:{id:"line-chart",type:"line"},xaxis:{type:"datetime",tickAmount:30,labels:{show:!0,rotate:-75}},title:{text:"Line Chart",align:"left"},noData:{text:"No Data Available",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:"#000000",fontSize:"25px",fontFamily:"Helvetica"}}};for(var n in e.options)t[n]=Object(d["a"])(Object(d["a"])({},t[n]),e.options[n]);return t}));return{chartOptions:t}}}),p=n("6b0d"),O=n.n(p);const j=O()(b,[["render",l]]);var m=j,h=n("2ef0"),v=n("7717"),w=n("ad8d"),C=n("b211"),g=n("23e6"),x=n("da44"),y=n("564f"),I=n("6c02"),k=Object(r["defineComponent"])({components:{Layout:s["a"],LineChart:m,IonGrid:f["p"],IonRow:f["J"],IonCol:f["m"],DateRangePicker:v["a"]},setup:function(){var e=Object(I["f"])(),t=Object(r["reactive"])({}),n=Object(r["ref"])([]),o={title:{text:"Patient Vists Statistics",align:"left"}},s=function(e,t){return t.map((function(t){return e[t]}))},l=function(e,t){return t.map((function(t){return[new Date(t).getTime(),e[t].length]}))},d=function(e,t,n,r){t in n||(n[t]=[]);var o=Object.entries(e[t]).filter((function(e){var t=Object(u["a"])(e,2),n=(t[0],t[1]);return r(n.patient_present,n.guardian_present)})).map((function(e){var t=Object(u["a"])(e,1),n=t[0];return n}));return n[t]=[].concat(Object(i["a"])(n[t]),Object(i["a"])(o)),n},f=function(e){var t=Object(h["uniq"])(Object.keys(e)),n={},r={},o={};for(var a in e)d(e,a,n,(function(e,t){return e&&!t})),d(e,a,r,(function(e,t){return!e&&t})),d(e,a,o,(function(e,t){return e&&t}));return[{name:"Patient present",raw:s(n,t),data:l(n,t)},{name:"Guardian present",raw:s(r,t),data:l(r,t)},{name:"Both patient and guardian present",raw:s(o,t),data:l(o,t)}]},b=function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(r){var o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return C["a"].show(),Object.assign(t,r),o=new w["b"],o.setStartDate(r.startDate),o.setEndDate(r.endDate),e.next=7,o.getPatientVisitTypes();case 7:a=e.sent,n.value=f(a),C["a"].hide();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var t=Object(c["a"])(regeneratorRuntime.mark((function t(r){var o,c,i,u,s,l,d,f,b,p,O;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,C["a"].show(),o=r.dataPointIndex,c=r.seriesIndex,i=c<=0?0:c,u=[{path:"arv_number",label:"ARV Number",initialSort:!0,initialSortOrder:"asc"},{path:"birthdate",label:"Date of Birth",date:!0},{path:"gender",label:"Gender"},{path:"address",label:"Address"}],s=[],l=Object(a["a"])(n.value[i].raw[o]),t.prev=7,l.s();case 9:if((d=l.n()).done){t.next=18;break}return f=d.value,t.next=13,g["a"].findByID(f);case 13:b=t.sent,p=new g["a"](b),s.push({arv_number:p.getArvNumber(),birthdate:p.getBirthdate(),gender:p.getGender(),address:"".concat(p.getCurrentVillage())});case 16:t.next=9;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t["catch"](7),l.e(t.t0);case 23:return t.prev=23,l.f(),t.finish(23);case 26:return C["a"].hide(),O=[{label:"Select",default:!0,action:function(t){e.push("/emc/patient/".concat(t["person_id"]))}}],t.next=30,x["a"].show(y["a"],{title:"Patient Drilldown",columns:u,rows:s,rowActionButtons:O});case 30:t.next=36;break;case 32:t.prev=32,t.t1=t["catch"](0),C["a"].hide(),console.log(t.t1);case 36:case"end":return t.stop()}}),t,null,[[0,32],[7,20,23,26]])})));return function(e){return t.apply(this,arguments)}}();return{range:t,series:n,options:o,fetchData:b,pointSelection:p}}});const V=O()(k,[["render",o]]);t["default"]=V},"564f":function(e,t,n){"use strict";var r=n("7a23"),o=Object(r["createTextVNode"])("Close");function a(e,t,n,a,c,i){var u=Object(r["resolveComponent"])("IonIcon"),s=Object(r["resolveComponent"])("IonButton"),l=Object(r["resolveComponent"])("IonButtons"),d=Object(r["resolveComponent"])("IonTitle"),f=Object(r["resolveComponent"])("IonToolbar"),b=Object(r["resolveComponent"])("IonHeader"),p=Object(r["resolveComponent"])("data-table"),O=Object(r["resolveComponent"])("IonContent"),j=Object(r["resolveComponent"])("IonFooter"),m=Object(r["resolveComponent"])("IonPage");return Object(r["openBlock"])(),Object(r["createBlock"])(m,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{slot:"end"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{slot:"end",onClick:t[1]||(t[1]=function(t){return e.modal.hide()}),"icon-only":""},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{icon:e.close},null,8,["icon"])]})),_:1})]})),_:1}),Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(O,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{rows:e.rows,"async-rows":e.asyncRows,columns:e.columns,"row-actions-buttons":e.rowActionButtons,color:"custom"},null,8,["rows","async-rows","columns","row-actions-buttons"])]})),_:1}),Object(r["createVNode"])(j,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{class:"ion-margin ion-float-end",onClick:t[2]||(t[2]=function(t){return e.modal.hide()})},{default:Object(r["withCtx"])((function(){return[o]})),_:1})]})),_:1})]})),_:1})}var c=n("8a30"),i=n("8acf"),u=n("ff79"),s=n("da44"),l=Object(r["defineComponent"])({name:"DrilldownTable",components:{DataTable:i["default"],IonButton:c["d"],IonPage:c["F"],IonHeader:c["q"],IonContent:c["n"],IonToolbar:c["V"],IonButtons:c["e"],IonFooter:c["o"],IonTitle:c["U"],IonIcon:c["r"]},props:{title:{type:String,default:"Report"},rows:{type:Array,default:function(){return[]}},asyncRows:{type:Function},columns:{type:Array,default:function(){return[]}},rowActionButtons:{type:Array,default:function(){return[]}},actionButtons:{type:Array,default:function(){return[]}},canExportCsv:{type:Boolean,default:!1},period:{type:String,default:""}},setup:function(){return{close:u["x"],modal:s["a"]}}}),d=n("6b0d"),f=n.n(d);const b=f()(l,[["render",a]]);t["a"]=b},da44:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n("1da1"),o=(n("96cf"),n("8a30")),a={show:function(e,t){var n=arguments;return Object(r["a"])(regeneratorRuntime.mark((function r(){var a,c,i,u,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=n.length>2&&void 0!==n[2]?n[2]:"custom-modal",c=!(n.length>3&&void 0!==n[3])||n[3],r.next=4,o["cb"].create({component:e,cssClass:a,backdropDismiss:c,componentProps:t});case 4:return i=r.sent,i.present(),r.next=8,i.onWillDismiss();case 8:if(u=r.sent,s=u.data,!s){r.next=12;break}return r.abrupt("return",s);case 12:case"end":return r.stop()}}),r)})))()},hide:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o["cb"].dismiss();case 2:case"end":return e.stop()}}),e)})))()}}}}]);
//# sourceMappingURL=chunk-2feddfc6.7e008eb9.js.map
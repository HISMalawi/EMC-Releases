(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14c7bf0c"],{"0481":function(e,t,n){"use strict";var r=n("23e7"),a=n("a2bf"),o=n("7b0b"),c=n("50c4"),u=n("a691"),i=n("65f0");r({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=o(this),n=c(t.length),r=i(t,0);return r.length=a(r,t,t,n,0,void 0===e?1:u(e)),r}})},"06ae":function(e,t,n){"use strict";n("2efc")},"176c":function(e,t,n){},"2efc":function(e,t,n){},"3bb2":function(e,t,n){},"403e":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n("2909");n("d81d");function a(e){return e.map((function(e){return{value:e,label:e}}))}var o=[{label:"Male",value:"M"},{label:"Female",value:"F"}],c=(Object(r["a"])(a(["TB NOT suspected","TB suspected","Confirmed TB NOT on treatment","Confirmed TB on treatment"])),Object(r["a"])(a(["Current","Last 2 years","More than 2 years","Never"]))),u=[{label:"Rapid antibody test",value:"HIV rapid test"},{label:"DNA PCR",value:"HIV DNA polymerase chain reaction"},{label:"Not done",value:"Not done"}]},4069:function(e,t,n){var r=n("44d2");r("flat")},"4a61":function(e,t,n){"use strict";n("3bb2")},"6a92":function(e,t,n){"use strict";n("176c")},"7f12":function(e,t,n){"use strict";var r=n("7a23"),a={key:0},o={key:1},c=Object(r["createTextVNode"])(" Close ");function u(e,t,n,u,i,l){var s=Object(r["resolveComponent"])("ion-title"),d=Object(r["resolveComponent"])("ion-toolbar"),b=Object(r["resolveComponent"])("ion-header"),m=Object(r["resolveComponent"])("his-basic-table"),p=Object(r["resolveComponent"])("text-skeloton"),f=Object(r["resolveComponent"])("ion-content"),v=Object(r["resolveComponent"])("ion-button"),O=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.title),1)]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(f,null,{default:Object(r["withCtx"])((function(){return[e.ready?(Object(r["openBlock"])(),Object(r["createBlock"])("div",a,[Object(r["createVNode"])(m,{columns:e.columns,rows:e.rows},null,8,["columns","rows"])])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])(p)]))]})),_:1}),Object(r["createVNode"])(O,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{color:"danger",onClick:e.closeModal,slot:"end"},{default:Object(r["withCtx"])((function(){return[c]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var i=n("1da1"),l=(n("96cf"),n("a3a5")),s=n("8a30"),d=n("ded6"),b=Object(r["defineComponent"])({components:{HisBasicTable:l["a"],IonHeader:s["q"],IonToolbar:s["V"],IonContent:s["n"],IonFooter:s["o"],IonButton:s["d"],TextSkeloton:d["a"]},props:{title:{type:String,required:!0},columns:{type:Object,required:!0},onRows:{type:Function,required:!0}},data:function(){return{rows:[],ready:!1}},watch:{onRows:{handler:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!e){n.next=5;break}return n.next=3,e();case 3:t.rows=n.sent,t.ready=!0;case 5:case"end":return n.stop()}}),n)})))()},immediate:!0,deep:!0}},methods:{closeModal:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["cb"].dismiss({});case 2:case"end":return e.stop()}}),e)})))()}}}),m=n("6b0d"),p=n.n(m);const f=p()(b,[["render",u]]);t["a"]=f},"99e7":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function a(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("information-header"),i=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-row"),s=Object(r["resolveComponent"])("visits-summary"),d=Object(r["resolveComponent"])("ion-grid"),b=Object(r["resolveComponent"])("layout");return Object(r["openBlock"])(),Object(r["createBlock"])(b,null,{default:Object(r["withCtx"])((function(){return[e.isReady?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:0,class:"ion-no-margin ion-no-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{size:"12"},{default:Object(r["withCtx"])((function(){return[e.patient?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,patient:e.patient,guardians:e.guardians,artStartDate:e.artStartDate,onUpdateARVNumber:e.updateARVNumber,onAddGuardian:e.addGuardian,onUpdatePatient:e.updateDemographics},null,8,["patient","guardians","artStartDate","onUpdateARVNumber","onAddGuardian","onUpdatePatient"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1}),Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[e.patient?(Object(r["openBlock"])(),Object(r["createBlock"])(s,{key:0,patient:e.patient,startDate:e.artStartDate},null,8,["patient","startDate"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})]})),_:1})):Object(r["createCommentVNode"])("",!0)]})),_:1})}var o=n("1da1"),c=(n("96cf"),n("d3b7"),n("25f0"),n("a15b"),n("d81d"),n("99af"),n("b0c0"),n("9283")),u=n("7def"),i=n("8d56"),l=Object(r["withScopeId"])("data-v-3b267c4c");Object(r["pushScopeId"])("data-v-3b267c4c");var s=Object(r["createVNode"])("span",{class:"title"},"Summary of Visits",-1),d={class:"ion-float-right ion-margin-end ion-margin-bottom"};Object(r["popScopeId"])();var b=l((function(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-icon"),i=Object(r["resolveComponent"])("ion-button"),b=Object(r["resolveComponent"])("ion-card-title"),m=Object(r["resolveComponent"])("ion-card-header"),p=Object(r["resolveComponent"])("report-table"),f=Object(r["resolveComponent"])("ion-card-content"),v=Object(r["resolveComponent"])("ion-card");return Object(r["openBlock"])(),Object(r["createBlock"])(v,{class:"his-card",style:{padding:"0 !important"}},{default:l((function(){return[Object(r["createVNode"])(m,null,{default:l((function(){return[Object(r["createVNode"])(b,null,{default:l((function(){return[s,Object(r["createVNode"])("span",d,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.actionButtons,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:e.label,onClick:e.action,color:e.color||"primary"},{default:l((function(){return[e.icon?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,icon:e.icon,class:"ion-margin-right"},null,8,["icon"])):Object(r["createCommentVNode"])("",!0),Object(r["createTextVNode"])(" "+Object(r["toDisplayString"])(e.label),1)]})),_:2},1032,["onClick","color"])})),128))])]})),_:1})]})),_:1}),Object(r["createVNode"])(f,{class:"ion-no-padding",style:{"min-height":"45vh"}},{default:l((function(){return[Object(r["createVNode"])(p,{asyncRows:e.getPatientVisits,columns:e.columns,config:e.tableConfig,key:e.refreshKey},null,8,["asyncRows","columns","config"])]})),_:1})]})),_:1})})),m=n("b85c"),p=(n("159b"),n("a434"),n("3ca3"),n("ddb0"),n("ac1f"),n("466d"),n("7f12")),f=n("9ceb"),v=n("80e3"),O=n("ec2a"),j=n("7957"),h=n("23e6"),g=n("ad60"),x=n("76df"),V=n("8a30"),w=n("5a0c"),C=n.n(w),k=Object(r["createTextVNode"])("Viral Load Results"),N=Object(r["createTextVNode"])("Other Results Options: "),y=Object(r["createTextVNode"])("LDL"),R=Object(r["createTextVNode"])("Close"),_=Object(r["createTextVNode"])("Reset"),I=Object(r["createTextVNode"])("Save");function D(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-title"),i=Object(r["resolveComponent"])("ion-toolbar"),l=Object(r["resolveComponent"])("ion-header"),s=Object(r["resolveComponent"])("DateInput"),d=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("SelectInput"),m=Object(r["resolveComponent"])("NumberInput"),p=Object(r["resolveComponent"])("ion-row"),f=Object(r["resolveComponent"])("ion-label"),v=Object(r["resolveComponent"])("ion-checkbox"),O=Object(r["resolveComponent"])("ion-item"),j=Object(r["resolveComponent"])("ion-grid"),h=Object(r["resolveComponent"])("ion-content"),g=Object(r["resolveComponent"])("ion-button"),x=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[k]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(h,{class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{style:{width:"100%"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{size:"12",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{modelValue:e.form.orderDate,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.orderDate=t}),form:e.form},null,8,["modelValue","form"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.reason,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.reason=t}),options:e.reasons},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.specimenConcept,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.specimenConcept=t}),options:e.specimens},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(d,{size:"12",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{modelValue:e.form.resultDate,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.resultDate=t}),form:e.form},null,8,["modelValue","form"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.modifier,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.modifier=t}),options:e.modifiers},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.result,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.result=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})]})),_:1}),Object(r["createVNode"])(p,{class:"ion-margin-top"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{size:"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{class:"ion-padding-vertical bold"},{default:Object(r["withCtx"])((function(){return[N]})),_:1}),Object(r["createVNode"])(O,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,null,{default:Object(r["withCtx"])((function(){return[y]})),_:1}),Object(r["createVNode"])(v,{slot:"start",modelValue:e.ldl,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.ldl=t})},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(x,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,{color:"primary",onClick:t[8]||(t[8]=function(t){return e.modal.hide()}),slot:"end"},{default:Object(r["withCtx"])((function(){return[R]})),_:1}),Object(r["createVNode"])(g,{color:"warning",onClick:e.resetResults,slot:"end"},{default:Object(r["withCtx"])((function(){return[_]})),_:1},8,["onClick"]),Object(r["createVNode"])(g,{color:"success",onClick:e.saveResults,slot:"end"},{default:Object(r["withCtx"])((function(){return[I]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var T,B=n("b5e4"),A=n("5ab5"),S=n("be95"),P=n("f27f"),E=n("403e"),F=n("9b7c"),H=n("0cb1"),U=n("b211"),G=n("5e76"),L=n("5b71"),M=n("8158"),q=n("0ba8");(function(e){e["RELOAD_PATIENT_DATA"]="reload_patient_data",e["RELOAD_PATIENT_VISIT_DATA"]="reload_patient_visit_data",e["RELOAD_GUARDIAN_DATA"]="reload_guardian_data"})(T||(T={}));var z=n("da44"),Y=Object(r["defineComponent"])({components:{IonContent:V["n"],IonFooter:V["o"],IonHeader:V["q"],IonTitle:V["U"],IonToolbar:V["V"],IonButton:V["d"],IonLabel:V["x"],IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],IonCheckbox:V["k"],IonItem:V["w"],DateInput:A["a"],SelectInput:S["a"],NumberInput:P["a"]},props:{patient:{type:Object,required:!0}},setup:function(e){var t=Object(r["ref"])(!1),n=Object(E["d"])(["=",">","<",">=","<="]),a=Object(E["d"])(["Routine","Targeted","Confirmatory","Stat","Repeat / Missing"]),c=Object(r["ref"])([]),u=Object(r["reactive"])({orderDate:{value:"",label:"Order Date",required:!0,validation:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(C()(n.value).isValid()){t.next=2;break}return t.abrupt("return",["Invalid date"]);case 2:if(!C()(n.value).isAfter(C()())){t.next=4;break}return t.abrupt("return",["Order date cannot be in the future"]);case 4:if(!C()(n.value).isBefore(C()(e.patient.getBirthdate()))){t.next=6;break}return t.abrupt("return",["Order date cannot be before patient's date of birth"]);case 6:return t.abrupt("return",null);case 7:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},resultDate:{value:"",label:"Result Date",required:!0,validation:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(C()(n.value).isValid()){t.next=2;break}return t.abrupt("return",["Invalid date"]);case 2:if(!C()(n.value).isAfter(C()())){t.next=4;break}return t.abrupt("return",["Result date cannot be in the future"]);case 4:if(!C()(n.value).isBefore(C()(r.orderDate.value))){t.next=6;break}return t.abrupt("return",["Result date cannot be before order date"]);case 6:if(!C()(n.value).isBefore(C()(e.patient.getBirthdate()))){t.next=8;break}return t.abrupt("return",["Result date cannot be before patient's date of birth"]);case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t)})));function n(e,n){return t.apply(this,arguments)}return n}()},specimenConcept:{value:"",label:"Specimen",placeholder:"Select a specimen",required:!0},modifier:{value:"",label:"Modifier",placeholder:"Select a modifier",required:!0},reason:{value:"",label:"Reason",placeholder:"Select a reason",required:!0},result:{value:"",label:"Result Value",placeholder:"Enter a result value",required:!0}}),i=function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(){var r,a,o,c,i,l,s,d,b;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,U["a"].show();case 2:return n.next=4,Object(G["a"])(u);case 4:if(n.sent){n.next=6;break}return n.abrupt("return",U["a"].hide());case 6:return n.prev=6,r=Object(G["c"])(u),a=r.formData,n.next=10,H["a"].setSessionDate(a.orderDate);case 10:return o=new H["a"](e.patient.getID(),-1),n.next=13,M["a"].getConceptID("HIV viral load");case 13:return c=n.sent,n.next=16,o.createEncounter();case 16:if(i=n.sent,i){n.next=19;break}throw new Error("Unable to create lab order encounter");case 19:return n.next=21,F["a"].buildLabOrders(i,[{specimenConcept:a.specimenConcept.value,reason:a.reason.value,concept_id:c}]);case 21:return l=n.sent,n.next=24,F["a"].saveOrdersArray(i.encounter_id,l);case 24:if(s=n.sent,s){n.next=27;break}throw new Error("Unable to save lab orders");case 27:return n.next=29,L["a"].setSessionDate(a.resultDate);case 29:return d=new L["a"](e.patient.getID()),d.setTestID(s[0].tests[0].id),d.setResultDate(a.resultDate),n.next=34,d.createEncounter();case 34:if(b=n.sent,b){n.next=37;break}throw new Error("Unable to create lab result encounter");case 37:return n.next=39,d.createLabResult([{indicator:{concept_id:c},value:t.value?"LDL":parseInt(a.result),value_modifier:t.value?"=":a.modifier.value,value_type:t.value?"text":"numeric"}]);case 39:return n.next=41,L["a"].resetSessionDate();case 41:return n.next=43,U["a"].hide();case 43:return n.next=45,z["a"].hide();case 45:q["b"].emit(T.RELOAD_PATIENT_VISIT_DATA),n.next=52;break;case 48:return n.prev=48,n.t0=n["catch"](6),Object(B["e"])("".concat(n.t0)),n.abrupt("return",U["a"].hide());case 52:case"end":return n.stop()}}),n,null,[[6,48]])})));return function(){return n.apply(this,arguments)}}(),l=function(){for(var e in u)u[e].value="",u[e].error=""};return Object(r["watch"])(t,(function(e){e&&(u.modifier.value="",u.result.value=void 0,u.modifier.error="",u.result.error=""),u.modifier.disabled=e,u.modifier.required=!e,u.result.disabled=e,u.result.required=!e})),Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,F["a"].getSpecimens("HIV viral load");case 2:c.value=e.sent.map((function(e){return{label:e.name,value:e["concept_id"]}}));case 3:case"end":return e.stop()}}),e)})))),{form:u,modifiers:n,reasons:a,specimens:c,ldl:t,modal:z["a"],resetResults:l,saveResults:i}}}),W=n("6b0d"),J=n.n(W);const K=J()(Y,[["render",D]]);var X=K,Q=Object(r["createTextVNode"])("Patient Outcomes"),Z=Object(r["createTextVNode"])("Close"),$=Object(r["createTextVNode"])("Void Program");function ee(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-title"),i=Object(r["resolveComponent"])("ion-toolbar"),l=Object(r["resolveComponent"])("ion-header"),s=Object(r["resolveComponent"])("ion-badge"),d=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("ion-row"),m=Object(r["resolveComponent"])("enrollment-form"),p=Object(r["resolveComponent"])("outcome-form"),f=Object(r["resolveComponent"])("outcomes-table"),v=Object(r["resolveComponent"])("ion-grid"),O=Object(r["resolveComponent"])("ion-content"),j=Object(r["resolveComponent"])("ion-button"),h=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Q]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(O,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{style:{width:"100%"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{color:"lightblue",class:"ion-padding",style:{width:"100%"},disabled:""},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.enrollmentStatus),1)]})),_:1})]})),_:1})]})),_:1}),e.isEnrolled?(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:1},[e.outcomes?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,class:"his-card",style:{"margin-bottom":".4rem"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{outcomes:e.outcomes,onSaveOutcome:e.saveOutcome},null,8,["outcomes","onSaveOutcome"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(b,{class:"his-card",style:[{padding:"0 !important"},{minHeight:e.totalStates?"0":"30vh"}]},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{size:"12",class:"ion-no-padding"},{default:Object(r["withCtx"])((function(){var t;return[Object(r["createVNode"])(f,{patientStates:null===(t=e.program)||void 0===t?void 0:t.patient_states,onVoidOutcome:e.voidOutcome},null,8,["patientStates","onVoidOutcome"])]})),_:1})]})),_:1},8,["style"])],64)):(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,class:"his-card",style:{"margin-bottom":".4rem"}},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{size:"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{patientProgram:e.patientProgram,onEnrollProgram:e.enrollProgram},null,8,["patientProgram","onEnrollProgram"])]})),_:1})]})),_:1}))]})),_:1})]})),_:1}),Object(r["createVNode"])(h,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{color:"primary",onClick:t[1]||(t[1]=function(t){return e.modal.hide()}),slot:"end"},{default:Object(r["withCtx"])((function(){return[Z]})),_:1}),e.isEnrolled?(Object(r["openBlock"])(),Object(r["createBlock"])(j,{key:0,color:"danger",onClick:e.voidProgram,slot:"end"},{default:Object(r["withCtx"])((function(){return[$]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0)]})),_:1})]})),_:1})],64)}n("a9e3"),n("7db0");var te=n("74f4"),ne=n("2ef0"),re=Object(r["createVNode"])("p",{class:"ion-padding-horizontal ion-margin-vertical bold ion-margin-top"},"Previous Outcomes",-1);function ae(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("data-table");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[re,Object(r["createVNode"])(u,{rows:e.rows,columns:e.columns,config:e.tableConfig,"row-actions-buttons":e.TableRowActions,color:"custom"},null,8,["rows","columns","config","row-actions-buttons"])],64)}var oe=n("5530"),ce=n("8acf"),ue=Object(r["defineComponent"])({name:"OutcomesTable",props:{patientStates:{type:Array,required:!0}},components:{DataTable:ce["default"]},emits:["voidOutcome"],setup:function(e,t){var n=t.emit,a=[{path:"name",label:"Outcome"},{path:"start_date",label:"Start Date",date:!0},{path:"end_date",label:"End Date",date:!0}],c={showSearchField:!1,showSubmitButton:!1},u=Object(r["computed"])((function(){return e.patientStates.map((function(e,t){return Object(oe["a"])(Object(oe["a"])({},e),{},{index:t})}))})),i=[{label:"void",color:"danger",action:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(B["a"])("Are you sure you want to void this outcome?");case 2:if(!e.sent){e.next=4;break}n("voidOutcome",{stateId:t.patient_state_id,index:t.index});case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}];return{rows:u,columns:a,tableConfig:c,TableRowActions:i}}});const ie=J()(ue,[["render",ae]]);var le=ie,se=Object(r["createTextVNode"])("Reset"),de=Object(r["createTextVNode"])("Enroll");function be(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("DateInput"),i=Object(r["resolveComponent"])("ion-col"),l=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-row"),d=Object(r["resolveComponent"])("ion-grid");return Object(r["openBlock"])(),Object(r["createBlock"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{size:"12"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{modelValue:e.form.date,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.date=t}),form:e.form,"max-date":e.today},null,8,["modelValue","form","max-date"])]})),_:1}),Object(r["createVNode"])(i,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{color:"warning",onClick:e.onReset},{default:Object(r["withCtx"])((function(){return[se]})),_:1},8,["onClick"]),Object(r["createVNode"])(l,{color:"success",onClick:e.enrollProgram},{default:Object(r["withCtx"])((function(){return[de]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})}var me=Object(r["defineComponent"])({name:"EnrollmentForm",components:{DateInput:A["a"],IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],IonButton:V["d"]},emits:["enrollProgram"],setup:function(e,t){var n=t.emit,a=C()().format("YYYY-MM-DD"),c=Object(r["reactive"])({date:{value:"",label:"Date of Enrollment",required:!0}}),u=function(){c.date.value="",c.date.error=""},i=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(G["a"])(c);case 2:if(!e.sent){e.next=4;break}n("enrollProgram",c.date.value);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{form:c,today:a,onReset:u,enrollProgram:i}}});const pe=J()(me,[["render",be]]);var fe=pe,ve=Object(r["createVNode"])("p",null,"Add New Outcome",-1),Oe=Object(r["createTextVNode"])("Reset"),je=Object(r["createTextVNode"])("Save");function he(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-col"),i=Object(r["resolveComponent"])("SelectInput"),l=Object(r["resolveComponent"])("DateInput"),s=Object(r["resolveComponent"])("ion-button"),d=Object(r["resolveComponent"])("ion-row"),b=Object(r["resolveComponent"])("ion-grid");return Object(r["openBlock"])(),Object(r["createBlock"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,{size:"12"},{default:Object(r["withCtx"])((function(){return[ve]})),_:1}),Object(r["createVNode"])(u,{size:"6",class:"ion-margin-top-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{modelValue:e.form.status,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.status=t}),form:e.form,options:e.outcomes,searchable:""},null,8,["modelValue","form","options"])]})),_:1}),Object(r["createVNode"])(u,{size:"6",class:"ion-margin-top-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{modelValue:e.form.date,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.date=t}),form:e.form,"max-date":e.today},null,8,["modelValue","form","max-date"])]})),_:1}),e.isTransferredOut?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,size:"12",class:"ion-margin-top-vertical"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{modelValue:e.form.nextFacility,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.nextFacility=t}),form:e.form,asyncOptions:e.getFacilities,searchable:""},null,8,["modelValue","form","asyncOptions"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(u,{size:"12",class:"ion-margin-top"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(s,{color:"warning",onClick:e.onReset},{default:Object(r["withCtx"])((function(){return[Oe]})),_:1},8,["onClick"]),Object(r["createVNode"])(s,{color:"success",onClick:e.onSave},{default:Object(r["withCtx"])((function(){return[je]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1})}var ge=n("2706"),xe=n("e86e"),Ve=Object(r["defineComponent"])({name:"OutcomeForm",props:{outcomes:{type:Array,required:!0}},components:{DateInput:A["a"],IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],IonButton:V["d"],SelectInput:S["a"]},emits:["saveOutcome"],setup:function(e,t){var n=t.emit,a=C()().format("YYYY-MM-DD"),c=Object(r["reactive"])({date:{value:"",label:"Outcome Date",required:!0},status:{value:"",label:"Outcome",required:!0},nextFacility:{value:"",label:"Next Facility",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","Patient transferred out"===n.status.value.label&&ge["a"].required(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()}}),u=Object(r["computed"])((function(){var e;return"Patient transferred out"===(null===(e=c.status.value)||void 0===e?void 0:e.label)})),i=function(){for(var e in c)c[e].value="",c[e].error=""},l=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(G["a"])(c);case 2:if(!e.sent){e.next=6;break}t=Object(G["c"])(c).formData,console.log(t),n("saveOutcome",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{form:c,today:a,isTransferredOut:u,onSave:l,onReset:i,getFacilities:xe["b"]}}});const we=J()(Ve,[["render",he]]);var Ce=we,ke=Object(r["defineComponent"])({components:{IonContent:V["n"],IonFooter:V["o"],IonHeader:V["q"],IonTitle:V["U"],IonToolbar:V["V"],IonButton:V["d"],IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],IonBadge:V["c"],OutcomesTable:le,EnrollmentForm:fe,OutcomeForm:Ce},props:{patientId:{type:Number,required:!0}},setup:function(e){var t=c["b"].toStandardHisDisplayFormat,n=new te["a"](e.patientId),a=Object(r["ref"])(),u=Object(r["computed"])((function(){return!Object(ne["isEmpty"])(a.value)})),i=Object(r["ref"])(""),l=Object(r["ref"])(),s=Object(r["computed"])((function(){var e,t,n;return null!==(e=null===(t=a.value)||void 0===t||null===(n=t.patient_states)||void 0===n?void 0:n.length)&&void 0!==e?e:0})),d=Object(r["computed"])((function(){return u.value&&i.value?"Patient enrolled in this porgram on ".concat(t(i.value)):"Patient is not enrolled in this program"})),b=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=t.date,a=t.status,o=t.nextFacility,U["a"].show(),n.setStateDate(r),n.setStateId(a.value),!o){e.next=7;break}return e.next=7,n.transferOutEncounter(o.other);case 7:return e.next=9,n.updateState();case 9:return e.next=11,U["a"].hide();case 11:return e.next=13,Object(B["d"])("Outcome saved successfully",1e3);case 13:return e.next=15,z["a"].hide();case 15:q["b"].emit(T.RELOAD_PATIENT_VISIT_DATA);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["a"].show();case 2:return n.setProgramDate(t),e.next=5,n.enrollProgram();case 5:return e.next=7,U["a"].hide();case 7:return e.next=9,Object(B["d"])("Program enrolled successfully",1e3);case 9:return e.next=11,z["a"].hide();case 11:q["b"].emit(T.RELOAD_PATIENT_VISIT_DATA);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.setPatientProgramId((null===(t=a.value)||void 0===t?void 0:t.patient_program_id)||-1),e.next=3,n.voidProgram("duplicate / system error");case 3:return e.next=5,Object(B["d"])("Patient voided from program successfully",1e3);case 5:return e.next=7,z["a"].hide();case 7:q["b"].emit(T.RELOAD_PATIENT_VISIT_DATA);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.stateId,c=t.index,n.setStateId(o),e.next=4,n.voidState("duplicate / system error");case 4:Object(B["d"])("Outcome voided successfully"),null===(r=a.value)||void 0===r||r.patient_states.splice(c,1),q["b"].emit(T.RELOAD_PATIENT_VISIT_DATA);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.getPrograms();case 2:if(t=e.sent,a.value=t.find((function(e){return"HIV PROGRAM"===e.program.name})),!a.value){e.next=10;break}return i.value=a.value.date_enrolled,e.next=8,n.getProgramOutcomes();case 8:r=e.sent,l.value=r.map((function(e){return{label:e.name,value:e.program_workflow_state_id,other:e}}));case 10:case"end":return e.stop()}}),e)})))),{modal:z["a"],patientProgram:n,isEnrolled:u,enrollDate:i,enrollmentStatus:d,outcomes:l,program:a,totalStates:s,toStandardHisDisplayFormat:t,saveOutcome:b,enrollProgram:m,voidProgram:p,voidOutcome:f}}});const Ne=J()(ke,[["render",ee]]);var ye=Ne,Re=Object(r["withScopeId"])("data-v-5cd075fc");Object(r["pushScopeId"])("data-v-5cd075fc");var _e=Object(r["createTextVNode"])("Patient Visit"),Ie=Object(r["createTextVNode"])("Close"),De=Object(r["createTextVNode"])("Reset"),Te=Object(r["createTextVNode"])("Save");Object(r["popScopeId"])();var Be=Re((function(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-title"),i=Object(r["resolveComponent"])("ion-toolbar"),l=Object(r["resolveComponent"])("ion-header"),s=Object(r["resolveComponent"])("DateInput"),d=Object(r["resolveComponent"])("ion-col"),b=Object(r["resolveComponent"])("NumberInput"),m=Object(r["resolveComponent"])("SelectInput"),p=Object(r["resolveComponent"])("yes-no-input"),f=Object(r["resolveComponent"])("ion-label"),v=Object(r["resolveComponent"])("ion-checkbox"),O=Object(r["resolveComponent"])("ion-item"),j=Object(r["resolveComponent"])("multi-column-view"),h=Object(r["resolveComponent"])("ion-row"),g=Object(r["resolveComponent"])("ion-grid"),x=Object(r["resolveComponent"])("ion-content"),V=Object(r["resolveComponent"])("ion-button"),w=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(l,null,{default:Re((function(){return[Object(r["createVNode"])(i,null,{default:Re((function(){return[Object(r["createVNode"])(u,null,{default:Re((function(){return[_e]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(x,{class:" ion-padding"},{default:Re((function(){return[Object(r["createVNode"])(g,{style:{width:"100%"}},{default:Re((function(){return[Object(r["createVNode"])(h,null,{default:Re((function(){return[Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(s,{modelValue:e.form.visitDate,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.visitDate=t}),form:e.form},null,8,["modelValue","form"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.weight,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.weight=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1}),e.showHeightField?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:0,size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.height,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.height=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{class:"ion-margin-vertical",size:e.showHeightField?6:12},{default:Re((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.tbStatus,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.tbStatus=t}),options:e.tbStatuses},null,8,["modelValue","options"])]})),_:1},8,["size"]),e.isFemale?(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:1},[Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical ion-padding-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.isPregnant,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.form.isPregnant=t}),inline:""},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical ion-padding-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.isBreastfeeding,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.form.isBreastfeeding=t}),inline:""},null,8,["modelValue"])]})),_:1})],64)):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.hasContraindications,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.form.hasContraindications=t}),inline:""},null,8,["modelValue"]),e.hasContraindications?(Object(r["openBlock"])(),Object(r["createBlock"])(j,{key:0,items:e.contraIndications,numberOfColumns:2},{default:Re((function(e){var t=e.entries;return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(O,{lines:"none",key:e.value},{default:Re((function(){return[Object(r["createVNode"])(f,null,{default:Re((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024),Object(r["createVNode"])(v,{slot:"start",modelValue:e.isChecked,"onUpdate:modelValue":function(t){return e.isChecked=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)})),128))]})),_:1},8,["items"])):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(d,{class:"ion-padding-start",size:"6"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.hasSideEffects,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.form.hasSideEffects=t}),inline:""},null,8,["modelValue"]),e.hasSideEffects?(Object(r["openBlock"])(),Object(r["createBlock"])(j,{key:0,items:e.sideEffects,numberOfColumns:2},{default:Re((function(e){var t=e.entries;return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])(O,{lines:"none",key:e.value},{default:Re((function(){return[Object(r["createVNode"])(f,null,{default:Re((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.label),1)]})),_:2},1024),Object(r["createVNode"])(v,{slot:"start",modelValue:e.isChecked,"onUpdate:modelValue":function(t){return e.isChecked=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:2},1024)})),128))]})),_:1},8,["items"])):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.regimen,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.form.regimen=t}),options:e.regimens},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.totalArvsGiven,"onUpdate:modelValue":t[10]||(t[10]=function(t){return e.form.totalArvsGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.totalCPTGiven,"onUpdate:modelValue":t[11]||(t[11]=function(t){return e.form.totalCPTGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.tbMed,"onUpdate:modelValue":t[12]||(t[12]=function(t){return e.form.tbMed=t}),options:e.tbMeds},null,8,["modelValue","options"])]})),_:1}),e.hasGiven6H||e.hasGivenRFP?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:2,size:e.hasGivenRFP?6:12},{default:Re((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.totalIPTGiven,"onUpdate:modelValue":t[13]||(t[13]=function(t){return e.form.totalIPTGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1},8,["size"])):Object(r["createCommentVNode"])("",!0),e.hasGivenRFP?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:3,size:"6"},{default:Re((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.totalRFPGiven,"onUpdate:modelValue":t[14]||(t[14]=function(t){return e.form.totalRFPGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),e.hasGiven3HP?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:4,size:"12"},{default:Re((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.total3HPGiven,"onUpdate:modelValue":t[15]||(t[15]=function(t){return e.form.total3HPGiven=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.patientPresent,"onUpdate:modelValue":t[16]||(t[16]=function(t){return e.form.patientPresent=t}),inline:"",disabled:e.form.patientPresent.disabled},null,8,["modelValue","disabled"])]})),_:1}),Object(r["createVNode"])(d,{size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(p,{modelValue:e.form.guardianPresent,"onUpdate:modelValue":t[17]||(t[17]=function(t){return e.form.guardianPresent=t}),inline:""},null,8,["modelValue"])]})),_:1}),e.prevDrugs.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(d,{key:5,size:"6",class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(b,{modelValue:e.form.pillCount,"onUpdate:modelValue":t[18]||(t[18]=function(t){return e.form.pillCount=t}),form:e.form,min:1},null,8,["modelValue","form"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(d,{size:e.prevDrugs.length>0?6:12,class:"ion-margin-vertical"},{default:Re((function(){return[Object(r["createVNode"])(s,{modelValue:e.form.nextAppointmentDate,"onUpdate:modelValue":t[19]||(t[19]=function(t){return e.form.nextAppointmentDate=t}),form:e.form},null,8,["modelValue","form"])]})),_:1},8,["size"])]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(w,null,{default:Re((function(){return[Object(r["createVNode"])(i,null,{default:Re((function(){return[Object(r["createVNode"])(V,{color:"primary",onClick:t[20]||(t[20]=function(t){return e.modal.hide()}),slot:"end"},{default:Re((function(){return[Ie]})),_:1}),Object(r["createVNode"])(V,{color:"warning",onClick:e.onClear,slot:"end"},{default:Re((function(){return[De]})),_:1},8,["onClick"]),Object(r["createVNode"])(V,{color:"success",onClick:e.onSubmit,slot:"end"},{default:Re((function(){return[Te]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)})),Ae=n("2909"),Se=(n("b64b"),n("0481"),n("4069"),n("13ea")),Pe=n.n(Se),Ee=n("6b6c"),Fe=n("92c1"),He=n("d4ec"),Ue=n("bee2"),Ge=n("262e"),Le=n("2caf"),Me=(n("4de4"),n("aff5"),n("1c74")),qe=n("71c3"),ze=function(e){Object(Ge["a"])(n,e);var t=Object(Le["a"])(n);function n(e){return Object(He["a"])(this,n),t.call(this,e)}return Object(Ue["a"])(n,[{key:"isPregnant",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j["a"].getFirstObs(this.getID(),"Is patient pregnant");case 2:return t=e.sent,e.abrupt("return",t&&!!t.value_coded.match(/Yes/i)&&j["a"].obsInValidPeriod(t));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasPregnancyObsToday",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j["a"].getFirstObsDatetime(this.getID(),"Is patient pregnant");case 2:return t=e.sent,e.abrupt("return",t&&c["b"].toStandardHisFormat(t)===Me["e"].getSessionDate()&&this.isFemale());case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"hasPregnancyAtARTInitiation",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j["a"].getLastValueCoded(this.getID(),"Is patient pregnant");case 2:if(t=e.sent,e.t0=t,!e.t0){e.next=8;break}return e.next=7,j["a"].getConceptName(t);case 7:e.t0=e.sent;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"breastFeedingAtARTInitiation",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j["a"].getLastValueCoded(this.getID(),"Is patient breast feeding");case 2:if(t=e.sent,e.t0=t,!e.t0){e.next=8;break}return e.next=7,j["a"].getConceptName(t);case 7:e.t0=e.sent;case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialWeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getLastValueNumber(this.getID(),"weight"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRecentWeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getFirstValueNumber(this.getID(),"weight")||-1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialHeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getLastValueNumber(this.getID(),"Height"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialTBStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j["a"].getLastValueCoded(this.getID(),"TB Status at Initiation");case 2:if(t=e.sent,!t){e.next=5;break}return e.abrupt("return",j["a"].getConceptName(t));case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getRecentHeight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getFirstValueNumber(this.getID(),"Height")||-1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getWeightHistory",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j["a"].getAll(this.getID(),"weight");case 3:return t=e.sent,e.abrupt("return",t.map((function(e){return{weight:e.value_numeric,date:e.obs_datetime}})));case 7:return e.prev=7,e.t0=e["catch"](0),console.warn(e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getCompleteTBTherapyHistory",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j["a"].getAll(this.getID(),"TB treatment history");case 2:return t=e.sent,e.abrupt("return",t.filter((function(e){return e.value_text.match(/Complete/i)})));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getInitialBMI",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getLastValueNumber(this.getID(),"BMI"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"everReceivedART",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getFirstValueCoded(this.getID(),"Ever received ART"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"agreesToFollowUp",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getFirstValueCoded(this.getID(),"Agrees to followup"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getReasonForStartingART",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getFirstValueCoded(this.getID(),"Reason for ART eligibility"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getHIVTestDate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j["a"].getFirstObs(this.getID(),"Confirmatory HIV test date");case 2:if(t=e.sent,!t||!t.value_datetime){e.next=5;break}return e.abrupt("return",t.value_datetime);case 5:if(!t||!t.value_text){e.next=7;break}return e.abrupt("return",t.value_text);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getARTStartDate",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j["a"].getFirstObs(this.getID(),"Date ART started");case 2:if(t=e.sent,!t||!t.value_datetime){e.next=5;break}return e.abrupt("return",t.value_datetime);case 5:if(!t||!t.value_text){e.next=7;break}return e.abrupt("return",t.value_text);case 7:return e.next=9,qe["a"].getAllDrugOrders(this.getID(),Number.MAX_SAFE_INTEGER);case 9:if(n=e.sent,Object(ne["isEmpty"])(n)){e.next=12;break}return e.abrupt("return",n[0].order["start_date"]);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getHIVTestLocation",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getFirstValueText(this.getID(),"Confirmatory HIV test location"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getStagingCondition",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",j["a"].getFirstValueCoded(this.getID(),"Who stages criteria present"));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),n}(h["a"]),Ye=n("6d32"),We=n("b515"),Je=n("3b8c"),Ke=n("66c5"),Xe=n("0690"),Qe=n("83af"),Ze=n("dac2"),$e=n("aee2"),et=n("5f2c"),tt=Object(r["defineComponent"])({components:{IonContent:V["n"],IonFooter:V["o"],IonHeader:V["q"],IonTitle:V["U"],IonToolbar:V["V"],IonButton:V["d"],IonItem:V["w"],IonLabel:V["x"],IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],IonCheckbox:V["k"],SelectInput:S["a"],NumberInput:P["a"],DateInput:A["a"],YesNoInput:Ee["a"],MultiColumnView:Fe["a"]},props:{patient:{type:Object,required:!0}},setup:function(e){var t=Object(r["computed"])((function(){return e.patient.getID()})),n=new We["a"](t.value,-1),a=new Je["a"](t.value,-1),c=new Ze["a"](t.value,-1),u=new et["a"](t.value,-1),i=new Ke["a"](t.value,-1),l=new Xe["a"](t.value,-1),s=new Qe["a"](t.value,-1),d=Object(r["ref"])(),b=Object(r["ref"])([]),m=Object(r["ref"])([]),p=Object(r["ref"])([]),f=Object(r["ref"])([]),v=Object(r["computed"])((function(){return!(d.value&&e.patient.getAge()>18)})),O=Object(r["computed"])((function(){return e.patient.isFemale()})),j=Object(r["reactive"])({visitDate:{value:C()().format("YYYY-MM-DD"),label:"Visit Date",required:!0,validation:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!C()(n.value).isAfter(C()())){t.next=2;break}return t.abrupt("return",["Visit date cannot be after today's date"]);case 2:if(!C()(n.value).isBefore(C()(e.patient.getBirthdate()))){t.next=4;break}return t.abrupt("return",["Visit date cannot be before patient's birth date"]);case 4:return t.abrupt("return",null);case 5:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()},weight:{value:void 0,label:"Weight",required:!0,computedValue:function(e){return{tag:"vitals",obs:n.buildValueNumber("Weight",e)}},validation:function(e){return n.validator(Object(oe["a"])(Object(oe["a"])({},e),{},{label:"Weight"}))}},height:{value:void 0,label:"Height",computedValue:function(e){return{tag:"vitals",obs:n.buildValueNumber("Height",e)}},validation:function(e){return v.value&&n.validator(Object(oe["a"])(Object(oe["a"])({},e),{},{label:"Height"}))}},isPregnant:{value:void 0,label:"Is the patient pregnant?",computedValue:function(e){return{tag:"consultation",obs:a.buildValueCoded("Is patient pregnant",e)}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",O.value&&ge["a"].required(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},isBreastfeeding:{value:void 0,label:"Is the patient breastfeeding?",computedValue:function(e){return{tag:"consultation",obs:a.buildValueCoded("Is patient breast feeding",e)}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",O.value&&ge["a"].required(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},nextAppointmentDate:{value:void 0,label:"Next Appointment Date",required:!0,computedValue:function(e){return{tag:"appointment",obs:s.buildValueDate("Appointment date",e)}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!C()(t.value).isBefore(C()(n.visitDate.value))){e.next=2;break}return e.abrupt("return",["Appointment date cannot be before visit date"]);case 2:if(r=parseInt(n.totalArvsGiven.value)||0,a=parseInt(n.pillCount.value)||0,!C()(t.value).isAfter(C()(n.visitDate.value).add(r+a,"days"))){e.next=6;break}return e.abrupt("return",["Appointment date cannot be after drug run out date"]);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},patientPresent:{value:void 0,label:"Is the patient present?",required:!0,computedValue:function(e){return{tag:"reception",obs:i.buildValueCoded("Patient present",e)}}},guardianPresent:{value:void 0,label:"Is the guardian present?",required:!0,computedValue:function(e){return{tag:"reception",obs:i.buildValueCoded("Guardian present",e)}}},pillCount:{value:void 0,label:"Pill Count",required:f.value.length>0,validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",f.value.length>0&&ge["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},regimen:{value:void 0,label:"Regimen",placeholder:"Select a regimen",computedValue:function(){return{tag:"consultation",obs:c.buildValueCoded("Medication orders","Antiretroviral drugs")}}},totalCPTGiven:{value:void 0,label:"Total CPT Given",computedValue:function(){return{tag:"consultation",obs:c.buildValueCoded("Medication orders","CPT")}}},totalIPTGiven:{value:void 0,label:"Total IPT Given",computedValue:function(){return{tag:"consultation",obs:c.buildValueCoded("Medication orders","INH")}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",("6H"===(null===(r=n.tbMed.value)||void 0===r?void 0:r.label)||"3HP (RFP + INH)"===(null===(a=n.tbMed.value)||void 0===a?void 0:a.label))&&ge["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},totalRFPGiven:{value:void 0,label:"Total RFP Given",computedValue:function(){return{tag:"consultation",obs:c.buildValueCoded("Medication orders","3HP (RFP + INH)")}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","3HP (RFP + INH)"===(null===(r=n.tbMed.value)||void 0===r?void 0:r.label)&&ge["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},total3HPGiven:{value:void 0,label:"Total 3HP Given",computedValue:function(){return{tag:"consultation",obs:c.buildValueCoded("Medication orders","INH 300 / RFP 300 (3HP)")}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","3HP (INH 300 / RFP 300)"===(null===(r=n.tbMed.value)||void 0===r?void 0:r.label)&&ge["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},totalArvsGiven:{value:void 0,label:"Total ARVs Given",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!Pe()(n.regimen.value)&&ge["a"].isNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},tbMed:{value:void 0,label:"TB Medication",placeholder:"Select a TB medication"},hasContraindications:{value:void 0,label:"Has Side Effects / Contraindications ?",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ge["a"].validateSeries([function(){return ge["a"].required(t)},function(){return"Yes"===t.value&&m.value.some((function(e){return e.isChecked}))?null:["Please select at least one side effect"]}]));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},hasSideEffects:{value:void 0,label:"Has Other Side Effects ?",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ge["a"].validateSeries([function(){return ge["a"].required(t)},function(){return"Yes"===t.value&&p.value.some((function(e){return e.isChecked}))?null:["Please select at least one side effect"]}]));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},tbStatus:{value:void 0,label:"TB Status",computedValue:function(e){return{tag:"consultation",obs:a.buildValueCoded("TB Status",e.value)}},validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",ge["a"].required(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}});Object(r["watch"])(j.patientPresent,(function(e){"No"===e.value&&(j.guardianPresent.value="Yes")})),Object(r["watch"])(j.guardianPresent,(function(e){"No"===e.value&&(j.patientPresent.value="Yes")})),Object(r["watch"])([j.weight,j.tbStatus],Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!j.weight.value){e.next=8;break}return t=!Pe()(j.tbStatus.value)&&!j.tbStatus.value.label.match(/TB Not Suspected/i),e.next=4,Ye["a"].getRegimensByWeight(j.weight.value,t);case 4:n=e.sent,Pe()(n)||(b.value=Object.keys(n).map((function(e){return{label:e,value:e,other:n[e]}}))),j.patientPresent.value="Yes",j.patientPresent.disabled=!0;case 8:case"end":return e.stop()}}),e)}))));var h=Object(r["computed"])((function(){var e;return"3HP (INH 300 / RFP 300)"===(null===(e=j.tbMed.value)||void 0===e?void 0:e.label)})),g=Object(r["computed"])((function(){var e;return"3HP (RFP + INH)"===(null===(e=j.tbMed.value)||void 0===e?void 0:e.label)})),x=Object(r["computed"])((function(){var e;return"6H"===(null===(e=j.tbMed.value)||void 0===e?void 0:e.label)})),V=Object(r["computed"])((function(){return"Yes"===j.hasContraindications.value})),w=Object(r["computed"])((function(){return"Yes"===j.hasSideEffects.value})),k=Object(E["d"])(["Confirmed TB Not on treatment","Confirmed TB on treatment","TB Not Suspected","TB Suspected"]),N=Object(E["d"])(["6H","3HP (RFP + INH)","3HP (INH 300 / RFP 300)"]),y=function(e){j.patientPresent.value=e,"No"===e&&(j.guardianPresent.value="Yes")},R=function(e){j.guardianPresent.value=e,"No"===e&&(j.patientPresent.value="Yes")},_=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.height||d.value,a=$e["a"].calculateBMI(t.weight,r),e.abrupt("return",n.buildValueNumber("BMI",a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.buildValueCoded("Patient using family planning","No");case 2:return e.t0=e.sent,t=[e.t0],n=a.getFamilyPlanningMethods(),n.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,a.buildValueCoded(n,"No");case 3:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(M["a"].getConceptsByCategory("tb_symptom",!0).map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",a.buildGroupValueCoded(t.name,t.name,"No"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(e,t,n,r){return{drug_inventory_id:e.drug_id,equivalent_daily_dose:c.calculateEquivalentDosage(e.am,e.pm),dose:c.calculateDosage(e.am,e.pm),start_date:r,auto_expire_date:C()(r).add(n,"days").format("YYYY-MM-DD"),units:e.units,qty:t,frequency:e.frequency,instructions:c.getInstructions(e.drug_name,e.am,e.pm,e.units)}},S=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,d,b,v,h,g,x,C,k,N,y,R,S,P,E,F,H;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["a"].show();case 2:return e.next=4,Object(G["a"])(j);case 4:if(e.sent){e.next=6;break}return e.abrupt("return",U["a"].hide());case 6:return e.next=8,ze.setSessionDate(j.visitDate.value);case 8:return n.setDate(j.visitDate.value),a.setDate(j.visitDate.value),c.setDate(j.visitDate.value),i.setDate(j.visitDate.value),l.setDate(j.visitDate.value),s.setDate(j.visitDate.value),u.setDate(j.visitDate.value),t=Object(G["c"])(j),r=t.formData,d=t.computedFormData,e.next=18,n.createEncounter();case 18:return e.next=20,Object(G["d"])(d,"vitals");case 20:return b=e.sent,e.next=23,_(r);case 23:return v=e.sent,e.next=26,n.saveObservationList([].concat(Object(Ae["a"])(b),[v]));case 26:return e.next=28,a.createEncounter();case 28:return e.next=30,Object(G["d"])(d,"consultation");case 30:if(h=e.sent,!O.value){e.next=37;break}return e.t0=h,e.next=35,I();case 35:e.t1=e.sent,e.t0.concat.call(e.t0,e.t1);case 37:if(!V.value){e.next=43;break}return e.t2=h,e.next=41,Object(G["b"])("Malawi ART side effects",m.value);case 41:e.t3=e.sent,e.t2.concat.call(e.t2,e.t3);case 43:if(!w.value){e.next=49;break}return e.t4=h,e.next=47,Object(G["b"])("Other side effect",p.value);case 47:e.t5=e.sent,e.t4.concat.call(e.t4,e.t5);case 49:return e.t6=h,e.next=52,D();case 52:return e.t7=e.sent,e.t6.concat.call(e.t6,e.t7),e.next=56,a.saveObservationList(h);case 56:return e.next=58,c.createEncounter();case 58:if(g=[],x=0,!Pe()(r.regimen)&&r.totalArvsGiven&&(C=r.regimen.other,x=Math.min.apply(Math,Object(Ae["a"])(C.map((function(e){return r.totalArvsGiven/(e.am+e.pm)+2})))),C.forEach((function(e){return g.push(A(e,r.totalArvsGiven,x,r.visitDate))}))),!r.totalCPTGiven){e.next=66;break}return e.next=64,Ye["a"].getRegimenExtras("Cotrimoxazole",r.weight);case 64:k=e.sent,k.forEach((function(e){"Cotrimoxazole (480mg tablet)"!==e.drug_name&&g.push(A(e,r.totalCPTGiven,x,r.visitDate))}));case 66:if(!r.totalIPTGiven){e.next=71;break}return e.next=69,Ye["a"].getRegimenExtras("INH",r.weight);case 69:N=e.sent,N.forEach((function(e){g.push(A(e,r.totalIPTGiven,x,r.visitDate))}));case 71:if(!r.totalRFPGiven){e.next=76;break}return e.next=74,Ye["a"].getRegimenExtras("Rifapentine",r.weight);case 74:y=e.sent,y.forEach((function(e){g.push(A(e,r.totalRFPGiven,x,r.visitDate))}));case 76:if(!r.total3HPGiven){e.next=81;break}return e.next=79,Ye["a"].getRegimenExtras("INH / RFP",r.weight);case 79:R=e.sent,R.forEach((function(e){g.push(A(e,r.total3HPGiven,x,r.visitDate))}));case 81:return e.next=83,c.createDrugOrder(g);case 83:return S=e.sent,P=S.map((function(e){var t=g.find((function(t){return t.drug_inventory_id===e.drug_inventory_id}));return u.buildDispensations(e.order_id,t.qty,1)})),e.next=87,u.saveDispensations(P.flat(1));case 87:return e.next=89,i.createEncounter();case 89:return e.next=91,Object(G["d"])(d,"reception");case 91:return E=e.sent,e.next=94,i.saveObservationList(E);case 94:if(!(f.value.length>0)){e.next=102;break}return e.next=97,l.createEncounter();case 97:return e.next=99,Promise.all(f.value.map(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=l.calculateExpected(t.quantity,t.equivalent_daily_dose,t.order.start_date,t.frequency),a=l.calculateAdherence(t.quantity,r.pillCount,n),e.next=4,l.buildAdherenceObs(t.order_id,t.drug_inventory_id,a);case 4:return e.t0=e.sent,e.next=7,l.buildPillCountObs(t.order_id,r.pillCount);case 7:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 99:return F=e.sent,e.next=102,l.saveObservationList(F.flat(1));case 102:return e.next=104,s.createEncounter();case 104:return e.next=106,Object(G["d"])(d,"appointment");case 106:return H=e.sent,e.next=109,s.saveObservationList(H);case 109:return e.next=111,Object(B["d"])("Patient visit saved successfully");case 111:return e.next=113,ze.resetSessionDate();case 113:return e.next=115,U["a"].hide();case 115:return e.next=117,z["a"].hide();case 117:q["b"].emit(T.RELOAD_PATIENT_VISIT_DATA);case 118:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(B["a"])("Are you sure you want to clear all fields?");case 2:if(t=e.sent,t)for(n in j)j[n].value="",j[n].error="",j[n].disabled=!1;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.patient.getRecentHeight();case 2:return d.value=t.sent,t.next=5,e.patient.getRecentWeight();case 5:if(n=t.sent,!n){t.next=11;break}return t.next=9,Ye["a"].getRegimensByWeight(n);case 9:r=t.sent,Pe()(r)||(b.value=Object.keys(r).map((function(e){return{label:e,value:e,other:r[e]}})));case 11:return t.next=13,qe["a"].getLastDrugsReceived(e.patient.getID());case 13:f.value=t.sent,j.pillCount.required=f.value.length>0,m.value=M["a"].getConceptsByCategory("contraindication",!0).map((function(e){return{value:e.concept_id,label:e.name,other:e}})),p.value=M["a"].getConceptsByCategory("side_effect",!0).map((function(e){return{value:e.concept_id,label:e.name,other:e}}));case 17:case"end":return t.stop()}}),t)})))),{form:j,regimens:b,contraIndications:m,sideEffects:p,tbStatuses:k,tbMeds:N,hasGiven3HP:h,hasGivenRFP:g,hasGiven6H:x,showHeightField:v,isFemale:O,modal:z["a"],hasContraindications:V,hasSideEffects:w,prevDrugs:f,onSubmit:S,setPatientPresent:y,setGuardianPresent:R,onClear:P}}});n("d7ea");const nt=J()(tt,[["render",Be],["__scopeId","data-v-5cd075fc"]]);var rt=nt,at=Object(r["defineComponent"])({props:{patient:{type:Object,required:!0},startDate:{type:String,required:!0}},components:{ReportTable:v["a"],IonCard:V["f"],IonCardHeader:V["h"],IonCardTitle:V["j"],IonCardContent:V["g"],IonButton:V["d"]},setup:function(e){var t=Object(r["ref"])(1e3),n=Object(r["computed"])((function(){return e.patient.getID()})),a=Object(r["reactive"])({showIndex:!1,tableCssTheme:"emc-datatable-theme"}),u=Object(r["ref"])([{label:"Add Visit",action:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",z["a"].show(rt,{patient:e.patient}));case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()},{label:"Update Outcome",action:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",z["a"].show(ye,{patientId:n.value}));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{label:"Enter VL Results",action:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",z["a"].show(X,{patient:e.patient}));case 1:case"end":return t.stop()}}),t)})));function n(){return t.apply(this,arguments)}return n}()}]),i=Object(r["ref"])([[f["a"].thTxt("Visit Date"),f["a"].thTxt("Given To"),f["a"].thTxt("Weight (Kg)"),f["a"].thTxt("Height (cm)"),f["a"].thTxt("BMI"),f["a"].thTxt("Preg"),f["a"].thTxt("B/F"),f["a"].thTxt("TB STATUS"),f["a"].thTxt("Side Effects"),f["a"].thTxt("ART Regimen"),f["a"].thTxt("Next Appointment"),f["a"].thTxt("Outcome"),f["a"].thTxt("Viral Load"),f["a"].thTxt("Void Visit")]]),l=function(t){var n="N/A"!==e.startDate?"("+C()(t).diff(e.startDate,"months")+"M)":"";return"".concat(c["b"].toStandardHisDisplayFormat(t)," ").concat(n)},s=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,n,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],n=r.length>1?r[1]:void 0,e.next=4,V["cb"].create({component:p["a"],cssClass:"custom-modal",componentProps:{title:"Drugs dispensed on ".concat(c["b"].toStandardHisDisplayFormat(n)),columns:["DRUG NAME","QUANTITY","UNITS"],onRows:function(){return t.map((function(e){return[e[0],e[1],"tab(s)"]}))}}});case 4:e.sent.present();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Object(x["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(c){var u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O["a"].getEncounters(n.value,{date:t});case 2:u=e.sent,u.forEach(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,O["a"].voidEncounter(t.encounter_id,c);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.splice(r,1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),"small-modal");case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),b=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r,a,o,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].getPatientVisits(n.value,!0);case 2:t=e.sent,r=[],a=Object(m["a"])(t),e.prev=5,u=regeneratorRuntime.mark((function e(){var t,a,u,i,b,m,p,v;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=o.value,e.next=3,g["a"].getCurrentProgramInformation(n.value,t);case 3:if(a=e.sent,u="",i="",b="",m="","Defaulted"===a.outcome){e.next=27;break}return e.next=11,j["a"].getFirstValueDatetime(n.value,"appointment date",t);case 11:return p=e.sent,p&&(u=c["b"].toStandardHisDisplayFormat(p)),e.next=15,j["a"].getFirstValueCoded(n.value,"Is patient pregnant",t);case 15:return i=e.sent,e.next=18,j["a"].getFirstValueCoded(n.value,"Is patient breast feeding",t);case 18:if(b=e.sent,"N/A"!==a["viral_load"]){e.next=26;break}return e.next=22,j["a"].getFirstObs(n.value,"HIV viral load",t);case 22:v=e.sent,v&&v.value_text&&v.value_numeric&&(m=1===v.value_numeric?"LDL":v.value_text+v.value_numeric.toString()),e.next=27;break;case 26:m=a["viral_load"];case 27:a&&r.push([f["a"].td(l(t)),f["a"].td(a["visit_by"].match(/Unk/i)?"":a["visit_by"]),f["a"].td("Defaulted"===a.outcome?"":a.weight),f["a"].td("Defaulted"===a.outcome?"":a.height),f["a"].td("Defaulted"===a.outcome?"":a.bmi),f["a"].td(i||""),f["a"].td(b||""),f["a"].td(a["tb_status"].match(/Unknown/i)||"Defaulted"===a.outcome?"":a["tb_status"]),f["a"].td(a["side_effects"].length?"Yes":"Defaulted"!==a.outcome?"No":""),f["a"].tdLink("Defaulted"===a.outcome?"":a.regimen,(function(){return s(a.pills_dispensed,t)})),f["a"].td(u||""),f["a"].td(a.outcome.match(/Unk/i)?"":a.outcome),f["a"].td(m),f["a"].tdBtn("X",(function(e,n){return d(t,e,n)}),{},"danger")]);case 28:case"end":return e.stop()}}),e)})),a.s();case 8:if((o=a.n()).done){e.next=12;break}return e.delegateYield(u(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e["catch"](5),a.e(e.t1);case 17:return e.prev=17,a.f(),e.finish(17);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(){return e.apply(this,arguments)}}();return q["b"].on(T.RELOAD_PATIENT_VISIT_DATA,(function(){return t.value++})),{refreshKey:t,actionButtons:u,tableConfig:a,columns:i,getPatientVisits:b}}});n("6a92");const ot=J()(at,[["render",b],["__scopeId","data-v-3b267c4c"]]);var ct=ot,ut=Object(r["withScopeId"])("data-v-6247a806");Object(r["pushScopeId"])("data-v-6247a806");var it={style:{width:"100%",display:"flex",justifyContent:"space-between"}},lt={key:0},st={key:1},dt={key:3};Object(r["popScopeId"])();var bt=ut((function(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-item"),i=Object(r["resolveComponent"])("ion-list"),l=Object(r["resolveComponent"])("multi-column-view");return Object(r["openBlock"])(),Object(r["createBlock"])(l,{items:e.patientInfo,numberOfColumns:3},{default:ut((function(e){var t=e.entries;return[Object(r["createVNode"])(i,{class:"his-card ion-margin-end"},{default:ut((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(t,(function(e,n){return Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:n,lines:n===t.length-1?"none":""},{default:ut((function(){return[Object(r["createVNode"])("div",it,[e.label?(Object(r["openBlock"])(),Object(r["createBlock"])("span",lt,Object(r["toDisplayString"])(e.label)+": ",1)):(Object(r["openBlock"])(),Object(r["createBlock"])("span",st)),e.other&&"function"===typeof e.other.onClickHandler?(Object(r["openBlock"])(),Object(r["createBlock"])("span",{key:2,onClick:e.other.onClickHandler},[Object(r["createVNode"])("a",null,[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.value||"N/A"),1)])],8,["onClick"])):(Object(r["openBlock"])(),Object(r["createBlock"])("span",dt,[Object(r["createVNode"])("b",null,Object(r["toDisplayString"])(e.value||"N/A"),1)]))])]})),_:2},1032,["lines"])})),128))]})),_:2},1024)]})),_:1},8,["items"])})),mt=n("afbc"),pt=Object(r["defineComponent"])({components:{MultiColumnView:Fe["a"]},props:{patient:{type:Object,required:!0},artStartDate:{type:String,required:!0},guardians:{type:String,default:""}},emits:["updatePatient","updateARVNumber","addGuardian"],setup:function(e,t){var n=t.emit,a=Object(r["ref"])(0),u=Object(r["ref"])(0),i=Object(r["ref"])(0),l=Object(r["ref"])(""),s=Object(r["ref"])(""),d=Object(r["ref"])(""),b=Object(r["ref"])(""),m=Object(r["ref"])(""),p=Object(r["ref"])(""),f=Object(r["ref"])(""),v=Object(r["ref"])(""),O=Object(r["ref"])(""),j=function(){var t=e.patient.getBirthdate(),n="N/A"!==e.artStartDate?C()(e.artStartDate).diff(t,"years"):"";return"".concat(c["b"].toStandardHisDisplayFormat(t)," (").concat(n,")")},h=Object(r["computed"])((function(){return[{label:"ARV Number",value:e.patient.getArvNumber(),other:{onClickHandler:function(){n("updateARVNumber")}}},{label:"National Patient ID",value:e.patient.getNationalID()},{label:"Given Name",value:e.patient.getGivenName(),other:{onClickHandler:function(){n("updatePatient","given_name")}}},{label:"Family Name",value:e.patient.getFamilyName(),other:{onClickHandler:function(){n("updatePatient","given_name")}}},{label:"DOB and Age at Initiation",value:j(),other:{onClickHandler:function(){n("updatePatient","birthdate")}}},{label:"Sex",value:e.patient.getGender(),other:{onClickHandler:function(){n("updatePatient","gender")}}},{label:"Location",value:e.patient.getCurrentVillage(),other:{onClickHandler:function(){n("updatePatient","home_village")}}},{label:"Landmark",value:e.patient.getClosestLandmark(),other:{onClickHandler:function(){n("updatePatient","landmarks")}}},{label:"Phone Number",value:e.patient.getPhoneNumber(),other:{onClickHandler:function(){n("updatePatient","phone_number")}}},{label:"Guardian",value:e.guardians?e.guardians:"add",other:Object(oe["a"])({},Object(ne["isEmpty"])(e.guardians)?{onClickHandler:function(){n("addGuardian")}}:{})},{label:"Date of starting first line ARV Regimen",value:e.artStartDate},{label:"Initial Weight (KG)",value:a.value},{label:"Initial Height (CM)",value:u.value},{label:"BMI",value:i.value},{label:"Initial TB Status",value:l.value},{label:"Pregnant at Initiation",value:d.value},{label:"Breastfeeding at Initiation",value:s.value},{label:"TI",value:b.value},{label:"Agrees to follow up",value:m.value},{label:"Reason for starting ART",value:p.value},{label:"HIV test date",value:f.value},{label:"HIV test place",value:v.value},{label:"Staging codition",value:O.value},{label:"",value:"Edit Clinic Registration/Staging conditions details",other:{onClickHandler:function(){return mt["a"].push("/emc/registration/".concat(e.patient.getID(),"/false"))}}}]})),g=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.patient.getHIVTestDate();case 2:n=t.sent,n&&(f.value=c["b"].toStandardHisDisplayFormat(n));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.patient.getInitialWeight();case 2:return a.value=t.sent,t.next=5,e.patient.getInitialHeight();case 5:return u.value=t.sent,t.next=8,e.patient.getInitialBMI();case 8:return i.value=t.sent,t.next=11,e.patient.getInitialTBStatus();case 11:return l.value=t.sent,t.next=14,e.patient.hasPregnancyAtARTInitiation();case 14:return d.value=t.sent,t.next=17,e.patient.breastFeedingAtARTInitiation();case 17:return s.value=t.sent,t.next=20,e.patient.everReceivedART();case 20:return b.value=t.sent,t.next=23,e.patient.agreesToFollowUp();case 23:return m.value=t.sent,t.next=26,e.patient.getReasonForStartingART();case 26:return p.value=t.sent,t.next=29,e.patient.getHIVTestLocation();case 29:return v.value=t.sent,t.next=32,e.patient.getStagingCondition();case 32:return O.value=t.sent,t.next=35,g();case 35:case"end":return t.stop()}}),t)})))),{patientInfo:h}}});n("06ae");const ft=J()(pt,[["render",bt],["__scopeId","data-v-6247a806"]]);var vt=ft,Ot=Object(r["createTextVNode"])("Edit Patient Demographics"),jt=Object(r["createTextVNode"])("Close"),ht=Object(r["createTextVNode"])("Save");function gt(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-title"),i=Object(r["resolveComponent"])("ion-icon"),l=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-buttons"),d=Object(r["resolveComponent"])("ion-toolbar"),b=Object(r["resolveComponent"])("ion-header"),m=Object(r["resolveComponent"])("TextInput"),p=Object(r["resolveComponent"])("ion-col"),f=Object(r["resolveComponent"])("DateInput"),v=Object(r["resolveComponent"])("SelectInput"),O=Object(r["resolveComponent"])("ion-row"),j=Object(r["resolveComponent"])("ion-grid"),h=Object(r["resolveComponent"])("ion-content"),g=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Ot]})),_:1}),Object(r["createVNode"])(s,{slot:"end"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onClick:e.closeModal},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{slot:"icon-only",name:"close"})]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(h,{class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(O,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{size:"4",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.patient.givenName,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.patient.givenName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(p,{size:"4",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.patient.middleName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.patient.middleName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(p,{size:"4",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.patient.familyName,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.patient.familyName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(p,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,{modelValue:e.patient.birthdate,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.patient.birthdate=t}),allowEstimation:!0,estimationLabel:"Estimate Age",minDate:"1900-01-01",onIsEstimated:t[5]||(t[5]=function(t){return e.isBirthdateEstimated=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(p,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{modelValue:e.patient.gender,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.patient.gender=t}),options:e.genderOptions},null,8,["modelValue","options"])]})),_:1}),Object(r["createVNode"])(p,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.patient.cellPhoneNumber,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.patient.cellPhoneNumber=t}),allowUnknown:""},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(p,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{modelValue:e.patient.homeVillage,"onUpdate:modelValue":t[8]||(t[8]=function(t){return e.patient.homeVillage=t}),asyncOptions:e.getVillagesByName,allowCustom:"",searchable:""},null,8,["modelValue","asyncOptions"])]})),_:1}),Object(r["createVNode"])(p,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{modelValue:e.patient.landmark,"onUpdate:modelValue":t[9]||(t[9]=function(t){return e.patient.landmark=t}),asyncOptions:e.getLandmarks,allowCustom:"",searchable:""},null,8,["modelValue","asyncOptions"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{color:"primary",onClick:e.closeModal,slot:"end"},{default:Object(r["withCtx"])((function(){return[jt]})),_:1},8,["onClick"]),Object(r["createVNode"])(l,{class:"ion-margin-end",color:"success",onClick:e.onFinish,slot:"end"},{default:Object(r["withCtx"])((function(){return[ht]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var xt=n("5713"),Vt=n("1f9a"),wt=n("0db2"),Ct=Object(r["defineComponent"])({components:{IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],TextInput:wt["a"],DateInput:A["a"],SelectInput:S["a"]},props:{patientService:{type:Object,required:!0}},setup:function(e){var t=Object(r["ref"])(!1),n=Object(r["reactive"])({givenName:{label:"First Name",value:e.patientService.getGivenName(),placeholder:"First Name",required:!0,error:""},familyName:{label:"last Name",value:e.patientService.getFamilyName(),placeholder:"Last Name",required:!0},middleName:{label:"middle Name",value:e.patientService.getMiddleName(),placeholder:"middle Name"},gender:{value:e.patientService.getGender(),required:!0,label:"Gender",placeholder:"select gender"},birthdate:{value:e.patientService.getBirthdate(),label:"Date of Birth",placeholder:"Date of Birth",required:!0},cellPhoneNumber:{value:e.patientService.getPhoneNumber(),required:!0,label:"Cellphone Number",placeholder:"cellphone number e.g. 0991234567",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",!("Unknown"===t.value||"N/A"===t.value)&&ge["a"].isMWPhoneNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},homeVillage:{value:e.patientService.getCurrentVillage(),label:"Home Village",placeholder:"Home Village",required:!0},landmark:{value:e.patientService.getClosestLandmark(),label:"Landmark",placeholder:"Closest Landmark or Plot Number",required:!0}}),a=function(e){V["cb"].dismiss(e)},c=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={current_district:"N/A",current_traditional_authority:"N/A",current_village:t.label},e.next=3,xt["a"].getTraditionalAuthorityById(t.other.traditional_authority_id);case 3:if(r=e.sent,!(r.length>0)){e.next=10;break}return n["current_traditional_authority"]=r[0].name,e.next=8,xt["a"].getDistrictByID(r[0].district_id);case 8:a=e.sent,Object(ne["isEmpty"])(a)||(n["current_district"]=a[0].name);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var r,o,u,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,U["a"].show("Updating patient...");case 2:return t.next=4,Object(G["a"])(n);case 4:if(t.sent){t.next=6;break}return t.abrupt("return",U["a"].hide());case 6:if(t.prev=6,r=Object(G["c"])(n),o=r.formData,u={},o.givenName!==e.patientService.getGivenName()&&(u["given_name"]=o.givenName),o.familyName!==e.patientService.getFamilyName()&&(u["family_name"]=o.familyName),o.middleName!==e.patientService.getMiddleName()&&(u["middle_name"]=o.middleName),o.birthdate!==e.patientService.getBirthdate()&&(u["birthdate"]=o.birthdate),o.cellPhoneNumber!==e.patientService.getPhoneNumber()&&(u["cell_phone_number"]=o.cellPhoneNumber),o.landmark.label!==e.patientService.getClosestLandmark()&&(u["landmark"]=o.landmark.label),o.homeVillage===e.patientService.getCurrentVillage()){t.next=25;break}return t.t0=Object,t.t1=u,t.t2=oe["a"],t.t3=Object(oe["a"])({},u),t.next=22,c(o.homeVillage);case 22:t.t4=t.sent,t.t5=(0,t.t2)(t.t3,t.t4),t.t0.assign.call(t.t0,t.t1,t.t5);case 25:if(Object(ne["isEmpty"])(u)){t.next=30;break}return i=new Vt["a"],i.setPersonID(e.patientService.getID()),t.next=30,i.updatePerson(u);case 30:return t.next=32,U["a"].hide();case 32:a(),q["b"].emit(T.RELOAD_PATIENT_DATA),t.next=41;break;case 36:return t.prev=36,t.t6=t["catch"](6),t.next=40,U["a"].hide();case 40:console.log(t.t6);case 41:case"end":return t.stop()}}),t,null,[[6,36]])})));return function(){return t.apply(this,arguments)}}();return{patient:n,getLandmarks:xe["e"],genderOptions:E["b"],isBirthdateEstimated:t,closeModal:a,onFinish:u,getVillagesByName:xe["j"]}}});const kt=J()(Ct,[["render",gt]]);var Nt=kt,yt=Object(r["createTextVNode"])("Add Guadian Demographics"),Rt=Object(r["createTextVNode"])("Close"),_t=Object(r["createTextVNode"])("Save");function It(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-title"),i=Object(r["resolveComponent"])("ion-icon"),l=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-buttons"),d=Object(r["resolveComponent"])("ion-toolbar"),b=Object(r["resolveComponent"])("ion-header"),m=Object(r["resolveComponent"])("TextInput"),p=Object(r["resolveComponent"])("ion-col"),f=Object(r["resolveComponent"])("ion-row"),v=Object(r["resolveComponent"])("ion-grid"),O=Object(r["resolveComponent"])("ion-content"),j=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[yt]})),_:1}),Object(r["createVNode"])(s,{slot:"end"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onClick:e.closeModal},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{slot:"icon-only",name:"close"})]})),_:1},8,["onClick"])]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(O,{class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.guardian.givenName,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.guardian.givenName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(p,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.guardian.familyName,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.guardian.familyName=t})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(p,{size:"12",class:"ion-margin-top ion-margin-bottom"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.guardian.cellPhoneNumber,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.guardian.cellPhoneNumber=t}),allowUnknown:""},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(j,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{color:"primary",onClick:e.closeModal,slot:"end"},{default:Object(r["withCtx"])((function(){return[Rt]})),_:1},8,["onClick"]),Object(r["createVNode"])(l,{class:"ion-margin-end",color:"success",onClick:e.onFinish,slot:"end"},{default:Object(r["withCtx"])((function(){return[_t]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}var Dt=n("0011"),Tt=n("2cef"),Bt=Object(r["defineComponent"])({components:{IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],TextInput:wt["a"]},props:{patientId:{type:Number,required:!0}},setup:function(e){var t=Object(r["reactive"])({givenName:{label:"First Name",value:"",placeholder:"First Name",required:!0},familyName:{label:"Last Name",value:"",placeholder:"Last Name",required:!0},cellPhoneNumber:{value:"",required:!0,label:"Cellphone Number",validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return","Unknown"!==t.value&&ge["a"].isMWPhoneNumber(t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}}),n=function(e){V["cb"].dismiss(e)},a=function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(){var a,o,c,u,i,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,U["a"].show("Processing...");case 2:return r.next=4,Object(G["a"])(t);case 4:if(r.sent){r.next=6;break}return r.abrupt("return");case 6:for(u in r.prev=6,a=Object(G["c"])(t),o=a.formData,c={home_district:"N/A",home_traditional_authority:"N/A",home_village:"N/A",current_district:"N/A",current_traditional_authority:"N/A",current_village:"N/A",middle_name:"",gender:"N/A",birthdate:"N/A",birthdate_estimated:"N/A",landmark:"N/A",relationship:"N/A",patient_type:"",isPatient:!1,patient_id:e.patientId},o)c[Object(Dt["e"])(u)]=o[u];return i=new Vt["a"],r.next=13,i.registerGuardian(c);case 13:return l=i.getPersonID(),r.next=16,Tt["a"].createRelation(e.patientId,l,13);case 16:return r.next=18,U["a"].hide();case 18:n(),q["b"].emit(T.RELOAD_GUARDIAN_DATA),r.next=27;break;case 22:return r.prev=22,r.t0=r["catch"](6),r.next=26,U["a"].hide();case 26:console.log(r.t0);case 27:case"end":return r.stop()}}),r,null,[[6,22]])})));return function(){return r.apply(this,arguments)}}();return{guardian:t,closeModal:n,onFinish:a}}});const At=J()(Bt,[["render",It]]);var St=At,Pt=Object(r["createTextVNode"])("ARV NUMBER"),Et=Object(r["createTextVNode"])("Close"),Ft=Object(r["createTextVNode"])("Void ARV Number"),Ht=Object(r["createTextVNode"])("Save");function Ut(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-title"),i=Object(r["resolveComponent"])("ion-icon"),l=Object(r["resolveComponent"])("ion-button"),s=Object(r["resolveComponent"])("ion-buttons"),d=Object(r["resolveComponent"])("ion-toolbar"),b=Object(r["resolveComponent"])("ion-header"),m=Object(r["resolveComponent"])("text-input"),p=Object(r["resolveComponent"])("ion-col"),f=Object(r["resolveComponent"])("ion-row"),v=Object(r["resolveComponent"])("ion-grid"),O=Object(r["resolveComponent"])("ion-content"),j=Object(r["resolveComponent"])("ion-footer");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(b,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Pt]})),_:1}),Object(r["createVNode"])(s,{slot:"end"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{onClick:t[1]||(t[1]=function(t){return e.modal.hide()})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{slot:"icon-only",name:"close"})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(O,{class:"ion-padding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{modelValue:e.form.arvNumber,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.arvNumber=t}),form:e.form,prefix:"".concat(e.sitePrefix,"-ARV-")},null,8,["modelValue","form","prefix"])]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(j,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,{color:"primary",onClick:t[3]||(t[3]=function(t){return e.modal.hide()}),slot:"end"},{default:Object(r["withCtx"])((function(){return[Et]})),_:1}),e.hasValidARVNumber?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:0,color:"danger",onClick:e.voidARV,slot:"end"},{default:Object(r["withCtx"])((function(){return[Ft]})),_:1},8,["onClick"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(l,{class:"ion-margin-end",color:"success",onClick:e.onFinish,slot:"end"},{default:Object(r["withCtx"])((function(){return[Ht]})),_:1},8,["onClick"])]})),_:1})]})),_:1})],64)}n("1276"),n("5319");var Gt=n("cc74"),Lt=Object(r["defineComponent"])({components:{IonGrid:V["p"],IonRow:V["J"],IonCol:V["m"],TextInput:wt["a"]},props:{patient:{type:Object,required:!0}},setup:function(e){var t=Object(r["ref"])(""),n=Object(r["computed"])((function(){return e.patient.getArvNumber()})),a=Object(r["computed"])((function(){return!Object(ne["isEmpty"])(n.value)&&"Unknown"!==n.value})),c=Object(r["reactive"])({arvNumber:{value:a.value?n.value.split("-")[2]:"",label:"".concat(a.value?"Edit":"Add New"," ARV Number"),placeholder:"Enter ARV Number",required:!0,validation:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.value!==n.value.split("-")[2]){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,h["a"].findByOtherID(4,"".concat(t.value,"-ARV-").concat(r.value));case 4:return a=e.sent,e.abrupt("return",Object(ne["isEmpty"])(a)?null:["ARV Number already exists"]);case 6:case"end":return e.stop()}}),e)})));function r(t){return e.apply(this,arguments)}return r}()}}),u=function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(){var o,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,U["a"].show("Updating patient...");case 2:return r.next=4,Object(G["a"])(c);case 4:if(r.sent){r.next=6;break}return r.abrupt("return",U["a"].hide());case 6:if(r.prev=6,o=Object(G["c"])(c),u=o.formData,u.arvNumber===n.value.split("-")[2]){r.next=16;break}if(!a.value){r.next=14;break}return r.next=12,e.patient.updateARVNumber("".concat(t.value,"-ARV-").concat(u.arvNumber));case 12:r.next=16;break;case 14:return r.next=16,e.patient.createArvNumber("".concat(t.value,"-ARV-").concat(u.arvNumber));case 16:return r.next=18,U["a"].hide();case 18:return r.next=20,z["a"].hide();case 20:q["b"].emit(T.RELOAD_PATIENT_DATA),r.next=28;break;case 23:return r.prev=23,r.t0=r["catch"](6),r.next=27,U["a"].hide();case 27:console.log(r.t0);case 28:case"end":return r.stop()}}),r,null,[[6,23]])})));return function(){return r.apply(this,arguments)}}(),i=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(B["a"])("Are you sure you want to void this ARV Number ".concat(n.value,"?"));case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,U["a"].show("Voiding ARV Number...");case 7:return e.prev=7,e.next=10,g["a"].voidARVNumber(n.value);case 10:return e.next=12,U["a"].hide();case 12:return e.next=14,z["a"].hide();case 14:q["b"].emit(T.RELOAD_PATIENT_DATA),e.next=22;break;case 17:return e.prev=17,e.t0=e["catch"](7),e.next=21,U["a"].hide();case 21:console.log(e.t0);case 22:case"end":return e.stop()}}),e,null,[[7,17]])})));return function(){return e.apply(this,arguments)}}();return Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Gt["b"].sitePrefix();case 2:if(t.value=e.sent,a.value){e.next=8;break}return e.next=6,g["a"].getNextSuggestedARVNumber();case 6:n=e.sent,c.arvNumber.value=n.arv_number.replace(/^\D+|\s/g,"");case 8:case"end":return e.stop()}}),e)})))),{form:c,modal:z["a"],sitePrefix:t,arvNumber:n,hasValidARVNumber:a,onFinish:u,voidARV:i}}});const Mt=J()(Lt,[["render",Ut]]);var qt=Mt,zt=n("6c02"),Yt=Object(r["defineComponent"])({components:{Layout:i["a"],VisitsSummary:ct,InformationHeader:vt},setup:function(){var e=Object(zt["e"])(),t=parseInt(e.params.patientId.toString())||0,n=Object(r["ref"])(),a=Object(r["ref"])(""),i=Object(r["ref"])(""),l=Object(r["computed"])((function(){return!Object(ne["isEmpty"])(n.value)})),s=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,ze.findByID(t);case 3:r=e.sent,r&&(n.value=new ze(r));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["a"].getGuardianDetails(t);case 2:n=e.sent,i.value=n.map((function(e){return" ".concat(e.name," (").concat(e.relationshipType,")")})).join(", ");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z["a"].show(Nt,{patientService:n.value,attribute:t});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z["a"].show(St,{patientId:t});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,z["a"].show(qt,{patient:n.value});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return q["b"].on(T.RELOAD_PATIENT_DATA,Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:case"end":return e.stop()}}),e)})))),q["b"].on(T.RELOAD_GUARDIAN_DATA,Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d();case 2:case"end":return e.stop()}}),e)})))),Object(r["onMounted"])(Object(o["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,U["a"].show();case 2:return e.next=4,s();case 4:return e.next=6,U["a"].hide();case 6:return e.next=8,null===(t=n.value)||void 0===t?void 0:t.getARTStartDate();case 8:return r=e.sent,a.value=r?c["b"].toStandardHisDisplayFormat(r):"N/A",e.next=12,d();case 12:case"end":return e.stop()}}),e)})))),{patient:n,artStartDate:a,guardians:i,isReady:l,updateDemographics:b,addGuardian:m,updateARVNumber:p}}});const Wt=J()(Yt,[["render",a]]);t["default"]=Wt},a2bf:function(e,t,n){"use strict";var r=n("e8b5"),a=n("50c4"),o=n("0366"),c=function(e,t,n,u,i,l,s,d){var b,m=i,p=0,f=!!s&&o(s,d,3);while(p<u){if(p in n){if(b=f?f(n[p],p,t):n[p],l>0&&r(b))m=c(e,t,b,a(b.length),m,l-1)-1;else{if(m>=9007199254740991)throw TypeError("Exceed the acceptable array length");e[m]=b}m++}p++}return m};e.exports=c},aff5:function(e,t,n){var r=n("23e7");r({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},b219:function(e,t,n){},be95:function(e,t,n){"use strict";n("4de4"),n("d3b7");var r=n("7a23"),a=Object(r["withScopeId"])("data-v-a4e46708");Object(r["pushScopeId"])("data-v-a4e46708");var o={key:0,class:"ion-float-right ion-margin-end checkbox-label"},c={class:"inner-input-box"},u={key:0,class:"input-options"},i={class:"input-icon"};Object(r["popScopeId"])();var l=a((function(e,t,n,l,s,d){var b=Object(r["resolveComponent"])("ion-checkbox"),m=Object(r["resolveComponent"])("ion-label"),p=Object(r["resolveComponent"])("ion-input"),f=Object(r["resolveComponent"])("ion-icon"),v=Object(r["resolveComponent"])("ion-chip"),O=Object(r["resolveComponent"])("ion-item"),j=Object(r["resolveComponent"])("ion-list"),h=Object(r["resolveComponent"])("ion-note");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[e.model.label?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,class:"ion-padding-bottom bold"},{default:a((function(){return[Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(e.model.label),1),e.allowCustom?(Object(r["openBlock"])(),Object(r["createBlock"])("span",o,[Object(r["createTextVNode"])(" Add Custom "+Object(r["toDisplayString"])(e.model.label)+"? ",1),Object(r["createVNode"])(b,{modelValue:e.isCustom,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.isCustom=t}),onIonChange:t[2]||(t[2]=function(t){return e.model.value=""})},null,8,["modelValue"])])):Object(r["createCommentVNode"])("",!0)]})),_:1})):Object(r["createCommentVNode"])("",!0),e.isCustom?(Object(r["openBlock"])(),Object(r["createBlock"])(p,{key:1,class:["box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}],modelValue:e.customOption,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.customOption=t}),placeholder:e.model.placeholder||e.model.label,disabled:e.model.disabled,onIonFocus:t[4]||(t[4]=function(){return e.model.error=""}),onIonBlur:e.validate,onIonInput:e.onCustomValue},null,8,["class","modelValue","placeholder","disabled","onIonBlur","onIonInput"])):(Object(r["openBlock"])(),Object(r["createBlock"])("div",{key:2,class:["outer-input-box box-input",{"box-input-error":e.model.error,"ion-margin-top":e.model.label}]},[Object(r["createVNode"])("div",c,[Object(r["createVNode"])("div",{style:{display:"flex","flex-wrap":"wrap"},onClick:t[6]||(t[6]=function(){return e.onShowOptions.apply(e,arguments)})},[e.showPlaceholder?(Object(r["openBlock"])(),Object(r["createBlock"])(m,{key:0,class:"input-placeholder",contenteditable:""},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.model.placeholder||"select option"),1)]})),_:1})):Object(r["createCommentVNode"])("",!0),(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.tags,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(v,{key:n},{default:a((function(){return[Object(r["createVNode"])(m,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024),Object(r["createVNode"])(f,{icon:e.closeCircle,color:"danger",onClick:function(n){return e.diselect(t)},style:{"z-index":"90"}},null,8,["icon","onClick"])]})),_:2},1024)})),128)),Object(r["createVNode"])(p,{disabled:!e.searchable||e.model.disabled,modelValue:e.filter,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.filter=t}),class:"search-input",ref:"searchInput"},null,8,["disabled","modelValue"])]),e.showOptions?(Object(r["openBlock"])(),Object(r["createBlock"])("div",u,[Object(r["createVNode"])(j,null,{default:a((function(){return[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(e.filteredOptions,(function(t,n){return Object(r["openBlock"])(),Object(r["createBlock"])(O,{key:n,lines:n+1===e.filteredOptions.length?"none":"",onClick:function(n){return e.onSelect(t)}},{default:a((function(){return[e.multiple?(Object(r["openBlock"])(),Object(r["createBlock"])(b,{key:0,class:"input-option-checkbox",slot:"start",modelValue:t.isChecked,"onUpdate:modelValue":function(e){return t.isChecked=e}},null,8,["modelValue","onUpdate:modelValue"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(m,null,{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.label),1)]})),_:2},1024)]})),_:2},1032,["lines","onClick"])})),128))]})),_:1})])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])("div",i,[e.filter||e.tags.length>0?(Object(r["openBlock"])(),Object(r["createBlock"])(f,{key:0,icon:e.close,onClick:e.onReset},null,8,["icon","onClick"])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(f,{icon:e.showOptions?e.chevronUp:e.chevronDown,onClick:t[7]||(t[7]=function(t){return e.showOptions?e.onCloseOptions():e.onShowOptions()})},null,8,["icon"])])])],2)),e.model.error?(Object(r["openBlock"])(),Object(r["createBlock"])(h,{key:3,color:"danger"},{default:a((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.model.error),1)]})),_:1})):Object(r["createCommentVNode"])("",!0)],64)})),s=n("2909"),d=n("1da1"),b=n("5530"),m=(n("96cf"),n("159b"),n("c740"),n("7db0"),n("caad"),n("2532"),n("99af"),n("25f0"),n("8a30")),p=n("ff79"),f=n("2ef0"),v=Object(r["defineComponent"])({name:"SelectInput",props:{modelValue:{type:Object,default:function(){return{}}},form:{type:Object,default:function(){return{}}},options:{type:Array,default:function(){return[]}},asyncOptions:{type:Function,required:!1},allowCustom:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},infiniteScrolling:{type:Boolean,default:!1}},components:{IonLabel:m["x"],IonInput:m["v"],IonNote:m["E"],IonIcon:m["r"],IonCheckbox:m["k"]},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,a=Object(r["ref"])(!1),o=Object(r["ref"])(""),c=Object(r["ref"])(),u=Object(r["ref"])(!1),i=Object(r["ref"])(""),l=Object(r["ref"])([]),m=Object(r["ref"])(1),v=Object(r["computed"])((function(){return e.multiple?l.value.filter((function(e){var t=e.isChecked;return t})):c.value?[c.value]:[]})),O=Object(r["computed"])((function(){return!i.value&&Object(f["isEmpty"])(v.value)&&!u.value})),j=Object(r["computed"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),h=function(){if(!Object(f["isEmpty"])(j.value.value)){if(Array.isArray(j.value.value)&&e.multiple)return j.value.value.forEach((function(e){var t=l.value.findIndex((function(t){var n=t.value;return n===e.value}));-1===t?l.value.push(Object(b["a"])(Object(b["a"])({},e),{},{isChecked:!0})):l.value[t].isChecked=!0}));var t=l.value.find((function(e){return e.value===j.value.value}));c.value=t||{label:j.value.value,value:j.value.value}}},g=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("function"!==typeof e.asyncOptions){t.next=6;break}return t.next=3,e.asyncOptions(i.value,m.value);case 3:t.t0=t.sent,t.next=7;break;case 6:t.t0=e.options.filter((function(e){var t=e.label;return t.toLowerCase().includes(i.value.toLowerCase())}));case 7:n=t.t0,v.value.forEach((function(e){var t=n.findIndex((function(t){return t.value===e.value}));-1===t?n.push(e):n[t].isChecked=!0})),l.value=n;case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.infiniteScrolling||"function"!==typeof e.asyncOptions){t.next=6;break}return m.value++,t.next=4,e.asyncOptions(i.value,m.value);case 4:r=t.sent,r.length>0?l.value=[].concat(Object(s["a"])(l.value),Object(s["a"])(r.filter((function(e){return!l.value.find((function(t){return t.value===e.value}))})))):n.target.disabled=!0;case 6:n.target.complete();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!j.value.required||!Object(f["isEmpty"])(j.value.value)){t.next=2;break}return t.abrupt("return",j.value.error="This field is required");case 2:if(!j.value.validation){t.next=8;break}return t.next=5,j.value.validation({label:j.value.value,value:j.value.value},e.form);case 5:if(n=t.sent,!n||!n.length){t.next=8;break}return t.abrupt("return",j.value.error+=n.toString());case 8:return t.abrupt("return",j.value.error="");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),w=function(){u.value=!1,j.value.value=e.multiple?v.value:Object(f["isEmpty"])(v.value)?void 0:v.value[0],i.value="",V()},C=function(){j.value.disabled||(u.value=!0,j.value.error="")},k=function(){j.value.value={label:o.value,value:o.value}},N=function(t){e.multiple||(c.value=t,w()),j.value.value=e.multiple?v.value:Object(f["isEmpty"])(v.value)?void 0:v.value[0],i.value=""},y=function(t){return e.multiple?t.isChecked=!1:c.value=void 0},R=function(){i.value="",c.value=void 0,l.value.forEach((function(e){return e.isChecked=!1}))};return Object(r["watch"])(i,Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return m.value++,e.next=3,g();case 3:case"end":return e.stop()}}),e)})))),Object(r["watch"])([function(){return e.options},function(){return e.asyncOptions}],Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",g());case 1:case"end":return e.stop()}}),e)})))),Object(r["onMounted"])(Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:h(),addEventListener("click",(function(e){var t=e.target.closest(".inner-input-box");!t&&u.value&&w()}));case 4:case"end":return e.stop()}}),e)})))),Object(r["onBeforeUnmount"])((function(){return removeEventListener("click",(function(e){return console.log(e)}))})),{validate:V,onSelect:N,onReset:R,onShowOptions:C,onCloseOptions:w,diselect:y,pushMoreOptions:x,onCustomValue:k,model:j,customOption:o,isCustom:a,chevronDown:p["s"],chevronUp:p["u"],close:p["x"],closeCircle:p["y"],selectedOption:c,showOptions:u,showPlaceholder:O,filteredOptions:l,filter:i,tags:v}}}),O=(n("4a61"),n("6b0d")),j=n.n(O);const h=j()(v,[["render",l],["__scopeId","data-v-a4e46708"]]);t["a"]=h},d7ea:function(e,t,n){"use strict";n("b219")},da44:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n("1da1"),a=(n("96cf"),n("8a30")),o={show:function(e,t){var n=arguments;return Object(r["a"])(regeneratorRuntime.mark((function r(){var o,c,u,i,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o=n.length>2&&void 0!==n[2]?n[2]:"custom-modal",c=!(n.length>3&&void 0!==n[3])||n[3],r.next=4,a["cb"].create({component:e,cssClass:o,backdropDismiss:c,componentProps:t});case 4:return u=r.sent,u.present(),r.next=8,u.onWillDismiss();case 8:if(i=r.sent,l=i.data,!l){r.next=12;break}return r.abrupt("return",l);case 12:case"end":return r.stop()}}),r)})))()},hide:function(){return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a["cb"].dismiss();case 2:case"end":return e.stop()}}),e)})))()}}},f27f:function(e,t,n){"use strict";var r=n("7a23");function a(e,t,n,a,o,c){var u=Object(r["resolveComponent"])("ion-label"),i=Object(r["resolveComponent"])("ion-input"),l=Object(r["resolveComponent"])("ion-note");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[e.model.label?(Object(r["openBlock"])(),Object(r["createBlock"])(u,{key:0,class:" ion-padding-bottom bold"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.model.label),1)]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(i,{type:"number",class:["ion-margin-top",e.model.error?"box-input-error":"box-input"],modelValue:e.model.value,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.model.value=t}),placeholder:e.model.placeholder,disabled:e.model.disabled,onIonFocus:t[2]||(t[2]=function(t){return e.model.error=""}),onIonBlur:e.validate,min:e.min,max:e.max},null,8,["class","modelValue","placeholder","disabled","onIonBlur","min","max"]),e.model.error?(Object(r["openBlock"])(),Object(r["createBlock"])(l,{key:1,color:"danger"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.model.error),1)]})),_:1})):Object(r["createCommentVNode"])("",!0)],64)}var o=n("1da1"),c=(n("96cf"),n("a9e3"),n("d3b7"),n("25f0"),n("8a30")),u=Object(r["defineComponent"])({name:"NumberInput",props:{modelValue:{type:Object,default:function(){return{}}},form:{type:Object,default:function(){return{}}},min:{type:Number,default:null},max:{type:Number,default:null}},components:{IonLabel:c["x"],IonInput:c["v"],IonNote:c["E"]},emits:["update:modelValue"],setup:function(e,t){var n=t.emit,a=Object(r["computed"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}}),c=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.value.required||a.value.value){t.next=2;break}return t.abrupt("return",a.value.error="This field is required");case 2:if(!a.value.validation){t.next=8;break}return t.next=5,a.value.validation({label:a.value.value,value:a.value.value},e.form);case 5:if(n=t.sent,!n||!n.length){t.next=8;break}return t.abrupt("return",a.value.error+=n.toString());case 8:return t.abrupt("return",a.value.error="");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{validate:c,model:a}}}),i=n("6b0d"),l=n.n(i);const s=l()(u,[["render",a]]);t["a"]=s}}]);
//# sourceMappingURL=chunk-14c7bf0c.18e513b0.js.map